(function(e,t){if(typeof define==="function"&&define.amd){define("bc",[],function(){var i=t.apply(this,arguments);e.videojs.log.warn("DEPRECATION: Using the default named RequireJS module in the Brightcove Player is deprecated. See: https://support.brightcove.com/requirejs-and-brightcove-player#Future_implementation");return i})}else if(typeof exports==="object"){module.exports=t()}else{e.bc=t(e)}})(this,function(e){var t='@charset "UTF-8";.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.vjs-modal-dialog .vjs-modal-dialog-content{position:absolute;top:0;left:0;width:100%;height:100%}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.vjs-button>.vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder,.vjs-icon-play{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-play:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder,.vjs-icon-pause{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before,.vjs-icon-pause:before{content:"\\f103"}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder,.vjs-icon-volume-mute{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before,.vjs-icon-volume-mute:before{content:"\\f104"}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder,.vjs-icon-volume-low{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before,.vjs-icon-volume-low:before{content:"\\f105"}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder,.vjs-icon-volume-mid{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before,.vjs-icon-volume-mid:before{content:"\\f106"}.video-js .vjs-mute-control .vjs-icon-placeholder,.vjs-icon-volume-high{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control .vjs-icon-placeholder:before,.vjs-icon-volume-high:before{content:"\\f107"}.video-js .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-enter:before{content:"\\f108"}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-exit:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-subtitles{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-subtitles:before{content:"\\f10c"}.video-js .vjs-captions-button .vjs-icon-placeholder,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-captions{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-captions-button .vjs-icon-placeholder:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-captions:before{content:"\\f10d"}.video-js .vjs-chapters-button .vjs-icon-placeholder,.vjs-icon-chapters{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-chapters-button .vjs-icon-placeholder:before,.vjs-icon-chapters:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.video-js .vjs-play-progress,.video-js .vjs-volume-level,.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-progress:before,.video-js .vjs-volume-level:before,.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder,.vjs-icon-cancel{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before,.vjs-icon-cancel:before{content:"\\f115"}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder,.vjs-icon-replay{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before,.vjs-icon-replay:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.video-js .vjs-descriptions-button .vjs-icon-placeholder,.vjs-icon-audio-description{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-descriptions-button .vjs-icon-placeholder:before,.vjs-icon-audio-description:before{content:"\\f11d"}.video-js .vjs-audio-button .vjs-icon-placeholder,.vjs-icon-audio{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-audio-button .vjs-icon-placeholder:before,.vjs-icon-audio:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-enter:before{content:"\\f121"}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-exit:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:0}.video-js *,.video-js :after,.video-js :before{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-fluid{width:100%;max-width:100%;height:0}.video-js.vjs-16-9{padding-top:56.25%}.video-js.vjs-4-3{padding-top:75%}.video-js.vjs-fill{width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1;visibility:visible}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:rgba(43,51,63,.7);border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js .vjs-big-play-button:focus,.video-js:hover .vjs-big-play-button{border-color:#fff;background-color:#73859f;background-color:rgba(115,133,159,.5);transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-error .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:0 0;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.js-focus-visible .vjs-menu li.vjs-menu-item:hover,.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:rgba(115,133,159,.5)}.js-focus-visible .vjs-menu li.vjs-selected:hover,.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em 0;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0;margin-bottom:1.5em;border-top-color:rgba(43,51,63,.7)}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:rgba(43,51,63,.7);position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-menu-button-popup .vjs-menu.vjs-lock-showing,.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline:hover,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline:hover .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:rgba(43,51,63,.7)}.vjs-has-started .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-error .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar{display:none!important}.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.video-js .vjs-control:focus,.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before{text-shadow:0 0 1em #fff}.video-js .vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div,.video-js .vjs-progress-holder .vjs-play-progress{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:rgba(255,255,255,.8);border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:rgba(0,0,0,.8)}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em 0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#73859f;background-color:rgba(115,133,159,.5)}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0 0 1em #fff;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:rgba(43,51,63,.7)}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster{display:block}.vjs-using-native-controls .vjs-poster{display:none}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-liveui .vjs-live-control,.video-js:not(.vjs-live) .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control{display:none}.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time{display:none}.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.vjs-playback-rate .vjs-playback-rate-value,.vjs-playback-rate>.vjs-menu-button{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;-webkit-animation:vjs-spinner-show 0s linear .3s forwards;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:after,.vjs-loading-spinner:before{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before{-webkit-animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite;animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;-webkit-animation-delay:.44s;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@-webkit-keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{100%{transform:rotate(360deg)}}@-webkit-keyframes vjs-spinner-spin{100%{-webkit-transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}100%{border-top-color:#73859f}}@-webkit-keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}100%{border-top-color:#73859f}}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\uf10d";font-size:1.5em;line-height:inherit}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \uf11d";font-size:1.5em;line-height:inherit}.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-audio-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-captions-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-chapters-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-current-time,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-descriptions-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-duration,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-playback-rate,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-remaining-time,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-subtitles-button,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-time-divider,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-control,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-audio-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-captions-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-chapters-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-current-time,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-descriptions-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-duration,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-playback-rate,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-remaining-time,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-subtitles-button,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-time-divider,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-control,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-audio-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-captions-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-chapters-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-current-time,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-descriptions-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-duration,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-playback-rate,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-remaining-time,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-subtitles-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-time-divider,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-control{display:none}.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover{width:auto;width:initial}.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-subs-caps-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small:not(.vjs-live) .vjs-subs-caps-button,.video-js:not(.vjs-fullscreen).vjs-layout-x-small:not(.vjs-liveui) .vjs-subs-caps-button{display:none}.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-custom-control-spacer,.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui .vjs-custom-control-spacer{flex:auto;display:block}.video-js:not(.vjs-fullscreen).vjs-layout-tiny.vjs-no-flex .vjs-custom-control-spacer,.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui.vjs-no-flex .vjs-custom-control-spacer{width:auto}.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-progress-control,.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui .vjs-progress-control{display:none}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:rgba(43,51,63,.75);color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-controls,.vjs-text-track-settings .vjs-track-settings-font{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display:grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0 24px}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px 0}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px 0;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:active,.vjs-track-settings-controls button:focus{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:rgba(43,51,63,.75)}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js :focus:not(.focus-visible){outline:0;background:0 0}.video-js .vjs-menu :focus:not(:focus-visible),.video-js :focus:not(:focus-visible){outline:0;background:0 0}',i=".bc-player-keoPsmO0E_default *,.bc-player-keoPsmO0E_default :after,.bc-player-keoPsmO0E_default :before{box-sizing:inherit;font-size:inherit;color:inherit;line-height:inherit}.bc-player-keoPsmO0E_default{width:300px;height:150px;font-size:14px;overflow:hidden}.bc-player-keoPsmO0E_default.vjs-fluid,.bc-player-keoPsmO0E_default.vjs-fluid.vjs-16-9{padding-top:56.25%}.bc-player-keoPsmO0E_default.vjs-fluid.vjs-4-3{padding-top:75%}.bc-player-keoPsmO0E_default.vjs-fill{width:100%;height:100%}.bc-iframe,.bc-iframe body,.bc-player-keoPsmO0E_default,.bc-player-keoPsmO0E_default .vjs-poster{background-color:#151B17}.bc-iframe,.bc-iframe .bc-player-keoPsmO0E_default,.bc-iframe body{margin:0;width:100%;height:100%;overflow:hidden}.bc-player-keoPsmO0E_default.vjs-fullscreen,.bc-player-keoPsmO0E_default.vjs-fullscreen .vjs-tech{width:100%!important;height:100%!important}.bc-player-keoPsmO0E_default .vjs-track-setting select{color:#000;background-color:#fff}.bc-player-keoPsmO0E_default .vjs-audio-button .vjs-menu-item,.bc-player-keoPsmO0E_default .vjs-chapters-button .vjs-menu-item,.bc-player-keoPsmO0E_default .vjs-descriptions-button .vjs-menu-item,.bc-player-keoPsmO0E_default .vjs-subs-caps-button .vjs-menu-item{text-transform:none}.bc-player-keoPsmO0E_default.vjs-waiting-for-autoplay .vjs-big-play-button{opacity:0}.bc-player-keoPsmO0E_default .vjs-progress-control .vjs-mouse-display{z-index:2}/*! @name @brightcove/player-core @version 0.21.0 @license UNLICENSED */.vjs-modal-dialog.vjs-player-info-modal{background:rgba(0,0,0,.9);font-size:10px}.vjs-modal-dialog.vjs-player-info-modal .vjs-modal-dialog-content{overflow:auto}.vjs-modal-dialog.vjs-player-info-modal .vjs-pi-section{float:left;width:49%}.vjs-modal-dialog.vjs-player-info-modal .vjs-pi-section:nth-child(2n+1){float:right}.vjs-modal-dialog.vjs-player-info-modal .vjs-pi-section.vjs-pi-section--source{float:none;clear:both;width:auto}.vjs-modal-dialog.vjs-player-info-modal .vjs-pi-section.vjs-pi-section--source td:first-child{min-width:150px}.vjs-modal-dialog.vjs-player-info-modal table{border-collapse:collapse;margin-bottom:1em;width:100%}.vjs-modal-dialog.vjs-player-info-modal th{font-weight:400;text-align:left}.vjs-modal-dialog.vjs-player-info-modal td{border-bottom:1px solid rgba(255,255,255,.2);opacity:.5}.vjs-modal-dialog.vjs-player-info-modal tr:last-child td{border-bottom:0}.vjs-modal-dialog.vjs-player-info-modal tr:hover td{opacity:1}.vjs-error-display{color:#fff;display:none;font-family:Helvetica,Arial,sans serif;font-size:16px;line-height:1.428}.vjs-error .vjs-error-display{display:block;position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5)}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:14px}.vjs-errors-dialog{text-align:left;border:1px #999 solid;overflow:hidden;position:absolute;top:2%;bottom:2%;left:5%;right:5%;padding-left:1%;padding-right:1%;background:rgba(24,24,24,.8);-ms-filter:\"progid:DXImageTransform.Microsoft.gradient(startColorstr=#CC000000, endColorstr=#CC000000)\"}.vjs-errors-details{margin-top:15px}.vjs-errors-message{border:1px #999 solid;background-color:#2c2c2c;overflow:auto;margin-top:15px;padding:15px}.vjs-errors-ok-button-container{display:block;position:absolute;bottom:15px;left:15px;right:15px;text-align:center}.vjs-errors-ok-button{display:block;margin:0 auto;width:80px;height:36px;background-color:#000;border:1px #999 solid;border-radius:5px;color:#999;font-size:14px;cursor:pointer}.vjs-errors-ok-button:hover{border:1px #FFF solid;color:#CCC}.vjs-errors-content-container{overflow:auto;position:absolute;padding-bottom:15px;top:0;left:15px;right:15px;bottom:61px}.vjs-errors-headline{font-size:14px;font-weight:700;padding-right:3em}.vjs-errors-dialog .vjs-control.vjs-close-button{width:3em;height:3em;top:0}.vjs-errors-flashmessage{float:right;font-size:9px;font-style:italic}.vjs-xs.vjs-error-display{font-size:14px;background-color:#000}.vjs-xs.vjs-error-display .vjs-errors-details,.vjs-xs.vjs-error-display .vjs-errors-message{display:none}.vjs-xs .vjs-errors-content-container{top:0}.vjs-xs .vjs-errors-headline{font-size:16px;font-weight:700}.vjs-xs .vjs-errors-dialog{border:none;top:0;bottom:0;left:0;right:0}.vjs-xs.vjs-errors-flashmessage{display:none}@media (max-width:600px),(max-height:250px){.vjs-error-display{font-size:14px;background-color:#000}.vjs-error-display .vjs-errors-details,.vjs-error-display .vjs-errors-message{display:none}.vjs-error-display .vjs-errors-content-container{top:15px}.vjs-error-display .vjs-errors-headline{font-size:16px;font-weight:700}.vjs-error-display .vjs-errors-dialog{border:none;top:0;bottom:0;left:0;right:0}.vjs-errors-flashmessage{display:none}}.vjs-errors-ref-id{color:rgba(255,255,255,.5);font-size:.75em;margin:.5em 0 0}.bc-player-keoPsmO0E_default .vjs-control-bar{background-color:rgba(0,0,0,.45);color:#fff}.bc-player-keoPsmO0E_default .vjs-control{color:inherit}.bc-player-keoPsmO0E_default .vjs-mouse-display:after,.bc-player-keoPsmO0E_default .vjs-play-progress:after{border-radius:0}.bc-player-keoPsmO0E_default .vjs-menu-button-inline:hover,.bc-player-keoPsmO0E_default.vjs-no-flex .vjs-menu-button-inline{width:8.35em}.bc-player-keoPsmO0E_default .vjs-control:focus:before,.bc-player-keoPsmO0E_default .vjs-control:hover:before{text-shadow:0 0 1em #fff,0 0 1em #fff,0 0 1em #fff}.bc-player-keoPsmO0E_default .vjs-spacer{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-box-flex:1 1 auto;-moz-box-flex:1 1 auto;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto}.bc-player-keoPsmO0E_default .vjs-time-control{display:-webkit-box;display:-moz-box;display:-ms-flexbox;display:-webkit-flex;display:flex;-webkit-box-flex:0 1 auto;-moz-box-flex:0 1 auto;-webkit-flex:0 1 auto;-ms-flex:0 1 auto;flex:0 1 auto;width:auto}.bc-player-keoPsmO0E_default .vjs-time-control.vjs-time-divider{width:14px}.bc-player-keoPsmO0E_default .vjs-time-control.vjs-time-divider div{width:100%;text-align:center}.bc-player-keoPsmO0E_default .vjs-time-control.vjs-current-time{margin-left:1em}.bc-player-keoPsmO0E_default .vjs-time-control .vjs-current-time-display,.bc-player-keoPsmO0E_default .vjs-time-control .vjs-duration-display{width:100%}.bc-player-keoPsmO0E_default .vjs-time-control .vjs-current-time-display{text-align:right}.bc-player-keoPsmO0E_default .vjs-time-control .vjs-duration-display{text-align:left}.bc-player-keoPsmO0E_default .vjs-remaining-time{display:none}.bc-player-keoPsmO0E_default.vjs-no-flex .vjs-time-control.vjs-remaining-time{display:none}.bc-player-keoPsmO0E_default.vjs-no-flex .vjs-time-control{display:table-cell;width:4em}.bc-player-keoPsmO0E_default .vjs-play-progress,.bc-player-keoPsmO0E_default .vjs-volume-level{background-color:#d52484}.bc-player-keoPsmO0E_default.vjs-ad-playing .vjs-play-progress,.bc-player-keoPsmO0E_default.vjs-ad-playing .vjs-volume-level{background-color:#ffe400}.bc-player-keoPsmO0E_default .vjs-play-progress:before,.bc-player-keoPsmO0E_default .vjs-volume-level:before{display:none}.bc-player-keoPsmO0E_default .vjs-volume-level:after{display:none}.bc-player-keoPsmO0E_default .vjs-progress-control{position:absolute;left:0;right:0;width:100%;height:1.5em;top:-1.5em}.bc-player-keoPsmO0E_default .vjs-progress-control .vjs-load-progress,.bc-player-keoPsmO0E_default .vjs-progress-control .vjs-play-progress,.bc-player-keoPsmO0E_default .vjs-progress-control .vjs-progress-holder{height:100%}.bc-player-keoPsmO0E_default .vjs-progress-control .vjs-progress-holder{margin:0}.bc-player-keoPsmO0E_default .vjs-progress-control:hover{height:1.5em;top:-1.5em}.bc-player-keoPsmO0E_default .vjs-control-bar:not(.vjs-focus-within){-webkit-transition:-webkit-transform .1s ease 0s;-moz-transition:-moz-transform .1s ease 0s;-ms-transition:-ms-transform .1s ease 0s;-o-transition:-o-transform .1s ease 0s;transition:transform .1s ease 0s}.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-active .vjs-control-bar:not(.vjs-focus-within):not(.vjs-control-bar-visible),.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-inactive .vjs-control-bar:not(.vjs-focus-within):not(.vjs-control-bar-visible),.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-active .vjs-control-bar:not(.vjs-focus-within):not(.vjs-control-bar-visible),.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-control-bar:not(.vjs-focus-within):not(.vjs-control-bar-visible),.bc-player-keoPsmO0E_default.vjs-has-started.vjs-paused.vjs-ad-playing.vjs-user-inactive .vjs-control-bar,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-control-bar:not(.vjs-focus-within):not(.vjs-control-bar-visible){visibility:visible;opacity:1;-webkit-backface-visibility:hidden;-webkit-transform:translateY(3em);-moz-transform:translateY(3em);-ms-transform:translateY(3em);-o-transform:translateY(3em);transform:translateY(3em);-webkit-transition:-webkit-transform 1s ease 0s;-moz-transition:-moz-transform 1s ease 0s;-ms-transition:-ms-transform 1s ease 0s;-o-transition:-o-transform 1s ease 0s;transition:transform 1s ease 0s}.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-active .vjs-progress-control,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-inactive .vjs-progress-control,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-active .vjs-progress-control,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-progress-control,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-paused.vjs-ad-playing.vjs-user-inactive .vjs-progress-control,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-progress-control{height:.3em;top:-.3em;pointer-events:none;-webkit-transition:height 1s,top 1s;-moz-transition:height 1s,top 1s;-ms-transition:height 1s,top 1s;-o-transition:height 1s,top 1s;transition:height 1s,top 1s}.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-active.vjs-fullscreen .vjs-progress-control,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-inactive.vjs-fullscreen .vjs-progress-control,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-active.vjs-fullscreen .vjs-progress-control,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-inactive.vjs-fullscreen .vjs-progress-control,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-playing.vjs-user-inactive.vjs-fullscreen .vjs-progress-control{opacity:0;-webkit-transition:opacity 1s;-moz-transition:opacity 1s;-ms-transition:opacity 1s;-o-transition:opacity 1s;transition:opacity 1s}.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-active .vjs-menu,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-active .vjs-volume-vertical,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-inactive .vjs-menu,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-inactive .vjs-volume-vertical,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-active .vjs-menu,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-active .vjs-volume-vertical,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-menu,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-volume-vertical,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-paused.vjs-ad-playing.vjs-user-inactive .vjs-menu,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-paused.vjs-ad-playing.vjs-user-inactive .vjs-volume-vertical,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-menu,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-volume-vertical{opacity:0;-webkit-transition:opacity 1s;-moz-transition:opacity 1s;-ms-transition:opacity 1s;-o-transition:opacity 1s;transition:opacity 1s}.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-active .vjs-control-bar-visible .vjs-menu,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-paused.vjs-user-inactive .vjs-control-bar-visible .vjs-menu,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-active .vjs-control-bar-visible .vjs-menu,.bc-player-keoPsmO0E_default.not-hover.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-control-bar-visible .vjs-menu,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-paused.vjs-ad-playing.vjs-user-inactive .vjs-control-bar-visible .vjs-menu-item,.bc-player-keoPsmO0E_default.vjs-has-started.vjs-playing.vjs-user-inactive .vjs-control-bar-visible .vjs-menu{opacity:1}.bc-player-keoPsmO0E_default.vjs-live .vjs-live-control{margin-left:1em}.bc-player-keoPsmO0E_default.vjs-live .vjs-time-control.vjs-current-time,.bc-player-keoPsmO0E_default.vjs-live .vjs-time-control.vjs-duration,.bc-player-keoPsmO0E_default.vjs-live .vjs-time-control.vjs-time-divider{display:none}.bc-player-keoPsmO0E_default .vjs-big-play-button{top:50%;left:50%;margin-left:-1em;margin-top:-1em;width:2em;height:2em;line-height:2em;border:none;border-radius:50%;font-size:3.5em;background-color:rgba(0,0,0,.45);color:#fff;-webkit-transition:border-color .4s,outline .4s,background-color .4s;-moz-transition:border-color .4s,outline .4s,background-color .4s;-ms-transition:border-color .4s,outline .4s,background-color .4s;-o-transition:border-color .4s,outline .4s,background-color .4s;transition:border-color .4s,outline .4s,background-color .4s}.bc-player-keoPsmO0E_default .vjs-big-play-button:active,.bc-player-keoPsmO0E_default .vjs-big-play-button:focus,.bc-player-keoPsmO0E_default:active .vjs-big-play-button,.bc-player-keoPsmO0E_default:hover .vjs-big-play-button{background-color:#d52484}.bc-player-keoPsmO0E_default .vjs-menu-button-popup .vjs-menu{left:-3em}.bc-player-keoPsmO0E_default .vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:transparent;width:12em;left:-1.5em;padding-bottom:.5em}.bc-player-keoPsmO0E_default .vjs-menu-button-popup .vjs-menu .vjs-menu-item,.bc-player-keoPsmO0E_default .vjs-menu-button-popup .vjs-menu .vjs-menu-title{background-color:#151B17;margin:.3em 0;padding:.5em;border-radius:.3em}.bc-player-keoPsmO0E_default .vjs-menu-button-popup .vjs-menu .vjs-menu-item.vjs-selected{background-color:#d52484}.bc-player-keoPsmO0E_default .vjs-menu-button-popup .vjs-menu .vjs-menu-item:active,.bc-player-keoPsmO0E_default .vjs-menu-button-popup .vjs-menu .vjs-menu-item:focus,.bc-player-keoPsmO0E_default .vjs-menu-button-popup .vjs-menu .vjs-menu-item:hover{text-shadow:0 0 1em #fff,0 0 1em #fff,0 0 1em #fff;color:#fff}.bc-player-keoPsmO0E_default.vjs-ad-playing .vjs-mouse-display,.bc-player-keoPsmO0E_default.vjs-ad-playing .vjs-mouse-display:after{display:none}.bc-player-keoPsmO0E_default.vjs-ad-playing.vjs-ad-playing .vjs-progress-control:after{pointer-events:auto;width:100%;height:100%;position:absolute;left:0;bottom:0;content:\" \";user-select:none;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none}.bc-player-keoPsmO0E_default.vjs-ad-playing .vjs-picture-in-picture-control{display:none}.bc-player-keoPsmO0E_default.vjs-no-flex .vjs-spacer{display:table-cell}.bc-player-keoPsmO0E_default.vjs-no-flex .vjs-time-control{display:table-cell;width:4em}.bc-player-keoPsmO0E_default.vjs-no-flex .vjs-remaining-time{display:none}.vjs-mouse.bc-player-keoPsmO0E_default .vjs-control-bar{font-size:10px}.vjs-mouse.bc-player-keoPsmO0E_default .vjs-progress-control{height:.5em;top:-.5em}.vjs-mouse.bc-player-keoPsmO0E_default .vjs-progress-control:hover{height:1.5em;top:-1.5em}.bc-player-keoPsmO0E_default select{width:inherit}.bc-player-keoPsmO0E_default.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-progress-control,.bc-player-keoPsmO0E_default.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui .vjs-progress-control{display:block}.bc-player-keoPsmO0E_default .vjs-big-play-button,.bc-player-keoPsmO0E_default .vjs-control-bar{background-color:rgba(0,0,0,.18)}.bc-iframe .vjs-playlist-sidebar .vjs-playlist-show-hide button:hover,.bc-player-keoPsmO0E_default .vjs-big-play-button:active,.bc-player-keoPsmO0E_default .vjs-big-play-button:focus,.bc-player-keoPsmO0E_default .vjs-menu-button-popup .vjs-menu .vjs-menu-item.vjs-selected,.bc-player-keoPsmO0E_default .vjs-play-progress,.bc-player-keoPsmO0E_default .vjs-volume-level,.bc-player-keoPsmO0E_default:active .vjs-big-play-button,.bc-player-keoPsmO0E_default:hover .vjs-big-play-button{background-color:#d1021a}.video-js.vjs-quality-menu{display:block}.video-js.vjs-quality-menu .vjs-quality-menu-button:before{font-family:VideoJS;font-weight:400;font-style:normal;content:\"\\f110\"}.video-js.vjs-quality-menu.vjs-v6 .vjs-quality-menu-button,.video-js.vjs-quality-menu.vjs-v7 .vjs-quality-menu-button{position:initial}.video-js.vjs-quality-menu.vjs-v6 .vjs-quality-menu-button:before,.video-js.vjs-quality-menu.vjs-v7 .vjs-quality-menu-button:before{content:none}.video-js.vjs-quality-menu.vjs-v6 .vjs-quality-menu-button .vjs-icon-placeholder,.video-js.vjs-quality-menu.vjs-v7 .vjs-quality-menu-button .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-quality-menu.vjs-v6 .vjs-quality-menu-button .vjs-icon-placeholder:before,.video-js.vjs-quality-menu.vjs-v7 .vjs-quality-menu-button .vjs-icon-placeholder:before{content:\"\\f110\"}.video-js.vjs-quality-menu .vjs-quality-menu-button{position:relative}.video-js.vjs-quality-menu .vjs-quality-menu-button li{text-transform:none}.video-js.vjs-quality-menu .vjs-quality-menu-button.vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em;width:10em;left:0}.video-js.vjs-quality-menu .vjs-menu-item .vjs-control-text{position:absolute}.video-js.vjs-quality-menu .vjs-quality-menu-wrapper{position:relative}.video-js.vjs-quality-menu .vjs-quality-menu-wrapper li{text-transform:none}.video-js.vjs-quality-menu .vjs-quality-menu-wrapper.vjs-menu-wrapper-popup .vjs-menu .vjs-menu-content{max-height:25em;width:10em;left:0}.video-js.vjs-quality-menu .vjs-quality-menu-item-sub-label{font-size:75%;font-weight:700;position:absolute;right:0;text-align:center;width:4em}.video-js.vjs-quality-menu .vjs-quality-menu-button-use-resolution .vjs-quality-menu-item-sub-label{position:absolute;right:0;text-align:center;width:4em}.video-js.vjs-quality-menu .vjs-quality-menu-button-4K-flag:after,.video-js.vjs-quality-menu .vjs-quality-menu-button-HD-flag:after{background-color:#2B333F;color:inherit;content:\"\";font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;font-size:.7em;font-weight:300;height:2.2em;line-height:2.2em;padding:0;position:absolute;right:0;text-align:center;top:.5em;width:2.2em;border-radius:2em;letter-spacing:.1em}.video-js.vjs-quality-menu .vjs-quality-menu-button-HD-flag:after{content:\"HD\"}.video-js.vjs-quality-menu .vjs-quality-menu-button-4K-flag:after{content:\"4K\"}.video-js.vjs-quality-menu .vjs-quality-menu-button-waiting:before{-webkit-animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite;animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite}.video-js .vjs-big-vr-play-button{width:100px;height:100px;background-image:url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='360' height='360' viewBox='0 0 360 360'%3E%3Cpath fill='%23FFF' d='M334.883 275.78l-6.374-36.198-6.375-36.2-28.16 23.62-28.164 23.62 25.837 9.41C266.247 296.544 224 320.5 176.25 320.5c-77.47 0-140.5-63.03-140.5-140.5 0-77.472 63.03-140.5 140.5-140.5 53.428 0 99.98 29.978 123.733 73.993l13.304-6.923C287.025 57.76 235.45 24.5 176.25 24.5c-85.743 0-155.5 69.757-155.5 155.5 0 85.742 69.757 155.5 155.5 155.5 54.253 0 102.09-27.94 129.922-70.177l28.71 10.457z'/%3E%3Cpath fill='%23FFF' d='M314.492 175.167c-12.98 0-23.54-10.56-23.54-23.54s10.56-23.54 23.54-23.54c12.98 0 23.54 10.56 23.54 23.54s-10.56 23.54-23.54 23.54zm0-38.08c-8.018 0-14.54 6.522-14.54 14.54s6.522 14.54 14.54 14.54c8.017 0 14.54-6.522 14.54-14.54s-6.523-14.54-14.54-14.54z'/%3E%3Cg fill='%23FFF'%3E%3Cpath d='M88.76 173.102h9.395c4.74-.042 8.495-1.27 11.268-3.682 2.77-2.412 4.157-5.903 4.157-10.474 0-4.4-1.153-7.817-3.46-10.25-2.307-2.434-5.83-3.65-10.568-3.65-4.147 0-7.554 1.195-10.22 3.585-2.666 2.392-4 5.514-4 9.364H69.908c0-4.74 1.26-9.055 3.776-12.95 2.518-3.892 6.03-6.928 10.537-9.108 4.508-2.18 9.554-3.27 15.14-3.27 9.225 0 16.472 2.318 21.74 6.952 5.27 4.634 7.903 11.077 7.903 19.33 0 4.147-1.323 8.05-3.967 11.71-2.646 3.66-6.062 6.422-10.252 8.284 5.078 1.736 8.94 4.465 11.584 8.19s3.968 8.166 3.968 13.33c0 8.294-2.847 14.895-8.538 19.804s-13.17 7.363-22.438 7.363c-8.887 0-16.166-2.37-21.836-7.11-5.67-4.74-8.506-11.045-8.506-18.916h15.425c0 4.062 1.365 7.363 4.094 9.902 2.73 2.54 6.4 3.81 11.014 3.81 4.782 0 8.55-1.27 11.3-3.81s4.126-6.22 4.126-11.045c0-4.865-1.44-8.61-4.316-11.235-2.878-2.623-7.152-3.936-12.822-3.936H88.76V173.1zM187.598 133.493v12.76h-1.904c-8.633.126-15.53 2.497-20.693 7.108-5.162 4.614-8.23 11.152-9.203 19.615 4.95-5.205 11.277-7.808 18.98-7.808 8.166 0 14.608 2.878 19.328 8.633 4.718 5.755 7.077 13.182 7.077 22.28 0 9.395-2.76 17.002-8.284 22.82-5.52 5.818-12.77 8.73-21.74 8.73-9.226 0-16.705-3.407-22.44-10.222-5.733-6.812-8.6-15.742-8.6-26.787v-5.267c0-16.208 3.945-28.903 11.84-38.086 7.89-9.182 19.242-13.774 34.054-13.774h1.586zM171.03 177.61c-3.386 0-6.485.95-9.3 2.855-2.814 1.904-4.877 4.443-6.188 7.617v4.697c0 6.854 1.438 12.304 4.316 16.345 2.877 4.04 6.602 6.062 11.172 6.062s8.188-1.715 10.854-5.143 4-7.934 4-13.52-1.355-10.135-4.063-13.648c-2.708-3.51-6.304-5.267-10.79-5.267zM271.136 187.447c0 13.29-2.486 23.307-7.46 30.057s-12.535 10.125-22.69 10.125c-9.988 0-17.51-3.292-22.566-9.872-5.058-6.58-7.65-16.323-7.776-29.23V172.53c0-13.287 2.485-23.252 7.458-29.896 4.973-6.643 12.558-9.966 22.757-9.966 10.112 0 17.655 3.237 22.63 9.712 4.97 6.475 7.52 16.166 7.647 29.072v15.995zm-15.425-17.265c0-8.674-1.185-15.033-3.554-19.075-2.37-4.04-6.137-6.062-11.3-6.062-5.035 0-8.738 1.915-11.107 5.745-2.37 3.83-3.62 9.807-3.746 17.932v20.948c0 8.633 1.206 15.064 3.618 19.297s6.2 6.348 11.362 6.348c4.95 0 8.61-1.957 10.98-5.87 2.37-3.915 3.62-10.04 3.746-18.378v-20.885z'/%3E%3C/g%3E%3C/svg%3E\");background-size:contain;background-color:rgba(0,0,0,.5)}.video-js .vjs-big-vr-play-button .vjs-icon-placeholder{display:none}:hover.video-js .vjs-big-vr-play-button{-webkit-transition:border-color .4s,outline .4s,background-color .4s;-moz-transition:border-color .4s,outline .4s,background-color .4s;-ms-transition:border-color .4s,outline .4s,background-color .4s;-o-transition:border-color .4s,outline .4s,background-color .4s;transition:border-color .4s,outline .4s,background-color .4s}.video-js .vjs-big-vr-play-button::before{content:''}.video-js canvas{cursor:move}.video-js .vjs-button-vr .vjs-icon-placeholder{height:30px;width:30px;display:inline-block;background:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNHB4IiBoZWlnaHQ9IjI0cHgiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI0ZGRkZGRiI+CiAgICA8cGF0aCBkPSJNMjAuNzQgNkgzLjIxQzIuNTUgNiAyIDYuNTcgMiA3LjI4djEwLjQ0YzAgLjcuNTUgMS4yOCAxLjIzIDEuMjhoNC43OWMuNTIgMCAuOTYtLjMzIDEuMTQtLjc5bDEuNC0zLjQ4Yy4yMy0uNTkuNzktMS4wMSAxLjQ0LTEuMDFzMS4yMS40MiAxLjQ1IDEuMDFsMS4zOSAzLjQ4Yy4xOS40Ni42My43OSAxLjExLjc5aDQuNzljLjcxIDAgMS4yNi0uNTcgMS4yNi0xLjI4VjcuMjhjMC0uNy0uNTUtMS4yOC0xLjI2LTEuMjh6TTcuNSAxNC42MmMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTMgMS4xOCAwIDIuMTIuOTYgMi4xMiAyLjEzcy0uOTUgMi4xMi0yLjEyIDIuMTJ6bTkgMGMtMS4xNyAwLTIuMTMtLjk1LTIuMTMtMi4xMiAwLTEuMTcuOTYtMi4xMyAyLjEzLTIuMTNzMi4xMi45NiAyLjEyIDIuMTMtLjk1IDIuMTItMi4xMiAyLjEyeiIvPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ii8+Cjwvc3ZnPgo=) no-repeat left center}.video-js .vjs-custom-endscreen-overlay{text-align:center}.video-js .vjs-endscreen-overlay-content{background-color:#000;color:#fff;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;height:auto;position:static}.video-js .vjs-endscreen-overlay-content a{color:#fff}.video-js .vjs-endscreen-overlay-content a:hover{text-decoration:none}.video-js .vjs-endscreen-overlay-buttons{height:4em}.video-js .vjs-endscreen-overlay-buttons .vjs-control{cursor:pointer;display:inline-block;font-size:4em;height:1em;margin:0 .2em;width:1em}.video-js .vjs-endscreen-overlay-buttons .vjs-control:before{font-size:inherit;line-height:inherit}.video-js .vjs-endscreen-overlay-buttons .vjs-control:focus:before,.video-js .vjs-endscreen-overlay-buttons .vjs-control:hover:before{text-shadow:1px -1px 20px #fff,-1px 1px 20px #fff}",r="bc-style-keoPsmO0E-default",n,a="bc-style-vjs",s,o,l,u,c=document.querySelector("head"),d=c.firstChild,h=function(e,t){var i=document.createElement("style");i.type="text/css";i.appendChild(document.createTextNode(e));if(t){c.insertBefore(i,t)}else{c.appendChild(i)}return i};o=function(e,t){var i=undefined;var r=e.define;var n=e.videojs;e.VIDEOJS_NO_DYNAMIC_STYLE=true;var a=function(i,r){"use strict";i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i["default"]:i;r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r["default"]:r;var n="0.21.0";var a=typeof globalThis!=="undefined"?globalThis:typeof e!=="undefined"?e:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function s(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function o(e,t){return t={exports:{}},e(t,t.exports),t.exports}var l=o(function(e){function t(){e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i){if(Object.prototype.hasOwnProperty.call(i,r)){e[r]=i[r]}}}return e};return t.apply(this,arguments)}e.exports=t});var u=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"});var c=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});function d(e){return Object.assign({muted:false,timeout:250,inline:false},e)}function h(e,t){var i=e.muted,r=e.timeout,n=e.inline;var a=t(),s=a.element,o=a.source;var l=void 0;var u=void 0;var c=void 0;s.muted=i;if(i===true){s.setAttribute("muted","muted")}if(n===true){s.setAttribute("playsinline","playsinline")}s.src=o;return new Promise(function(e){l=s.play();u=setTimeout(function(){c(false,new Error("Timeout "+r+" ms has been reached"))},r);c=function t(i){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;clearTimeout(u);e({result:i,error:r})};if(l!==undefined){l.then(function(){return c(true)}).catch(function(e){return c(false,e)})}else{c(true)}})}function f(e){e=d(e);return h(e,function(){return{element:t.createElement("video"),source:URL.createObjectURL(c)}})}function p(e){e=d(e);return h(e,function(){return{element:t.createElement("audio"),source:URL.createObjectURL(u)}})}var m={audio:p,video:f};var v=o(function(i,r){(function(e,t){i.exports=t()})(a,function(){function i(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function r(e){return typeof e==="function"}var n=void 0;if(Array.isArray){n=Array.isArray}else{n=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}var o=n;var l=0;var u=void 0;var c=void 0;var d=function e(t,i){w[l]=t;w[l+1]=i;l+=2;if(l===2){if(c){c(E)}else{S()}}};function h(e){c=e}function f(e){d=e}var p=typeof e!=="undefined"?e:undefined;var m=p||{};var v=m.MutationObserver||m.WebKitMutationObserver;var g=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var y=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function _(){return function(){return process.nextTick(E)}}function b(){if(typeof u!=="undefined"){return function(){u(E)}}return A()}function M(){var e=0;var i=new v(E);var r=t.createTextNode("");i.observe(r,{characterData:true});return function(){r.data=e=++e%2}}function T(){var e=new MessageChannel;e.port1.onmessage=E;return function(){return e.port2.postMessage(0)}}function A(){var e=setTimeout;return function(){return e(E,1)}}var w=new Array(1e3);function E(){for(var e=0;e<l;e+=2){var t=w[e];var i=w[e+1];t(i);w[e]=undefined;w[e+1]=undefined}l=0}function x(){try{var e=Function("return this")().require("vertx");u=e.runOnLoop||e.runOnContext;return b()}catch(e){return A()}}var S=void 0;if(g){S=_()}else if(v){S=M()}else if(y){S=T()}else if(p===undefined&&typeof s==="function"){S=x()}else{S=A()}function D(e,t){var i=this;var r=new this.constructor(L);if(r[j]===undefined){K(r)}var n=i._state;if(n){var a=arguments[n-1];d(function(){return W(n,r,a,i._result)})}else{Q(i,r,e,t)}return r}function I(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t){return e}var i=new t(L);F(i,e);return i}var j=Math.random().toString(36).substring(2);function L(){}var N=void 0;var C=1;var O=2;function k(){return new TypeError("You cannot resolve a promise with itself")}function P(){return new TypeError("A promises callback cannot return that same promise.")}function R(e,t,i,r){try{e.call(t,i,r)}catch(e){return e}}function z(e,t,i){d(function(e){var r=false;var n=R(i,t,function(i){if(r){return}r=true;if(t!==i){F(e,i)}else{G(e,i)}},function(t){if(r){return}r=true;H(e,t)},"Settle: "+(e._label||" unknown promise"));if(!r&&n){r=true;H(e,n)}},e)}function U(e,t){if(t._state===C){G(e,t._result)}else if(t._state===O){H(e,t._result)}else{Q(t,undefined,function(t){return F(e,t)},function(t){return H(e,t)})}}function B(e,t,i){if(t.constructor===e.constructor&&i===D&&t.constructor.resolve===I){U(e,t)}else{if(i===undefined){G(e,t)}else if(r(i)){z(e,t,i)}else{G(e,t)}}}function F(e,t){if(e===t){H(e,k())}else if(i(t)){var r=void 0;try{r=t.then}catch(t){H(e,t);return}B(e,t,r)}else{G(e,t)}}function V(e){if(e._onerror){e._onerror(e._result)}Y(e)}function G(e,t){if(e._state!==N){return}e._result=t;e._state=C;if(e._subscribers.length!==0){d(Y,e)}}function H(e,t){if(e._state!==N){return}e._state=O;e._result=t;d(V,e)}function Q(e,t,i,r){var n=e._subscribers;var a=n.length;e._onerror=null;n[a]=t;n[a+C]=i;n[a+O]=r;if(a===0&&e._state){d(Y,e)}}function Y(e){var t=e._subscribers;var i=e._state;if(t.length===0){return}var r=void 0,n=void 0,a=e._result;for(var s=0;s<t.length;s+=3){r=t[s];n=t[s+i];if(r){W(i,r,n,a)}else{n(a)}}e._subscribers.length=0}function W(e,t,i,n){var a=r(i),s=void 0,o=void 0,l=true;if(a){try{s=i(n)}catch(e){l=false;o=e}if(t===s){H(t,P());return}}else{s=n}if(t._state!==N);else if(a&&l){F(t,s)}else if(l===false){H(t,o)}else if(e===C){G(t,s)}else if(e===O){H(t,s)}}function q(e,t){try{t(function t(i){F(e,i)},function t(i){H(e,i)})}catch(t){H(e,t)}}var X=0;function Z(){return X++}function K(e){e[j]=X++;e._state=undefined;e._result=undefined;e._subscribers=[]}function J(){return new Error("Array Methods must be provided an Array")}var $=function(){function e(e,t){this._instanceConstructor=e;this.promise=new e(L);if(!this.promise[j]){K(this.promise)}if(o(t)){this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){G(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(t);if(this._remaining===0){G(this.promise,this._result)}}}else{H(this.promise,J())}}e.prototype._enumerate=function e(t){for(var i=0;this._state===N&&i<t.length;i++){this._eachEntry(t[i],i)}};e.prototype._eachEntry=function e(t,i){var r=this._instanceConstructor;var n=r.resolve;if(n===I){var a=void 0;var s=void 0;var o=false;try{a=t.then}catch(e){o=true;s=e}if(a===D&&t._state!==N){this._settledAt(t._state,i,t._result)}else if(typeof a!=="function"){this._remaining--;this._result[i]=t}else if(r===ae){var l=new r(L);if(o){H(l,s)}else{B(l,t,a)}this._willSettleAt(l,i)}else{this._willSettleAt(new r(function(e){return e(t)}),i)}}else{this._willSettleAt(n(t),i)}};e.prototype._settledAt=function e(t,i,r){var n=this.promise;if(n._state===N){this._remaining--;if(t===O){H(n,r)}else{this._result[i]=r}}if(this._remaining===0){G(n,this._result)}};e.prototype._willSettleAt=function e(t,i){var r=this;Q(t,undefined,function(e){return r._settledAt(C,i,e)},function(e){return r._settledAt(O,i,e)})};return e}();function ee(e){return new $(this,e).promise}function te(e){var t=this;if(!o(e)){return new t(function(e,t){return t(new TypeError("You must pass an array to race."))})}else{return new t(function(i,r){var n=e.length;for(var a=0;a<n;a++){t.resolve(e[a]).then(i,r)}})}}function ie(e){var t=this;var i=new t(L);H(i,e);return i}function re(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ne(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var ae=function(){function e(t){this[j]=Z();this._result=this._state=undefined;this._subscribers=[];if(L!==t){typeof t!=="function"&&re();this instanceof e?q(this,t):ne()}}e.prototype.catch=function e(t){return this.then(null,t)};e.prototype.finally=function e(t){var i=this;var n=i.constructor;if(r(t)){return i.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})})}return i.then(t,t)};return e}();ae.prototype.then=D;ae.all=ee;ae.race=te;ae.resolve=I;ae.reject=ie;ae._setScheduler=h;ae._setAsap=f;ae._asap=d;function se(){var e=void 0;if(typeof a!=="undefined"){e=a}else if(typeof self!=="undefined"){e=self}else{try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if(i==="[object Promise]"&&!t.cast){return}}e.Promise=ae}ae.polyfill=se;ae.Promise=ae;return ae})});var g=r.performance;var y={};["memory","navigation","timing"].forEach(function(e){y[e]=g&&g[e]||{}});["clearMarks","clearMeasures","clearResourceTimings","getEntries","getEntriesByName","getEntriesByType","mark","measure","now","setResourceTimingBufferSize","toJSON"].forEach(function(e){y[e]=function(){if(g&&g[e]){return g[e].apply(g,arguments)}}});function _(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var b=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function M(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function T(e,t,i,r){t=t||"&";i=i||"=";if(e===null){e=undefined}if(typeof e==="object"){return A(w(e),function(r){var n=encodeURIComponent(M(r))+i;if(b(e[r])){return A(e[r],function(e){return n+encodeURIComponent(M(e))}).join(t)}else{return n+encodeURIComponent(M(e[r]))}}).join(t)}if(!r)return"";return encodeURIComponent(M(r))+i+encodeURIComponent(M(e))}function A(e,t){if(e.map)return e.map(t);var i=[];for(var r=0;r<e.length;r++){i.push(t(e[r],r))}return i}var w=Object.keys||function(e){var t=[];for(var i in e){if(Object.prototype.hasOwnProperty.call(e,i))t.push(i)}return t};function E(e,t,i,r){t=t||"&";i=i||"=";var n={};if(typeof e!=="string"||e.length===0){return n}var a=/\+/g;e=e.split(t);var s=1e3;if(r&&typeof r.maxKeys==="number"){s=r.maxKeys}var o=e.length;if(s>0&&o>s){o=s}for(var l=0;l<o;++l){var u=e[l].replace(a,"%20"),c=u.indexOf(i),d,h,f,p;if(c>=0){d=u.substr(0,c);h=u.substr(c+1)}else{d=u;h=""}f=decodeURIComponent(d);p=decodeURIComponent(h);if(!_(n,f)){n[f]=p}else if(b(n[f])){n[f].push(p)}else{n[f]=[n[f],p]}}return n}var x={encode:T,stringify:T,decode:E,parse:E};function S(e){if(e===void 0){e=r&&r.location||{}}return l({hash:x.parse((e.hash||"#").substr(1)),search:x.parse((e.search||"?").substr(1))},x)}var D={isArr:function e(t){return Array.isArray(t)},isFn:function e(t){return typeof t==="function"},isNil:function e(t){return t===null||t===undefined},isNum:function e(t){return typeof t==="number"&&t===t},isNonEmptyStr:function e(t){return typeof t==="string"&&/\S/.test(t)},isObj:function e(t){return Object.prototype.toString.call(t)==="[object Object]"}};var I={perf:y,Promise:v,qs:S,assign:function e(){return l.apply(void 0,arguments)},get:function e(t,i,r){var n=t;var a=i.split(".");if(!n){return r}for(var s=0;s<a.length;s++){var o=a[s];if(n[o]===undefined){return r}if(s+1<a.length){n=n[o]}else{return n[o]}}},withoutNilValues:function e(t){var i=t;if(D.isArr(t)){i=t.filter(function(e){return!D.isNil(e)}).map(I.withoutNilValues)}else if(D.isObj(t)){i={};Object.keys(t).forEach(function(e){if(!D.isNil(t[e])){i[e]=I.withoutNilValues(t[e])}})}return i},debounce:function e(t,i,n,a){if(a===void 0){a=r}var s;return function(){var e=this;var r=arguments;var o=function i(){s=null;o=null;if(!n){t.apply(e,r)}};if(!s&&n){t.apply(e,r)}a.clearTimeout(s);s=a.setTimeout(o,i)}},throttle:function e(t,i){var r=Date.now();return function(){var e=Date.now();if(e-r>=i){t.apply(void 0,arguments);r=e}}}};I.assign(I,D);I.VERSION="n/a";var j={};var L=[{inline:false,muted:false},{inline:true,muted:false},{inline:false,muted:true},{inline:true,muted:true}];function N(e){var t=e.filter(function(e){return e.passed})[0];if(!t){return{always:false,sometimes:false,never:true,inline:false,muted:false}}var i=t.inline,r=t.muted;var n=!i&&!r;return{always:n,sometimes:!n,never:false,inline:i,muted:r}}function C(e){var t;if(e.IE_VERSION||r.cast&&r.cast.receiver){t={always:true,sometimes:false,never:false,inline:false,muted:false}}if(e.ANDROID_VERSION||e.IS_IOS){t={always:false,sometimes:true,never:false,inline:false,muted:true};if(e.IS_IPHONE){t.inline=true}}if(t){return I.Promise.resolve(t)}}function O(e,t){if(e!=="video"&&e!=="audio"){throw new Error("invalid autoplay type: "+e)}if(j[e]){return j[e]}var i=C(t.browser);if(i){j[e]=i;return i}var r=L.map(function(t){return m[e](t).then(function(e){var i=e.result;return l({passed:i},t)})});j[e]=I.Promise.all(r).then(function(e){return N(e)});return j[e]}var k="bc-style-vjs";function P(e,t,n){var a=e.classNames;if(!t&&!n&&t!==0&&n!==0){return}var s=i.querySelector("."+a.playerInstanceDimensions);if(!s){s=i.createElement("style");s.className=a.playerInstanceDimensions;var o=i.querySelector("."+a.playerStyle)||i.querySelector("."+k);if(o){o.parentNode.insertBefore(s,o.nextSibling)}else{i.head.appendChild(s)}}else if(s.innerText){if(!t&&t!==0){var l=/width:(\d+)px;/g.exec(s.innerText);if(l&&l[1]){t=r.parseInt(l[1],10)}}else if(!n&&n!==0){var u=/height:(\d+)px;/g.exec(s.innerText);if(u&&u[1]){n=r.parseInt(u[1],10)}}}var c="."+a.playerInstance+"{";if(t||t===0){c+="width:"+r.parseInt(t,10)+"px;"}if(n||n===0){c+="height:"+r.parseInt(n,10)+"px;"}c+="}";s.innerText=c}var R=3;var z=50;var U=function e(t){var n=i.body;var a=i.createElement("div");a.className="pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text_ads_2 text-ads text-ad-links";a.innerHTML="&nbsp;";a.setAttribute("style","height:10px!important;font-size:20px;color:transparent;position:absolute;bottom:0;left:-10000px");var s=0;var o=function e(){s++;var i=a.offsetHeight===0||!n.contains(a)||a.style.display==="none"||a.style.visibility==="hidden";if(i||s===R){if(a.parentNode){a.parentNode.removeChild(a)}return t(i)}r.setTimeout(e,z)};n.appendChild(a);o()};var B=null;var F;function V(e){if(e||!F){F=new v(function(e){if(i.readyState==="complete"||i.readyState!=="loading"&&!i.documentElement.doScroll){U(e)}else{i.addEventListener("DOMContentLoaded",function(){U(e)})}})}return F.then(function(e){B=e;return e})}Object.defineProperties(V,{VERSION:{enumerable:true,value:"n/a"},lastResult:{enumerable:true,get:function e(){return B}},mightBe:{enumerable:true,get:function e(){return B!==false}},mightNotBe:{enumerable:true,get:function e(){return B!==true}}});var G="vjs-waiting-for-autoplay";function H(e,t,i,r){return e.hasAttribute("data-debug")||t.debug!==undefined||i.debug||r.debug}function Q(e,t,n,a){var s=t.settings,o=t.environment;var l=s.embedId,u=s.playerId;var c=o.isInBcFrame,d=o.queryString,h=o.urlHash;var f="bc-player-"+u+"_"+l;var p=f+"-index-"+s.playerIndex;I.perf.mark("bcInitStart");s.classNames={player:f,playerStyle:"bc-style-"+u+"-"+l,playerInstance:p,playerInstanceDimensions:p+"-video-dimensions"};s.embedState={controls:n.hasAttribute("controls"),loop:n.hasAttribute("loop"),muted:n.hasAttribute("muted"),playsinline:n.hasAttribute("playsinline"),poster:n.hasAttribute("poster"),sources:!!n.querySelector("source"),tracks:!!n.querySelector("track")};a.debug=H(n,d,a,s);if(n.hasAttribute("data-vttjs")&&I.isNonEmptyStr(n.getAttribute("data-vttjs"))){a["vtt.js"]=n.getAttribute("data-vttjs")}else if(d.vttjs&&I.isNonEmptyStr(d.vttjs)){a["vtt.js"]=d.vttjs}else if(a.hasOwnProperty("vtt.js")||a.hasOwnProperty("vttjs")){a["vtt.js"]=a["vtt.js"]||a.vttjs}else if(s["vtt.js"]||s.vttjs){a["vtt.js"]=s["vtt.js"]||s.vttjs}else{a["vtt.js"]="https://vjs.zencdn.net/vttjs/0.12.5/vtt.global.min.js"}if(s.playButton){var m=s.playButton,v=m.hover,g=m.shape,y=m.position;if(v==="glow"){e.dom.addClass(n,"vjs-play-button-hover-glow")}else if(v==="darken"){e.dom.addClass(n,"vjs-play-button-hover-darken")}if(g==="square"){e.dom.addClass(n,"vjs-play-button-shape-square")}else if(g==="rectangle"){e.dom.addClass(n,"vjs-play-button-shape-rectangle")}if(y==="topRight"){e.dom.addClass(n,"vjs-play-button-position-top-right")}else if(y==="topLeft"){e.dom.addClass(n,"vjs-play-button-position-top-left")}}if(d.crossorigin!==undefined||s.media&&s.media.tracks&&e.browser.IS_ANY_SAFARI){s.crossorigin=true}if(s.crossorigin){n.setAttribute("crossorigin","anonymous")}var _=h.t||d.t||n.getAttribute("data-start-time");if(/^[\d]+$/.test(_)){s.startTime=Number(_)}else if(/^(\d+h)?(\d+m)?(\d+s)?$/.test(_)){s.startTime=_}var b=d.adConfigId;var M=n.getAttribute("data-ad-config-id");if(I.isNonEmptyStr(b)){s.adConfigId=b}else if(I.isNonEmptyStr(M)){s.adConfigId=M}if(typeof s.adConfigId==="string"){s.adConfigId=s.adConfigId.trim()}if(!I.isNonEmptyStr(s.adConfigId)){s.adConfigId=null}if(s.usingAdFailover&&!V.mightBe){s.adConfigId=null}var T=d.deliveryConfigId;var A=n.getAttribute("data-delivery-config-id");if(I.isNonEmptyStr(T)){s.deliveryConfigId=T}else if(I.isNonEmptyStr(A)){s.deliveryConfigId=A}if(typeof s.deliveryConfigId==="string"){s.deliveryConfigId=s.deliveryConfigId.trim()}if(!I.isNonEmptyStr(s.deliveryConfigId)){s.deliveryConfigId=null}s.applicationId=d.applicationId||n.getAttribute("data-application-id")||s.applicationId;var w=I.qs();if(n.hasAttribute("autoplay")){a.autoplay=true}else if(w.hash.hasOwnProperty("autoplay")||w.search.hasOwnProperty("autoplay")){a.autoplay=w.hash.autoplay||w.search.autoplay||true;if(!c){e.log.warn("DEPRECATION: Using the `autoplay` query parameter or URL hash value to request autoplay for advanced, in-page embeds is deprecated and will be removed in Brightcove Player 7. Please use the player configuration or Video.js option instead!")}}else if(!a.hasOwnProperty("autoplay")){a.autoplay=s.autoplay||false}if(a.autoplay){e.dom.addClass(n,G)}if(d.preload){a.preload=d.preload}else if(!a.hasOwnProperty("preload")&&s.preload){a.preload=s.preload}a.height=n.getAttribute("height")||undefined;a.width=n.getAttribute("width")||undefined;if(!c&&n&&(a.width||a.height)){P(s,a.width,a.height)}["loop","muted","playsinline"].forEach(function(e){if(d[e]!==undefined||s[e]||s.embedState[e]||a[e]){a[e]=true}else{a[e]=false}});if(a.playsinline){n.setAttribute("playsinline","playsinline")}if(a.muted){n.setAttribute("muted","muted");n.muted=true}if(c){if(d.language){a.language=d.language}else if(I.isNonEmptyStr(i.documentElement.lang)){a.language=i.documentElement.lang}else{a.language=r.navigator.language}i.documentElement.lang=a.language}else if(n.hasAttribute("language")){a.language=n.getAttribute("language");e.log.warn("Use of the language attribute on the video embed is invalid. Please use the lang attribute instead.")}else if(!a.hasOwnProperty("language")&&I.isNonEmptyStr(s.language)){a.language=s.language}var E=s.media;if(E&&E.poster&&E.poster.highres&&!n.poster){if(/(https?:)?\/\//.test(E.poster.highres)){a.poster=E.poster.highres}else{a.poster=t.environment.scriptBaseUrl+"/"+E.poster.highres}if(e.browser.IS_IPHONE){n.poster=a.poster}}if(E&&E.tracks){E.tracks.forEach(function(t){n.appendChild(e.dom.createEl("track",{},{default:t.default?t.default:"",label:t.label?t.label:"",kind:"captions",src:t.src,srclang:t.srclang}))})}if(E&&E.src){a.sources=[E.src]}else if(E&&E.sources){a.sources=E.sources}a.runtime_=t;if(!(e.browser.IS_ANY_SAFARI||e.browser.IS_IOS)){a.html5=a.html5||{};a.html5.nativeCaptions=false}if(s.vhs!==false){if(!a.flash){a.flash={}}if(!a.flash.swf){a.flash.swf=s.playersCDN+"/videojs-flashls-source-handler/1.4.8/video-js.swf"}}e.options.vhs=e.options.vhs||{};a.html5=a.html5||{};a.html5.vhs=a.html5.vhs||{};if(s.vhs&&typeof s.vhs==="object"){a.html5.vhs=s.vhs}if(e.browser.IS_ANDROID&&(e.options.vhs.enableLowInitialPlaylist===undefined||a.html5.vhs.enableLowInitialPlaylist===undefined)){a.html5.vhs.enableLowInitialPlaylist=true}if(!e.browser.IS_ANY_SAFARI&&e.options.vhs.overrideNative===undefined&&a.html5.vhs.overrideNative===undefined){a.html5.vhs.overrideNative=true}a.inactivityTimeout=5e3;if(e.browser.TOUCH_ENABLED){a.inactivityTimeout=0}a.controls=c?true:s.embedState.controls;a.persistTextTrackSettings=true;a.sourceOrder=true;a.userActions={hotkeys:{}};if(s.fullscreenControl===false){a.userActions.doubleClick=false}var x=t.environment.userAgent.match(/applewebkit\/(\d*).*Version\/(\d*.\d*)/i);a.nativeControlsForTouch=e.browser.IS_ANDROID&&e.browser.ANDROID_VERSION<5&&x&&x[2]>0;["controlBar","flash","liveui","playbackRates","responsive","suppressNotSupportedError","techOrder"].forEach(function(e){if(s.hasOwnProperty(e)){a[e]=s[e]}});return a}var Y=function e(t){var i=t.registerPlugin||t.plugin;i("urlparams",function(e){e=e||{};var i=function e(t){var i=0,r;t=(t||"").replace(/^\s+|\s+$/g,"");if(!t||!/^(\d+h)?(\d+m)?(\d+s)?$/.test(t)){return-1}r=t.match(/^(\d+)h/);if(r){i+=parseFloat(r[1])*3600;t=t.replace(/^(\d+)h/,"")}r=t.match(/^(\d+)m/);if(r){i+=parseFloat(r[1])*60;t=t.replace(/^(\d+)m/,"")}r=t.match(/^(\d+)s/);if(r){i+=parseFloat(r[1])}return i},r=.9,n=function e(t,i){var n=t-i;if(isNaN(n)){return false}return Math.abs(n)<r},a=function e(t){s.ready(function(){if(s.networkState()===2){t()}else{s.one("loadedmetadata",function(){s.setTimeout(t,0)})}})},s=this,o=I.qs(),l=o.hash.t||o.search.t,u;if(typeof e.time==="number"){u=e.time}else{u=i(e.time)}if(l){if(/^[\d]+$/.test(l)){u=Number(l)}else{u=i(l)}if(!e.iframe&&u!==-1){t.log.warn("DEPRECATION: Using the `t` query parameter or URL hash value to set an initial playback start time for advanced, in-page embeds is deprecated and will be removed in Brightcove Player 7. Please add a `data-start-time` attribute going forward!")}}if(u>0){(function(){var t=e.delay||250,i,r=false,o=function e(){if(r||n(s.currentTime(),u)){r=true;l()}else{s.currentTime(u);i=s.setTimeout(e,t)}},l=function e(){s.clearTimeout(i);s.off("timeupdate",e);if(!r){s.currentTime(u)}};s.on("timeupdate",l);a(o)})()}if(o.hash.captions!==undefined||o.search.captions!==undefined){(function(){var e=o.hash.captions||o.search.captions;s.one("play",function(){var t=s.textTracks(),i,r;if(t){for(r=0;r<t.length;r++){i=t[r];if(i.language===e){i.mode="showing";break}}}})})()}})};function W(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var q=W;function X(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var Z=X;var K={activeCues:null,cues:null,id:"",inBandMetadataTrackDispatchType:undefined,kind:"metadata",label:"",language:"",mode:"",oncuechange:undefined};var J=["activeCues","cues","id","inBandMetadataTrackDispatchType","kind","label","language"];var $=["mode"];var ee=function e(t,i){if(t==="media"&&i.kind==="metadata"&&i.label==="media-cues"){return true}if(t==="id3"&&typeof i.inBandMetadataTrackDispatchType==="string"&&i.inBandMetadataTrackDispatchType.trim().length>0){return true}return false};var te=function e(t){var i=function(e){Z(i,e);function i(i,r,n){var a;if(n===void 0){n=function e(){}}a=e.call(this)||this;var s=q(a);s.player_=i;s.reTriggerEvent_=t.bind(s,s.reTriggerEvent_);s.update_=t.bind(s,s.update_);s.type_=r;s.logger_=n;J.concat($).forEach(function(e){var t={get:function t(){return s.track_&&s.track_[e]||K[e]},enumerable:true};if($.indexOf(e)!==-1){t.set=function(t){if(!s.track_){return}s.track_[e]=t}}Object.defineProperty(s,e,t)});s.update_();var o=i.textTracks();var l=function e(t){if(!s.track_){s.update_(t)}else if(s.track_.mode!=="hidden"){s.track_.mode="hidden";s.logger_("timeupdate -> type:"+s.type_+(s.track_?",mode:"+s.track_.mode:"")+" -> track was set to hidden")}};["addtrack","removetrack"].forEach(function(e){return o.addEventListener(e,s.update_)});s.player_.on("timeupdate",l);return s||q(a)}var r=i.prototype;r.addCue=function e(){var t=this;var i=arguments;if(!this.track_){this.one("trackexists",function(){return t.addCue.apply(t,i)});return}return this.track_.addCue.apply(this.track_,i)};r.removeCue=function e(){var t=this;var i=arguments;if(!this.track_){return this.one("trackexists",function(){return t.removeCue.apply(t,i)})}return this.track_.removeCue.apply(this.track_,i)};r.reTriggerEvent_=function e(t){this.trigger(t)};r.update_=function e(t){if(t===void 0){t={}}var i;if(t.type==="removetrack"&&t.track&&t.track===this.track_){i=null}else if(t.type==="addtrack"&&t.track&&!this.track_&&ee(this.type_,t.track)){i=t.track}else{var r=this.player_.textTracks();var n=r.length;while(n--){if(ee(this.type_,r[n])){i=r[n];break}}}this.logger_("update -> type:"+this.type_+", mode:"+(i?i.mode:"?")+" -> event:"+(t.type||"constructor"));if(this.track_===i){this.logger_("update -> type:"+this.type_+", mode:"+(i?i.mode:"?")+" -> "+(i?"already proxied":"no track to proxy"));return}if(this.track_){this.track_.removeEventListener("cuechange",this.reTriggerEvent_)}this.track_=i;if(!this.track_){this.logger_("update -> type:"+this.type_+", mode:"+(i?i.mode:"?")+" -> track changed, but no new track exists");return}if(this.track_.mode!=="hidden"){this.track_.mode="hidden"}this.track_.addEventListener("cuechange",this.reTriggerEvent_);this.trigger("trackexists");this.logger_("update -> type:"+this.type_+", mode:"+(i?i.mode:"?")+" -> track exists")};return i}(t.EventTarget);i.prototype.allowedEvents_={cuechange:"cuechange"};return i};var ie=function e(t){var i=te(t);var r={id3CuePointsTrack:function e(t){var r=this.proxyTracks_.id3;if(!r){r=this.proxyTracks_.id3=new i(this,"id3",t)}return r},mediaCuePointsTrack:function e(t){var r=this.proxyTracks_.media;if(r){return r}r=this.proxyTracks_.media=new i(this,"media",t);if(r.track_){return r}this.addTextTrack("metadata","media-cues");r.update_();return r}};function a(e){var i=this;if(e===void 0){e={}}this.proxyTracks_={};var n=t.createLogger("proxyTracks");if(!e.debug){n=function e(){}}n("initialized");Object.keys(r).forEach(function(e){i[e]=function(){return r[e].call(i,n)}});this.ready(function(){Object.keys(r).forEach(function(t){var r=i[t]();if(e.debug){r.on("cuechange",function(){for(var e=0;e<r.activeCues.length;e++){var t=r.activeCues[e];n(r.type_+" -> cuechange -> activeCues["+e+"]: "+(t.value&&t.value.key||t.frame&&t.frame.id))}})}})})}t.registerPlugin("proxyTracks",a);a.VERSION=n};var re={verbose:false,maxSavedSeekEvents:10,debounceTimeout:1e3,playbackRateTolerance:1.5,stableTimeUpdateCount:3,minInterval:1};var ne=function e(t){t.trigger("seek")};var ae=function e(t){var i=function e(i){var r=t.mergeOptions(re,i);var n;var a=false;var s;var o;var l;var u;var c=0;var d=[];var h=0;var f={};var p={};var m=r.verbose?function(){var e;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}return(e=t.log).call.apply(e,[t,"seek-events:"].concat(r))}:function(){};var v=function e(){f.seek=this.seekEvents.last().seekEnd;a=false;m("event seekStart: ",this.seekEvents.last().seekStart);m("event seekEnd: ",this.seekEvents.last().seekEnd)};var g=function e(){m("stable");this.seekEvents.stable=true};var y=function e(){m("unstable");this.seekEvents.stable=false};var _=function e(t){f.seek=this.currentTime();f.clock=t.timeStamp||Date.now();p.seek=f.seek;p.clock=f.clock};var b=I.debounce(ne,r.debounceTimeout);var M=function e(t){s=this.currentTime();o=t.timeStamp||+new Date;l=s-p.seek;if(o===p.clock||s===f.seek){return}u=Math.abs(l)/(Math.abs(o-p.clock)*.001);if(u/this.playbackRate()>this.seekEvents.playbackRateTolerance){if(Math.abs(s-f.seek)>=this.seekEvents.minInterval){this.trigger("unstable");c=0;if(!a){h=Number(f.seek)}d.push({timeStamp:o,seekStart:h,seekEnd:s,seekInterval:s-h});if(d.length>r.maxSavedSeekEvents){d.shift()}a=true;b(this)}}else{c++;m(s+": "+c);if(c>=this.seekEvents.stableTimeUpdateCount&&!this.seekEvents.stable&&!a){this.trigger("stable")}f.seek=s}p.seek=s;p.clock=o};this.seekEvents={stableTimeUpdateCount:r.stableTimeUpdateCount,playbackRateTolerance:r.playbackRateTolerance,debounceTimeout:r.debounceTimeout,minInterval:r.minInterval,stable:false,enabled:function e(){return n},enable:t.bind(this,function(){if(n){return}n=true;f.seek=0;f.clock=Date.now();p.seek=0;p.clock=f.clock;this.on("seek",v);this.on("stable",g);this.on("unstable",y);this.on(["loadstart","playing","adplaying"],_);this.on(["timeupdate","adtimeupdate"],M)}),disable:t.bind(this,function(){if(!n){return}n=false;this.off("seek",v);this.off("stable",g);this.off("unstable",y);this.off(["loadstart","playing","adplaying"],_);this.off(["timeupdate","adtimeupdate"],M)}),last:function e(){return d[d.length-1]},all:function e(){return d}};this.seekEvents.enable()};var r=t.registerPlugin||t.plugin;i.VERSION=n;r("seekEvents",i)};var se=new r.Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});var oe=URL.createObjectURL(se);var le=["perSourceBehaviors","contextmenu","contextmenuUI","bcAnalytics","errors","catalog","playerInfo","dock","plugin","reloadSourceOnError","playlist","endscreen","proxyTracks","seekEvents","touchActive","urlparams"];var ue=function e(t,n,a){var s=a.settings;var o=a.environment;var l=o.queryString;var u={};var c=Boolean(n.options_.debug);var d={bcAnalytics:{applicationId:s.applicationId,mr:Boolean(r.bc_isManagedRelease),referrer:l.referrer,usage:l.usage,verbose:c},chromecastReceiver:{debug:c},ima3:{debugContribAds:c},ssai:{debug:c},vr:{debug:c}};n.on("pluginsetup",function(e,i){var r=i.name;if(le.indexOf(r)!==-1){return}n.trigger({type:"usage",name:r+"!"+t.getPluginVersion(r)})});if(s.contextMenu!==false){var h=[{label:n.localize("Player Information"),listener:function e(){return n.usingPlugin("playerInfo")&&n.playerInfo.modal.open()}}];if(s.contextMenu.brightcoveBranding!==false){h.push({href:"https://www.brightcove.com/en/why-brightcove?utm_type=player",label:n.localize("About Brightcove")})}d.contextmenuUI={content:h}}var f=function e(i,r){if(r===void 0){r={}}var a=d[i]||{};if(!n.hasPlugin(i)){t.log.error('Plugin "'+i+'" is missing. Please check your player configuration.');return}if(n.usingPlugin(i)){return}var s=t.mergeOptions(a,r);try{n[i](s)}catch(e){t.log.error('Unable to initialize "'+i+'" plugin:',e)}};if(s.usingAdFailover&&s.usingIMAPrerollWithSSAI){t.log.warn("Ad failover is not compatible with SSAI and client-side preroll. "+"Please configure only one. This player will use ad failover behavior.");delete s.usingIMAPrerollWithSSAI}if(s.usingAdFailover){n.trigger({type:"usage",name:"ad-failover"});var p=n.usingAdBlocker.mightBe?s.serverSideAdPlugin:s.clientSideAdPlugin,m=p.name,v=p.options;f(m,v)}else if(s.usingIMAPrerollWithSSAI){if(r.bc.disposedAfterPreroll_){var g=s.serverSideAdPlugin.name;var y=s.serverSideAdPlugin.options;var _=s.clientSideAdPlugin.name;t.deregisterPlugin(_);t.registerPlugin(g,r.bc.ssaiPluginCache_);f(g,y)}else{n.trigger({type:"usage",name:"ssai-with-ima-preroll"});var b=s.clientSideAdPlugin.name;var M=s.clientSideAdPlugin.options;var T=s.serverSideAdPlugin.name;r.bc.ssaiPluginCache_=t.getPlugin("ssai");t.deregisterPlugin(T);f(b,M);var A=n.tagAttributes;n.one(["adend","adtimeout","adserror"],function(e){n.one("playing",function(){var t=n.volume();var a=n.muted();if(e.type==="adend"){t=n.ima3.adPlayer.volume();a=n.ima3.adPlayer.muted()}var s=n.el();var o=s.parentNode;var l=i.createElement("div");l.setAttribute("id","bc-player-placeholder");o.replaceChild(l,s);n.dispose();r.bc.disposedAfterPreroll_=true;var u=i.createElement("video");Object.keys(A).forEach(function(e){u.setAttribute(e,A[e])});o.replaceChild(u,l);var c=r.bc(A.id);c.bigPlayButton.hide();c.ready(function(){c.one("playing",function(){r.bc.disposedAfterPreroll_=false});var e=c.play();if(e.then){e.catch(function(){c.bigPlayButton.show()})}c.volume(t);c.muted(a)})})})}}s.plugins.forEach(function(e){var t=e.autoInit,i=e.name,r=e.options;if(!t){return}f(i,r)});var w=s.media,E=s.videoCloud;var x=w&&!!(w.sources||w.length&&w[0].sources);if(E&&E.policy_key&&!x){var S={embedHasPoster:s.embedState.poster,embedHasSources:s.embedState.sources,embedHasTracks:s.embedState.tracks,adConfigId:s.adConfigId,deliveryConfigId:s.deliveryConfigId};if(E.playlist){n.trigger({type:"usage",name:"catalog-playlist"});S.playlistId=E.playlist}if(E.video){n.trigger({type:"usage",name:"catalog-video"});S.videoId=E.video}if(E.search){n.trigger({type:"usage",name:"catalog-search"});S.search=E.search}if(E.sequence){n.trigger({type:"usage",name:"catalog-sequence"});S.sequence=E.sequence}var D;if(s.usingIMAPrerollWithSSAI&&!r.bc.disposedAfterPreroll_){n.src({src:oe,type:"video/mp4"})}else{D=u.catalogMedia=n.catalog.autoFindAndLoadMedia(S)}if(D&&D.type==="video"){if(/^[\d]+$/.test(D.id)){n.mediainfo.id=D.id}else{n.mediainfo.referenceId=n.mediainfo.reference_id=D.id}}n.on("loadstart",function(){if(n.language()&&n.catalog.getMetadata({lang:n.language()})){n.trigger({type:"usage",name:"variant:"+n.language()})}})}if(n.usingPlugin("bcAnalytics")){var j=function e(){return(new Date).toISOString().split("T")[0]+":"+n.bcAnalytics.client.getSession()};n.ready(function(){I.perf.mark("bcInitEnd");I.perf.measure("bcInit","bcInitStart","bcInitEnd");if(n.usingPlugin("playerInfo")){n.playerInfo.modal.on("modalfill",function(){var e=j();var t=n.playerInfo.modal.$(".vjs-pi-section--player tbody");if(!e||!t){return}var r=i.createElement("tr");var a=i.createElement("tr");r.innerHTML="<td>"+n.localize("Session ID")+"</td> <td>"+e+"</td>";t.appendChild(r);a.innerHTML="<td>"+n.localize("Player Element ID")+"</td> <td>"+n.id()+"</td>";t.appendChild(a)})}});if(n.usingPlugin("errors")){n.errorDisplay.on("modalfill",function(){var e=j();var i=n.errorDisplay.$(".vjs-errors-content-container");if(!e||!i){return}i.appendChild(t.dom.createEl("div",{className:"vjs-errors-ref-id",innerHTML:"<b>"+n.localize("Session ID:")+"</b> "+e+" "+"<b>"+n.localize("Player Element ID:")+"</b> "+n.id()}))})}}if(n.usingPlugin("playerInfo")){n.on("vjs-contextmenu",function(){if(n.playerInfo.modal){n.playerInfo.modal.close()}})}if(n.hasPlugin("dock")){var L=w&&(w[0]&&w[0].title||w.title)||"";var N=w&&(w[0]&&w[0].description||w.description)||"";var C=function e(){if(n.controls()){var t=n.mediainfo;var i=n.language()||"";var r;if(n.usingPlugin("catalog")){r=n.catalog.getMetadata({lang:i});if(!r){r=n.catalog.getMetadata({lang:i.substring(0,2)})}}n.dock({title:r&&r.name||t&&t.name||L,description:r&&r.description||t&&t.description||N})}};C();n.on(["loadedmetadata","languagechange"],C)}return u};var ce=function e(t){var i=t.registerPlugin||t.plugin;i("touchActive",function(){if(!t.browser.TOUCH_ENABLED){return}var e=this;var i=false;var r=function t(){if(!i){e.userActive(false)}};e.one("play",function(){var t=e.options_.inactivityTimeout>0?e.options_.inactivityTimeout:5e3;e.el().className+=" vjs-user-active";e.one(["click","tap"],function(){i=true});e.setTimeout(r,t)})})};var de=I.get;var he="unknown";var fe=function e(t){var i=t.getComponent("ModalDialog");var n=t.dom;var a={adonly:"Ad-Only",ampSupport:"AMP Support",bcAa:"Adobe Analytics",bcGa:"Google Analytics",bcGtm:"Google Tag Manager",bcPlaylistUi:"Brightcove Playlist UI",bcTealium:"Tealium",chromecastReceiver:"Chromecast Receiver",customEndscreen:"Custom Endscreen",dash:"DASH",eme:"DRM",dvrux:"Live DVRUX",FreeWheelPlugin:"FreeWheel",ima3:"IMA3",kollective:"Kollective",onceux:"OnceUX",pip:"Picture-in-Picture",qualityMenu:"Quality Menu",social:"Social",ssai:"SSAI",thumbnails:"Thumbnails",vr:"VR"};var s=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}return"<tr>"+i.map(function(e){return"<td>"+e+"</td>"}).join("")+"</tr>"};var o=function(e){Z(i,e);function i(){return e.apply(this,arguments)||this}var o=i.prototype;o.buildCSSClass=function t(){return"vjs-player-info-modal "+e.prototype.buildCSSClass.call(this)};o.dataForPlugins_=function e(){var i=this;return Object.keys(a).filter(t.getPlugin).sort().map(function(e){var r=i.player();var n=t.getPluginVersion(e)||de(r,e+".VERSION",he);if(e==="eme"&&n===he&&t.drm&&t.drm.VERSION){n=t.drm.VERSION}return{active:r.usingPlugin(e),displayName:a[e],version:n}})};o.dataForSource_=function e(){var t=this.player();var i=t.tech_.vhs,r=t.mediainfo;var n={mediainfo:r,tech:t.techName_,type:t.currentType()};if(!i){return n}var a=de(i,"playlists",{media:function e(){}}).media();n.vhs={bandwidth:de(i,"stats.bandwidth",he),mediaBytesTransferred:de(i,"stats.mediaBytesTransferred",he),mediaTransferDuration:de(i,"stats.mediaTransferDuration",he),mediaRequests:de(i,"stats.mediaRequests",he)};if(a){n.vhs.rendition={height:de(a,"attributes.RESOLUTION.height",he),width:de(a,"attributes.RESOLUTION.width",he)}}return n};o.data=function e(){var t=this.player();var i=n.getAttributes(t.el());var a=de(t,"bcinfo.accountId",de(i,"data-account",he));var s=de(t,"bcinfo.playerId",de(i,"data-player",he));var o=de(t,"bcinfo.embedId",de(i,"data-embed",he));var l=de(t,"bcinfo.applicationId",de(i,"data-application-id",""));var u=de(r,"bc."+s+"_"+o+".VERSION",de(r,"bc.VERSION",he));var c=de(r,"bc."+s+"_"+o+".videojs.VERSION",de(r,"videojs.VERSION",he));return{player:{accountId:a,playerId:s,embedId:o,applicationId:l,playerVersion:u,videojsVersion:c},plugins:this.dataForPlugins_(),source:this.dataForSource_()}};o.contentForPlugins_=function e(t){var i=this;var r=('\n        <tr>\n          <td colspan="3">'+this.localize("No plugins available.")+"</td>\n        </tr>\n      ").trim();if(t.plugins.length){r=t.plugins.map(function(e){return s(e.displayName,e.version,e.active?i.localize("yes"):i.localize("no"))}).join("")}return("\n        <table>\n          <thead>\n            <tr>\n              <th>"+this.localize("Name")+"</th>\n              <th>"+this.localize("Version")+"</th>\n              <th>"+this.localize("Active")+"</th>\n            </tr>\n          </thead>\n          <tbody>"+r+"</tbody>\n        </table>\n      ").trim()};o.contentForSource_=function e(t){var i=["<table><tbody>",s(this.localize("Current Playback Tech"),t.source.tech),s(this.localize("Current Media Type"),t.source.type)];if(t.source.mediainfo){i.push(s(this.localize("Video Name"),t.source.mediainfo.name),s(this.localize("Video ID"),t.source.mediainfo.id))}if(t.source.vhs){i.push(s(this.localize("Current Bandwidth"),t.source.vhs.bandwidth),s(this.localize("Media Bytes Transferred"),t.source.vhs.mediaBytesTransferred),s(this.localize("Media Requests"),t.source.vhs.mediaRequests),s(this.localize("Media Transfer Duration"),t.source.vhs.mediaTransferDuration));if(t.source.vhs.rendition){i.push(s(this.localize("Rendition Width"),t.source.vhs.rendition.width),s(this.localize("Rendition Height"),t.source.vhs.rendition.height))}}return i.concat("</tbody></table>").join("")};o.content=function e(){var t=this.data();return[n.createEl("h1",{innerHTML:this.localize("Player Information")}),n.createEl("div",{className:"vjs-pi-section vjs-pi-section--player",innerHTML:["<h2>"+this.localize("General")+"</h2>","<table><tbody>",s(this.localize("Brightcove Player Version"),t.player.playerVersion),s(this.localize("Video.js Version"),t.player.videojsVersion),s(this.localize("Account ID"),t.player.accountId),s(this.localize("Player ID"),t.player.playerId),s(this.localize("Embed ID"),t.player.embedId),s(this.localize("Application ID"),t.player.applicationId),"</tbody></table>"].join("")}),n.createEl("div",{className:"vjs-pi-section vjs-pi-section--plugins",innerHTML:["<h2>"+this.localize("Plugins")+"</h2>",this.contentForPlugins_(t)].join("")}),n.createEl("div",{className:"vjs-pi-section vjs-pi-section--source",innerHTML:["<h2>"+this.localize("Source")+"</h2>",this.contentForSource_(t)].join("")})]};return i}(i);t.registerComponent("PlayerInfoModal",o);return o};var pe=function e(t){fe(t);function i(){var e=this;if(this.playerInfo.modal){this.playerInfo.modal.dispose()}this.playerInfo=function(){i.apply(this,arguments)};this.ready(function(){e.addClass("vjs-player-info");e.playerInfo.modal=e.addChild("playerInfoModal",{fillAlways:true,label:e.localize("Player Information Dialog"),temporary:false});e.playerInfo.modal.on("dispose",function(){delete e.playerInfo})})}t.registerPlugin("playerInfo",i);i.VERSION=n};var me=function e(t){var i=function e(t,i){if(typeof t.usingPlugin==="function"){return t.usingPlugin(i)}return!!t[i]};var r=function e(t){t.postrollFinished=false;t.postrollTimedOut=false;t.sawNoPostrollEvent=false};var a=function e(t){if(!i(t,"ads")){return false}var r=t.endscreenState_;if(r.sawNoPostrollEvent){return false}return!r.postrollFinished&&!r.postrollTimedOut};var s=function e(t){if(!i(t,"playlist")){return false}var r=t.playlist;var n=r();if(r.autoadvance_.delay!==0||!n.length){return false}return r.repeat()||r.currentItem()!==n.length-1};var o=function e(){var t=this;if(this.endscreenState_){return}var i=this.endscreenState_={};var n=function e(){t.trigger("endscreen")};r(i);this.on("adstart",function(){var e=t.ended();i.postrollFinished=!e});this.on("adend",function(){i.postrollFinished=t.ended()});this.on("adtimeout",function(){i.postrollTimedOut=t.ended()});this.on(["endscreen","loadstart"],function(){t.off("adend",n);r(i)});this.on("nopostroll",function(){i.sawNoPostrollEvent=true});this.on("ended",function(){if(s(t)){return}if(a(t)){t.one("adend",n);return}n()})};o.VERSION=n;if(t.registerPlugin){if(!t.getPlugin("endscreen")){t.registerPlugin("endscreen",o)}}else{t.plugin("endscreen",o)}};var ve=["audioTracks","textTracks","videoTracks","remoteTextTracks","addTextTrack","addRemoteTextTrack","removeRemoteTextTrack","scrubbing","ended"];var ge=["handleKeyDown"];var ye=function e(t,i){var r=function e(t){return function(e){if(e.isAdPlayerPatched_){return}var i=e.prototype;e.isAdPlayerPatched_=true;Object.defineProperty(i,"fsApi_",{get:function e(){return this.options_&&this.options_.contentPlayer&&this.options_.contentPlayer.fsApi_}});ve.forEach(function(e){if(!(e in i)){i[e]=function(){}}});ge.forEach(function(e){if(!i.hasOwnProperty(e)){i[e]=function(){}}});Object.defineProperty(t,"AdPlayer",{configurable:true,enumerable:true,get:function t(){return e},set:function e(){}});return e}};var n=function e(i){if(!i){Object.defineProperty(t,"ima3",{configurable:true,enumerable:true,get:function e(){},set:function i(r){e(r);Object.defineProperty(t,"ima3",{value:r})}});return}var n=r(i);if(!i.AdPlayer){Object.defineProperty(i,"AdPlayer",{configurable:true,enumerable:true,get:function e(){},set:n});return}n(i.AdPlayer)};if(t.ima3){n(t.ima3)}else{i.one("beforepluginsetup:ima3",function(){n(t.ima3)})}};var _e="vjs-waiting-for-autoplay";function be(e,t,r,n){var a=r.options_;var s=t.settings,o=t.environment;var l=s.accountId,u=s.applicationId,c=s.css,d=s.embedId,h=s.playerId;var f;r.mediainfo={accountId:l,account_id:l};r.bcinfo={accountId:l,applicationId:u,css:c,embedId:d,playerId:h,scriptUrl:o.scriptUrl,scriptBaseUrl:o.scriptBaseUrl};Object.defineProperty(r,"usingAdBlocker",{enumerable:true,value:V});Object.defineProperty(r,"getAutoplayConditions",{enumerable:true,value:function e(t){return n.getAutoplayConditions(t)}});Object.defineProperty(r,"getAccountId",{enumerable:true,value:function e(){return n.runtime.settings.accountId}});if(t.settings.allowAccountOverride){Object.defineProperty(r,"setAccountId",{enumerable:true,value:function t(i){if(I.isNil(i)){e.log.warn("account ID must be a string or number");return}n.runtime.settings.accountId=i;this.bcinfo.accountId=i;this.mediainfo.accountId=this.mediainfo.account_id=i}})}V().then(function(e){if(e){r.trigger({type:"usage",name:"using-ad-blocker"})}});r.addClass(s.classNames.player);r.addClass(s.classNames.playerInstance);var p=e.bind(r,r.dimension);r.dimension=function(e,t){if(e==="width"){P(s,t,null)}else if(e==="height"){P(s,null,t)}return p(e,t)};r.ready(function(){if(!a.autoplay){return}function t(){r.removeClass(_e)}function i(){if(!r.autoplay()){r.removeClass(_e);return}var e=r.play();if(e===undefined){t()}else{e.then(t,t)}}var n=["canplay","error","durationchange"];function s(a){if(a.type==="error"){t();r.off(n,s);return}if(a.type==="durationchange"&&r.duration()===Infinity&&!e.browser.IS_ANY_SAFARI){i();r.off(n,s);return}if(a.type==="canplay"){i();r.off(n,s)}}if(!r.currentSrc()&&!f){t()}else if(r.readyState()===4){i()}else{r.one(n,s)}});if(s.fullscreenControl===false&&r.controls()){r.on("loadedmetadata",function(){if(!r.controlBar){return}var e=r.controlBar.children();if(!e||!e.length){return}for(var t=e.length-1;t>0;t--){if(e[t].hasClass("vjs-menu-button-popup")&&!e[t].hasClass("vjs-hidden")){e[t].addClass("vjs-menu-popup-last-visible");break}}})}if(e.browser.IS_IPHONE){r.on("fullscreenchange",function(){var e=r.$(".vjs-tech");if(e.hasAttribute("controls")){e.removeAttribute("controls")}});if(s.embedState.playsinline&&s.embedState.muted){r.addClass("vjs-iphone")}}if(e.browser.IS_IOS&&s.embedState.muted){r.addClass("vjs-ios")}if(r.controls()){r.one("play",function(){if(!r.controlBar||!r.controls()){return}var e=r.controlBar.children();if(!e||!e.length){return}var t=["Enter","ArrowDown","ArrowUp","Up","Down"," ","Spacebar"];for(var i=0;i<e.length;i++){if(e[i].hasClass("vjs-menu-button-popup")&&!e[i].hasClass("vjs-hidden")){e[i].on("keyup",function(e){if(t.indexOf(e.key)>=0){r.controlBar.addClass("vjs-control-bar-visible")}})}}});if(r.controlBar){var m=r.controlBar.el();var v;var g=function e(){var t=i.activeElement;if(v!==t){v=t;r.controlBar.toggleClass("vjs-focus-within",m.contains(t))}};var y=function e(){m.removeEventListener("focus",g,true);m.removeEventListener("blur",g,true)};m.addEventListener("focus",g,true);m.addEventListener("blur",g,true);r.on("dispose",y);r.controlBar.on("dispose",y)}}ye(e,r);r.one("beforepluginsetup:ads",function(){var t=r.getChild("controlBar");if(t){t.removeChild("pictureInPictureToggle")}e.getComponent("Component").prototype.fsApi_=r.fsApi_});if(!e.browser.TOUCH_ENABLED){r.addClass("vjs-mouse");if(o.isInBcFrame){e.dom.addClass(i.documentElement,"vjs-mouse")}}else if(e.browser.IS_IPHONE){r.addClass("vjs-native")}r.requestAnimationFrame(function(){var e=i.querySelector(".bc-wrap");r.addClass("vjs-plugins-ready");if(e){e.style.opacity=0}});r.on(["mouseenter","ended","touchend"],function(){r.removeClass("not-hover")});r.on("mouseleave",function(){r.addClass("not-hover");if(!r.controlBar||!r.controlBar.el()){return}if(r.controlBar.hasClass("vjs-control-bar-visible")){r.controlBar.removeClass("vjs-control-bar-visible")}});if(!e.browser.IS_ANY_SAFARI){r.one("loadeddata",function(){if(r.language()!==undefined&&r.catalog&&r.catalog.getMetadata().variants!==undefined){var e=r.language()||"";var t=r.textTracks();if(t){var i=Array.prototype.filter.call(t,function(e){return(e.kind==="captions"||e.kind==="subtitles")&&e.mode==="showing"});var n;var a;if(!i.length){for(a=0;a<t.length;a++){n=t[a];if((n.kind==="captions"||n.kind==="subtitles")&&n.language===e){n.mode="showing";return}}for(a=0;a<t.length;a++){n=t[a];if((n.kind==="captions"||n.kind==="subtitles")&&n.language===e.substring(0,2)){n.mode="showing";return}}}}}})}var _=o.bcShimDestripeTime;if(_!==undefined){if(_>1){r.trigger({type:"usage",name:"sdt-"+(Math.log(_)/Math.LN10).toFixed(1)})}else{r.trigger({type:"usage",name:"sdt-0.0"})}}r.ready(function(){if(r.bcinfo&&r.bcinfo.PLAYER_LOADER||o.brightcovePlayerLoader){r.trigger({type:"usage",name:"player-loader"})}if(r.bcinfo&&r.bcinfo.REACT_PLAYER_LOADER||o.BrightcoveReactPlayerLoader){r.trigger({type:"usage",name:"react-player-loader"})}});if(r.options_.debug){r.log.level("debug");r.log.history.enable()}else{r.log.level("off");r.log.history.disable()}var b=[{name:"proxyTracks",register:ie,opts:{debug:r.options_.debug}},{name:"seekEvents",register:ae,opts:{verbose:r.options_.debug}},{name:"touchActive",register:ce},{name:"urlparams",register:Y,opts:{iframe:o.isInBcFrame,time:s.startTime}},{name:"playerInfo",register:pe},{name:"endscreen",register:me}];b.forEach(function(t){var i=t.name,n=t.opts,a=t.register;if(!r.hasPlugin(i)){a(e)}if(!r.usingPlugin(i)){r[i](n)}});ue(e,r,t);r.on("dispose",function(){r=a.runtime_=null;e.log.history.clear()})}function Me(e,t,i){var r=e.videojs;var n=-1;return function a(s){var o=r.getPlayer(s);if(o){o.trigger({type:"usage",name:"bc-used-as-getter"});return o}n++;var l=e.getRuntime({playerIndex:n});r.hookOnce("beforesetup",function(e,i){i=Q(r,l,e,i);if(I.isFn(t)){return t(r,l,e,i)}return i});r.hookOnce("setup",function(t){be(r,l,t,e);if(I.isFn(i)){i(r,l,t)}});return r.apply(void 0,arguments)}}var Te={accountId:"",adConfigId:"",applicationId:"",playsinline:false,loop:false,muted:false,autoplay:false,crossorigin:false,css:{},plugins:[],debug:false,contextMenu:{},deliveryConfigId:"",embedId:"default",misconfiguredWithMultipleAdPlugins:false,playerId:"default",skin:"luna",usingAdFailover:false,usingIMAPrerollWithSSAI:false,version:"0.0.0"};var Ae={brightcovePlayerLoader:r.brightcovePlayerLoader,BrightcoveReactPlayerLoader:r.BrightcoveReactPlayerLoader,bcShimDestripeTime:r.bcShimDestripeTime,userAgent:r.navigator.userAgent};var we=function(){function e(t,i){if(t===void 0){t={}}if(i===void 0){i={}}var r=e.shared.videojs;if(!r){throw new Error("missing videojs")}this.runtime={environment:r.mergeOptions(Ae,i),settings:r.mergeOptions(Te,t)};if(this.runtime.settings.misconfiguredWithMultipleAdPlugins){r.log.warn('Brightcove Player "'+this.runtime.settings.playerId+'" is mis-configured with multiple ad plugins.')}this.videojs=r;this.util=I;r.bc_=I;this.getAutoplayConditions();this.detectRuntimeEnvironment();this.setupGlobalEnv();I.perf.mark("bcAdBlockDetectStart");V().then(function(e){I.perf.mark("bcAdBlockDetectEnd");I.perf.measure("bcAdBlockDetect","bcAdBlockDetectStart","bcAdBlockDetectEnd")})}var t=e.prototype;t.getRuntime=function e(t){return this.videojs.mergeOptions(this.runtime,{settings:t})};t.getAutoplayConditions=function e(t){if(t===void 0){t="video"}var i=this.runtime.environment;if(!i.autoplay){i.autoplay={}}return O(t,this.videojs).then(function(e){i.autoplay[t]=e;return e})};t.detectRuntimeEnvironment=function e(){var t=this.videojs.dom;var n=this.runtime.environment;var a=t.hasClass(i.documentElement,"bc-iframe");var s=I.qs();n.usingRequireJs=I.isFn(r.define)&&r.define.amd&&I.isFn(r.require&&r.require.toUrl);n.isInAnyFrame=t.isInFrame();n.isInBcFrame=a;n.queryString=a?s.search:{};n.urlHash=a?s.hash:{};this.setScriptUrl();this.setScriptBaseUrl()};t.setScriptUrl=function e(){var t=this.runtime.environment;if(t.isInBcFrame){t.scriptUrl=""}else if(t.usingRequireJs){t.scriptUrl=r.require.toUrl("bc")}else if(i.currentScript){t.scriptUrl=i.currentScript.src}else{var n=i.getElementsByTagName("script");t.scriptUrl=n.length&&n[n.length-1].src||""}};t.setScriptBaseUrl=function e(){var t=this.runtime.environment;if(t.scriptUrl){t.scriptBaseUrl=t.scriptUrl.split("/").slice(0,-1).join("/")}else{t.scriptBaseUrl="."}};t.safeSetGlobal=function e(t,i){if(!I.isNil(r[t])){return this.videojs.log.warn("setting window."+t+" would overwrite an existing global, skipping")}r[t]=i};t.setupGlobalEnv=function e(){var t=this;var i=this.videojs;var r=this.runtime.environment;var n=r.queryStringToWindow;if(!n||!r.isInBcFrame){return}var a=i.mergeOptions(r.queryString);if(n.target){this.safeSetGlobal(n.target,a)}if(Array.isArray(n.globals)){n.globals.forEach(function(e){t.safeSetGlobal(e,a[e])})}};t.createInitializer=function e(t,i){var n=this;var a=this.videojs;var s=r.bc;var o=this.runtime.settings,l=o.embedId,u=o.playerId,c=o.skin,d=o.version;var h=Me(this,t,i);h.SKIN=c;h.VERSION=d;h.videojs=a;h[u+"_"+l]=h;if(s){Object.keys(s).forEach(function(e){var t=s[e];if(typeof t==="function"&&typeof t.videojs==="function"){h[e]=t;delete s[e]}})}Object.defineProperty(h,"usingAdBlocker",{enumerable:true,value:V});Object.defineProperty(h,"getAutoplayConditions",{enumerable:true,value:function e(t){return n.getAutoplayConditions(t)}});r.bc=h;return h};e.dedupeVideojs=function t(i,n){var a=i;e.shared.firstVideojs=n||i;if(n&&n.VERSION===i.VERSION){a=n}else if(r.bc){var s=Object.keys(r.bc);for(var o=0;o<s.length;o++){var l=s[o];var u=r.bc[l];if(typeof u==="function"&&typeof u.videojs==="function"){if(u.videojs.VERSION===i.VERSION){a=u.videojs;break}}}}r.videojs=a;e.shared.videojs=a;return a};e.restoreFirstVideojs=function t(){r.videojs=e.shared.firstVideojs};return e}();we.defaultSettings=Te;we.shared={};we.VERSION=n;return we}(t,e);(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("global/window"),require("global/document")):typeof i==="function"&&i.amd?i(["global/window","global/document"],t):(e=e||self,e.videojs=t(e.window,e.document))})(this,function(t,i){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t;i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i["default"]:i;var r="7.9.7";var n=[];var a=function e(i,r){return function(e,a,s){var o=r.levels[a];var l=new RegExp("^("+o+")$");if(e!=="log"){s.unshift(e.toUpperCase()+":")}s.unshift(i+":");if(n){n.push([].concat(s));var u=n.length-1e3;n.splice(0,u>0?u:0)}if(!t.console){return}var c=t.console[e];if(!c&&e==="debug"){c=t.console.info||t.console.log}if(!c||!o||!l.test(e)){return}c[Array.isArray(s)?"apply":"call"](t.console,s)}};function s(e){var t="info";var i;var r=function e(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++){n[a]=arguments[a]}i("log",t,n)};i=a(e,r);r.createLogger=function(t){return s(e+": "+t)};r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t};r.level=function(e){if(typeof e==="string"){if(!r.levels.hasOwnProperty(e)){throw new Error('"'+e+'" in not a valid log level')}t=e}return t};r.history=function(){return n?[].concat(n):[]};r.history.filter=function(e){return(n||[]).filter(function(t){return new RegExp(".*"+e+".*").test(t[0])})};r.history.clear=function(){if(n){n.length=0}};r.history.disable=function(){if(n!==null){n.length=0;n=null}};r.history.enable=function(){if(n===null){n=[]}};r.error=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++){r[n]=arguments[n]}return i("error",t,r)};r.warn=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++){r[n]=arguments[n]}return i("warn",t,r)};r.debug=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++){r[n]=arguments[n]}return i("debug",t,r)};return r}var o=s("VIDEOJS");var l=o.createLogger;function u(e,t){return t={exports:{}},e(t,t.exports),t.exports}var c=u(function(e){function t(){e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i){if(Object.prototype.hasOwnProperty.call(i,r)){e[r]=i[r]}}}return e};return t.apply(this,arguments)}e.exports=t});var d=Object.prototype.toString;var h=function e(t){return v(t)?Object.keys(t):[]};function f(e,t){h(e).forEach(function(i){return t(e[i],i)})}function p(e,t,i){if(i===void 0){i=0}return h(e).reduce(function(i,r){return t(i,e[r],r)},i)}function m(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++){i[r-1]=arguments[r]}if(Object.assign){return c.apply(void 0,[e].concat(i))}i.forEach(function(t){if(!t){return}f(t,function(t,i){e[i]=t})});return e}function v(e){return!!e&&typeof e==="object"}function g(e){return v(e)&&d.call(e)==="[object Object]"&&e.constructor===Object}function y(e,i){if(!e||!i){return""}if(typeof t.getComputedStyle==="function"){var r=t.getComputedStyle(e);return r?r.getPropertyValue(i)||r[i]:""}return""}function _(e){return typeof e==="string"&&Boolean(e.trim())}function b(e){if(e.indexOf(" ")>=0){throw new Error("class has illegal whitespace characters")}}function M(e){return new RegExp("(^|\\s)"+e+"($|\\s)")}function T(){return i===t.document}function A(e){return v(e)&&e.nodeType===1}function w(){try{return t.parent!==t.self}catch(e){return true}}function E(e){return function(t,r){if(!_(t)){return i[e](null)}if(_(r)){r=i.querySelector(r)}var n=A(r)?r:i;return n[e]&&n[e](t)}}function x(e,t,r,n){if(e===void 0){e="div"}if(t===void 0){t={}}if(r===void 0){r={}}var a=i.createElement(e);Object.getOwnPropertyNames(t).forEach(function(e){var i=t[e];if(e.indexOf("aria-")!==-1||e==="role"||e==="type"){o.warn("Setting attributes in the second argument of createEl()\n"+"has been deprecated. Use the third argument instead.\n"+("createEl(type, properties, attributes). Attempting to set "+e+" to "+i+"."));a.setAttribute(e,i)}else if(e==="textContent"){S(a,i)}else if(a[e]!==i){a[e]=i}});Object.getOwnPropertyNames(r).forEach(function(e){a.setAttribute(e,r[e])});if(n){Y(a,n)}return a}function S(e,t){if(typeof e.textContent==="undefined"){e.innerText=t}else{e.textContent=t}return e}function D(e,t){if(t.firstChild){t.insertBefore(e,t.firstChild)}else{t.appendChild(e)}}function I(e,t){b(t);if(e.classList){return e.classList.contains(t)}return M(t).test(e.className)}function j(e,t){if(e.classList){e.classList.add(t)}else if(!I(e,t)){e.className=(e.className+" "+t).trim()}return e}function L(e,t){if(e.classList){e.classList.remove(t)}else{b(t);e.className=e.className.split(/\s+/).filter(function(e){return e!==t}).join(" ")}return e}function N(e,t,i){var r=I(e,t);if(typeof i==="function"){i=i(e,t)}if(typeof i!=="boolean"){i=!r}if(i===r){return}if(i){j(e,t)}else{L(e,t)}return e}function C(e,t){Object.getOwnPropertyNames(t).forEach(function(i){var r=t[i];if(r===null||typeof r==="undefined"||r===false){e.removeAttribute(i)}else{e.setAttribute(i,r===true?"":r)}})}function O(e){var t={};var i=","+"autoplay,controls,playsinline,loop,muted,default,defaultMuted"+",";if(e&&e.attributes&&e.attributes.length>0){var r=e.attributes;for(var n=r.length-1;n>=0;n--){var a=r[n].name;var s=r[n].value;if(typeof e[a]==="boolean"||i.indexOf(","+a+",")!==-1){s=s!==null?true:false}t[a]=s}}return t}function k(e,t){return e.getAttribute(t)}function P(e,t,i){e.setAttribute(t,i)}function R(e,t){e.removeAttribute(t)}function z(){i.body.focus();i.onselectstart=function(){return false}}function U(){i.onselectstart=function(){return true}}function B(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect();var i={};["bottom","height","left","right","top","width"].forEach(function(e){if(t[e]!==undefined){i[e]=t[e]}});if(!i.height){i.height=parseFloat(y(e,"height"))}if(!i.width){i.width=parseFloat(y(e,"width"))}return i}}function F(e){if(!e||e&&!e.offsetParent){return{left:0,top:0,width:0,height:0}}var t=e.offsetWidth;var i=e.offsetHeight;var r=0;var n=0;do{r+=e.offsetLeft;n+=e.offsetTop;e=e.offsetParent}while(e);return{left:r,top:n,width:t,height:i}}function V(e,t){var i={};var r=F(t.target);var n=F(e);var a=n.width;var s=n.height;var o=t.offsetY-(n.top-r.top);var l=t.offsetX-(n.left-r.left);if(t.changedTouches){l=t.changedTouches[0].pageX-n.left;o=t.changedTouches[0].pageY+n.top}i.y=1-Math.max(0,Math.min(1,o/s));i.x=Math.max(0,Math.min(1,l/a));return i}function G(e){return v(e)&&e.nodeType===3}function H(e){while(e.firstChild){e.removeChild(e.firstChild)}return e}function Q(e){if(typeof e==="function"){e=e()}return(Array.isArray(e)?e:[e]).map(function(e){if(typeof e==="function"){e=e()}if(A(e)||G(e)){return e}if(typeof e==="string"&&/\S/.test(e)){return i.createTextNode(e)}}).filter(function(e){return e})}function Y(e,t){Q(t).forEach(function(t){return e.appendChild(t)});return e}function W(e,t){return Y(H(e),t)}function q(e){if(e.button===undefined&&e.buttons===undefined){return true}if(e.button===0&&e.buttons===undefined){return true}if(e.type==="mouseup"&&e.button===0&&e.buttons===0){return true}if(e.button!==0||e.buttons!==1){return false}return true}var X=E("querySelector");var Z=E("querySelectorAll");var K=Object.freeze({__proto__:null,isReal:T,isEl:A,isInFrame:w,createEl:x,textContent:S,prependTo:D,hasClass:I,addClass:j,removeClass:L,toggleClass:N,setAttributes:C,getAttributes:O,getAttribute:k,setAttribute:P,removeAttribute:R,blockTextSelection:z,unblockTextSelection:U,getBoundingClientRect:B,findPosition:F,getPointerPosition:V,isTextNode:G,emptyEl:H,normalizeContent:Q,appendContent:Y,insertContent:W,isSingleLeftClick:q,$:X,$$:Z});var J=false;var $;var ee=function e(){if(!T()||$.options.autoSetup===false){return}var t=Array.prototype.slice.call(i.getElementsByTagName("video"));var r=Array.prototype.slice.call(i.getElementsByTagName("audio"));var n=Array.prototype.slice.call(i.getElementsByTagName("video-js"));var a=t.concat(r,n);if(a&&a.length>0){for(var s=0,o=a.length;s<o;s++){var l=a[s];if(l&&l.getAttribute){if(l.player===undefined){var u=l.getAttribute("data-setup");if(u!==null){$(l)}}}else{te(1);break}}}else if(!J){te(1)}};function te(e,i){if(i){$=i}t.setTimeout(ee,e)}function ie(){J=true;t.removeEventListener("load",ie)}if(T()){if(i.readyState==="complete"){ie()}else{t.addEventListener("load",ie)}}var re=function e(t){var r=i.createElement("style");r.className=t;return r};var ne=function e(t,i){if(t.styleSheet){t.styleSheet.cssText=i}else{t.textContent=i}};var ae=3;var se=ae;function oe(){return se++}var le;if(!t.WeakMap){le=function(){function e(){this.vdata="vdata"+Math.floor(t.performance&&t.performance.now()||Date.now());this.data={}}var i=e.prototype;i.set=function e(t,i){var r=t[this.vdata]||oe();if(!t[this.vdata]){t[this.vdata]=r}this.data[r]=i;return this};i.get=function e(t){var i=t[this.vdata];if(i){return this.data[i]}o("We have no data for this element",t);return undefined};i.has=function e(t){var i=t[this.vdata];return i in this.data};i["delete"]=function e(t){var i=t[this.vdata];if(i){delete this.data[i];delete t[this.vdata]}};return e}()}var ue=t.WeakMap?new WeakMap:new le;function ce(e,t){if(!ue.has(e)){return}var i=ue.get(e);if(i.handlers[t].length===0){delete i.handlers[t];if(e.removeEventListener){e.removeEventListener(t,i.dispatcher,false)}else if(e.detachEvent){e.detachEvent("on"+t,i.dispatcher)}}if(Object.getOwnPropertyNames(i.handlers).length<=0){delete i.handlers;delete i.dispatcher;delete i.disabled}if(Object.getOwnPropertyNames(i).length===0){ue["delete"](e)}}function de(e,t,i,r){i.forEach(function(i){e(t,i,r)})}function he(e){if(e.fixed_){return e}function r(){return true}function n(){return false}if(!e||!e.isPropagationStopped){var a=e||t.event;e={};for(var s in a){if(s!=="layerX"&&s!=="layerY"&&s!=="keyLocation"&&s!=="webkitMovementX"&&s!=="webkitMovementY"){if(!(s==="returnValue"&&a.preventDefault)){e[s]=a[s]}}}if(!e.target){e.target=e.srcElement||i}if(!e.relatedTarget){e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement}e.preventDefault=function(){if(a.preventDefault){a.preventDefault()}e.returnValue=false;a.returnValue=false;e.defaultPrevented=true};e.defaultPrevented=false;e.stopPropagation=function(){if(a.stopPropagation){a.stopPropagation()}e.cancelBubble=true;a.cancelBubble=true;e.isPropagationStopped=r};e.isPropagationStopped=n;e.stopImmediatePropagation=function(){if(a.stopImmediatePropagation){a.stopImmediatePropagation()}e.isImmediatePropagationStopped=r;e.stopPropagation()};e.isImmediatePropagationStopped=n;if(e.clientX!==null&&e.clientX!==undefined){var o=i.documentElement;var l=i.body;e.pageX=e.clientX+(o&&o.scrollLeft||l&&l.scrollLeft||0)-(o&&o.clientLeft||l&&l.clientLeft||0);e.pageY=e.clientY+(o&&o.scrollTop||l&&l.scrollTop||0)-(o&&o.clientTop||l&&l.clientTop||0)}e.which=e.charCode||e.keyCode;if(e.button!==null&&e.button!==undefined){e.button=e.button&1?0:e.button&4?1:e.button&2?2:0}}e.fixed_=true;return e}var fe;var pe=function e(){if(typeof fe!=="boolean"){fe=false;try{var i=Object.defineProperty({},"passive",{get:function e(){fe=true}});t.addEventListener("test",null,i);t.removeEventListener("test",null,i)}catch(e){}}return fe};var me=["touchstart","touchmove"];function ve(e,t,i){if(Array.isArray(t)){return de(ve,e,t,i)}if(!ue.has(e)){ue.set(e,{})}var r=ue.get(e);if(!r.handlers){r.handlers={}}if(!r.handlers[t]){r.handlers[t]=[]}if(!i.guid){i.guid=oe()}r.handlers[t].push(i);if(!r.dispatcher){r.disabled=false;r.dispatcher=function(t,i){if(r.disabled){return}t=he(t);var n=r.handlers[t.type];if(n){var a=n.slice(0);for(var s=0,l=a.length;s<l;s++){if(t.isImmediatePropagationStopped()){break}else{try{a[s].call(e,t,i)}catch(e){o.error(e)}}}}}}if(r.handlers[t].length===1){if(e.addEventListener){var n=false;if(pe()&&me.indexOf(t)>-1){n={passive:true}}e.addEventListener(t,r.dispatcher,n)}else if(e.attachEvent){e.attachEvent("on"+t,r.dispatcher)}}}function ge(e,t,i){if(!ue.has(e)){return}var r=ue.get(e);if(!r.handlers){return}if(Array.isArray(t)){return de(ge,e,t,i)}var n=function e(t,i){r.handlers[i]=[];ce(t,i)};if(t===undefined){for(var a in r.handlers){if(Object.prototype.hasOwnProperty.call(r.handlers||{},a)){n(e,a)}}return}var s=r.handlers[t];if(!s){return}if(!i){n(e,t);return}if(i.guid){for(var o=0;o<s.length;o++){if(s[o].guid===i.guid){s.splice(o--,1)}}}ce(e,t)}function ye(e,t,i){var r=ue.has(e)?ue.get(e):{};var n=e.parentNode||e.ownerDocument;if(typeof t==="string"){t={type:t,target:e}}else if(!t.target){t.target=e}t=he(t);if(r.dispatcher){r.dispatcher.call(e,t,i)}if(n&&!t.isPropagationStopped()&&t.bubbles===true){ye.call(null,n,t,i)}else if(!n&&!t.defaultPrevented&&t.target&&t.target[t.type]){if(!ue.has(t.target)){ue.set(t.target,{})}var a=ue.get(t.target);if(t.target[t.type]){a.disabled=true;if(typeof t.target[t.type]==="function"){t.target[t.type]()}a.disabled=false}}return!t.defaultPrevented}function _e(e,t,i){if(Array.isArray(t)){return de(_e,e,t,i)}var r=function r(){ge(e,t,r);i.apply(this,arguments)};r.guid=i.guid=i.guid||oe();ve(e,t,r)}function be(e,t,i){var r=function r(){ge(e,t,r);i.apply(this,arguments)};r.guid=i.guid=i.guid||oe();ve(e,t,r)}var Me=Object.freeze({__proto__:null,fixEvent:he,on:ve,off:ge,trigger:ye,one:_e,any:be});var Te=30;var Ae=function e(t,i,r){if(!i.guid){i.guid=oe()}var n=i.bind(t);n.guid=r?r+"_"+i.guid:i.guid;return n};var we=function e(i,r){var n=t.performance.now();var a=function e(){var a=t.performance.now();if(a-n>=r){i.apply(void 0,arguments);n=a}};return a};var Ee=function e(i,r,n,a){if(a===void 0){a=t}var s;var o=function e(){a.clearTimeout(s);s=null};var l=function e(){var t=this;var o=arguments;var l=function e(){s=null;l=null;if(!n){i.apply(t,o)}};if(!s&&n){i.apply(t,o)}a.clearTimeout(s);s=a.setTimeout(l,r)};l.cancel=o;return l};var xe=function e(){};xe.prototype.allowedEvents_={};xe.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){};ve(this,e,t);this.addEventListener=i};xe.prototype.addEventListener=xe.prototype.on;xe.prototype.off=function(e,t){ge(this,e,t)};xe.prototype.removeEventListener=xe.prototype.off;xe.prototype.one=function(e,t){var i=this.addEventListener;this.addEventListener=function(){};_e(this,e,t);this.addEventListener=i};xe.prototype.any=function(e,t){var i=this.addEventListener;this.addEventListener=function(){};be(this,e,t);this.addEventListener=i};xe.prototype.trigger=function(e){var t=e.type||e;if(typeof e==="string"){e={type:t}}e=he(e);if(this.allowedEvents_[t]&&this["on"+t]){this["on"+t](e)}ye(this,e)};xe.prototype.dispatchEvent=xe.prototype.trigger;var Se;xe.prototype.queueTrigger=function(e){var i=this;if(!Se){Se=new Map}var r=e.type||e;var n=Se.get(this);if(!n){n=new Map;Se.set(this,n)}var a=n.get(r);n["delete"](r);t.clearTimeout(a);var s=t.setTimeout(function(){if(n.size===0){n=null;Se["delete"](i)}i.trigger(e)},0);n.set(r,s)};var De=function e(t){return t instanceof xe||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return typeof t[e]==="function"})};var Ie=function e(t,i){if(De(t)){i()}else{if(!t.eventedCallbacks){t.eventedCallbacks=[]}t.eventedCallbacks.push(i)}};var je=function e(t){return typeof t==="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length};var Le=function e(t){if(!t.nodeName&&!De(t)){throw new Error("Invalid target; must be a DOM node or evented object.")}};var Ne=function e(t){if(!je(t)){throw new Error("Invalid event type; must be a non-empty string or array.")}};var Ce=function e(t){if(typeof t!=="function"){throw new Error("Invalid listener; must be a function.")}};var Oe=function e(t,i){var r=i.length<3||i[0]===t||i[0]===t.eventBusEl_;var n;var a;var s;if(r){n=t.eventBusEl_;if(i.length>=3){i.shift()}a=i[0];s=i[1]}else{n=i[0];a=i[1];s=i[2]}Le(n);Ne(a);Ce(s);s=Ae(t,s);return{isTargetingSelf:r,target:n,type:a,listener:s}};var ke=function e(t,i,r,n){Le(t);if(t.nodeName){Me[i](t,r,n)}else{t[i](r,n)}};var Pe={on:function e(){var t=this;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}var a=Oe(this,r),s=a.isTargetingSelf,o=a.target,l=a.type,u=a.listener;ke(o,"on",l,u);if(!s){var c=function e(){return t.off(o,l,u)};c.guid=u.guid;var d=function e(){return t.off("dispose",c)};d.guid=u.guid;ke(this,"on","dispose",c);ke(o,"on","dispose",d)}},one:function e(){var t=this;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}var a=Oe(this,r),s=a.isTargetingSelf,o=a.target,l=a.type,u=a.listener;if(s){ke(o,"one",l,u)}else{var c=function e(){t.off(o,l,e);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}u.apply(null,r)};c.guid=u.guid;ke(o,"one",l,c)}},any:function e(){var t=this;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}var a=Oe(this,r),s=a.isTargetingSelf,o=a.target,l=a.type,u=a.listener;if(s){ke(o,"any",l,u)}else{var c=function e(){t.off(o,l,e);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++){r[n]=arguments[n]}u.apply(null,r)};c.guid=u.guid;ke(o,"any",l,c)}},off:function e(t,i,r){if(!t||je(t)){ge(this.eventBusEl_,t,i)}else{var n=t;var a=i;Le(n);Ne(a);Ce(r);r=Ae(this,r);this.off("dispose",r);if(n.nodeName){ge(n,a,r);ge(n,"dispose",r)}else if(De(n)){n.off(a,r);n.off("dispose",r)}}},trigger:function e(t,i){return ye(this.eventBusEl_,t,i)}};function Re(e,i){if(i===void 0){i={}}var r=i,n=r.eventBusKey;if(n){if(!e[n].nodeName){throw new Error('The eventBusKey "'+n+'" does not refer to an element.')}e.eventBusEl_=e[n]}else{e.eventBusEl_=x("span",{className:"vjs-event-bus"})}m(e,Pe);if(e.eventedCallbacks){e.eventedCallbacks.forEach(function(e){e()})}e.on("dispose",function(){e.off();t.setTimeout(function(){e.eventBusEl_=null},0)});return e}var ze={state:{},setState:function e(t){var i=this;if(typeof t==="function"){t=t()}var r;f(t,function(e,t){if(i.state[t]!==e){r=r||{};r[t]={from:i.state[t],to:e}}i.state[t]=e});if(r&&De(this)){this.trigger({changes:r,type:"statechanged"})}return r}};function Ue(e,t){m(e,ze);e.state=m({},e.state,t);if(typeof e.handleStateChanged==="function"&&De(e)){e.on("statechanged",e.handleStateChanged)}return e}var Be=function e(t){if(typeof t!=="string"){return t}return t.replace(/./,function(e){return e.toLowerCase()})};var Fe=function e(t){if(typeof t!=="string"){return t}return t.replace(/./,function(e){return e.toUpperCase()})};var Ve=function e(t,i){return Fe(t)===Fe(i)};function Ge(){var e={};for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}i.forEach(function(t){if(!t){return}f(t,function(t,i){if(!g(t)){e[i]=t;return}if(!g(e[i])){e[i]={}}e[i]=Ge(e[i],t)})});return e}var He=function(){function e(){this.map_={}}var t=e.prototype;t.has=function e(t){return t in this.map_};t["delete"]=function e(t){var i=this.has(t);delete this.map_[t];return i};t.set=function e(t,i){this.set_[t]=i;return this};t.forEach=function e(t,i){for(var r in this.map_){t.call(i,this.map_[r],r,this)}};return e}();var Qe=t.Map?t.Map:He;var Ye=function(){function e(){this.set_={}}var t=e.prototype;t.has=function e(t){return t in this.set_};t["delete"]=function e(t){var i=this.has(t);delete this.set_[t];return i};t.add=function e(t){this.set_[t]=1;return this};t.forEach=function e(t,i){for(var r in this.set_){t.call(i,r,r,this)}};return e}();var We=t.Set?t.Set:Ye;var qe=function(){function e(e,t,i){if(!e&&this.play){this.player_=e=this}else{this.player_=e}this.isDisposed_=false;this.parentComponent_=null;this.options_=Ge({},this.options_);t=this.options_=Ge(this.options_,t);this.id_=t.id||t.el&&t.el.id;if(!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+oe()}this.name_=t.name||null;if(t.el){this.el_=t.el}else if(t.createEl!==false){this.el_=this.createEl()}if(t.evented!==false){Re(this,{eventBusKey:this.el_?"el_":null})}Ue(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};this.setTimeoutIds_=new We;this.setIntervalIds_=new We;this.rafIds_=new We;this.namedRafs_=new Qe;this.clearingTimersOnDispose_=false;if(t.initChildren!==false){this.initChildren()}this.ready(i);if(t.reportTouchActivity!==false){this.enableTouchActivity()}}var i=e.prototype;i.dispose=function e(){if(this.isDisposed_){return}this.trigger({type:"dispose",bubbles:false});this.isDisposed_=true;if(this.children_){for(var t=this.children_.length-1;t>=0;t--){if(this.children_[t].dispose){this.children_[t].dispose()}}}this.children_=null;this.childIndex_=null;this.childNameIndex_=null;this.parentComponent_=null;if(this.el_){if(this.el_.parentNode){this.el_.parentNode.removeChild(this.el_)}if(ue.has(this.el_)){ue["delete"](this.el_)}this.el_=null}this.player_=null};i.isDisposed=function e(){return Boolean(this.isDisposed_)};i.player=function e(){return this.player_};i.options=function e(t){if(!t){return this.options_}this.options_=Ge(this.options_,t);return this.options_};i.el=function e(){return this.el_};i.createEl=function e(t,i,r){return x(t,i,r)};i.localize=function e(t,i,r){if(r===void 0){r=t}var n=this.player_.language&&this.player_.language();var a=this.player_.languages&&this.player_.languages();var s=a&&a[n];var o=n&&n.split("-")[0];var l=a&&a[o];var u=r;if(s&&s[t]){u=s[t]}else if(l&&l[t]){u=l[t]}if(i){u=u.replace(/\{(\d+)\}/g,function(e,t){var r=i[t-1];var n=r;if(typeof r==="undefined"){n=e}return n})}return u};i.contentEl=function e(){return this.contentEl_||this.el_};i.id=function e(){return this.id_};i.name=function e(){return this.name_};i.children=function e(){return this.children_};i.getChildById=function e(t){return this.childIndex_[t]};i.getChild=function e(t){if(!t){return}return this.childNameIndex_[t]};i.getDescendant=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}i=i.reduce(function(e,t){return e.concat(t)},[]);var n=this;for(var a=0;a<i.length;a++){n=n.getChild(i[a]);if(!n||!n.getChild){return}}return n};i.addChild=function t(i,r,n){if(r===void 0){r={}}if(n===void 0){n=this.children_.length}var a;var s;if(typeof i==="string"){s=Fe(i);var o=r.componentClass||s;r.name=s;var l=e.getComponent(o);if(!l){throw new Error("Component "+o+" does not exist")}if(typeof l!=="function"){return null}a=new l(this.player_||this,r)}else{a=i}if(a.parentComponent_){a.parentComponent_.removeChild(a)}this.children_.splice(n,0,a);a.parentComponent_=this;if(typeof a.id==="function"){this.childIndex_[a.id()]=a}s=s||a.name&&Fe(a.name());if(s){this.childNameIndex_[s]=a;this.childNameIndex_[Be(s)]=a}if(typeof a.el==="function"&&a.el()){var u=null;if(this.children_[n+1]){if(this.children_[n+1].el_){u=this.children_[n+1].el_}else if(A(this.children_[n+1])){u=this.children_[n+1]}}this.contentEl().insertBefore(a.el(),u)}return a};i.removeChild=function e(t){if(typeof t==="string"){t=this.getChild(t)}if(!t||!this.children_){return}var i=false;for(var r=this.children_.length-1;r>=0;r--){if(this.children_[r]===t){i=true;this.children_.splice(r,1);break}}if(!i){return}t.parentComponent_=null;this.childIndex_[t.id()]=null;this.childNameIndex_[Fe(t.name())]=null;this.childNameIndex_[Be(t.name())]=null;var n=t.el();if(n&&n.parentNode===this.contentEl()){this.contentEl().removeChild(t.el())}};i.initChildren=function t(){var i=this;var r=this.options_.children;if(r){var n=this.options_;var a=function e(t){var r=t.name;var a=t.opts;if(n[r]!==undefined){a=n[r]}if(a===false){return}if(a===true){a={}}a.playerOptions=i.options_.playerOptions;var s=i.addChild(r,a);if(s){i[r]=s}};var s;var o=e.getComponent("Tech");if(Array.isArray(r)){s=r}else{s=Object.keys(r)}s.concat(Object.keys(this.options_).filter(function(e){return!s.some(function(t){if(typeof t==="string"){return e===t}return e===t.name})})).map(function(e){var t;var n;if(typeof e==="string"){t=e;n=r[t]||i.options_[t]||{}}else{t=e.name;n=e}return{name:t,opts:n}}).filter(function(t){var i=e.getComponent(t.opts.componentClass||Fe(t.name));return i&&!o.isTech(i)}).forEach(a)}};i.buildCSSClass=function e(){return""};i.ready=function e(t,i){if(i===void 0){i=false}if(!t){return}if(!this.isReady_){this.readyQueue_=this.readyQueue_||[];this.readyQueue_.push(t);return}if(i){t.call(this)}else{this.setTimeout(t,1)}};i.triggerReady=function e(){this.isReady_=true;this.setTimeout(function(){var e=this.readyQueue_;this.readyQueue_=[];if(e&&e.length>0){e.forEach(function(e){e.call(this)},this)}this.trigger("ready")},1)};i.$=function e(t,i){return X(t,i||this.contentEl())};i.$$=function e(t,i){return Z(t,i||this.contentEl())};i.hasClass=function e(t){return I(this.el_,t)};i.addClass=function e(t){j(this.el_,t)};i.removeClass=function e(t){L(this.el_,t)};i.toggleClass=function e(t,i){N(this.el_,t,i)};i.show=function e(){this.removeClass("vjs-hidden")};i.hide=function e(){this.addClass("vjs-hidden")};i.lockShowing=function e(){this.addClass("vjs-lock-showing")};i.unlockShowing=function e(){this.removeClass("vjs-lock-showing")};i.getAttribute=function e(t){return k(this.el_,t)};i.setAttribute=function e(t,i){P(this.el_,t,i)};i.removeAttribute=function e(t){R(this.el_,t)};i.width=function e(t,i){return this.dimension("width",t,i)};i.height=function e(t,i){return this.dimension("height",t,i)};i.dimensions=function e(t,i){this.width(t,true);this.height(i)};i.dimension=function e(t,i,r){if(i!==undefined){if(i===null||i!==i){i=0}if((""+i).indexOf("%")!==-1||(""+i).indexOf("px")!==-1){this.el_.style[t]=i}else if(i==="auto"){this.el_.style[t]=""}else{this.el_.style[t]=i+"px"}if(!r){this.trigger("componentresize")}return}if(!this.el_){return 0}var n=this.el_.style[t];var a=n.indexOf("px");if(a!==-1){return parseInt(n.slice(0,a),10)}return parseInt(this.el_["offset"+Fe(t)],10)};i.currentDimension=function e(t){var i=0;if(t!=="width"&&t!=="height"){throw new Error("currentDimension only accepts width or height value")}i=y(this.el_,t);i=parseFloat(i);if(i===0||isNaN(i)){var r="offset"+Fe(t);i=this.el_[r]}return i};i.currentDimensions=function e(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};i.currentWidth=function e(){return this.currentDimension("width")};i.currentHeight=function e(){return this.currentDimension("height")};i.focus=function e(){this.el_.focus()};i.blur=function e(){this.el_.blur()};i.handleKeyDown=function e(t){if(this.player_){t.stopPropagation();this.player_.handleKeyDown(t)}};i.handleKeyPress=function e(t){this.handleKeyDown(t)};i.emitTapEvents=function e(){var i=0;var r=null;var n=10;var a=200;var s;this.on("touchstart",function(e){if(e.touches.length===1){r={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY};i=t.performance.now();s=true}});this.on("touchmove",function(e){if(e.touches.length>1){s=false}else if(r){var t=e.touches[0].pageX-r.pageX;var i=e.touches[0].pageY-r.pageY;var a=Math.sqrt(t*t+i*i);if(a>n){s=false}}});var o=function e(){s=false};this.on("touchleave",o);this.on("touchcancel",o);this.on("touchend",function(e){r=null;if(s===true){var n=t.performance.now()-i;if(n<a){e.preventDefault();this.trigger("tap")}}})};i.enableTouchActivity=function e(){if(!this.player()||!this.player().reportUserActivity){return}var t=Ae(this.player(),this.player().reportUserActivity);var i;this.on("touchstart",function(){t();this.clearInterval(i);i=this.setInterval(t,250)});var r=function e(r){t();this.clearInterval(i)};this.on("touchmove",t);this.on("touchend",r);this.on("touchcancel",r)};i.setTimeout=function e(i,r){var n=this;var a;i=Ae(this,i);this.clearTimersOnDispose_();a=t.setTimeout(function(){if(n.setTimeoutIds_.has(a)){n.setTimeoutIds_["delete"](a)}i()},r);this.setTimeoutIds_.add(a);return a};i.clearTimeout=function e(i){if(this.setTimeoutIds_.has(i)){this.setTimeoutIds_["delete"](i);t.clearTimeout(i)}return i};i.setInterval=function e(i,r){i=Ae(this,i);this.clearTimersOnDispose_();var n=t.setInterval(i,r);this.setIntervalIds_.add(n);return n};i.clearInterval=function e(i){if(this.setIntervalIds_.has(i)){this.setIntervalIds_["delete"](i);t.clearInterval(i)}return i};i.requestAnimationFrame=function e(i){var r=this;if(!this.supportsRaf_){return this.setTimeout(i,1e3/60)}this.clearTimersOnDispose_();var n;i=Ae(this,i);n=t.requestAnimationFrame(function(){if(r.rafIds_.has(n)){r.rafIds_["delete"](n)}i()});this.rafIds_.add(n);return n};i.requestNamedAnimationFrame=function e(t,i){var r=this;if(this.namedRafs_.has(t)){return}this.clearTimersOnDispose_();i=Ae(this,i);var n=this.requestAnimationFrame(function(){i();if(r.namedRafs_.has(t)){r.namedRafs_["delete"](t)}});this.namedRafs_.set(t,n);return t};i.cancelNamedAnimationFrame=function e(t){if(!this.namedRafs_.has(t)){return}this.cancelAnimationFrame(this.namedRafs_.get(t));this.namedRafs_["delete"](t)};i.cancelAnimationFrame=function e(i){if(!this.supportsRaf_){return this.clearTimeout(i)}if(this.rafIds_.has(i)){this.rafIds_["delete"](i);t.cancelAnimationFrame(i)}return i};i.clearTimersOnDispose_=function e(){var t=this;if(this.clearingTimersOnDispose_){return}this.clearingTimersOnDispose_=true;this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var i=e[0],r=e[1];t[i].forEach(function(e,i){return t[r](i)})});t.clearingTimersOnDispose_=false})};e.registerComponent=function t(i,r){if(typeof i!=="string"||!i){throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.')}var n=e.getComponent("Tech");var a=n&&n.isTech(r);var s=e===r||e.prototype.isPrototypeOf(r.prototype);if(a||!s){var o;if(a){o="techs must be registered using Tech.registerTech()"}else{o="must be a Component subclass"}throw new Error('Illegal component, "'+i+'"; '+o+".")}i=Fe(i);if(!e.components_){e.components_={}}var l=e.getComponent("Player");if(i==="Player"&&l&&l.players){var u=l.players;var c=Object.keys(u);if(u&&c.length>0&&c.map(function(e){return u[e]}).every(Boolean)){throw new Error("Can not register Player component after player has been created.")}}e.components_[i]=r;e.components_[Be(i)]=r;return r};e.getComponent=function t(i){if(!i||!e.components_){return}return e.components_[i]};return e}();qe.prototype.supportsRaf_=typeof t.requestAnimationFrame==="function"&&typeof t.cancelAnimationFrame==="function";qe.registerComponent("Component",qe);function Xe(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var Ze=Xe;var Ke=u(function(e){function t(i){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){e.exports=t=function e(t){return typeof t}}else{e.exports=t=function e(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return t(i)}e.exports=t});var Je=u(function(e){function t(i){e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)};return t(i)}e.exports=t});function $e(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var et=$e;var tt=t.navigator&&t.navigator.userAgent||"";var it=/AppleWebKit\/([\d.]+)/i.exec(tt);var rt=it?parseFloat(it.pop()):null;var nt=/iPod/i.test(tt);var at=function(){var e=tt.match(/OS (\d+)_/i);if(e&&e[1]){return e[1]}return null}();var st=/Android/i.test(tt);var ot=function(){var e=tt.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e){return null}var t=e[1]&&parseFloat(e[1]);var i=e[2]&&parseFloat(e[2]);if(t&&i){return parseFloat(e[1]+"."+e[2])}else if(t){return t}return null}();var lt=st&&ot<5&&rt<537;var ut=/Firefox/i.test(tt);var ct=/Edg/i.test(tt);var dt=!ct&&(/Chrome/i.test(tt)||/CriOS/i.test(tt));var ht=function(){var e=tt.match(/(Chrome|CriOS)\/(\d+)/);if(e&&e[2]){return parseFloat(e[2])}return null}();var ft=function(){var e=/MSIE\s(\d+)\.\d/.exec(tt);var t=e&&parseFloat(e[1]);if(!t&&/Trident\/7.0/i.test(tt)&&/rv:11.0/.test(tt)){t=11}return t}();var pt=/Safari/i.test(tt)&&!dt&&!st&&!ct;var mt=/Windows/i.test(tt);var vt=T()&&("ontouchstart"in t||t.navigator.maxTouchPoints||t.DocumentTouch&&t.document instanceof t.DocumentTouch);var gt=/iPad/i.test(tt)||pt&&vt&&!/iPhone/i.test(tt);var yt=/iPhone/i.test(tt)&&!gt;var _t=yt||gt||nt;var bt=(pt||_t)&&!dt;var Mt=Object.freeze({__proto__:null,IS_IPOD:nt,IOS_VERSION:at,IS_ANDROID:st,ANDROID_VERSION:ot,IS_NATIVE_ANDROID:lt,IS_FIREFOX:ut,IS_EDGE:ct,IS_CHROME:dt,CHROME_VERSION:ht,IE_VERSION:ft,IS_SAFARI:pt,IS_WINDOWS:mt,TOUCH_ENABLED:vt,IS_IPAD:gt,IS_IPHONE:yt,IS_IOS:_t,IS_ANY_SAFARI:bt});function Tt(e,t,i){if(typeof t!=="number"||t<0||t>i){throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}}function At(e,t,i,r){Tt(e,r,i.length-1);return i[r][t]}function wt(e){if(e===undefined||e.length===0){return{length:0,start:function e(){throw new Error("This TimeRanges object is empty")},end:function e(){throw new Error("This TimeRanges object is empty")}}}return{length:e.length,start:At.bind(null,"start",0,e),end:At.bind(null,"end",1,e)}}function Et(e,t){if(Array.isArray(e)){return wt(e)}else if(e===undefined||t===undefined){return wt()}return wt([[e,t]])}function xt(e,t){var i=0;var r;var n;if(!t){return 0}if(!e||!e.length){e=Et(0,0)}for(var a=0;a<e.length;a++){r=e.start(a);n=e.end(a);if(n>t){n=t}i+=n-r}return i/t}var St={prefixed:true};var Dt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]];var It=Dt[0];var jt;for(var Lt=0;Lt<Dt.length;Lt++){if(Dt[Lt][1]in i){jt=Dt[Lt];break}}if(jt){for(var Nt=0;Nt<jt.length;Nt++){St[It[Nt]]=jt[Nt]}St.prefixed=jt[0]!==It[0]}function Ct(e){if(e instanceof Ct){return e}if(typeof e==="number"){this.code=e}else if(typeof e==="string"){this.message=e}else if(v(e)){if(typeof e.code==="number"){this.code=e.code}m(this,e)}if(!this.message){this.message=Ct.defaultMessages[this.code]||""}}Ct.prototype.code=0;Ct.prototype.message="";Ct.prototype.status=null;Ct.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Ct.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Ot=0;Ot<Ct.errorTypes.length;Ot++){Ct[Ct.errorTypes[Ot]]=Ot;Ct.prototype[Ct.errorTypes[Ot]]=Ot}var kt=Pt;function Pt(e,t){var i;var r=null;try{i=JSON.parse(e,t)}catch(e){r=e}return[r,i]}function Rt(e){return e!==undefined&&e!==null&&typeof e.then==="function"}function zt(e){if(Rt(e)){e.then(null,function(e){})}}var Ut=function e(t){var i=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,i,r){if(t[i]){e[i]=t[i]}return e},{cues:t.cues&&Array.prototype.map.call(t.cues,function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}})});return i};var Bt=function e(t){var i=t.$$("track");var r=Array.prototype.map.call(i,function(e){return e.track});var n=Array.prototype.map.call(i,function(e){var t=Ut(e.track);if(e.src){t.src=e.src}return t});return n.concat(Array.prototype.filter.call(t.textTracks(),function(e){return r.indexOf(e)===-1}).map(Ut))};var Ft=function e(t,i){t.forEach(function(e){var t=i.addRemoteTextTrack(e).track;if(!e.src&&e.cues){e.cues.forEach(function(e){return t.addCue(e)})}});return i.textTracks()};var Vt={textTracksToJson:Bt,jsonToTextTracks:Ft,trackToJson_:Ut};var Gt=u(function(e,t){function i(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;if(t)e=t}if("number"===typeof e)return s[e];var i=String(e);var a=r[i.toLowerCase()];if(a)return a;var a=n[i.toLowerCase()];if(a)return a;if(i.length===1)return i.charCodeAt(0);return undefined}i.isEventKey=function e(t,i){if(t&&"object"===typeof t){var a=t.which||t.keyCode||t.charCode;if(a===null||a===undefined){return false}if(typeof i==="string"){var s=r[i.toLowerCase()];if(s){return s===a}var s=n[i.toLowerCase()];if(s){return s===a}}else if(typeof i==="number"){return i===a}return false}};t=e.exports=i;var r=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};var n=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++){r[String.fromCharCode(a)]=a-32}for(var a=48;a<58;a++){r[a-48]=a}for(a=1;a<13;a++){r["f"+a]=a+111}for(a=0;a<10;a++){r["numpad "+a]=a+96}var s=t.names=t.title={};for(a in r){s[r[a]]=a}for(var o in n){r[o]=n[o]}});var Ht=Gt.code;var Qt=Gt.codes;var Yt=Gt.aliases;var Wt=Gt.names;var qt=Gt.title;var Xt="vjs-modal-dialog";var Zt=function(e){et(r,e);function r(t,i){var r;r=e.call(this,t,i)||this;r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=false;r.closeable(!r.options_.uncloseable);r.content(r.options_.content);r.contentEl_=x("div",{className:Xt+"-content"},{role:"document"});r.descEl_=x("p",{className:Xt+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")});S(r.descEl_,r.description());r.el_.appendChild(r.descEl_);r.el_.appendChild(r.contentEl_);return r}var n=r.prototype;n.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})};n.dispose=function t(){this.contentEl_=null;this.descEl_=null;this.previouslyActiveEl_=null;e.prototype.dispose.call(this)};n.buildCSSClass=function t(){return Xt+" vjs-hidden "+e.prototype.buildCSSClass.call(this)};n.label=function e(){return this.localize(this.options_.label||"Modal Window")};n.description=function e(){var t=this.options_.description||this.localize("This is a modal window.");if(this.closeable()){t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")}return t};n.open=function e(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen");this.opened_=true;if(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_){this.fill()}this.wasPlaying_=!t.paused();if(this.options_.pauseOnOpen&&this.wasPlaying_){t.pause()}this.on("keydown",this.handleKeyDown);this.hadControls_=t.controls();t.controls(false);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=true}};n.opened=function e(t){if(typeof t==="boolean"){this[t?"open":"close"]()}return this.opened_};n.close=function e(){if(!this.opened_){return}var t=this.player();this.trigger("beforemodalclose");this.opened_=false;if(this.wasPlaying_&&this.options_.pauseOnOpen){t.play()}this.off("keydown",this.handleKeyDown);if(this.hadControls_){t.controls(true)}this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();if(this.options_.temporary){this.dispose()}};n.closeable=function e(t){if(typeof t==="boolean"){var e=this.closeable_=!!t;var i=this.getChild("closeButton");if(e&&!i){var r=this.contentEl_;this.contentEl_=this.el_;i=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=r;this.on(i,"close",this.close)}if(!e&&i){this.off(i,"close",this.close);this.removeChild(i);i.dispose()}}return this.closeable_};n.fill=function e(){this.fillWith(this.content())};n.fillWith=function e(t){var i=this.contentEl();var r=i.parentNode;var n=i.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=true;r.removeChild(i);this.empty();W(i,t);this.trigger("modalfill");if(n){r.insertBefore(i,n)}else{r.appendChild(i)}var a=this.getChild("closeButton");if(a){r.appendChild(a.el_)}};n.empty=function e(){this.trigger("beforemodalempty");H(this.contentEl());this.trigger("modalempty")};n.content=function e(t){if(typeof t!=="undefined"){this.content_=t}return this.content_};n.conditionalFocus_=function e(){var t=i.activeElement;var r=this.player_.el_;this.previouslyActiveEl_=null;if(r.contains(t)||r===t){this.previouslyActiveEl_=t;this.focus()}};n.conditionalBlur_=function e(){if(this.previouslyActiveEl_){this.previouslyActiveEl_.focus();this.previouslyActiveEl_=null}};n.handleKeyDown=function e(t){t.stopPropagation();if(Gt.isEventKey(t,"Escape")&&this.closeable()){t.preventDefault();this.close();return}if(!Gt.isEventKey(t,"Tab")){return}var r=this.focusableEls_();var n=this.el_.querySelector(":focus");var a;for(var s=0;s<r.length;s++){if(n===r[s]){a=s;break}}if(i.activeElement===this.el_){a=0}if(t.shiftKey&&a===0){r[r.length-1].focus();t.preventDefault()}else if(!t.shiftKey&&a===r.length-1){r[0].focus();t.preventDefault()}};n.focusableEls_=function e(){var i=this.el_.querySelectorAll("*");return Array.prototype.filter.call(i,function(e){return(e instanceof t.HTMLAnchorElement||e instanceof t.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof t.HTMLInputElement||e instanceof t.HTMLSelectElement||e instanceof t.HTMLTextAreaElement||e instanceof t.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof t.HTMLIFrameElement||e instanceof t.HTMLObjectElement||e instanceof t.HTMLEmbedElement||e.hasAttribute("tabindex")&&e.getAttribute("tabindex")!==-1||e.hasAttribute("contenteditable")})};return r}(qe);Zt.prototype.options_={pauseOnOpen:true,temporary:true};qe.registerComponent("ModalDialog",Zt);var Kt=function(e){et(t,e);function t(t){var i;if(t===void 0){t=[]}i=e.call(this)||this;i.tracks_=[];Object.defineProperty(Ze(i),"length",{get:function e(){return this.tracks_.length}});for(var r=0;r<t.length;r++){i.addTrack(t[r])}return i}var i=t.prototype;i.addTrack=function e(t){var i=this.tracks_.length;if(!(""+i in this)){Object.defineProperty(this,i,{get:function e(){return this.tracks_[i]}})}if(this.tracks_.indexOf(t)===-1){this.tracks_.push(t);this.trigger({track:t,type:"addtrack",target:this})}};i.removeTrack=function e(t){var i;for(var r=0,n=this.length;r<n;r++){if(this[r]===t){i=this[r];if(i.off){i.off()}this.tracks_.splice(r,1);break}}if(!i){return}this.trigger({track:i,type:"removetrack",target:this})};i.getTrackById=function e(t){var i=null;for(var r=0,n=this.length;r<n;r++){var a=this[r];if(a.id===t){i=a;break}}return i};return t}(xe);Kt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var Jt in Kt.prototype.allowedEvents_){Kt.prototype["on"+Jt]=null}var $t=function e(t,i){for(var r=0;r<t.length;r++){if(!Object.keys(t[r]).length||i.id===t[r].id){continue}t[r].enabled=false}};var ei=function(e){et(t,e);function t(t){var i;if(t===void 0){t=[]}for(var r=t.length-1;r>=0;r--){if(t[r].enabled){$t(t,t[r]);break}}i=e.call(this,t)||this;i.changing_=false;return i}var i=t.prototype;i.addTrack=function t(i){var r=this;if(i.enabled){$t(this,i)}e.prototype.addTrack.call(this,i);if(!i.addEventListener){return}i.enabledChange_=function(){if(r.changing_){return}r.changing_=true;$t(r,i);r.changing_=false;r.trigger("change")};i.addEventListener("enabledchange",i.enabledChange_)};i.removeTrack=function t(i){e.prototype.removeTrack.call(this,i);if(i.removeEventListener&&i.enabledChange_){i.removeEventListener("enabledchange",i.enabledChange_);i.enabledChange_=null}};return t}(Kt);var ti=function e(t,i){for(var r=0;r<t.length;r++){if(!Object.keys(t[r]).length||i.id===t[r].id){continue}t[r].selected=false}};var ii=function(e){et(t,e);function t(t){var i;if(t===void 0){t=[]}for(var r=t.length-1;r>=0;r--){if(t[r].selected){ti(t,t[r]);break}}i=e.call(this,t)||this;i.changing_=false;Object.defineProperty(Ze(i),"selectedIndex",{get:function e(){for(var t=0;t<this.length;t++){if(this[t].selected){return t}}return-1},set:function e(){}});return i}var i=t.prototype;i.addTrack=function t(i){var r=this;if(i.selected){ti(this,i)}e.prototype.addTrack.call(this,i);if(!i.addEventListener){return}i.selectedChange_=function(){if(r.changing_){return}r.changing_=true;ti(r,i);r.changing_=false;r.trigger("change")};i.addEventListener("selectedchange",i.selectedChange_)};i.removeTrack=function t(i){e.prototype.removeTrack.call(this,i);if(i.removeEventListener&&i.selectedChange_){i.removeEventListener("selectedchange",i.selectedChange_);i.selectedChange_=null}};return t}(Kt);var ri=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.addTrack=function t(i){var r=this;e.prototype.addTrack.call(this,i);if(!this.queueChange_){this.queueChange_=function(){return r.queueTrigger("change")}}if(!this.triggerSelectedlanguagechange){this.triggerSelectedlanguagechange_=function(){return r.trigger("selectedlanguagechange")}}i.addEventListener("modechange",this.queueChange_);var n=["metadata","chapters"];if(n.indexOf(i.kind)===-1){i.addEventListener("modechange",this.triggerSelectedlanguagechange_)}};i.removeTrack=function t(i){e.prototype.removeTrack.call(this,i);if(i.removeEventListener){if(this.queueChange_){i.removeEventListener("modechange",this.queueChange_)}if(this.selectedlanguagechange_){i.removeEventListener("modechange",this.triggerSelectedlanguagechange_)}}};return t}(Kt);var ni=function(){function e(e){if(e===void 0){e=[]}this.trackElements_=[];Object.defineProperty(this,"length",{get:function e(){return this.trackElements_.length}});for(var t=0,i=e.length;t<i;t++){this.addTrackElement_(e[t])}}var t=e.prototype;t.addTrackElement_=function e(t){var i=this.trackElements_.length;if(!(""+i in this)){Object.defineProperty(this,i,{get:function e(){return this.trackElements_[i]}})}if(this.trackElements_.indexOf(t)===-1){this.trackElements_.push(t)}};t.getTrackElementByTrack_=function e(t){var i;for(var r=0,n=this.trackElements_.length;r<n;r++){if(t===this.trackElements_[r].track){i=this.trackElements_[r];break}}return i};t.removeTrackElement_=function e(t){for(var i=0,r=this.trackElements_.length;i<r;i++){if(t===this.trackElements_[i]){if(this.trackElements_[i].track&&typeof this.trackElements_[i].track.off==="function"){this.trackElements_[i].track.off()}if(typeof this.trackElements_[i].off==="function"){this.trackElements_[i].off()}this.trackElements_.splice(i,1);break}}};return e}();var ai=function(){function e(t){e.prototype.setCues_.call(this,t);Object.defineProperty(this,"length",{get:function e(){return this.length_}})}var t=e.prototype;t.setCues_=function e(t){var i=this.length||0;var r=0;var n=t.length;this.cues_=t;this.length_=t.length;var a=function e(t){if(!(""+t in this)){Object.defineProperty(this,""+t,{get:function e(){return this.cues_[t]}})}};if(i<n){r=i;for(;r<n;r++){a.call(this,r)}}};t.getCueById=function e(t){var i=null;for(var r=0,n=this.length;r<n;r++){var a=this[r];if(a.id===t){i=a;break}}return i};return e}();var si={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"};var oi={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"};var li={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};var ui={disabled:"disabled",hidden:"hidden",showing:"showing"};var ci=function(e){et(t,e);function t(t){var i;if(t===void 0){t={}}i=e.call(this)||this;var r={id:t.id||"vjs_track_"+oe(),kind:t.kind||"",label:t.label||"",language:t.language||""};var n=function e(t){Object.defineProperty(Ze(i),t,{get:function e(){return r[t]},set:function e(){}})};for(var a in r){n(a)}return i}return t}(xe);var di=function e(r){var n=["protocol","hostname","port","pathname","search","hash","host"];var a=i.createElement("a");a.href=r;var s=a.host===""&&a.protocol!=="file:";var o;if(s){o=i.createElement("div");o.innerHTML='<a href="'+r+'"></a>';a=o.firstChild;o.setAttribute("style","display:none; position:absolute;");i.body.appendChild(o)}var l={};for(var u=0;u<n.length;u++){l[n[u]]=a[n[u]]}if(l.protocol==="http:"){l.host=l.host.replace(/:80$/,"")}if(l.protocol==="https:"){l.host=l.host.replace(/:443$/,"")}if(!l.protocol){l.protocol=t.location.protocol}if(s){i.body.removeChild(o)}return l};var hi=function e(t){if(!t.match(/^https?:\/\//)){var r=i.createElement("div");r.innerHTML='<a href="'+t+'">x</a>';t=r.firstChild.href}return t};var fi=function e(t){if(typeof t==="string"){var i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/;var r=i.exec(t);if(r){return r.pop().toLowerCase()}}return""};var pi=function e(i,r){if(r===void 0){r=t.location}var n=di(i);var a=n.protocol===":"?r.protocol:n.protocol;var s=a+n.host!==r.protocol+r.host;return s};var mi=Object.freeze({__proto__:null,parseUrl:di,getAbsoluteURL:hi,getFileExtension:fi,isCrossOrigin:pi});var vi=yi;var gi=Object.prototype.toString;function yi(t){var i=gi.call(t);return i==="[object Function]"||typeof t==="function"&&i!=="[object RegExp]"||typeof e!=="undefined"&&(t===e.setTimeout||t===e.alert||t===e.confirm||t===e.prompt)}var _i=function e(t){var i={};if(!t){return i}t.trim().split("\n").forEach(function(e){var t=e.indexOf(":");var r=e.slice(0,t).trim().toLowerCase();var n=e.slice(t+1).trim();if(typeof i[r]==="undefined"){i[r]=n}else if(Array.isArray(i[r])){i[r].push(n)}else{i[r]=[i[r],n]}});return i};var bi=Ei;var Mi=Ei;Ei.XMLHttpRequest=t.XMLHttpRequest||Di;Ei.XDomainRequest="withCredentials"in new Ei.XMLHttpRequest?Ei.XMLHttpRequest:t.XDomainRequest;Ti(["get","put","post","patch","head","delete"],function(e){Ei[e==="delete"?"del":e]=function(t,i,r){i=wi(t,i,r);i.method=e.toUpperCase();return xi(i)}});function Ti(e,t){for(var i=0;i<e.length;i++){t(e[i])}}function Ai(e){for(var t in e){if(e.hasOwnProperty(t))return false}return true}function wi(e,t,i){var r=e;if(vi(t)){i=t;if(typeof e==="string"){r={uri:e}}}else{r=c({},t,{uri:e})}r.callback=i;return r}function Ei(e,t,i){t=wi(e,t,i);return xi(t)}function xi(e){if(typeof e.callback==="undefined"){throw new Error("callback argument missing")}var t=false;var i=function i(r,n,a){if(!t){t=true;e.callback(r,n,a)}};function r(){if(o.readyState===4){setTimeout(s,0)}}function n(){var e=undefined;if(o.response){e=o.response}else{e=o.responseText||Si(o)}if(m){try{e=JSON.parse(e)}catch(e){}}return e}function a(e){clearTimeout(v);if(!(e instanceof Error)){e=new Error(""+(e||"Unknown XMLHttpRequest Error"))}e.statusCode=0;return i(e,g)}function s(){if(u)return;var t;clearTimeout(v);if(e.useXDR&&o.status===undefined){t=200}else{t=o.status===1223?204:o.status}var r=g;var a=null;if(t!==0){r={body:n(),statusCode:t,method:d,headers:{},url:c,rawRequest:o};if(o.getAllResponseHeaders){r.headers=_i(o.getAllResponseHeaders())}}else{a=new Error("Internal XMLHttpRequest Error")}return i(a,r,r.body)}var o=e.xhr||null;if(!o){if(e.cors||e.useXDR){o=new Ei.XDomainRequest}else{o=new Ei.XMLHttpRequest}}var l;var u;var c=o.url=e.uri||e.url;var d=o.method=e.method||"GET";var h=e.body||e.data;var f=o.headers=e.headers||{};var p=!!e.sync;var m=false;var v;var g={body:undefined,headers:{},statusCode:0,method:d,url:c,rawRequest:o};if("json"in e&&e.json!==false){m=true;f["accept"]||f["Accept"]||(f["Accept"]="application/json");if(d!=="GET"&&d!=="HEAD"){f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json");h=JSON.stringify(e.json===true?h:e.json)}}o.onreadystatechange=r;o.onload=s;o.onerror=a;o.onprogress=function(){};o.onabort=function(){u=true};o.ontimeout=a;o.open(d,c,!p,e.username,e.password);if(!p){o.withCredentials=!!e.withCredentials}if(!p&&e.timeout>0){v=setTimeout(function(){if(u)return;u=true;o.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";a(e)},e.timeout)}if(o.setRequestHeader){for(l in f){if(f.hasOwnProperty(l)){o.setRequestHeader(l,f[l])}}}else if(e.headers&&!Ai(e.headers)){throw new Error("Headers cannot be set on an XDomainRequest object")}if("responseType"in e){o.responseType=e.responseType}if("beforeSend"in e&&typeof e.beforeSend==="function"){e.beforeSend(o)}o.send(h||null);return o}function Si(e){try{if(e.responseType==="document"){return e.responseXML}var t=e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!t){return e.responseXML}}catch(e){}return null}function Di(){}bi["default"]=Mi;var Ii=function e(i,r){var n=new t.WebVTT.Parser(t,t.vttjs,t.WebVTT.StringDecoder());var a=[];n.oncue=function(e){r.addCue(e)};n.onparsingerror=function(e){a.push(e)};n.onflush=function(){r.trigger({type:"loadeddata",target:r})};n.parse(i);if(a.length>0){if(t.console&&t.console.groupCollapsed){t.console.groupCollapsed("Text Track parsing errors for "+r.src)}a.forEach(function(e){return o.error(e)});if(t.console&&t.console.groupEnd){t.console.groupEnd()}}n.flush()};var ji=function e(i,r){var n={uri:i};var a=pi(i);if(a){n.cors=a}var s=r.tech_.crossOrigin()==="use-credentials";if(s){n.withCredentials=s}bi(n,Ae(this,function(e,i,n){if(e){return o.error(e,i)}r.loaded_=true;if(typeof t.WebVTT!=="function"){if(r.tech_){r.tech_.any(["vttjsloaded","vttjserror"],function(e){if(e.type==="vttjserror"){o.error("vttjs failed to load, stopping trying to process "+r.src);return}return Ii(n,r)})}}else{Ii(n,r)}}))};var Li=function(e){et(i,e);function i(t){var i;if(t===void 0){t={}}if(!t.tech){throw new Error("A tech was not provided.")}var r=Ge(t,{kind:li[t.kind]||"subtitles",language:t.language||t.srclang||""});var n=ui[r.mode]||"disabled";var a=r["default"];if(r.kind==="metadata"||r.kind==="chapters"){n="hidden"}i=e.call(this,r)||this;i.tech_=r.tech;i.cues_=[];i.activeCues_=[];i.preload_=i.tech_.preloadTextTracks!==false;var s=new ai(i.cues_);var o=new ai(i.activeCues_);var l=false;var u=Ae(Ze(i),function(){this.activeCues=this.activeCues;if(l){this.trigger("cuechange");l=false}});if(n!=="disabled"){i.tech_.ready(function(){i.tech_.on("timeupdate",u)},true)}Object.defineProperties(Ze(i),{default:{get:function e(){return a},set:function e(){}},mode:{get:function e(){return n},set:function e(t){var i=this;if(!ui[t]){return}n=t;if(!this.preload_&&n!=="disabled"&&this.cues.length===0){ji(this.src,this)}if(n!=="disabled"){this.tech_.ready(function(){i.tech_.on("timeupdate",u)},true)}else{this.tech_.off("timeupdate",u)}this.trigger("modechange")}},cues:{get:function e(){if(!this.loaded_){return null}return s},set:function e(){}},activeCues:{get:function e(){if(!this.loaded_){return null}if(this.cues.length===0){return o}var t=this.tech_.currentTime();var i=[];for(var r=0,n=this.cues.length;r<n;r++){var a=this.cues[r];if(a.startTime<=t&&a.endTime>=t){i.push(a)}else if(a.startTime===a.endTime&&a.startTime<=t&&a.startTime+.5>=t){i.push(a)}}l=false;if(i.length!==this.activeCues_.length){l=true}else{for(var s=0;s<i.length;s++){if(this.activeCues_.indexOf(i[s])===-1){l=true}}}this.activeCues_=i;o.setCues_(this.activeCues_);return o},set:function e(){}}});if(r.src){i.src=r.src;if(!i.preload_){i.loaded_=true}if(i.preload_||a||r.kind!=="subtitles"&&r.kind!=="captions"){ji(i.src,Ze(i))}}else{i.loaded_=true}return i}var r=i.prototype;r.addCue=function e(i){var r=i;if(t.vttjs&&!(i instanceof t.vttjs.VTTCue)){r=new t.vttjs.VTTCue(i.startTime,i.endTime,i.text);for(var n in i){if(!(n in r)){r[n]=i[n]}}r.id=i.id;r.originalCue_=i}var a=this.tech_.textTracks();for(var s=0;s<a.length;s++){if(a[s]!==this){a[s].removeCue(r)}}this.cues_.push(r);this.cues.setCues_(this.cues_)};r.removeCue=function e(t){var i=this.cues_.length;while(i--){var r=this.cues_[i];if(r===t||r.originalCue_&&r.originalCue_===t){this.cues_.splice(i,1);this.cues.setCues_(this.cues_);break}}};return i}(ci);Li.prototype.allowedEvents_={cuechange:"cuechange"};var Ni=function(e){et(t,e);function t(t){var i;if(t===void 0){t={}}var r=Ge(t,{kind:oi[t.kind]||""});i=e.call(this,r)||this;var n=false;Object.defineProperty(Ze(i),"enabled",{get:function e(){return n},set:function e(t){if(typeof t!=="boolean"||t===n){return}n=t;this.trigger("enabledchange")}});if(r.enabled){i.enabled=r.enabled}i.loaded_=true;return i}return t}(ci);var Ci=function(e){et(t,e);function t(t){var i;if(t===void 0){t={}}var r=Ge(t,{kind:si[t.kind]||""});i=e.call(this,r)||this;var n=false;Object.defineProperty(Ze(i),"selected",{get:function e(){return n},set:function e(t){if(typeof t!=="boolean"||t===n){return}n=t;this.trigger("selectedchange")}});if(r.selected){i.selected=r.selected}return i}return t}(ci);var Oi=0;var ki=1;var Pi=2;var Ri=3;var zi=function(e){et(t,e);function t(t){var i;if(t===void 0){t={}}i=e.call(this)||this;var r;var n=new Li(t);i.kind=n.kind;i.src=n.src;i.srclang=n.language;i.label=n.label;i["default"]=n["default"];Object.defineProperties(Ze(i),{readyState:{get:function e(){return r}},track:{get:function e(){return n}}});r=Oi;n.addEventListener("loadeddata",function(){r=Pi;i.trigger({type:"load",target:Ze(i)})});return i}return t}(xe);zi.prototype.allowedEvents_={load:"load"};zi.NONE=Oi;zi.LOADING=ki;zi.LOADED=Pi;zi.ERROR=Ri;var Ui={audio:{ListClass:ei,TrackClass:Ni,capitalName:"Audio"},video:{ListClass:ii,TrackClass:Ci,capitalName:"Video"},text:{ListClass:ri,TrackClass:Li,capitalName:"Text"}};Object.keys(Ui).forEach(function(e){Ui[e].getterName=e+"Tracks";Ui[e].privateName=e+"Tracks_"});var Bi={remoteText:{ListClass:ri,TrackClass:Li,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:ni,TrackClass:zi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}};var Fi=c({},Ui,Bi);Bi.names=Object.keys(Bi);Ui.names=Object.keys(Ui);Fi.names=[].concat(Bi.names).concat(Ui.names);var Vi={};function Gi(e,t,i,r,n){if(n===void 0){n={}}var a=e.textTracks();n.kind=t;if(i){n.label=i}if(r){n.language=r}n.tech=e;var s=new Fi.text.TrackClass(n);a.addTrack(s);return s}var Hi=function(e){et(r,e);function r(t,i){var r;if(t===void 0){t={}}if(i===void 0){i=function e(){}}t.reportTouchActivity=false;r=e.call(this,null,t,i)||this;r.hasStarted_=false;r.on("playing",function(){this.hasStarted_=true});r.on("loadstart",function(){this.hasStarted_=false});Fi.names.forEach(function(e){var i=Fi[e];if(t&&t[i.getterName]){r[i.privateName]=t[i.getterName]}});if(!r.featuresProgressEvents){r.manualProgressOn()}if(!r.featuresTimeupdateEvents){r.manualTimeUpdatesOn()}["Text","Audio","Video"].forEach(function(e){if(t["native"+e+"Tracks"]===false){r["featuresNative"+e+"Tracks"]=false}});if(t.nativeCaptions===false||t.nativeTextTracks===false){r.featuresNativeTextTracks=false}else if(t.nativeCaptions===true||t.nativeTextTracks===true){r.featuresNativeTextTracks=true}if(!r.featuresNativeTextTracks){r.emulateTextTracks()}r.preloadTextTracks=t.preloadTextTracks!==false;r.autoRemoteTextTracks_=new Fi.text.ListClass;r.initTrackListeners();if(!t.nativeControlsForTouch){r.emitTapEvents()}if(r.constructor){r.name_=r.constructor.name||"Unknown Tech"}return r}var n=r.prototype;n.triggerSourceset=function e(t){var i=this;if(!this.isReady_){this.one("ready",function(){return i.setTimeout(function(){return i.triggerSourceset(t)},1)})}this.trigger({src:t,type:"sourceset"})};n.manualProgressOn=function e(){this.on("durationchange",this.onDurationChange);this.manualProgress=true;this.one("ready",this.trackProgress)};n.manualProgressOff=function e(){this.manualProgress=false;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};n.trackProgress=function e(t){this.stopTrackingProgress();this.progressInterval=this.setInterval(Ae(this,function(){var e=this.bufferedPercent();if(this.bufferedPercent_!==e){this.trigger("progress")}this.bufferedPercent_=e;if(e===1){this.stopTrackingProgress()}}),500)};n.onDurationChange=function e(t){this.duration_=this.duration()};n.buffered=function e(){return Et(0,0)};n.bufferedPercent=function e(){return xt(this.buffered(),this.duration_)};n.stopTrackingProgress=function e(){this.clearInterval(this.progressInterval)};n.manualTimeUpdatesOn=function e(){this.manualTimeUpdates=true;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};n.manualTimeUpdatesOff=function e(){this.manualTimeUpdates=false;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};n.trackCurrentTime=function e(){if(this.currentTimeInterval){this.stopTrackingCurrentTime()}this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})},250)};n.stopTrackingCurrentTime=function e(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})};n.dispose=function t(){this.clearTracks(Ui.names);if(this.manualProgress){this.manualProgressOff()}if(this.manualTimeUpdates){this.manualTimeUpdatesOff()}e.prototype.dispose.call(this)};n.clearTracks=function e(t){var i=this;t=[].concat(t);t.forEach(function(e){var t=i[e+"Tracks"]()||[];var r=t.length;while(r--){var n=t[r];if(e==="text"){i.removeRemoteTextTrack(n)}t.removeTrack(n)}})};n.cleanupAutoTextTracks=function e(){var t=this.autoRemoteTextTracks_||[];var i=t.length;while(i--){var r=t[i];this.removeRemoteTextTrack(r)}};n.reset=function e(){};n.crossOrigin=function e(){};n.setCrossOrigin=function e(){};n.error=function e(t){if(t!==undefined){this.error_=new Ct(t);this.trigger("error")}return this.error_};n.played=function e(){if(this.hasStarted_){return Et(0,0)}return Et()};n.setScrubbing=function e(){};n.setCurrentTime=function e(){if(this.manualTimeUpdates){this.trigger({type:"timeupdate",target:this,manuallyTriggered:true})}};n.initTrackListeners=function e(){var t=this;Ui.names.forEach(function(e){var i=Ui[e];var r=function i(){t.trigger(e+"trackchange")};var n=t[i.getterName]();n.addEventListener("removetrack",r);n.addEventListener("addtrack",r);t.on("dispose",function(){n.removeEventListener("removetrack",r);n.removeEventListener("addtrack",r)})})};n.addWebVttScript_=function e(){var r=this;if(t.WebVTT){return}if(i.body.contains(this.el())){if(!this.options_["vtt.js"]&&g(Vi)&&Object.keys(Vi).length>0){this.trigger("vttjsloaded");return}var n=i.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";n.onload=function(){r.trigger("vttjsloaded")};n.onerror=function(){r.trigger("vttjserror")};this.on("dispose",function(){n.onload=null;n.onerror=null});t.WebVTT=true;this.el().parentNode.appendChild(n)}else{this.ready(this.addWebVttScript_)}};n.emulateTextTracks=function e(){var t=this;var i=this.textTracks();var r=this.remoteTextTracks();var n=function e(t){return i.addTrack(t.track)};var a=function e(t){return i.removeTrack(t.track)};r.on("addtrack",n);r.on("removetrack",a);this.addWebVttScript_();var s=function e(){return t.trigger("texttrackchange")};var o=function e(){s();for(var t=0;t<i.length;t++){var r=i[t];r.removeEventListener("cuechange",s);if(r.mode==="showing"){r.addEventListener("cuechange",s)}}};o();i.addEventListener("change",o);i.addEventListener("addtrack",o);i.addEventListener("removetrack",o);this.on("dispose",function(){r.off("addtrack",n);r.off("removetrack",a);i.removeEventListener("change",o);i.removeEventListener("addtrack",o);i.removeEventListener("removetrack",o);for(var e=0;e<i.length;e++){var t=i[e];t.removeEventListener("cuechange",s)}})};n.addTextTrack=function e(t,i,r){if(!t){throw new Error("TextTrack kind is required but was not provided")}return Gi(this,t,i,r)};n.createRemoteTextTrack=function e(t){var i=Ge(t,{tech:this});return new Bi.remoteTextEl.TrackClass(i)};n.addRemoteTextTrack=function e(t,i){var r=this;if(t===void 0){t={}}var n=this.createRemoteTextTrack(t);if(i!==true&&i!==false){o.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js');i=true}this.remoteTextTrackEls().addTrackElement_(n);this.remoteTextTracks().addTrack(n.track);if(i!==true){this.ready(function(){return r.autoRemoteTextTracks_.addTrack(n.track)})}return n};n.removeRemoteTextTrack=function e(t){var i=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(i);this.remoteTextTracks().removeTrack(t);this.autoRemoteTextTracks_.removeTrack(t)};n.getVideoPlaybackQuality=function e(){return{}};n.requestPictureInPicture=function e(){var i=this.options_.Promise||t.Promise;if(i){return i.reject()}};n.disablePictureInPicture=function e(){return true};n.setDisablePictureInPicture=function e(){};n.setPoster=function e(){};n.playsinline=function e(){};n.setPlaysinline=function e(){};n.overrideNativeAudioTracks=function e(){};n.overrideNativeVideoTracks=function e(){};n.canPlayType=function e(){return""};r.canPlayType=function e(){return""};r.canPlaySource=function e(t,i){return r.canPlayType(t.type)};r.isTech=function e(t){return t.prototype instanceof r||t instanceof r||t===r};r.registerTech=function e(t,i){if(!r.techs_){r.techs_={}}if(!r.isTech(i)){throw new Error("Tech "+t+" must be a Tech")}if(!r.canPlayType){throw new Error("Techs must have a static canPlayType method on them")}if(!r.canPlaySource){throw new Error("Techs must have a static canPlaySource method on them")}t=Fe(t);r.techs_[t]=i;r.techs_[Be(t)]=i;if(t!=="Tech"){r.defaultTechOrder_.push(t)}return i};r.getTech=function e(i){if(!i){return}if(r.techs_&&r.techs_[i]){return r.techs_[i]}i=Fe(i);if(t&&t.videojs&&t.videojs[i]){o.warn("The "+i+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)");return t.videojs[i]}};return r}(qe);Fi.names.forEach(function(e){var t=Fi[e];Hi.prototype[t.getterName]=function(){this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}});Hi.prototype.featuresVolumeControl=true;Hi.prototype.featuresMuteControl=true;Hi.prototype.featuresFullscreenResize=false;Hi.prototype.featuresPlaybackRate=false;Hi.prototype.featuresProgressEvents=false;Hi.prototype.featuresSourceset=false;Hi.prototype.featuresTimeupdateEvents=false;Hi.prototype.featuresNativeTextTracks=false;Hi.withSourceHandlers=function(e){e.registerSourceHandler=function(t,i){var r=e.sourceHandlers;if(!r){r=e.sourceHandlers=[]}if(i===undefined){i=r.length}r.splice(i,0,t)};e.canPlayType=function(t){var i=e.sourceHandlers||[];var r;for(var n=0;n<i.length;n++){r=i[n].canPlayType(t);if(r){return r}}return""};e.selectSourceHandler=function(t,i){var r=e.sourceHandlers||[];var n;for(var a=0;a<r.length;a++){n=r[a].canHandleSource(t,i);if(n){return r[a]}}return null};e.canPlaySource=function(t,i){var r=e.selectSourceHandler(t,i);if(r){return r.canHandleSource(t,i)}return""};var t=["seekable","seeking","duration"];t.forEach(function(e){var t=this[e];if(typeof t!=="function"){return}this[e]=function(){if(this.sourceHandler_&&this.sourceHandler_[e]){return this.sourceHandler_[e].apply(this.sourceHandler_,arguments)}return t.apply(this,arguments)}},e.prototype);e.prototype.setSource=function(t){var i=e.selectSourceHandler(t,this.options_);if(!i){if(e.nativeSourceHandler){i=e.nativeSourceHandler}else{o.error("No source handler found for the current source.")}}this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);if(i!==e.nativeSourceHandler){this.currentSource_=t}this.sourceHandler_=i.handleSource(t,this,this.options_);this.one("dispose",this.disposeSourceHandler)};e.prototype.disposeSourceHandler=function(){if(this.currentSource_){this.clearTracks(["audio","video"]);this.currentSource_=null}this.cleanupAutoTextTracks();if(this.sourceHandler_){if(this.sourceHandler_.dispose){this.sourceHandler_.dispose()}this.sourceHandler_=null}}};qe.registerComponent("Tech",Hi);Hi.registerTech("Tech",Hi);Hi.defaultTechOrder_=[];var Qi={};var Yi={};var Wi={};function qi(e,t){Qi[e]=Qi[e]||[];Qi[e].push(t)}function Xi(e,t,i){e.setTimeout(function(){return or(t,Qi[t.type],i,e)},1)}function Zi(e,t){e.forEach(function(e){return e.setTech&&e.setTech(t)})}function Ki(e,t,i){return e.reduceRight(rr(i),t[i]())}function Ji(e,t,i,r){return t[i](e.reduce(rr(i),r))}function $i(e,t,i,r){if(r===void 0){r=null}var n="call"+Fe(i);var a=e.reduce(rr(n),r);var s=a===Wi;var o=s?null:t[i](a);nr(e,i,o,s);return o}var er={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1};var tr={setCurrentTime:1,setMuted:1,setVolume:1};var ir={play:1,pause:1};function rr(e){return function(t,i){if(t===Wi){return Wi}if(i[e]){return i[e](t)}return t}}function nr(e,t,i,r){for(var n=e.length-1;n>=0;n--){var a=e[n];if(a[t]){a[t](r,i)}}}function ar(e){Yi[e.id()]=null}function sr(e,t){var i=Yi[e.id()];var r=null;if(i===undefined||i===null){r=t(e);Yi[e.id()]=[[t,r]];return r}for(var n=0;n<i.length;n++){var a=i[n],s=a[0],o=a[1];if(s!==t){continue}r=o}if(r===null){r=t(e);i.push([t,r])}return r}function or(e,t,i,r,n,a){if(e===void 0){e={}}if(t===void 0){t=[]}if(n===void 0){n=[]}if(a===void 0){a=false}var s=t,o=s[0],l=s.slice(1);if(typeof o==="string"){or(e,Qi[o],i,r,n,a)}else if(o){var u=sr(r,o);if(!u.setSource){n.push(u);return or(e,l,i,r,n,a)}u.setSource(m({},e),function(t,s){if(t){return or(e,l,i,r,n,a)}n.push(u);or(s,e.type===s.type?l:Qi[s.type],i,r,n,a)})}else if(l.length){or(e,l,i,r,n,a)}else if(a){i(e,n)}else{or(e,Qi["*"],i,r,n,true)}}var lr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"};var ur=function e(t){if(t===void 0){t=""}var i=fi(t);var r=lr[i.toLowerCase()];return r||""};var cr=function e(t,i){if(!i){return""}if(t.cache_.source.src===i&&t.cache_.source.type){return t.cache_.source.type}var r=t.cache_.sources.filter(function(e){return e.src===i});if(r.length){return r[0].type}var n=t.$$("source");for(var a=0;a<n.length;a++){var s=n[a];if(s.type&&s.src&&s.src===i){return s.type}}return ur(i)};var dr=function e(t){if(Array.isArray(t)){var i=[];t.forEach(function(t){t=e(t);if(Array.isArray(t)){i=i.concat(t)}else if(v(t)){i.push(t)}});t=i}else if(typeof t==="string"&&t.trim()){t=[hr({src:t})]}else if(v(t)&&typeof t.src==="string"&&t.src&&t.src.trim()){t=[hr(t)]}else{t=[]}return t};function hr(e){if(!e.type){var t=ur(e.src);if(t){e.type=t}}return e}var fr=function(e){et(t,e);function t(t,i,r){var n;var a=Ge({createEl:false},i);n=e.call(this,t,a,r)||this;if(!i.playerOptions.sources||i.playerOptions.sources.length===0){for(var s=0,o=i.playerOptions.techOrder;s<o.length;s++){var l=Fe(o[s]);var u=Hi.getTech(l);if(!l){u=qe.getComponent(l)}if(u&&u.isSupported()){t.loadTech_(l);break}}}else{t.src(i.playerOptions.sources)}return n}return t}(qe);qe.registerComponent("MediaLoader",fr);var pr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.emitTapEvents();r.enable();return r}var i=t.prototype;i.createEl=function t(i,r,n){if(i===void 0){i="div"}if(r===void 0){r={}}if(n===void 0){n={}}r=m({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},r);if(i==="button"){o.error("Creating a ClickableComponent with an HTML element of "+i+" is not supported; use a Button instead.")}n=m({role:"button"},n);this.tabIndex_=r.tabIndex;var a=e.prototype.createEl.call(this,i,r,n);this.createControlTextEl(a);return a};i.dispose=function t(){this.controlTextEl_=null;e.prototype.dispose.call(this)};i.createControlTextEl=function e(t){this.controlTextEl_=x("span",{className:"vjs-control-text"},{"aria-live":"polite"});if(t){t.appendChild(this.controlTextEl_)}this.controlText(this.controlText_,t);return this.controlTextEl_};i.controlText=function e(t,i){if(i===void 0){i=this.el()}if(t===undefined){return this.controlText_||"Need Text"}var r=this.localize(t);this.controlText_=t;S(this.controlTextEl_,r);if(!this.nonIconControl){i.setAttribute("title",r)}};i.buildCSSClass=function t(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)};i.enable=function e(){if(!this.enabled_){this.enabled_=true;this.removeClass("vjs-disabled");this.el_.setAttribute("aria-disabled","false");if(typeof this.tabIndex_!=="undefined"){this.el_.setAttribute("tabIndex",this.tabIndex_)}this.on(["tap","click"],this.handleClick);this.on("keydown",this.handleKeyDown)}};i.disable=function e(){this.enabled_=false;this.addClass("vjs-disabled");this.el_.setAttribute("aria-disabled","true");if(typeof this.tabIndex_!=="undefined"){this.el_.removeAttribute("tabIndex")}this.off("mouseover",this.handleMouseOver);this.off("mouseout",this.handleMouseOut);this.off(["tap","click"],this.handleClick);this.off("keydown",this.handleKeyDown)};i.handleClick=function e(t){if(this.options_.clickHandler){this.options_.clickHandler.call(this,arguments)}};i.handleKeyDown=function t(i){if(Gt.isEventKey(i,"Space")||Gt.isEventKey(i,"Enter")){i.preventDefault();i.stopPropagation();this.trigger("click")}else{e.prototype.handleKeyDown.call(this,i)}};return t}(qe);qe.registerComponent("ClickableComponent",pr);var mr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.update();t.on("posterchange",Ae(Ze(r),r.update));return r}var i=t.prototype;i.dispose=function t(){this.player().off("posterchange",this.update);e.prototype.dispose.call(this)};i.createEl=function e(){var t=x("div",{className:"vjs-poster",tabIndex:-1});return t};i.update=function e(t){var i=this.player().poster();this.setSrc(i);if(i){this.show()}else{this.hide()}};i.setSrc=function e(t){var i="";if(t){i='url("'+t+'")'}this.el_.style.backgroundImage=i};i.handleClick=function e(t){if(!this.player_.controls()){return}var i=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;if(this.player_.tech(true)&&!((ft||ct)&&i)){this.player_.tech(true).focus()}if(this.player_.paused()){zt(this.player_.play())}else{this.player_.pause()}};return t}(pr);qe.registerComponent("PosterImage",mr);var vr="#222";var gr="#ccc";var yr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function _r(e,t){var i;if(e.length===4){i=e[1]+e[1]+e[2]+e[2]+e[3]+e[3]}else if(e.length===7){i=e.slice(1)}else{throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.")}return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function br(e,t,i){try{e.style[t]=i}catch(e){return}}var Mr=function(e){et(i,e);function i(i,r,n){var a;a=e.call(this,i,r,n)||this;var s=Ae(Ze(a),a.updateDisplay);i.on("loadstart",Ae(Ze(a),a.toggleDisplay));i.on("texttrackchange",s);i.on("loadedmetadata",Ae(Ze(a),a.preselectTrack));i.ready(Ae(Ze(a),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks){this.hide();return}i.on("fullscreenchange",s);i.on("playerresize",s);t.addEventListener("orientationchange",s);i.on("dispose",function(){return t.removeEventListener("orientationchange",s)});var e=this.options_.playerOptions.tracks||[];for(var r=0;r<e.length;r++){this.player_.addRemoteTextTrack(e[r],true)}this.preselectTrack()}));return a}var r=i.prototype;r.preselectTrack=function e(){var t={captions:1,subtitles:1};var i=this.player_.textTracks();var r=this.player_.cache_.selectedLanguage;var n;var a;var s;for(var o=0;o<i.length;o++){var l=i[o];if(r&&r.enabled&&r.language&&r.language===l.language&&l.kind in t){if(l.kind===r.kind){s=l}else if(!s){s=l}}else if(r&&!r.enabled){s=null;n=null;a=null}else if(l["default"]){if(l.kind==="descriptions"&&!n){n=l}else if(l.kind in t&&!a){a=l}}}if(s){s.mode="showing"}else if(a){a.mode="showing"}else if(n){n.mode="showing"}};r.toggleDisplay=function e(){if(this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks){this.hide()}else{this.show()}};r.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};r.clearDisplay=function e(){if(typeof t.WebVTT==="function"){t.WebVTT.processCues(t,[],this.el_)}};r.updateDisplay=function e(){var t=this.player_.textTracks();var i=this.options_.allowMultipleShowingTracks;this.clearDisplay();if(i){var r=[];for(var n=0;n<t.length;++n){var a=t[n];if(a.mode!=="showing"){continue}r.push(a)}this.updateForTrack(r);return}var s=null;var o=null;var l=t.length;while(l--){var u=t[l];if(u.mode==="showing"){if(u.kind==="descriptions"){s=u}else{o=u}}}if(o){if(this.getAttribute("aria-live")!=="off"){this.setAttribute("aria-live","off")}this.updateForTrack(o)}else if(s){if(this.getAttribute("aria-live")!=="assertive"){this.setAttribute("aria-live","assertive")}this.updateForTrack(s)}};r.updateDisplayState=function e(i){var r=this.player_.textTrackSettings.getValues();var n=i.activeCues;var a=n.length;while(a--){var s=n[a];if(!s){continue}var o=s.displayState;if(r.color){o.firstChild.style.color=r.color}if(r.textOpacity){br(o.firstChild,"color",_r(r.color||"#fff",r.textOpacity))}if(r.backgroundColor){o.firstChild.style.backgroundColor=r.backgroundColor}if(r.backgroundOpacity){br(o.firstChild,"backgroundColor",_r(r.backgroundColor||"#000",r.backgroundOpacity))}if(r.windowColor){if(r.windowOpacity){br(o,"backgroundColor",_r(r.windowColor,r.windowOpacity))}else{o.style.backgroundColor=r.windowColor}}if(r.edgeStyle){if(r.edgeStyle==="dropshadow"){o.firstChild.style.textShadow="2px 2px 3px "+vr+", 2px 2px 4px "+vr+", 2px 2px 5px "+vr}else if(r.edgeStyle==="raised"){o.firstChild.style.textShadow="1px 1px "+vr+", 2px 2px "+vr+", 3px 3px "+vr}else if(r.edgeStyle==="depressed"){o.firstChild.style.textShadow="1px 1px "+gr+", 0 1px "+gr+", -1px -1px "+vr+", 0 -1px "+vr}else if(r.edgeStyle==="uniform"){o.firstChild.style.textShadow="0 0 4px "+vr+", 0 0 4px "+vr+", 0 0 4px "+vr+", 0 0 4px "+vr}}if(r.fontPercent&&r.fontPercent!==1){var l=t.parseFloat(o.style.fontSize);o.style.fontSize=l*r.fontPercent+"px";o.style.height="auto";o.style.top="auto"}if(r.fontFamily&&r.fontFamily!=="default"){if(r.fontFamily==="small-caps"){o.firstChild.style.fontVariant="small-caps"}else{o.firstChild.style.fontFamily=yr[r.fontFamily]}}}};r.updateForTrack=function e(i){if(!Array.isArray(i)){i=[i]}if(typeof t.WebVTT!=="function"||i.every(function(e){return!e.activeCues})){return}var r=[];for(var n=0;n<i.length;++n){var a=i[n];for(var s=0;s<a.activeCues.length;++s){r.push(a.activeCues[s])}}t.WebVTT.processCues(t,r,this.el_);for(var o=0;o<i.length;++o){var l=i[o];for(var u=0;u<l.activeCues.length;++u){var c=l.activeCues[u].displayState;j(c,"vjs-text-track-cue");j(c,"vjs-text-track-cue-"+(l.language?l.language:o))}if(this.player_.textTrackSettings){this.updateDisplayState(l)}}};return i}(qe);qe.registerComponent("TextTrackDisplay",Mr);var Tr=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(){var i=this.player_.isAudio();var r=this.localize(i?"Audio Player":"Video Player");var n=x("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[r])});var a=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});a.appendChild(n);return a};return t}(qe);qe.registerComponent("LoadingSpinner",Tr);var Ar=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function e(t,i,r){if(i===void 0){i={}}if(r===void 0){r={}}t="button";i=m({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},i);r=m({type:"button"},r);var n=qe.prototype.createEl.call(this,t,i,r);this.createControlTextEl(n);return n};i.addChild=function e(t,i){if(i===void 0){i={}}var r=this.constructor.name;o.warn("Adding an actionable (user controllable) child to a Button ("+r+") is not supported; use a ClickableComponent instead.");return qe.prototype.addChild.call(this,t,i)};i.enable=function t(){e.prototype.enable.call(this);this.el_.removeAttribute("disabled")};i.disable=function t(){e.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};i.handleKeyDown=function t(i){if(Gt.isEventKey(i,"Space")||Gt.isEventKey(i,"Enter")){i.stopPropagation();return}e.prototype.handleKeyDown.call(this,i)};return t}(pr);qe.registerComponent("Button",Ar);var wr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.mouseused_=false;r.on("mousedown",r.handleMouseDown);return r}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-big-play-button"};i.handleClick=function e(t){var i=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var r=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;zt(i);if(this.player_.tech(true)&&!((ft||ct)&&r)){this.player_.tech(true).focus()}return}var n=this.player_.getChild("controlBar");var a=n&&n.getChild("playToggle");if(!a){this.player_.tech(true).focus();return}var s=function e(){return a.focus()};if(Rt(i)){i.then(s,function(){})}else{this.setTimeout(s,1)}};i.handleKeyDown=function t(i){this.mouseused_=false;e.prototype.handleKeyDown.call(this,i)};i.handleMouseDown=function e(t){this.mouseused_=true};return t}(Ar);wr.prototype.controlText_="Play Video";qe.registerComponent("BigPlayButton",wr);var Er=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.controlText(i&&i.controlText||r.localize("Close"));return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)};i.handleClick=function e(t){this.trigger({type:"close",bubbles:false})};i.handleKeyDown=function t(i){if(Gt.isEventKey(i,"Esc")){i.preventDefault();i.stopPropagation();this.trigger("click")}else{e.prototype.handleKeyDown.call(this,i)}};return t}(Ar);qe.registerComponent("CloseButton",Er);var xr=function(e){et(t,e);function t(t,i){var r;if(i===void 0){i={}}r=e.call(this,t,i)||this;i.replay=i.replay===undefined||i.replay;r.on(t,"play",r.handlePlay);r.on(t,"pause",r.handlePause);if(i.replay){r.on(t,"ended",r.handleEnded)}return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)};i.handleClick=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};i.handleSeeked=function e(t){this.removeClass("vjs-ended");if(this.player_.paused()){this.handlePause(t)}else{this.handlePlay(t)}};i.handlePlay=function e(t){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};i.handlePause=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};i.handleEnded=function e(t){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return t}(Ar);xr.prototype.controlText_="Play";qe.registerComponent("PlayToggle",xr);var Sr=function e(t,i){t=t<0?0:t;var r=Math.floor(t%60);var n=Math.floor(t/60%60);var a=Math.floor(t/3600);var s=Math.floor(i/60%60);var o=Math.floor(i/3600);if(isNaN(t)||t===Infinity){a=n=r="-"}a=a>0||o>0?a+":":"";n=((a||s>=10)&&n<10?"0"+n:n)+":";r=r<10?"0"+r:r;return a+n+r};var Dr=Sr;function Ir(e){Dr=e}function jr(){Dr=Sr}function Lr(e,t){if(t===void 0){t=e}return Dr(e,t)}var Nr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,["timeupdate","ended"],r.updateContent);r.updateTextNode_();return r}var r=t.prototype;r.createEl=function t(){var i=this.buildCSSClass();var r=e.prototype.createEl.call(this,"div",{className:i+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+"\xa0</span>"});this.contentEl_=x("span",{className:i+"-display"},{"aria-live":"off",role:"presentation"});r.appendChild(this.contentEl_);return r};r.dispose=function t(){this.contentEl_=null;this.textNode_=null;e.prototype.dispose.call(this)};r.updateTextNode_=function e(t){var r=this;if(t===void 0){t=0}t=Lr(t);if(this.formattedTime_===t){return}this.formattedTime_=t;this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(!r.contentEl_){return}var e=r.textNode_;r.textNode_=i.createTextNode(r.formattedTime_);if(!r.textNode_){return}if(e){r.contentEl_.replaceChild(r.textNode_,e)}else{r.contentEl_.appendChild(r.textNode_)}})};r.updateContent=function e(t){};return t}(qe);Nr.prototype.labelText_="Time";Nr.prototype.controlText_="Time";qe.registerComponent("TimeDisplay",Nr);var Cr=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-current-time"};i.updateContent=function e(t){var i;if(this.player_.ended()){i=this.player_.duration()}else{i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}this.updateTextNode_(i)};return t}(Nr);Cr.prototype.labelText_="Current Time";Cr.prototype.controlText_="Current Time";qe.registerComponent("CurrentTimeDisplay",Cr);var Or=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,"durationchange",r.updateContent);r.on(t,"loadstart",r.updateContent);r.on(t,"loadedmetadata",r.updateContent);return r}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-duration"};i.updateContent=function e(t){var i=this.player_.duration();this.updateTextNode_(i)};return t}(Nr);Or.prototype.labelText_="Duration";Or.prototype.controlText_="Duration";qe.registerComponent("DurationDisplay",Or);var kr=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":true})};return t}(qe);qe.registerComponent("TimeDivider",kr);var Pr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,"durationchange",r.updateContent);return r}var i=t.prototype;i.buildCSSClass=function e(){return"vjs-remaining-time"};i.createEl=function t(){var i=e.prototype.createEl.call(this);i.insertBefore(x("span",{},{"aria-hidden":true},"-"),this.contentEl_);return i};i.updateContent=function e(t){if(typeof this.player_.duration()!=="number"){return}var i;if(this.player_.ended()){i=0}else if(this.player_.remainingTimeDisplay){i=this.player_.remainingTimeDisplay()}else{i=this.player_.remainingTime()}this.updateTextNode_(i)};return t}(Nr);Pr.prototype.labelText_="Remaining Time";Pr.prototype.controlText_="Remaining Time";qe.registerComponent("RemainingTimeDisplay",Pr);var Rr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.updateShowing();r.on(r.player(),"durationchange",r.updateShowing);return r}var i=t.prototype;i.createEl=function t(){var i=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=x("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\xa0</span>"+this.localize("LIVE")},{"aria-live":"off"});i.appendChild(this.contentEl_);return i};i.dispose=function t(){this.contentEl_=null;e.prototype.dispose.call(this)};i.updateShowing=function e(t){if(this.player().duration()===Infinity){this.show()}else{this.hide()}};return t}(qe);qe.registerComponent("LiveDisplay",Rr);var zr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.updateLiveEdgeStatus();if(r.player_.liveTracker){r.on(r.player_.liveTracker,"liveedgechange",r.updateLiveEdgeStatus)}return r}var i=t.prototype;i.createEl=function t(){var i=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});this.textEl_=x("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"});i.appendChild(this.textEl_);return i};i.updateLiveEdgeStatus=function e(){if(!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()){this.setAttribute("aria-disabled",true);this.addClass("vjs-at-live-edge");this.controlText("Seek to live, currently playing live")}else{this.setAttribute("aria-disabled",false);this.removeClass("vjs-at-live-edge");this.controlText("Seek to live, currently behind live")}};i.handleClick=function e(){this.player_.liveTracker.seekToLiveEdge()};i.dispose=function t(){if(this.player_.liveTracker){this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus)}this.textEl_=null;e.prototype.dispose.call(this)};return t}(Ar);zr.prototype.controlText_="Seek to live, currently playing live";qe.registerComponent("SeekToLive",zr);var Ur=function e(t,i,r){t=Number(t);return Math.min(r,Math.max(i,isNaN(t)?i:t))};var Br=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.bar=r.getChild(r.options_.barName);r.vertical(!!r.options_.vertical);r.enable();return r}var i=t.prototype;i.enabled=function e(){return this.enabled_};i.enable=function e(){if(this.enabled()){return}this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("keydown",this.handleKeyDown);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent){this.on(this.player_,this.playerEvent,this.update)}this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=true};i.disable=function e(){if(!this.enabled()){return}var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("keydown",this.handleKeyDown);this.off("click",this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");if(this.playerEvent){this.off(this.player_,this.playerEvent,this.update)}this.enabled_=false};i.createEl=function t(i,r,n){if(r===void 0){r={}}if(n===void 0){n={}}r.className=r.className+" vjs-slider";r=m({tabIndex:0},r);n=m({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},n);return e.prototype.createEl.call(this,i,r,n)};i.handleMouseDown=function e(t){var i=this.bar.el_.ownerDocument;if(t.type==="mousedown"){t.preventDefault()}if(t.type==="touchstart"&&!dt){t.preventDefault()}z();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(i,"mousemove",this.handleMouseMove);this.on(i,"mouseup",this.handleMouseUp);this.on(i,"touchmove",this.handleMouseMove);this.on(i,"touchend",this.handleMouseUp);this.handleMouseMove(t)};i.handleMouseMove=function e(t){};i.handleMouseUp=function e(){var t=this.bar.el_.ownerDocument;U();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(t,"mousemove",this.handleMouseMove);this.off(t,"mouseup",this.handleMouseUp);this.off(t,"touchmove",this.handleMouseMove);this.off(t,"touchend",this.handleMouseUp);this.update()};i.update=function e(){var t=this;if(!this.el_||!this.bar){return}var i=this.getProgress();if(i===this.progress_){return i}this.progress_=i;this.requestNamedAnimationFrame("Slider#update",function(){var e=t.vertical()?"height":"width";t.bar.el().style[e]=(i*100).toFixed(2)+"%"});return i};i.getProgress=function e(){return Number(Ur(this.getPercent(),0,1).toFixed(4))};i.calculateDistance=function e(t){var i=V(this.el_,t);if(this.vertical()){return i.y}return i.x};i.handleKeyDown=function t(i){if(Gt.isEventKey(i,"Left")||Gt.isEventKey(i,"Down")){i.preventDefault();i.stopPropagation();this.stepBack()}else if(Gt.isEventKey(i,"Right")||Gt.isEventKey(i,"Up")){i.preventDefault();i.stopPropagation();this.stepForward()}else{e.prototype.handleKeyDown.call(this,i)}};i.handleClick=function e(t){t.stopPropagation();t.preventDefault()};i.vertical=function e(t){if(t===undefined){return this.vertical_||false}this.vertical_=!!t;if(this.vertical_){this.addClass("vjs-slider-vertical")}else{this.addClass("vjs-slider-horizontal")}};return t}(qe);qe.registerComponent("Slider",Br);var Fr=function e(t,i){return Ur(t/i*100,0,100).toFixed(2)+"%"};var Vr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.partEls_=[];r.on(t,"progress",r.update);return r}var r=t.prototype;r.createEl=function t(){var r=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"});var n=x("span",{className:"vjs-control-text"});var a=x("span",{textContent:this.localize("Loaded")});var s=i.createTextNode(": ");this.percentageEl_=x("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"});r.appendChild(n);n.appendChild(a);n.appendChild(s);n.appendChild(this.percentageEl_);return r};r.dispose=function t(){this.partEls_=null;this.percentageEl_=null;e.prototype.dispose.call(this)};r.update=function e(t){var i=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var e=i.player_.liveTracker;var t=i.player_.buffered();var r=e&&e.isLive()?e.seekableEnd():i.player_.duration();var n=i.player_.bufferedEnd();var a=i.partEls_;var s=Fr(n,r);if(i.percent_!==s){i.el_.style.width=s;S(i.percentageEl_,s);i.percent_=s}for(var o=0;o<t.length;o++){var l=t.start(o);var u=t.end(o);var c=a[o];if(!c){c=i.el_.appendChild(x());a[o]=c}if(c.dataset.start===l&&c.dataset.end===u){continue}c.dataset.start=l;c.dataset.end=u;c.style.left=Fr(l,n);c.style.width=Fr(u-l,n)}for(var d=a.length;d>t.length;d--){i.el_.removeChild(a[d-1])}a.length=t.length})};return t}(qe);qe.registerComponent("LoadProgressBar",Vr);var Gr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.update=we(Ae(Ze(r),r.update),Te);return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})};i.update=function e(t,i,r){var n=F(this.el_);var a=B(this.player_.el());var s=t.width*i;if(!a||!n){return}var o=t.left-a.left+s;var l=t.width-s+(a.right-t.right);var u=n.width/2;if(o<u){u+=u-o}else if(l<u){u=l}if(u<0){u=0}else if(u>n.width){u=n.width}this.el_.style.right="-"+u+"px";this.write(r)};i.write=function e(t){S(this.el_,t)};i.updateTime=function e(t,i,r,n){var a=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var e;var s=a.player_.duration();if(a.player_.liveTracker&&a.player_.liveTracker.isLive()){var o=a.player_.liveTracker.liveWindow();var l=o-i*o;e=(l<1?"":"-")+Lr(l,o)}else{e=Lr(r,s)}a.update(t,i,e);if(n){n()}})};return t}(qe);qe.registerComponent("TimeTooltip",Gr);var Hr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.update=we(Ae(Ze(r),r.update),Te);return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})};i.update=function e(t,i){var r=this.getChild("timeTooltip");if(!r){return}var n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();r.updateTime(t,i,n)};return t}(qe);Hr.prototype.options_={children:[]};if(!_t&&!st){Hr.prototype.options_.children.push("timeTooltip")}qe.registerComponent("PlayProgressBar",Hr);var Qr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.update=we(Ae(Ze(r),r.update),Te);return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};i.update=function e(t,i){var r=this;var n=i*this.player_.duration();this.getChild("timeTooltip").updateTime(t,i,n,function(){r.el_.style.left=t.width*i+"px"})};return t}(qe);Qr.prototype.options_={children:["timeTooltip"]};qe.registerComponent("MouseTimeDisplay",Qr);var Yr=5;var Wr=12;var qr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.setEventHandlers_();return r}var r=t.prototype;r.setEventHandlers_=function e(){this.update_=Ae(this,this.update);this.update=we(this.update_,Te);this.on(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.updateInterval=null;this.on(this.player_,["playing"],this.enableInterval_);this.on(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in i&&"visibilityState"in i){this.on(i,"visibilitychange",this.toggleVisibility_)}};r.toggleVisibility_=function e(t){if(i.hidden){this.disableInterval_(t)}else{this.enableInterval_();this.update()}};r.enableInterval_=function e(){if(this.updateInterval){return}this.updateInterval=this.setInterval(this.update,Te)};r.disableInterval_=function e(t){if(this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"){return}if(!this.updateInterval){return}this.clearInterval(this.updateInterval);this.updateInterval=null};r.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};r.update=function t(i){var r=this;var n=e.prototype.update.call(this);this.requestNamedAnimationFrame("SeekBar#update",function(){var e=r.player_.ended()?r.player_.duration():r.getCurrentTime_();var t=r.player_.liveTracker;var i=r.player_.duration();if(t&&t.isLive()){i=r.player_.liveTracker.liveCurrentTime()}if(r.percent_!==n){r.el_.setAttribute("aria-valuenow",(n*100).toFixed(2));r.percent_=n}if(r.currentTime_!==e||r.duration_!==i){r.el_.setAttribute("aria-valuetext",r.localize("progress bar timing: currentTime={1} duration={2}",[Lr(e,i),Lr(i,i)],"{1} of {2}"));r.currentTime_=e;r.duration_=i}if(r.bar){r.bar.update(B(r.el()),r.getProgress())}});return n};r.getCurrentTime_=function e(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};r.getPercent=function e(){var t=this.getCurrentTime_();var i;var r=this.player_.liveTracker;if(r&&r.isLive()){i=(t-r.seekableStart())/r.liveWindow();if(r.atLiveEdge()){i=1}}else{i=t/this.player_.duration()}return i};r.handleMouseDown=function t(i){if(!q(i)){return}i.stopPropagation();this.player_.scrubbing(true);this.videoWasPlaying=!this.player_.paused();this.player_.pause();e.prototype.handleMouseDown.call(this,i)};r.handleMouseMove=function e(t){if(!q(t)){return}var i;var r=this.calculateDistance(t);var n=this.player_.liveTracker;if(!n||!n.isLive()){i=r*this.player_.duration();if(i===this.player_.duration()){i=i-.1}}else{if(r>=.99){n.seekToLiveEdge();return}var a=n.seekableStart();var s=n.liveCurrentTime();i=a+r*n.liveWindow();if(i>=s){i=s}if(i<=a){i=a+.1}if(i===Infinity){return}}this.player_.currentTime(i)};r.enable=function t(){e.prototype.enable.call(this);var i=this.getChild("mouseTimeDisplay");if(!i){return}i.show()};r.disable=function t(){e.prototype.disable.call(this);var i=this.getChild("mouseTimeDisplay");if(!i){return}i.hide()};r.handleMouseUp=function t(i){e.prototype.handleMouseUp.call(this,i);if(i){i.stopPropagation()}this.player_.scrubbing(false);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:true});if(this.videoWasPlaying){zt(this.player_.play())}else{this.update_()}};r.stepForward=function e(){this.player_.currentTime(this.player_.currentTime()+Yr)};r.stepBack=function e(){this.player_.currentTime(this.player_.currentTime()-Yr)};r.handleAction=function e(t){if(this.player_.paused()){this.player_.play()}else{this.player_.pause()}};r.handleKeyDown=function t(i){if(Gt.isEventKey(i,"Space")||Gt.isEventKey(i,"Enter")){i.preventDefault();i.stopPropagation();this.handleAction(i)}else if(Gt.isEventKey(i,"Home")){i.preventDefault();i.stopPropagation();this.player_.currentTime(0)}else if(Gt.isEventKey(i,"End")){i.preventDefault();i.stopPropagation();this.player_.currentTime(this.player_.duration())}else if(/^[0-9]$/.test(Gt(i))){i.preventDefault();i.stopPropagation();var r=(Gt.codes[Gt(i)]-Gt.codes["0"])*10/100;this.player_.currentTime(this.player_.duration()*r)}else if(Gt.isEventKey(i,"PgDn")){i.preventDefault();i.stopPropagation();this.player_.currentTime(this.player_.currentTime()-Yr*Wr)}else if(Gt.isEventKey(i,"PgUp")){i.preventDefault();i.stopPropagation();this.player_.currentTime(this.player_.currentTime()+Yr*Wr)}else{e.prototype.handleKeyDown.call(this,i)}};r.dispose=function t(){this.disableInterval_();this.off(this.player_,["ended","durationchange","timeupdate"],this.update);if(this.player_.liveTracker){this.on(this.player_.liveTracker,"liveedgechange",this.update)}this.off(this.player_,["playing"],this.enableInterval_);this.off(this.player_,["ended","pause","waiting"],this.disableInterval_);if("hidden"in i&&"visibilityState"in i){this.off(i,"visibilitychange",this.toggleVisibility_)}e.prototype.dispose.call(this)};return t}(Br);qr.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};if(!_t&&!st){qr.prototype.options_.children.splice(1,0,"mouseTimeDisplay")}qe.registerComponent("SeekBar",qr);var Xr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.handleMouseMove=we(Ae(Ze(r),r.handleMouseMove),Te);r.throttledHandleMouseSeek=we(Ae(Ze(r),r.handleMouseSeek),Te);r.enable();return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};i.handleMouseMove=function e(t){var i=this.getChild("seekBar");if(!i){return}var r=i.getChild("playProgressBar");var n=i.getChild("mouseTimeDisplay");if(!r&&!n){return}var a=i.el();var s=F(a);var o=V(a,t).x;o=Ur(o,0,1);if(n){n.update(s,o)}if(r){r.update(s,i.getProgress())}};i.handleMouseSeek=function e(t){var i=this.getChild("seekBar");if(i){i.handleMouseMove(t)}};i.enabled=function e(){return this.enabled_};i.disable=function e(){this.children().forEach(function(e){return e.disable&&e.disable()});if(!this.enabled()){return}this.off(["mousedown","touchstart"],this.handleMouseDown);this.off(this.el_,"mousemove",this.handleMouseMove);this.handleMouseUp();this.addClass("disabled");this.enabled_=false};i.enable=function e(){this.children().forEach(function(e){return e.enable&&e.enable()});if(this.enabled()){return}this.on(["mousedown","touchstart"],this.handleMouseDown);this.on(this.el_,"mousemove",this.handleMouseMove);this.removeClass("disabled");this.enabled_=true};i.handleMouseDown=function e(t){var i=this.el_.ownerDocument;var r=this.getChild("seekBar");if(r){r.handleMouseDown(t)}this.on(i,"mousemove",this.throttledHandleMouseSeek);this.on(i,"touchmove",this.throttledHandleMouseSeek);this.on(i,"mouseup",this.handleMouseUp);this.on(i,"touchend",this.handleMouseUp)};i.handleMouseUp=function e(t){var i=this.el_.ownerDocument;var r=this.getChild("seekBar");if(r){r.handleMouseUp(t)}this.off(i,"mousemove",this.throttledHandleMouseSeek);this.off(i,"touchmove",this.throttledHandleMouseSeek);this.off(i,"mouseup",this.handleMouseUp);this.off(i,"touchend",this.handleMouseUp)};return t}(qe);Xr.prototype.options_={children:["seekBar"]};qe.registerComponent("ProgressControl",Xr);var Zr=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,["enterpictureinpicture","leavepictureinpicture"],r.handlePictureInPictureChange);r.on(t,["disablepictureinpicturechanged","loadedmetadata"],r.handlePictureInPictureEnabledChange);r.disable();return r}var r=t.prototype;r.buildCSSClass=function t(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)};r.handlePictureInPictureEnabledChange=function e(){if(i.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===false){this.enable()}else{this.disable()}};r.handlePictureInPictureChange=function e(t){if(this.player_.isInPictureInPicture()){this.controlText("Exit Picture-in-Picture")}else{this.controlText("Picture-in-Picture")}this.handlePictureInPictureEnabledChange()};r.handleClick=function e(t){if(!this.player_.isInPictureInPicture()){this.player_.requestPictureInPicture()}else{this.player_.exitPictureInPicture()}};return t}(Ar);Zr.prototype.controlText_="Picture-in-Picture";qe.registerComponent("PictureInPictureToggle",Zr);var Kr=function(e){et(t,e);function t(t,r){var n;n=e.call(this,t,r)||this;n.on(t,"fullscreenchange",n.handleFullscreenChange);if(i[t.fsApi_.fullscreenEnabled]===false){n.disable()}return n}var r=t.prototype;r.buildCSSClass=function t(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)};r.handleFullscreenChange=function e(t){if(this.player_.isFullscreen()){this.controlText("Non-Fullscreen")}else{this.controlText("Fullscreen")}};r.handleClick=function e(t){if(!this.player_.isFullscreen()){this.player_.requestFullscreen()}else{this.player_.exitFullscreen()}};return t}(Ar);Kr.prototype.controlText_="Fullscreen";qe.registerComponent("FullscreenToggle",Kr);var Jr=function e(t,i){if(i.tech_&&!i.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}t.on(i,"loadstart",function(){if(!i.tech_.featuresVolumeControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}})};var $r=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return t}(qe);qe.registerComponent("VolumeLevel",$r);var en=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on("slideractive",r.updateLastVolume_);r.on(t,"volumechange",r.updateARIAAttributes);t.ready(function(){return r.updateARIAAttributes()});return r}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};i.handleMouseDown=function t(i){if(!q(i)){return}e.prototype.handleMouseDown.call(this,i)};i.handleMouseMove=function e(t){if(!q(t)){return}this.checkMuted();this.player_.volume(this.calculateDistance(t))};i.checkMuted=function e(){if(this.player_.muted()){this.player_.muted(false)}};i.getPercent=function e(){if(this.player_.muted()){return 0}return this.player_.volume()};i.stepForward=function e(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};i.stepBack=function e(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};i.updateARIAAttributes=function e(t){var i=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",i);this.el_.setAttribute("aria-valuetext",i+"%")};i.volumeAsPercentage_=function e(){return Math.round(this.player_.volume()*100)};i.updateLastVolume_=function e(){var t=this;var i=this.player_.volume();this.one("sliderinactive",function(){if(t.player_.volume()===0){t.player_.lastVolume_(i)}})};return t}(Br);en.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};en.prototype.playerEvent="volumechange";qe.registerComponent("VolumeBar",en);var tn=function(e){et(t,e);function t(t,i){var r;if(i===void 0){i={}}i.vertical=i.vertical||false;if(typeof i.volumeBar==="undefined"||g(i.volumeBar)){i.volumeBar=i.volumeBar||{};i.volumeBar.vertical=i.vertical}r=e.call(this,t,i)||this;Jr(Ze(r),t);r.throttledHandleMouseMove=we(Ae(Ze(r),r.handleMouseMove),Te);r.on("mousedown",r.handleMouseDown);r.on("touchstart",r.handleMouseDown);r.on(r.volumeBar,["focus","slideractive"],function(){r.volumeBar.addClass("vjs-slider-active");r.addClass("vjs-slider-active");r.trigger("slideractive")});r.on(r.volumeBar,["blur","sliderinactive"],function(){r.volumeBar.removeClass("vjs-slider-active");r.removeClass("vjs-slider-active");r.trigger("sliderinactive")});return r}var i=t.prototype;i.createEl=function t(){var i="vjs-volume-horizontal";if(this.options_.vertical){i="vjs-volume-vertical"}return e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+i})};i.handleMouseDown=function e(t){var i=this.el_.ownerDocument;this.on(i,"mousemove",this.throttledHandleMouseMove);this.on(i,"touchmove",this.throttledHandleMouseMove);this.on(i,"mouseup",this.handleMouseUp);this.on(i,"touchend",this.handleMouseUp)};i.handleMouseUp=function e(t){var i=this.el_.ownerDocument;this.off(i,"mousemove",this.throttledHandleMouseMove);this.off(i,"touchmove",this.throttledHandleMouseMove);this.off(i,"mouseup",this.handleMouseUp);this.off(i,"touchend",this.handleMouseUp)};i.handleMouseMove=function e(t){this.volumeBar.handleMouseMove(t)};return t}(qe);tn.prototype.options_={children:["volumeBar"]};qe.registerComponent("VolumeControl",tn);var rn=function e(t,i){if(i.tech_&&!i.tech_.featuresMuteControl){t.addClass("vjs-hidden")}t.on(i,"loadstart",function(){if(!i.tech_.featuresMuteControl){t.addClass("vjs-hidden")}else{t.removeClass("vjs-hidden")}})};var nn=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;rn(Ze(r),t);r.on(t,["loadstart","volumechange"],r.update);return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)};i.handleClick=function e(t){var i=this.player_.volume();var r=this.player_.lastVolume_();if(i===0){var n=r<.1?.1:r;this.player_.volume(n);this.player_.muted(false)}else{this.player_.muted(this.player_.muted()?false:true)}};i.update=function e(t){this.updateIcon_();this.updateControlText_()};i.updateIcon_=function e(){var t=this.player_.volume();var i=3;if(_t&&this.player_.tech_&&this.player_.tech_.el_){this.player_.muted(this.player_.tech_.el_.muted)}if(t===0||this.player_.muted()){i=0}else if(t<.33){i=1}else if(t<.67){i=2}for(var r=0;r<4;r++){L(this.el_,"vjs-vol-"+r)}j(this.el_,"vjs-vol-"+i)};i.updateControlText_=function e(){var t=this.player_.muted()||this.player_.volume()===0;var i=t?"Unmute":"Mute";if(this.controlText()!==i){this.controlText(i)}};return t}(Ar);nn.prototype.controlText_="Mute";qe.registerComponent("MuteToggle",nn);var an=function(e){et(t,e);function t(t,i){var r;if(i===void 0){i={}}if(typeof i.inline!=="undefined"){i.inline=i.inline}else{i.inline=true}if(typeof i.volumeControl==="undefined"||g(i.volumeControl)){i.volumeControl=i.volumeControl||{};i.volumeControl.vertical=!i.inline}r=e.call(this,t,i)||this;r.on(t,["loadstart"],r.volumePanelState_);r.on(r.muteToggle,"keyup",r.handleKeyPress);r.on(r.volumeControl,"keyup",r.handleVolumeControlKeyUp);r.on("keydown",r.handleKeyPress);r.on("mouseover",r.handleMouseOver);r.on("mouseout",r.handleMouseOut);r.on(r.volumeControl,["slideractive"],r.sliderActive_);r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_);return r}var r=t.prototype;r.sliderActive_=function e(){this.addClass("vjs-slider-active")};r.sliderInactive_=function e(){this.removeClass("vjs-slider-active")};r.volumePanelState_=function e(){if(this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-hidden")}if(this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")){this.addClass("vjs-mute-toggle-only")}};r.createEl=function t(){var i="vjs-volume-panel-horizontal";if(!this.options_.inline){i="vjs-volume-panel-vertical"}return e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+i})};r.dispose=function t(){this.handleMouseOut();e.prototype.dispose.call(this)};r.handleVolumeControlKeyUp=function e(t){if(Gt.isEventKey(t,"Esc")){this.muteToggle.focus()}};r.handleMouseOver=function e(t){this.addClass("vjs-hover");ve(i,"keyup",Ae(this,this.handleKeyPress))};r.handleMouseOut=function e(t){this.removeClass("vjs-hover");ge(i,"keyup",Ae(this,this.handleKeyPress))};r.handleKeyPress=function e(t){if(Gt.isEventKey(t,"Esc")){this.handleMouseOut()}};return t}(qe);an.prototype.options_={children:["muteToggle","volumeControl"]};qe.registerComponent("VolumePanel",an);var sn=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;if(i){r.menuButton_=i.menuButton}r.focusedChild_=-1;r.on("keydown",r.handleKeyDown);r.boundHandleBlur_=Ae(Ze(r),r.handleBlur);r.boundHandleTapClick_=Ae(Ze(r),r.handleTapClick);return r}var r=t.prototype;r.addEventListenerForItem=function e(t){if(!(t instanceof qe)){return}this.on(t,"blur",this.boundHandleBlur_);this.on(t,["tap","click"],this.boundHandleTapClick_)};r.removeEventListenerForItem=function e(t){if(!(t instanceof qe)){return}this.off(t,"blur",this.boundHandleBlur_);this.off(t,["tap","click"],this.boundHandleTapClick_)};r.removeChild=function t(i){if(typeof i==="string"){i=this.getChild(i)}this.removeEventListenerForItem(i);e.prototype.removeChild.call(this,i)};r.addItem=function e(t){var i=this.addChild(t);if(i){this.addEventListenerForItem(i)}};r.createEl=function t(){var i=this.options_.contentElType||"ul";this.contentEl_=x(i,{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var r=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});r.appendChild(this.contentEl_);ve(r,"click",function(e){e.preventDefault();e.stopImmediatePropagation()});return r};r.dispose=function t(){this.contentEl_=null;this.boundHandleBlur_=null;this.boundHandleTapClick_=null;e.prototype.dispose.call(this)};r.handleBlur=function e(t){var r=t.relatedTarget||i.activeElement;if(!this.children().some(function(e){return e.el()===r})){var n=this.menuButton_;if(n&&n.buttonPressed_&&r!==n.el().firstChild){n.unpressButton()}}};r.handleTapClick=function e(t){if(this.menuButton_){this.menuButton_.unpressButton();var i=this.children();if(!Array.isArray(i)){return}var r=i.filter(function(e){return e.el()===t.target})[0];if(!r){return}if(r.name()!=="CaptionSettingsMenuItem"){this.menuButton_.focus()}}};r.handleKeyDown=function e(t){if(Gt.isEventKey(t,"Left")||Gt.isEventKey(t,"Down")){t.preventDefault();t.stopPropagation();this.stepForward()}else if(Gt.isEventKey(t,"Right")||Gt.isEventKey(t,"Up")){t.preventDefault();t.stopPropagation();this.stepBack()}};r.stepForward=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_+1}this.focus(t)};r.stepBack=function e(){var t=0;if(this.focusedChild_!==undefined){t=this.focusedChild_-1}this.focus(t)};r.focus=function e(t){if(t===void 0){t=0}var i=this.children().slice();var r=i.length&&i[0].className&&/vjs-menu-title/.test(i[0].className);if(r){i.shift()}if(i.length>0){if(t<0){t=0}else if(t>=i.length){t=i.length-1}this.focusedChild_=t;i[t].el_.focus()}};return t}(qe);qe.registerComponent("Menu",sn);var on=function(e){et(t,e);function t(t,r){var n;if(r===void 0){r={}}n=e.call(this,t,r)||this;n.menuButton_=new Ar(t,r);n.menuButton_.controlText(n.controlText_);n.menuButton_.el_.setAttribute("aria-haspopup","true");var a=Ar.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+a;n.menuButton_.removeClass("vjs-control");n.addChild(n.menuButton_);n.update();n.enabled_=true;n.on(n.menuButton_,"tap",n.handleClick);n.on(n.menuButton_,"click",n.handleClick);n.on(n.menuButton_,"keydown",n.handleKeyDown);n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover");n.menu.show();ve(i,"keyup",Ae(Ze(n),n.handleMenuKeyUp))});n.on("mouseleave",n.handleMouseLeave);n.on("keydown",n.handleSubmenuKeyDown);return n}var r=t.prototype;r.update=function e(){var t=this.createMenu();if(this.menu){this.menu.dispose();this.removeChild(this.menu)}this.menu=t;this.addChild(t);this.buttonPressed_=false;this.menuButton_.el_.setAttribute("aria-expanded","false");if(this.items&&this.items.length<=this.hideThreshold_){this.hide()}else{this.show()}};r.createMenu=function e(){var t=new sn(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var i=x("li",{className:"vjs-menu-title",innerHTML:Fe(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var r=new qe(this.player_,{el:i});t.addItem(r)}this.items=this.createItems();if(this.items){for(var n=0;n<this.items.length;n++){t.addItem(this.items[n])}}return t};r.createItems=function e(){};r.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};r.buildWrapperCSSClass=function t(){var i="vjs-menu-button";if(this.options_.inline===true){i+="-inline"}else{i+="-popup"}var r=Ar.prototype.buildCSSClass();return"vjs-menu-button "+i+" "+r+" "+e.prototype.buildCSSClass.call(this)};r.buildCSSClass=function t(){var i="vjs-menu-button";if(this.options_.inline===true){i+="-inline"}else{i+="-popup"}return"vjs-menu-button "+i+" "+e.prototype.buildCSSClass.call(this)};r.controlText=function e(t,i){if(i===void 0){i=this.menuButton_.el()}return this.menuButton_.controlText(t,i)};r.dispose=function t(){this.handleMouseLeave();e.prototype.dispose.call(this)};r.handleClick=function e(t){if(this.buttonPressed_){this.unpressButton()}else{this.pressButton()}};r.handleMouseLeave=function e(t){this.removeClass("vjs-hover");ge(i,"keyup",Ae(this,this.handleMenuKeyUp))};r.focus=function e(){this.menuButton_.focus()};r.blur=function e(){this.menuButton_.blur()};r.handleKeyDown=function e(t){if(Gt.isEventKey(t,"Esc")||Gt.isEventKey(t,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!Gt.isEventKey(t,"Tab")){t.preventDefault();this.menuButton_.focus()}}else if(Gt.isEventKey(t,"Up")||Gt.isEventKey(t,"Down")){if(!this.buttonPressed_){t.preventDefault();this.pressButton()}}};r.handleMenuKeyUp=function e(t){if(Gt.isEventKey(t,"Esc")||Gt.isEventKey(t,"Tab")){this.removeClass("vjs-hover")}};r.handleSubmenuKeyPress=function e(t){this.handleSubmenuKeyDown(t)};r.handleSubmenuKeyDown=function e(t){if(Gt.isEventKey(t,"Esc")||Gt.isEventKey(t,"Tab")){if(this.buttonPressed_){this.unpressButton()}if(!Gt.isEventKey(t,"Tab")){t.preventDefault();this.menuButton_.focus()}}};r.pressButton=function e(){if(this.enabled_){this.buttonPressed_=true;this.menu.show();this.menu.lockShowing();this.menuButton_.el_.setAttribute("aria-expanded","true");if(_t&&w()){return}this.menu.focus()}};r.unpressButton=function e(){if(this.enabled_){this.buttonPressed_=false;this.menu.unlockShowing();this.menu.hide();this.menuButton_.el_.setAttribute("aria-expanded","false")}};r.disable=function e(){this.unpressButton();this.enabled_=false;this.addClass("vjs-disabled");this.menuButton_.disable()};r.enable=function e(){this.enabled_=true;this.removeClass("vjs-disabled");this.menuButton_.enable()};return t}(qe);qe.registerComponent("MenuButton",on);var ln=function(e){et(t,e);function t(t,i){var r;var n=i.tracks;r=e.call(this,t,i)||this;if(r.items.length<=1){r.hide()}if(!n){return Ze(r)}var a=Ae(Ze(r),r.update);n.addEventListener("removetrack",a);n.addEventListener("addtrack",a);r.player_.on("ready",a);r.player_.on("dispose",function(){n.removeEventListener("removetrack",a);n.removeEventListener("addtrack",a)});return r}return t}(on);qe.registerComponent("TrackButton",ln);var un=["Tab","Esc","Up","Down","Right","Left"];var cn=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.selectable=i.selectable;r.isSelected_=i.selected||false;r.multiSelectable=i.multiSelectable;r.selected(r.isSelected_);if(r.selectable){if(r.multiSelectable){r.el_.setAttribute("role","menuitemcheckbox")}else{r.el_.setAttribute("role","menuitemradio")}}else{r.el_.setAttribute("role","menuitem")}return r}var i=t.prototype;i.createEl=function t(i,r,n){this.nonIconControl=true;return e.prototype.createEl.call(this,"li",m({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},r),n)};i.handleKeyDown=function t(i){if(!un.some(function(e){return Gt.isEventKey(i,e)})){e.prototype.handleKeyDown.call(this,i)}};i.handleClick=function e(t){this.selected(true)};i.selected=function e(t){if(this.selectable){if(t){this.addClass("vjs-selected");this.el_.setAttribute("aria-checked","true");this.controlText(", selected");this.isSelected_=true}else{this.removeClass("vjs-selected");this.el_.setAttribute("aria-checked","false");this.controlText("");this.isSelected_=false}}};return t}(pr);qe.registerComponent("MenuItem",cn);var dn=function(e){et(r,e);function r(r,n){var a;var s=n.track;var o=r.textTracks();n.label=s.label||s.language||"Unknown";n.selected=s.mode==="showing";a=e.call(this,r,n)||this;a.track=s;a.kinds=(n.kinds||[n.kind||a.track.kind]).filter(Boolean);var l=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}a.handleTracksChange.apply(Ze(a),i)};var u=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}a.handleSelectedLanguageChange.apply(Ze(a),i)};r.on(["loadstart","texttrackchange"],l);o.addEventListener("change",l);o.addEventListener("selectedlanguagechange",u);a.on("dispose",function(){r.off(["loadstart","texttrackchange"],l);o.removeEventListener("change",l);o.removeEventListener("selectedlanguagechange",u)});if(o.onchange===undefined){var c;a.on(["tap","click"],function(){if(typeof t.Event!=="object"){try{c=new t.Event("change")}catch(e){}}if(!c){c=i.createEvent("Event");c.initEvent("change",true,true)}o.dispatchEvent(c)})}a.handleTracksChange();return a}var n=r.prototype;n.handleClick=function t(i){var r=this.track;var n=this.player_.textTracks();e.prototype.handleClick.call(this,i);if(!n){return}for(var a=0;a<n.length;a++){var s=n[a];if(this.kinds.indexOf(s.kind)===-1){continue}if(s===r){if(s.mode!=="showing"){s.mode="showing"}}else if(s.mode!=="disabled"){s.mode="disabled"}}};n.handleTracksChange=function e(t){var i=this.track.mode==="showing";if(i!==this.isSelected_){this.selected(i)}};n.handleSelectedLanguageChange=function e(t){if(this.track.mode==="showing"){var i=this.player_.cache_.selectedLanguage;if(i&&i.enabled&&i.language===this.track.language&&i.kind!==this.track.kind){return}this.player_.cache_.selectedLanguage={enabled:true,language:this.track.language,kind:this.track.kind}}};n.dispose=function t(){this.track=null;e.prototype.dispose.call(this)};return r}(cn);qe.registerComponent("TextTrackMenuItem",dn);var hn=function(e){et(t,e);function t(t,i){i.track={player:t,kind:i.kind,kinds:i.kinds,default:false,mode:"disabled"};if(!i.kinds){i.kinds=[i.kind]}if(i.label){i.track.label=i.label}else{i.track.label=i.kinds.join(" and ")+" off"}i.selectable=true;i.multiSelectable=false;return e.call(this,t,i)||this}var i=t.prototype;i.handleTracksChange=function e(t){var i=this.player().textTracks();var r=true;for(var n=0,a=i.length;n<a;n++){var s=i[n];if(this.options_.kinds.indexOf(s.kind)>-1&&s.mode==="showing"){r=false;break}}if(r!==this.isSelected_){this.selected(r)}};i.handleSelectedLanguageChange=function e(t){var i=this.player().textTracks();var r=true;for(var n=0,a=i.length;n<a;n++){var s=i[n];if(["captions","descriptions","subtitles"].indexOf(s.kind)>-1&&s.mode==="showing"){r=false;break}}if(r){this.player_.cache_.selectedLanguage={enabled:false}}};return t}(dn);qe.registerComponent("OffTextTrackMenuItem",hn);var fn=function(e){et(t,e);function t(t,i){if(i===void 0){i={}}i.tracks=t.textTracks();return e.call(this,t,i)||this}var i=t.prototype;i.createItems=function e(t,i){if(t===void 0){t=[]}if(i===void 0){i=dn}var r;if(this.label_){r=this.label_+" off"}t.push(new hn(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r}));this.hideThreshold_+=1;var n=this.player_.textTracks();if(!Array.isArray(this.kinds_)){this.kinds_=[this.kind_]}for(var a=0;a<n.length;a++){var s=n[a];if(this.kinds_.indexOf(s.kind)>-1){var o=new i(this.player_,{track:s,kinds:this.kinds_,kind:this.kind_,selectable:true,multiSelectable:false});o.addClass("vjs-"+s.kind+"-menu-item");t.push(o)}}return t};return t}(ln);qe.registerComponent("TextTrackButton",fn);var pn=function(e){et(t,e);function t(t,i){var r;var n=i.track;var a=i.cue;var s=t.currentTime();i.selectable=true;i.multiSelectable=false;i.label=a.text;i.selected=a.startTime<=s&&s<a.endTime;r=e.call(this,t,i)||this;r.track=n;r.cue=a;n.addEventListener("cuechange",Ae(Ze(r),r.update));return r}var i=t.prototype;i.handleClick=function t(i){e.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};i.update=function e(t){var i=this.cue;var r=this.player_.currentTime();this.selected(i.startTime<=r&&r<i.endTime)};return t}(cn);qe.registerComponent("ChaptersTrackMenuItem",pn);var mn=function(e){et(t,e);function t(t,i,r){return e.call(this,t,i,r)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)};i.update=function t(i){if(!this.track_||i&&(i.type==="addtrack"||i.type==="removetrack")){this.setTrack(this.findChaptersTrack())}e.prototype.update.call(this)};i.setTrack=function e(t){if(this.track_===t){return}if(!this.updateHandler_){this.updateHandler_=this.update.bind(this)}if(this.track_){var i=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(i){i.removeEventListener("load",this.updateHandler_)}this.track_=null}this.track_=t;if(this.track_){this.track_.mode="hidden";var r=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);if(r){r.addEventListener("load",this.updateHandler_)}}};i.findChaptersTrack=function e(){var t=this.player_.textTracks()||[];for(var i=t.length-1;i>=0;i--){var r=t[i];if(r.kind===this.kind_){return r}}};i.getMenuCaption=function e(){if(this.track_&&this.track_.label){return this.track_.label}return this.localize(Fe(this.kind_))};i.createMenu=function t(){this.options_.title=this.getMenuCaption();return e.prototype.createMenu.call(this)};i.createItems=function e(){var t=[];if(!this.track_){return t}var i=this.track_.cues;if(!i){return t}for(var r=0,n=i.length;r<n;r++){var a=i[r];var s=new pn(this.player_,{track:this.track_,cue:a});t.push(s)}return t};return t}(fn);mn.prototype.kind_="chapters";mn.prototype.controlText_="Chapters";qe.registerComponent("ChaptersButton",mn);var vn=function(e){et(t,e);function t(t,i,r){var n;n=e.call(this,t,i,r)||this;var a=t.textTracks();var s=Ae(Ze(n),n.handleTracksChange);a.addEventListener("change",s);n.on("dispose",function(){a.removeEventListener("change",s)});return n}var i=t.prototype;i.handleTracksChange=function e(t){var i=this.player().textTracks();var r=false;for(var n=0,a=i.length;n<a;n++){var s=i[n];if(s.kind!==this.kind_&&s.mode==="showing"){r=true;break}}if(r){this.disable()}else{this.enable()}};i.buildCSSClass=function t(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)};return t}(fn);vn.prototype.kind_="descriptions";vn.prototype.controlText_="Descriptions";qe.registerComponent("DescriptionsButton",vn);var gn=function(e){et(t,e);function t(t,i,r){return e.call(this,t,i,r)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)};return t}(fn);gn.prototype.kind_="subtitles";gn.prototype.controlText_="Subtitles";qe.registerComponent("SubtitlesButton",gn);var yn=function(e){et(t,e);function t(t,i){var r;i.track={player:t,kind:i.kind,label:i.kind+" settings",selectable:false,default:false,mode:"disabled"};i.selectable=false;i.name="CaptionSettingsMenuItem";r=e.call(this,t,i)||this;r.addClass("vjs-texttrack-settings");r.controlText(", opens "+i.kind+" settings dialog");return r}var i=t.prototype;i.handleClick=function e(t){this.player().getChild("textTrackSettings").open()};return t}(dn);qe.registerComponent("CaptionSettingsMenuItem",yn);var _n=function(e){et(t,e);function t(t,i,r){return e.call(this,t,i,r)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)};i.createItems=function t(){var i=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){i.push(new yn(this.player_,{kind:this.kind_}));this.hideThreshold_+=1}return e.prototype.createItems.call(this,i)};return t}(fn);_n.prototype.kind_="captions";_n.prototype.controlText_="Captions";qe.registerComponent("CaptionsButton",_n);var bn=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(i,r,n){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="captions"){a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "}a+="</span>";var s=e.prototype.createEl.call(this,i,m({innerHTML:a},r),n);return s};return t}(dn);qe.registerComponent("SubsCapsMenuItem",bn);var Mn=function(e){et(t,e);function t(t,i){var r;if(i===void 0){i={}}r=e.call(this,t,i)||this;r.label_="subtitles";if(["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1){r.label_="captions"}r.menuButton_.controlText(Fe(r.label_));return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)};i.createItems=function t(){var i=[];if(!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")){i.push(new yn(this.player_,{kind:this.label_}));this.hideThreshold_+=1}i=e.prototype.createItems.call(this,i,bn);return i};return t}(fn);Mn.prototype.kinds_=["captions","subtitles"];Mn.prototype.controlText_="Subtitles";qe.registerComponent("SubsCapsButton",Mn);var Tn=function(e){et(t,e);function t(t,i){var r;var n=i.track;var a=t.audioTracks();i.label=n.label||n.language||"Unknown";i.selected=n.enabled;r=e.call(this,t,i)||this;r.track=n;r.addClass("vjs-"+n.kind+"-menu-item");var s=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++){i[n]=arguments[n]}r.handleTracksChange.apply(Ze(r),i)};a.addEventListener("change",s);r.on("dispose",function(){a.removeEventListener("change",s)});return r}var i=t.prototype;i.createEl=function t(i,r,n){var a='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);if(this.options_.track.kind==="main-desc"){a+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "}a+="</span>";var s=e.prototype.createEl.call(this,i,m({innerHTML:a},r),n);return s};i.handleClick=function t(i){var r=this.player_.audioTracks();e.prototype.handleClick.call(this,i);for(var n=0;n<r.length;n++){var a=r[n];a.enabled=a===this.track}};i.handleTracksChange=function e(t){this.selected(this.track.enabled)};return t}(cn);qe.registerComponent("AudioTrackMenuItem",Tn);var An=function(e){et(t,e);function t(t,i){if(i===void 0){i={}}i.tracks=t.audioTracks();return e.call(this,t,i)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)};i.createItems=function e(t){if(t===void 0){t=[]}this.hideThreshold_=1;var i=this.player_.audioTracks();for(var r=0;r<i.length;r++){var n=i[r];t.push(new Tn(this.player_,{track:n,selectable:true,multiSelectable:false}))}return t};return t}(ln);An.prototype.controlText_="Audio Track";qe.registerComponent("AudioTrackButton",An);var wn=function(e){et(t,e);function t(t,i){var r;var n=i.rate;var a=parseFloat(n,10);i.label=n;i.selected=a===1;i.selectable=true;i.multiSelectable=false;r=e.call(this,t,i)||this;r.label=n;r.rate=a;r.on(t,"ratechange",r.update);return r}var i=t.prototype;i.handleClick=function t(i){e.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};i.update=function e(t){this.selected(this.player().playbackRate()===this.rate)};return t}(cn);wn.prototype.contentElType="button";qe.registerComponent("PlaybackRateMenuItem",wn);var En=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.updateVisibility();r.updateLabel();r.on(t,"loadstart",r.updateVisibility);r.on(t,"ratechange",r.updateLabel);return r}var i=t.prototype;i.createEl=function t(){var i=e.prototype.createEl.call(this);this.labelEl_=x("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});i.appendChild(this.labelEl_);return i};i.dispose=function t(){this.labelEl_=null;e.prototype.dispose.call(this)};i.buildCSSClass=function t(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)};i.buildWrapperCSSClass=function t(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)};i.createMenu=function e(){var t=new sn(this.player());var i=this.playbackRates();if(i){for(var r=i.length-1;r>=0;r--){t.addChild(new wn(this.player(),{rate:i[r]+"x"}))}}return t};i.updateARIAAttributes=function e(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};i.handleClick=function e(t){var i=this.player().playbackRate();var r=this.playbackRates();var n=r[0];for(var a=0;a<r.length;a++){if(r[a]>i){n=r[a];break}}this.player().playbackRate(n)};i.playbackRates=function e(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};i.playbackRateSupported=function e(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0};i.updateVisibility=function e(t){if(this.playbackRateSupported()){this.removeClass("vjs-hidden")}else{this.addClass("vjs-hidden")}};i.updateLabel=function e(t){if(this.playbackRateSupported()){this.labelEl_.innerHTML=this.player().playbackRate()+"x"}};return t}(on);En.prototype.controlText_="Playback Rate";qe.registerComponent("PlaybackRateMenuButton",En);var xn=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)};i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};return t}(qe);qe.registerComponent("Spacer",xn);var Sn=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)};i.createEl=function t(){var i=e.prototype.createEl.call(this,{className:this.buildCSSClass()});i.innerHTML="\xa0";return i};return t}(xn);qe.registerComponent("CustomControlSpacer",Sn);var Dn=function(e){et(t,e);function t(){return e.apply(this,arguments)||this}var i=t.prototype;i.createEl=function t(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return t}(qe);Dn.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};if("exitPictureInPicture"in i){Dn.prototype.options_.children.splice(Dn.prototype.options_.children.length-1,0,"pictureInPictureToggle")}qe.registerComponent("ControlBar",Dn);var In=function(e){et(t,e);function t(t,i){var r;r=e.call(this,t,i)||this;r.on(t,"error",r.open);return r}var i=t.prototype;i.buildCSSClass=function t(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)};i.content=function e(){var t=this.player().error();return t?this.localize(t.message):""};return t}(Zt);In.prototype.options_=c({},Zt.prototype.options_,{pauseOnOpen:false,fillAlways:true,temporary:false,uncloseable:true});qe.registerComponent("ErrorDisplay",In);var jn="vjs-text-track-settings";var Ln=["#000","Black"];var Nn=["#00F","Blue"];var Cn=["#0FF","Cyan"];var On=["#0F0","Green"];var kn=["#F0F","Magenta"];var Pn=["#F00","Red"];var Rn=["#FFF","White"];var zn=["#FF0","Yellow"];var Un=["1","Opaque"];var Bn=["0.5","Semi-Transparent"];var Fn=["0","Transparent"];var Vn={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ln,Rn,Pn,On,Nn,zn,kn,Cn]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Un,Bn,Fn]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Rn,Ln,Pn,On,Nn,zn,kn,Cn]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function e(t){return t==="1.00"?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Un,Bn]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Fn,Bn,Un]}};Vn.windowColor.options=Vn.backgroundColor.options;function Gn(e,t){if(t){e=t(e)}if(e&&e!=="none"){return e}}function Hn(e,t){var i=e.options[e.options.selectedIndex].value;return Gn(i,t)}function Qn(e,t,i){if(!t){return}for(var r=0;r<e.options.length;r++){if(Gn(e.options[r].value,i)===t){e.selectedIndex=r;break}}}var Yn=function(e){et(i,e);function i(t,i){var r;i.temporary=false;r=e.call(this,t,i)||this;r.updateDisplay=Ae(Ze(r),r.updateDisplay);r.fill();r.hasBeenOpened_=r.hasBeenFilled_=true;r.endDialog=x("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")});r.el().appendChild(r.endDialog);r.setDefaults();if(i.persistTextTrackSettings===undefined){r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings}r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings();r.close()});r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults();r.updateDisplay()});f(Vn,function(e){r.on(r.$(e.selector),"change",r.updateDisplay)});if(r.options_.persistTextTrackSettings){r.restoreSettings()}return r}var r=i.prototype;r.dispose=function t(){this.endDialog=null;e.prototype.dispose.call(this)};r.createElSelect_=function e(t,i,r){var n=this;if(i===void 0){i=""}if(r===void 0){r="label"}var a=Vn[t];var s=a.id.replace("%s",this.id_);var o=[i,s].join(" ").trim();return["<"+r+' id="'+s+'" class="'+(r==="label"?"vjs-label":"")+'">',this.localize(a.label),"</"+r+">",'<select aria-labelledby="'+o+'">'].concat(a.options.map(function(e){var t=s+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',n.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")};r.createElFgColor_=function e(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")};r.createElBgColor_=function e(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")};r.createElWinColor_=function e(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")};r.createElColors_=function e(){return x("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};r.createElFont_=function e(){return x("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};r.createElControls_=function e(){var t=this.localize("restore all settings to the default values");return x("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};r.content=function e(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};r.label=function e(){return this.localize("Caption Settings Dialog")};r.description=function e(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};r.buildCSSClass=function t(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};r.getValues=function e(){var t=this;return p(Vn,function(e,i,r){var n=Hn(t.$(i.selector),i.parser);if(n!==undefined){e[r]=n}return e},{})};r.setValues=function e(t){var i=this;f(Vn,function(e,r){Qn(i.$(e.selector),t[r],e.parser)})};r.setDefaults=function e(){var t=this;f(Vn,function(e){var i=e.hasOwnProperty("default")?e["default"]:0;t.$(e.selector).selectedIndex=i})};r.restoreSettings=function e(){var i;try{i=JSON.parse(t.localStorage.getItem(jn))}catch(e){o.warn(e)}if(i){this.setValues(i)}};r.saveSettings=function e(){if(!this.options_.persistTextTrackSettings){return}var i=this.getValues();try{if(Object.keys(i).length){t.localStorage.setItem(jn,JSON.stringify(i))}else{t.localStorage.removeItem(jn)}}catch(e){o.warn(e)}};r.updateDisplay=function e(){var t=this.player_.getChild("textTrackDisplay");if(t){t.updateDisplay()}};r.conditionalBlur_=function e(){this.previouslyActiveEl_=null;var t=this.player_.controlBar;var i=t&&t.subsCapsButton;var r=t&&t.captionsButton;if(i){i.focus()}else if(r){r.focus()}};return i}(Zt);qe.registerComponent("TextTrackSettings",Yn);var Wn=function(e){et(i,e);function i(i,r){var n;var a=r.ResizeObserver||t.ResizeObserver;if(r.ResizeObserver===null){a=false}var s=Ge({createEl:!a,reportTouchActivity:false},r);n=e.call(this,i,s)||this;n.ResizeObserver=r.ResizeObserver||t.ResizeObserver;n.loadListener_=null;n.resizeObserver_=null;n.debouncedHandler_=Ee(function(){n.resizeHandler()},100,false,Ze(n));if(a){n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_);n.resizeObserver_.observe(i.el())}else{n.loadListener_=function(){if(!n.el_||!n.el_.contentWindow){return}var e=n.debouncedHandler_;var t=n.unloadListener_=function(){ge(this,"resize",e);ge(this,"unload",t);t=null};ve(n.el_.contentWindow,"unload",t);ve(n.el_.contentWindow,"resize",e)};n.one("load",n.loadListener_)}return n}var r=i.prototype;r.createEl=function t(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})};r.resizeHandler=function e(){if(!this.player_||!this.player_.trigger){return}this.player_.trigger("playerresize")};r.dispose=function t(){if(this.debouncedHandler_){this.debouncedHandler_.cancel()}if(this.resizeObserver_){if(this.player_.el()){this.resizeObserver_.unobserve(this.player_.el())}this.resizeObserver_.disconnect()}if(this.loadListener_){this.off("load",this.loadListener_)}if(this.el_&&this.el_.contentWindow&&this.unloadListener_){this.unloadListener_.call(this.el_.contentWindow)}this.ResizeObserver=null;this.resizeObserver=null;this.debouncedHandler_=null;this.loadListener_=null;e.prototype.dispose.call(this)};return i}(qe);qe.registerComponent("ResizeManager",Wn);var qn={trackingThreshold:30,liveTolerance:15};var Xn=function(e){et(r,e);function r(t,r){var n;var a=Ge(qn,r,{createEl:false});n=e.call(this,t,a)||this;n.reset_();n.on(n.player_,"durationchange",n.handleDurationchange);if(ft&&"hidden"in i&&"visibilityState"in i){n.on(i,"visibilitychange",n.handleVisibilityChange)}return n}var n=r.prototype;n.handleVisibilityChange=function e(){if(this.player_.duration()!==Infinity){return}if(i.hidden){this.stopTracking()}else{this.startTracking()}};n.trackLive_=function e(){var i=this.player_.seekable();if(!i||!i.length){return}var r=Number(t.performance.now().toFixed(4));var n=this.lastTime_===-1?0:(r-this.lastTime_)/1e3;this.lastTime_=r;this.pastSeekEnd_=this.pastSeekEnd()+n;var a=this.liveCurrentTime();var s=this.player_.currentTime();var o=this.player_.paused()||this.seekedBehindLive_||Math.abs(a-s)>this.options_.liveTolerance;if(!this.timeupdateSeen_||a===Infinity){o=false}if(o!==this.behindLiveEdge_){this.behindLiveEdge_=o;this.trigger("liveedgechange")}};n.handleDurationchange=function e(){if(this.player_.duration()===Infinity&&this.liveWindow()>=this.options_.trackingThreshold){if(this.player_.options_.liveui){this.player_.addClass("vjs-liveui")}this.startTracking()}else{this.player_.removeClass("vjs-liveui");this.stopTracking()}};n.startTracking=function e(){if(this.isTracking()){return}if(!this.timeupdateSeen_){this.timeupdateSeen_=this.player_.hasStarted()}this.trackingInterval_=this.setInterval(this.trackLive_,Te);this.trackLive_();this.on(this.player_,["play","pause"],this.trackLive_);if(!this.timeupdateSeen_){this.one(this.player_,"play",this.handlePlay);this.one(this.player_,"timeupdate",this.handleFirstTimeupdate)}else{this.on(this.player_,"seeked",this.handleSeeked)}};n.handleFirstTimeupdate=function e(){this.timeupdateSeen_=true;this.on(this.player_,"seeked",this.handleSeeked)};n.handleSeeked=function e(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.skipNextSeeked_?false:t>2;this.skipNextSeeked_=false;this.trackLive_()};n.handlePlay=function e(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)};n.reset_=function e(){this.lastTime_=-1;this.pastSeekEnd_=0;this.lastSeekEnd_=-1;this.behindLiveEdge_=true;this.timeupdateSeen_=false;this.seekedBehindLive_=false;this.skipNextSeeked_=false;this.clearInterval(this.trackingInterval_);this.trackingInterval_=null;this.off(this.player_,["play","pause"],this.trackLive_);this.off(this.player_,"seeked",this.handleSeeked);this.off(this.player_,"play",this.handlePlay);this.off(this.player_,"timeupdate",this.handleFirstTimeupdate);this.off(this.player_,"timeupdate",this.seekToLiveEdge)};n.stopTracking=function e(){if(!this.isTracking()){return}this.reset_();this.trigger("liveedgechange")};n.seekableEnd=function e(){var t=this.player_.seekable();var i=[];var r=t?t.length:0;while(r--){i.push(t.end(r))}return i.length?i.sort()[i.length-1]:Infinity};n.seekableStart=function e(){var t=this.player_.seekable();var i=[];var r=t?t.length:0;while(r--){i.push(t.start(r))}return i.length?i.sort()[0]:0};n.liveWindow=function e(){var t=this.liveCurrentTime();if(t===Infinity){return Infinity}return t-this.seekableStart()};n.isLive=function e(){return this.isTracking()};n.atLiveEdge=function e(){return!this.behindLiveEdge()};n.liveCurrentTime=function e(){return this.pastSeekEnd()+this.seekableEnd()};n.pastSeekEnd=function e(){var t=this.seekableEnd();if(this.lastSeekEnd_!==-1&&t!==this.lastSeekEnd_){this.pastSeekEnd_=0}this.lastSeekEnd_=t;return this.pastSeekEnd_};n.behindLiveEdge=function e(){return this.behindLiveEdge_};n.isTracking=function e(){return typeof this.trackingInterval_==="number"};n.seekToLiveEdge=function e(){this.seekedBehindLive_=false;if(this.atLiveEdge()){return}this.skipNextSeeked_=true;this.player_.currentTime(this.liveCurrentTime())};n.dispose=function t(){this.off(i,"visibilitychange",this.handleVisibilityChange);this.stopTracking();e.prototype.dispose.call(this)};return r}(qe);qe.registerComponent("LiveTracker",Xn);var Zn=function e(t){var i=t.el();if(i.hasAttribute("src")){t.triggerSourceset(i.src);return true}var r=t.$$("source");var n=[];var a="";if(!r.length){return false}for(var s=0;s<r.length;s++){var o=r[s].src;if(o&&n.indexOf(o)===-1){n.push(o)}}if(!n.length){return false}if(n.length===1){a=n[0]}t.triggerSourceset(a);return true};var Kn=Object.defineProperty({},"innerHTML",{get:function e(){return this.cloneNode(true).innerHTML},set:function e(r){var n=i.createElement(this.nodeName.toLowerCase());n.innerHTML=r;var a=i.createDocumentFragment();while(n.childNodes.length){a.appendChild(n.childNodes[0])}this.innerText="";t.Element.prototype.appendChild.call(this,a);return this.innerHTML}});var Jn=function e(t,i){var r={};for(var n=0;n<t.length;n++){r=Object.getOwnPropertyDescriptor(t[n],i);if(r&&r.set&&r.get){break}}r.enumerable=true;r.configurable=true;return r};var $n=function e(i){return Jn([i.el(),t.HTMLMediaElement.prototype,t.Element.prototype,Kn],"innerHTML")};var ea=function e(t){var i=t.el();if(i.resetSourceWatch_){return}var r={};var n=$n(t);var a=function e(r){return function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++){n[a]=arguments[a]}var s=r.apply(i,n);Zn(t);return s}};["append","appendChild","insertAdjacentHTML"].forEach(function(e){if(!i[e]){return}r[e]=i[e];i[e]=a(r[e])});Object.defineProperty(i,"innerHTML",Ge(n,{set:a(n.set)}));i.resetSourceWatch_=function(){i.resetSourceWatch_=null;Object.keys(r).forEach(function(e){i[e]=r[e]});Object.defineProperty(i,"innerHTML",n)};t.one("sourceset",i.resetSourceWatch_)};var ta=Object.defineProperty({},"src",{get:function e(){if(this.hasAttribute("src")){return hi(t.Element.prototype.getAttribute.call(this,"src"))}return""},set:function e(i){t.Element.prototype.setAttribute.call(this,"src",i);return i}});var ia=function e(i){return Jn([i.el(),t.HTMLMediaElement.prototype,ta],"src")};var ra=function e(t){if(!t.featuresSourceset){return}var i=t.el();if(i.resetSourceset_){return}var r=ia(t);var n=i.setAttribute;var a=i.load;Object.defineProperty(i,"src",Ge(r,{set:function e(n){var a=r.set.call(i,n);t.triggerSourceset(i.src);return a}}));i.setAttribute=function(e,r){var a=n.call(i,e,r);if(/src/i.test(e)){t.triggerSourceset(i.src)}return a};i.load=function(){var e=a.call(i);if(!Zn(t)){t.triggerSourceset("");ea(t)}return e};if(i.currentSrc){t.triggerSourceset(i.currentSrc)}else if(!Zn(t)){ea(t)}i.resetSourceset_=function(){i.resetSourceset_=null;i.load=a;i.setAttribute=n;Object.defineProperty(i,"src",r);if(i.resetSourceWatch_){i.resetSourceWatch_()}}};var na=function e(t,i,r,n){if(n===void 0){n=true}var a=function e(r){return Object.defineProperty(t,i,{value:r,enumerable:true,writable:true})};var s={configurable:true,enumerable:true,get:function e(){var t=r();a(t);return t}};if(n){s.set=a}return Object.defineProperty(t,i,s)};var aa=function(e){et(r,e);function r(t,i){var r;r=e.call(this,t,i)||this;var n=t.source;var a=false;if(n&&(r.el_.currentSrc!==n.src||t.tag&&t.tag.initNetworkState_===3)){r.setSource(n)}else{r.handleLateInit_(r.el_)}if(t.enableSourceset){r.setupSourcesetHandling_()}if(r.el_.hasChildNodes()){var s=r.el_.childNodes;var l=s.length;var u=[];while(l--){var c=s[l];var d=c.nodeName.toLowerCase();if(d==="track"){if(!r.featuresNativeTextTracks){u.push(c)}else{r.remoteTextTrackEls().addTrackElement_(c);r.remoteTextTracks().addTrack(c.track);r.textTracks().addTrack(c.track);if(!a&&!r.el_.hasAttribute("crossorigin")&&pi(c.src)){a=true}}}}for(var h=0;h<u.length;h++){r.el_.removeChild(u[h])}}r.proxyNativeTracks_();if(r.featuresNativeTextTracks&&a){o.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n"+"This may prevent text tracks from loading.")}r.restoreMetadataTracksInIOSNativePlayer_();if((vt||yt||lt)&&t.nativeControlsForTouch===true){r.setControls(true)}r.proxyWebkitFullscreen_();r.triggerReady();return r}var n=r.prototype;n.dispose=function t(){if(this.el_&&this.el_.resetSourceset_){this.el_.resetSourceset_()}r.disposeMediaElement(this.el_);this.options_=null;e.prototype.dispose.call(this)};n.setupSourcesetHandling_=function e(){ra(this)};n.restoreMetadataTracksInIOSNativePlayer_=function e(){var t=this.textTracks();var i;var r=function e(){i=[];for(var r=0;r<t.length;r++){var n=t[r];if(n.kind==="metadata"){i.push({track:n,storedMode:n.mode})}}};r();t.addEventListener("change",r);this.on("dispose",function(){return t.removeEventListener("change",r)});var n=function e(){for(var r=0;r<i.length;r++){var n=i[r];if(n.track.mode==="disabled"&&n.track.mode!==n.storedMode){n.track.mode=n.storedMode}}t.removeEventListener("change",e)};this.on("webkitbeginfullscreen",function(){t.removeEventListener("change",r);t.removeEventListener("change",n);t.addEventListener("change",n)});this.on("webkitendfullscreen",function(){t.removeEventListener("change",r);t.addEventListener("change",r);t.removeEventListener("change",n)})};n.overrideNative_=function e(t,i){var r=this;if(i!==this["featuresNative"+t+"Tracks"]){return}var n=t.toLowerCase();if(this[n+"TracksListeners_"]){Object.keys(this[n+"TracksListeners_"]).forEach(function(e){var t=r.el()[n+"Tracks"];t.removeEventListener(e,r[n+"TracksListeners_"][e])})}this["featuresNative"+t+"Tracks"]=!i;this[n+"TracksListeners_"]=null;this.proxyNativeTracksForType_(n)};n.overrideNativeAudioTracks=function e(t){this.overrideNative_("Audio",t)};n.overrideNativeVideoTracks=function e(t){this.overrideNative_("Video",t)};n.proxyNativeTracksForType_=function e(t){var i=this;var r=Ui[t];var n=this.el()[r.getterName];var a=this[r.getterName]();if(!this["featuresNative"+r.capitalName+"Tracks"]||!n||!n.addEventListener){return}var s={change:function e(r){var n={type:"change",target:a,currentTarget:a,srcElement:a};a.trigger(n);if(t==="text"){i[Bi.remoteText.getterName]().trigger(n)}},addtrack:function e(t){a.addTrack(t.track)},removetrack:function e(t){a.removeTrack(t.track)}};var o=function e(){var t=[];for(var i=0;i<a.length;i++){var r=false;for(var s=0;s<n.length;s++){if(n[s]===a[i]){r=true;break}}if(!r){t.push(a[i])}}while(t.length){a.removeTrack(t.shift())}};this[r.getterName+"Listeners_"]=s;Object.keys(s).forEach(function(e){var t=s[e];n.addEventListener(e,t);i.on("dispose",function(i){return n.removeEventListener(e,t)})});this.on("loadstart",o);this.on("dispose",function(e){return i.off("loadstart",o)})};n.proxyNativeTracks_=function e(){var t=this;Ui.names.forEach(function(e){t.proxyNativeTracksForType_(e)})};n.createEl=function e(){var t=this.options_.tag;if(!t||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(t){var n=t.cloneNode(true);if(t.parentNode){t.parentNode.insertBefore(n,t)}r.disposeMediaElement(t);t=n}else{t=i.createElement("video");var a=this.options_.tag&&O(this.options_.tag);var s=Ge({},a);if(!vt||this.options_.nativeControlsForTouch!==true){delete s.controls}C(t,m(s,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}if(typeof this.options_.preload!=="undefined"){P(t,"preload",this.options_.preload)}if(this.options_.disablePictureInPicture!==undefined){t.disablePictureInPicture=this.options_.disablePictureInPicture}var o=["loop","muted","playsinline","autoplay"];for(var l=0;l<o.length;l++){var u=o[l];var c=this.options_[u];if(typeof c!=="undefined"){if(c){P(t,u,u)}else{R(t,u)}t[u]=c}}return t};n.handleLateInit_=function e(t){if(t.networkState===0||t.networkState===3){return}if(t.readyState===0){var i=false;var r=function e(){i=true};this.on("loadstart",r);var n=function e(){if(!i){this.trigger("loadstart")}};this.on("loadedmetadata",n);this.ready(function(){this.off("loadstart",r);this.off("loadedmetadata",n);if(!i){this.trigger("loadstart")}});return}var a=["loadstart"];a.push("loadedmetadata");if(t.readyState>=2){a.push("loadeddata")}if(t.readyState>=3){a.push("canplay")}if(t.readyState>=4){a.push("canplaythrough")}this.ready(function(){a.forEach(function(e){this.trigger(e)},this)})};n.setScrubbing=function e(t){this.isScrubbing_=t};n.setCurrentTime=function e(t){try{if(this.isScrubbing_&&this.el_.fastSeek&&bt){this.el_.fastSeek(t)}else{this.el_.currentTime=t}}catch(e){o(e,"Video is not ready. (Video.js)")}};n.duration=function e(){var t=this;if(this.el_.duration===Infinity&&st&&dt&&this.el_.currentTime===0){var i=function e(){if(t.el_.currentTime>0){if(t.el_.duration===Infinity){t.trigger("durationchange")}t.off("timeupdate",e)}};this.on("timeupdate",i);return NaN}return this.el_.duration||NaN};n.width=function e(){return this.el_.offsetWidth};n.height=function e(){return this.el_.offsetHeight};n.proxyWebkitFullscreen_=function e(){var t=this;if(!("webkitDisplayingFullscreen"in this.el_)){return}var i=function e(){this.trigger("fullscreenchange",{isFullscreen:false})};var r=function e(){if("webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"){this.one("webkitendfullscreen",i);this.trigger("fullscreenchange",{isFullscreen:true,nativeIOSFullscreen:true})}};this.on("webkitbeginfullscreen",r);this.on("dispose",function(){t.off("webkitbeginfullscreen",r);t.off("webkitendfullscreen",i)})};n.supportsFullScreen=function e(){if(typeof this.el_.webkitEnterFullScreen==="function"){var i=t.navigator&&t.navigator.userAgent||"";if(/Android/.test(i)||!/Chrome|Mac OS X 10.5/.test(i)){return true}}return false};n.enterFullScreen=function e(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA){zt(this.el_.play());this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},0)}else{try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}};n.exitFullScreen=function e(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()};n.requestPictureInPicture=function e(){return this.el_.requestPictureInPicture()};n.src=function e(t){if(t===undefined){return this.el_.src}this.setSrc(t)};n.reset=function e(){r.resetMediaElement(this.el_)};n.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src}return this.el_.currentSrc};n.setControls=function e(t){this.el_.controls=!!t};n.addTextTrack=function t(i,r,n){if(!this.featuresNativeTextTracks){return e.prototype.addTextTrack.call(this,i,r,n)}return this.el_.addTextTrack(i,r,n)};n.createRemoteTextTrack=function t(r){if(!this.featuresNativeTextTracks){return e.prototype.createRemoteTextTrack.call(this,r)}var n=i.createElement("track");if(r.kind){n.kind=r.kind}if(r.label){n.label=r.label}if(r.language||r.srclang){n.srclang=r.language||r.srclang}if(r["default"]){n["default"]=r["default"]}if(r.id){n.id=r.id}if(r.src){n.src=r.src}return n};n.addRemoteTextTrack=function t(i,r){var n=e.prototype.addRemoteTextTrack.call(this,i,r);if(this.featuresNativeTextTracks){this.el().appendChild(n)}return n};n.removeRemoteTextTrack=function t(i){e.prototype.removeRemoteTextTrack.call(this,i);if(this.featuresNativeTextTracks){var r=this.$$("track");var n=r.length;while(n--){if(i===r[n]||i===r[n].track){this.el().removeChild(r[n])}}}};n.getVideoPlaybackQuality=function e(){if(typeof this.el().getVideoPlaybackQuality==="function"){return this.el().getVideoPlaybackQuality()}var i={};if(typeof this.el().webkitDroppedFrameCount!=="undefined"&&typeof this.el().webkitDecodedFrameCount!=="undefined"){i.droppedVideoFrames=this.el().webkitDroppedFrameCount;i.totalVideoFrames=this.el().webkitDecodedFrameCount}if(t.performance&&typeof t.performance.now==="function"){i.creationTime=t.performance.now()}else if(t.performance&&t.performance.timing&&typeof t.performance.timing.navigationStart==="number"){i.creationTime=t.Date.now()-t.performance.timing.navigationStart}return i};return r}(Hi);na(aa,"TEST_VID",function(){if(!T()){return}var e=i.createElement("video");var t=i.createElement("track");t.kind="captions";t.srclang="en";t.label="English";e.appendChild(t);return e});aa.isSupported=function(){try{aa.TEST_VID.volume=.5}catch(e){return false}return!!(aa.TEST_VID&&aa.TEST_VID.canPlayType)};aa.canPlayType=function(e){return aa.TEST_VID.canPlayType(e)};aa.canPlaySource=function(e,t){return aa.canPlayType(e.type)};aa.canControlVolume=function(){try{var e=aa.TEST_VID.volume;aa.TEST_VID.volume=e/2+.1;return e!==aa.TEST_VID.volume}catch(e){return false}};aa.canMuteVolume=function(){try{var e=aa.TEST_VID.muted;aa.TEST_VID.muted=!e;if(aa.TEST_VID.muted){P(aa.TEST_VID,"muted","muted")}else{R(aa.TEST_VID,"muted","muted")}return e!==aa.TEST_VID.muted}catch(e){return false}};aa.canControlPlaybackRate=function(){if(st&&dt&&ht<58){return false}try{var e=aa.TEST_VID.playbackRate;aa.TEST_VID.playbackRate=e/2+.1;return e!==aa.TEST_VID.playbackRate}catch(e){return false}};aa.canOverrideAttributes=function(){try{var e=function e(){};Object.defineProperty(i.createElement("video"),"src",{get:e,set:e});Object.defineProperty(i.createElement("audio"),"src",{get:e,set:e});Object.defineProperty(i.createElement("video"),"innerHTML",{get:e,set:e});Object.defineProperty(i.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return false}return true};aa.supportsNativeTextTracks=function(){return bt||_t&&dt};aa.supportsNativeVideoTracks=function(){return!!(aa.TEST_VID&&aa.TEST_VID.videoTracks)};aa.supportsNativeAudioTracks=function(){return!!(aa.TEST_VID&&aa.TEST_VID.audioTracks)};aa.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(e){var t=e[0],i=e[1];na(aa.prototype,t,function(){return aa[i]()},true)});aa.prototype.movingMediaElementInDOM=!_t;aa.prototype.featuresFullscreenResize=true;aa.prototype.featuresProgressEvents=true;aa.prototype.featuresTimeupdateEvents=true;var sa;aa.patchCanPlayType=function(){if(ot>=4&&!ut&&!dt){sa=aa.TEST_VID&&aa.TEST_VID.constructor.prototype.canPlayType;aa.TEST_VID.constructor.prototype.canPlayType=function(e){var t=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;if(e&&t.test(e)){return"maybe"}return sa.call(this,e)}}};aa.unpatchCanPlayType=function(){var e=aa.TEST_VID.constructor.prototype.canPlayType;if(sa){aa.TEST_VID.constructor.prototype.canPlayType=sa}return e};aa.patchCanPlayType();aa.disposeMediaElement=function(e){if(!e){return}if(e.parentNode){e.parentNode.removeChild(e)}while(e.hasChildNodes()){e.removeChild(e.firstChild)}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(e){}})()}};aa.resetMediaElement=function(e){if(!e){return}var t=e.querySelectorAll("source");var i=t.length;while(i--){e.removeChild(t[i])}e.removeAttribute("src");if(typeof e.load==="function"){(function(){try{e.load()}catch(e){}})()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(e){aa.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){aa.prototype["set"+Fe(e)]=function(t){this.el_[e]=t;if(t){this.el_.setAttribute(e,e)}else{this.el_.removeAttribute(e)}}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(e){aa.prototype[e]=function(){return this.el_[e]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(e){aa.prototype["set"+Fe(e)]=function(t){this.el_[e]=t}});["pause","load","play"].forEach(function(e){aa.prototype[e]=function(){return this.el_[e]()}});Hi.withSourceHandlers(aa);aa.nativeSourceHandler={};aa.nativeSourceHandler.canPlayType=function(e){try{return aa.TEST_VID.canPlayType(e)}catch(e){return""}};aa.nativeSourceHandler.canHandleSource=function(e,t){if(e.type){return aa.nativeSourceHandler.canPlayType(e.type)}else if(e.src){var i=fi(e.src);return aa.nativeSourceHandler.canPlayType("video/"+i)}return""};aa.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)};aa.nativeSourceHandler.dispose=function(){};aa.registerSourceHandler(aa.nativeSourceHandler);Hi.registerTech("Html5",aa);var oa=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"];var la={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"};var ua=["tiny","xsmall","small","medium","large","xlarge","huge"];var ca={};ua.forEach(function(e){var t=e.charAt(0)==="x"?"x-"+e.substring(1):e;ca[e]="vjs-layout-"+t});var da={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:Infinity};var ha=function(e){et(n,e);function n(t,a,s){var o;t.id=t.id||a.id||"vjs_video_"+oe();a=m(n.getTagSettings(t),a);a.initChildren=false;a.createEl=false;a.evented=false;a.reportTouchActivity=false;if(!a.language){if(typeof t.closest==="function"){var u=t.closest("[lang]");if(u&&u.getAttribute){a.language=u.getAttribute("lang")}}else{var c=t;while(c&&c.nodeType===1){if(O(c).hasOwnProperty("lang")){a.language=c.getAttribute("lang");break}c=c.parentNode}}}o=e.call(this,null,a,s)||this;o.boundDocumentFullscreenChange_=Ae(Ze(o),o.documentFullscreenChange_);o.boundFullWindowOnEscKey_=Ae(Ze(o),o.fullWindowOnEscKey);o.isFullscreen_=false;o.log=l(o.id_);o.fsApi_=St;o.isPosterFromTech_=false;o.queuedCallbacks_=[];o.isReady_=false;o.hasStarted_=false;o.userActive_=false;o.debugEnabled_=false;if(!o.options_||!o.options_.techOrder||!o.options_.techOrder.length){throw new Error("No techOrder specified. Did you overwrite "+"videojs.options instead of just changing the "+"properties you want to override?")}o.tag=t;o.tagAttributes=t&&O(t);o.language(o.options_.language);if(a.languages){var d={};Object.getOwnPropertyNames(a.languages).forEach(function(e){d[e.toLowerCase()]=a.languages[e]});o.languages_=d}else{o.languages_=n.prototype.options_.languages}o.resetCache_();o.poster_=a.poster||"";o.controls_=!!a.controls;t.controls=false;t.removeAttribute("controls");o.changingSrc_=false;o.playCallbacks_=[];o.playTerminatedQueue_=[];if(t.hasAttribute("autoplay")){o.autoplay(true)}else{o.autoplay(o.options_.autoplay)}if(a.plugins){Object.keys(a.plugins).forEach(function(e){if(typeof o[e]!=="function"){throw new Error('plugin "'+e+'" does not exist')}})}o.scrubbing_=false;o.el_=o.createEl();Re(Ze(o),{eventBusKey:"el_"});if(o.fsApi_.requestFullscreen){ve(i,o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_);o.on(o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_)}if(o.fluid_){o.on("playerreset",o.updateStyleEl_)}var h=Ge(o.options_);if(a.plugins){Object.keys(a.plugins).forEach(function(e){o[e](a.plugins[e])})}if(a.debug){o.debug(true)}o.options_.playerOptions=h;o.middleware_=[];o.initChildren();o.isAudio(t.nodeName.toLowerCase()==="audio");if(o.controls()){o.addClass("vjs-controls-enabled")}else{o.addClass("vjs-controls-disabled")}o.el_.setAttribute("role","region");if(o.isAudio()){o.el_.setAttribute("aria-label",o.localize("Audio Player"))}else{o.el_.setAttribute("aria-label",o.localize("Video Player"))}if(o.isAudio()){o.addClass("vjs-audio")}if(o.flexNotSupported_()){o.addClass("vjs-no-flex")}if(vt){o.addClass("vjs-touch-enabled")}if(!_t){o.addClass("vjs-workinghover")}n.players[o.id_]=Ze(o);var f=r.split(".")[0];o.addClass("vjs-v"+f);o.userActive(true);o.reportUserActivity();o.one("play",o.listenForUserActivity_);o.on("stageclick",o.handleStageClick_);o.on("keydown",o.handleKeyDown);o.breakpoints(o.options_.breakpoints);o.responsive(o.options_.responsive);return o}var a=n.prototype;a.dispose=function t(){var r=this;this.trigger("dispose");this.off("dispose");ge(i,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_);ge(i,"keydown",this.boundFullWindowOnEscKey_);if(this.styleEl_&&this.styleEl_.parentNode){this.styleEl_.parentNode.removeChild(this.styleEl_);this.styleEl_=null}n.players[this.id_]=null;if(this.tag&&this.tag.player){this.tag.player=null}if(this.el_&&this.el_.player){this.el_.player=null}if(this.tech_){this.tech_.dispose();this.isPosterFromTech_=false;this.poster_=""}if(this.playerElIngest_){this.playerElIngest_=null}if(this.tag){this.tag=null}ar(this);Fi.names.forEach(function(e){var t=Fi[e];var i=r[t.getterName]();if(i&&i.off){i.off()}});e.prototype.dispose.call(this)};a.createEl=function r(){var n=this.tag;var a;var s=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player");var o=this.tag.tagName.toLowerCase()==="video-js";if(s){a=this.el_=n.parentNode}else if(!o){a=this.el_=e.prototype.createEl.call(this,"div")}var l=O(n);if(o){a=this.el_=n;n=this.tag=i.createElement("video");while(a.children.length){n.appendChild(a.firstChild)}if(!I(a,"video-js")){j(a,"video-js")}a.appendChild(n);s=this.playerElIngest_=a;Object.keys(a).forEach(function(e){try{n[e]=a[e]}catch(e){}})}n.setAttribute("tabindex","-1");l.tabindex="-1";if(ft||dt&&mt){n.setAttribute("role","application");l.role="application"}n.removeAttribute("width");n.removeAttribute("height");if("width"in l){delete l.width}if("height"in l){delete l.height}Object.getOwnPropertyNames(l).forEach(function(e){if(!(o&&e==="class")){a.setAttribute(e,l[e])}if(o){n.setAttribute(e,l[e])}});n.playerId=n.id;n.id+="_html5_api";n.className="vjs-tech";n.player=a.player=this;this.addClass("vjs-paused");if(t.VIDEOJS_NO_DYNAMIC_STYLE!==true){this.styleEl_=re("vjs-styles-dimensions");var u=X(".vjs-styles-defaults");var c=X("head");c.insertBefore(this.styleEl_,u?u.nextSibling:c.firstChild)}this.fill_=false;this.fluid_=false;this.width(this.options_.width);this.height(this.options_.height);this.fill(this.options_.fill);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);var d=n.getElementsByTagName("a");for(var h=0;h<d.length;h++){var f=d.item(h);j(f,"vjs-hidden");f.setAttribute("hidden","hidden")}n.initNetworkState_=n.networkState;if(n.parentNode&&!s){n.parentNode.insertBefore(a,n)}D(n,a);this.children_.unshift(n);this.el_.setAttribute("lang",this.language_);this.el_=a;return a};a.crossOrigin=function e(t){if(!t){return this.techGet_("crossOrigin")}if(t!=="anonymous"&&t!=="use-credentials"){o.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"');return}this.techCall_("setCrossOrigin",t);return};a.width=function e(t){return this.dimension("width",t)};a.height=function e(t){return this.dimension("height",t)};a.dimension=function e(t,i){var r=t+"_";if(i===undefined){return this[r]||0}if(i===""||i==="auto"){this[r]=undefined;this.updateStyleEl_();return}var n=parseFloat(i);if(isNaN(n)){o.error('Improper value "'+i+'" supplied for for '+t);return}this[r]=n;this.updateStyleEl_()};a.fluid=function e(t){if(t===undefined){return!!this.fluid_}this.fluid_=!!t;if(De(this)){this.off("playerreset",this.updateStyleEl_)}if(t){this.addClass("vjs-fluid");this.fill(false);Ie(function(){this.on("playerreset",this.updateStyleEl_)})}else{this.removeClass("vjs-fluid")}this.updateStyleEl_()};a.fill=function e(t){if(t===undefined){return!!this.fill_}this.fill_=!!t;if(t){this.addClass("vjs-fill");this.fluid(false)}else{this.removeClass("vjs-fill")}};a.aspectRatio=function e(t){if(t===undefined){return this.aspectRatio_}if(!/^\d+\:\d+$/.test(t)){throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.")}this.aspectRatio_=t;this.fluid(true);this.updateStyleEl_()};a.updateStyleEl_=function e(){if(t.VIDEOJS_NO_DYNAMIC_STYLE===true){var i=typeof this.width_==="number"?this.width_:this.options_.width;var r=typeof this.height_==="number"?this.height_:this.options_.height;var n=this.tech_&&this.tech_.el();if(n){if(i>=0){n.width=i}if(r>=0){n.height=r}}return}var a;var s;var o;var l;if(this.aspectRatio_!==undefined&&this.aspectRatio_!=="auto"){o=this.aspectRatio_}else if(this.videoWidth()>0){o=this.videoWidth()+":"+this.videoHeight()}else{o="16:9"}var u=o.split(":");var c=u[1]/u[0];if(this.width_!==undefined){a=this.width_}else if(this.height_!==undefined){a=this.height_/c}else{a=this.videoWidth()||300}if(this.height_!==undefined){s=this.height_}else{s=a*c}if(/^[^a-zA-Z]/.test(this.id())){l="dimensions-"+this.id()}else{l=this.id()+"-dimensions"}this.addClass(l);ne(this.styleEl_,"\n      ."+l+" {\n        width: "+a+"px;\n        height: "+s+"px;\n      }\n\n      ."+l+".vjs-fluid {\n        padding-top: "+c*100+"%;\n      }\n    ")};a.loadTech_=function e(t,i){var r=this;if(this.tech_){this.unloadTech_()}var n=Fe(t);var a=t.charAt(0).toLowerCase()+t.slice(1);if(n!=="Html5"&&this.tag){Hi.getTech("Html5").disposeMediaElement(this.tag);this.tag.player=null;this.tag=null}this.techName_=n;this.isReady_=false;var s=typeof this.autoplay()==="string"?false:this.autoplay();var o={source:i,autoplay:s,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+a+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||false,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Fi.names.forEach(function(e){var t=Fi[e];o[t.getterName]=r[t.privateName]});m(o,this.options_[n]);m(o,this.options_[a]);m(o,this.options_[t.toLowerCase()]);if(this.tag){o.tag=this.tag}if(i&&i.src===this.cache_.src&&this.cache_.currentTime>0){o.startTime=this.cache_.currentTime}var l=Hi.getTech(t);if(!l){throw new Error("No Tech named '"+n+"' exists! '"+n+"' should be registered using videojs.registerTech()'")}this.tech_=new l(o);this.tech_.ready(Ae(this,this.handleTechReady_),true);Vt.jsonToTextTracks(this.textTracksJson_||[],this.tech_);oa.forEach(function(e){r.on(r.tech_,e,r["handleTech"+Fe(e)+"_"])});Object.keys(la).forEach(function(e){r.on(r.tech_,e,function(t){if(r.tech_.playbackRate()===0&&r.tech_.seeking()){r.queuedCallbacks_.push({callback:r["handleTech"+la[e]+"_"].bind(r),event:t});return}r["handleTech"+la[e]+"_"](t)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"fullscreenerror",this.handleTechFullscreenError_);this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_);this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));if(this.controls()&&!this.usingNativeControls()){this.addTechControlsListeners_()}if(this.tech_.el().parentNode!==this.el()&&(n!=="Html5"||!this.tag)){D(this.tech_.el(),this.el())}if(this.tag){this.tag.player=null;this.tag=null}};a.unloadTech_=function e(){var t=this;Fi.names.forEach(function(e){var i=Fi[e];t[i.privateName]=t[i.getterName]()});this.textTracksJson_=Vt.textTracksToJson(this.tech_);this.isReady_=false;this.tech_.dispose();this.tech_=false;if(this.isPosterFromTech_){this.poster_="";this.trigger("posterchange")}this.isPosterFromTech_=false};a.tech=function e(t){if(t===undefined){o.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\n"+"See https://github.com/videojs/video.js/issues/2617 for more info.\n")}return this.tech_};a.addTechControlsListeners_=function e(){this.removeTechControlsListeners_();this.on(this.tech_,"mouseup",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};a.removeTechControlsListeners_=function e(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mouseup",this.handleTechClick_);this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)};a.handleTechReady_=function e(){this.triggerReady();if(this.cache_.volume){this.techCall_("setVolume",this.cache_.volume)}this.handleTechPosterChange_();this.handleTechDurationChange_()};a.handleTechLoadStart_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.handleTechDurationChange_();if(!this.paused()){this.trigger("loadstart");this.trigger("firstplay")}else{this.hasStarted(false);this.trigger("loadstart")}this.manualAutoplay_(this.autoplay())};a.manualAutoplay_=function e(t){var i=this;if(!this.tech_||typeof t!=="string"){return}var r=function e(){var t=i.muted();i.muted(true);var r=function e(){i.muted(t)};i.playTerminatedQueue_.push(r);var n=i.play();if(!Rt(n)){return}return n["catch"](r)};var n;if(t==="any"&&this.muted()!==true){n=this.play();if(Rt(n)){n=n["catch"](r)}}else if(t==="muted"&&this.muted()!==true){n=r()}else{n=this.play()}if(!Rt(n)){return}return n.then(function(){i.trigger({type:"autoplay-success",autoplay:t})})["catch"](function(e){i.trigger({type:"autoplay-failure",autoplay:t})})};a.updateSourceCaches_=function e(t){if(t===void 0){t=""}var i=t;var r="";if(typeof i!=="string"){i=t.src;r=t.type}this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];if(i&&!r){r=cr(this,i)}this.cache_.source=Ge({},t,{src:i,type:r});var n=this.cache_.sources.filter(function(e){return e.src&&e.src===i});var a=[];var s=this.$$("source");var o=[];for(var l=0;l<s.length;l++){var u=O(s[l]);a.push(u);if(u.src&&u.src===i){o.push(u.src)}}if(o.length&&!n.length){this.cache_.sources=a}else if(!n.length){this.cache_.sources=[this.cache_.source]}this.cache_.src=i};a.handleTechSourceset_=function e(t){var i=this;if(!this.changingSrc_){var r=function e(t){return i.updateSourceCaches_(t)};var n=this.currentSource().src;var a=t.src;if(n&&!/^blob:/.test(n)&&/^blob:/.test(a)){if(!this.lastSource_||this.lastSource_.tech!==a&&this.lastSource_.player!==n){r=function e(){}}}r(a);if(!t.src){this.tech_.any(["sourceset","loadstart"],function(e){if(e.type==="sourceset"){return}var t=i.techGet("currentSrc");i.lastSource_.tech=t;i.updateSourceCaches_(t)})}}this.lastSource_={player:this.currentSource().src,tech:t.src};this.trigger({src:t.src,type:"sourceset"})};a.hasStarted=function e(t){if(t===undefined){return this.hasStarted_}if(t===this.hasStarted_){return}this.hasStarted_=t;if(this.hasStarted_){this.addClass("vjs-has-started");this.trigger("firstplay")}else{this.removeClass("vjs-has-started")}};a.handleTechPlay_=function e(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(true);this.trigger("play")};a.handleTechRateChange_=function e(){if(this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0){this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)});this.queuedCallbacks_=[]}this.cache_.lastPlaybackRate=this.tech_.playbackRate();this.trigger("ratechange")};a.handleTechWaiting_=function e(){var t=this;this.addClass("vjs-waiting");this.trigger("waiting");var i=this.currentTime();var r=function e(){if(i!==t.currentTime()){t.removeClass("vjs-waiting");t.off("timeupdate",e)}};this.on("timeupdate",r)};a.handleTechCanPlay_=function e(){this.removeClass("vjs-waiting");this.trigger("canplay")};a.handleTechCanPlayThrough_=function e(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};a.handleTechPlaying_=function e(){this.removeClass("vjs-waiting");this.trigger("playing")};a.handleTechSeeking_=function e(){this.addClass("vjs-seeking");this.trigger("seeking")};a.handleTechSeeked_=function e(){this.removeClass("vjs-seeking");this.removeClass("vjs-ended");this.trigger("seeked")};a.handleTechFirstPlay_=function e(){if(this.options_.starttime){o.warn("Passing the `starttime` option to the player will be deprecated in 6.0");this.currentTime(this.options_.starttime)}this.addClass("vjs-has-started");this.trigger("firstplay")};a.handleTechPause_=function e(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};a.handleTechEnded_=function e(){this.addClass("vjs-ended");if(this.options_.loop){this.currentTime(0);this.play()}else if(!this.paused()){this.pause()}this.trigger("ended")};a.handleTechDurationChange_=function e(){this.duration(this.techGet_("duration"))};a.handleTechClick_=function e(t){if(!q(t)){return}if(!this.controls_){return}if(this.paused()){zt(this.play())}else{this.pause()}};a.handleTechDoubleClick_=function e(t){if(!this.controls_){return}var i=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)});if(!i){if(this.options_===undefined||this.options_.userActions===undefined||this.options_.userActions.doubleClick===undefined||this.options_.userActions.doubleClick!==false){if(this.options_!==undefined&&this.options_.userActions!==undefined&&typeof this.options_.userActions.doubleClick==="function"){this.options_.userActions.doubleClick.call(this,t)}else if(this.isFullscreen()){this.exitFullscreen()}else{this.requestFullscreen()}}}};a.handleTechTap_=function e(){this.userActive(!this.userActive())};a.handleTechTouchStart_=function e(){this.userWasActive=this.userActive()};a.handleTechTouchMove_=function e(){if(this.userWasActive){this.reportUserActivity()}};a.handleTechTouchEnd_=function e(t){t.preventDefault()};a.handleStageClick_=function e(){this.reportUserActivity()};a.toggleFullscreenClass_=function e(){if(this.isFullscreen()){this.addClass("vjs-fullscreen")}else{this.removeClass("vjs-fullscreen")}};a.documentFullscreenChange_=function e(t){var r=t.target.player;if(r&&r!==this){return}var n=this.el();var a=i[this.fsApi_.fullscreenElement]===n;if(!a&&n.matches){a=n.matches(":"+this.fsApi_.fullscreen)}else if(!a&&n.msMatchesSelector){a=n.msMatchesSelector(":"+this.fsApi_.fullscreen)}this.isFullscreen(a)};a.handleTechFullscreenChange_=function e(t,i){if(i){if(i.nativeIOSFullscreen){this.toggleClass("vjs-ios-native-fs")}this.isFullscreen(i.isFullscreen)}};a.handleTechFullscreenError_=function e(t,i){this.trigger("fullscreenerror",i)};a.togglePictureInPictureClass_=function e(){if(this.isInPictureInPicture()){this.addClass("vjs-picture-in-picture")}else{this.removeClass("vjs-picture-in-picture")}};a.handleTechEnterPictureInPicture_=function e(t){this.isInPictureInPicture(true)};a.handleTechLeavePictureInPicture_=function e(t){this.isInPictureInPicture(false)};a.handleTechError_=function e(){var t=this.tech_.error();this.error(t)};a.handleTechTextData_=function e(){var t=null;if(arguments.length>1){t=arguments[1]}this.trigger("textdata",t)};a.getCache=function e(){return this.cache_};a.resetCache_=function e(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}};a.techCall_=function e(t,i){this.ready(function(){if(t in tr){return Ji(this.middleware_,this.tech_,t,i)}else if(t in ir){return $i(this.middleware_,this.tech_,t,i)}try{if(this.tech_){this.tech_[t](i)}}catch(e){o(e);throw e}},true)};a.techGet_=function e(t){if(!this.tech_||!this.tech_.isReady_){return}if(t in er){return Ki(this.middleware_,this.tech_,t)}else if(t in ir){return $i(this.middleware_,this.tech_,t)}try{return this.tech_[t]()}catch(e){if(this.tech_[t]===undefined){o("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e);throw e}if(e.name==="TypeError"){o("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e);this.tech_.isReady_=false;throw e}o(e);throw e}};a.play=function e(){var i=this;var r=this.options_.Promise||t.Promise;if(r){return new r(function(e){i.play_(e)})}return this.play_()};a.play_=function e(t){var i=this;if(t===void 0){t=zt}this.playCallbacks_.push(t);var r=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_){this.off(["ready","loadstart"],this.waitToPlay_);this.waitToPlay_=null}if(!this.isReady_||!r){this.waitToPlay_=function(e){i.play_()};this.one(["ready","loadstart"],this.waitToPlay_);if(!r&&(bt||_t)){this.load()}return}var n=this.techGet_("play");if(n===null){this.runPlayTerminatedQueue_()}else{this.runPlayCallbacks_(n)}};a.runPlayTerminatedQueue_=function e(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[];t.forEach(function(e){e()})};a.runPlayCallbacks_=function e(t){var i=this.playCallbacks_.slice(0);this.playCallbacks_=[];this.playTerminatedQueue_=[];i.forEach(function(e){e(t)})};a.pause=function e(){this.techCall_("pause")};a.paused=function e(){return this.techGet_("paused")===false?false:true};a.played=function e(){return this.techGet_("played")||Et(0,0)};a.scrubbing=function e(t){if(typeof t==="undefined"){return this.scrubbing_}this.scrubbing_=!!t;this.techCall_("setScrubbing",this.scrubbing_);if(t){this.addClass("vjs-scrubbing")}else{this.removeClass("vjs-scrubbing")}};a.currentTime=function e(t){if(typeof t!=="undefined"){if(t<0){t=0}if(!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=t;this.off("canplay",this.applyInitTime_);this.one("canplay",this.applyInitTime_);return}this.techCall_("setCurrentTime",t);this.cache_.initTime=0;return}this.cache_.currentTime=this.techGet_("currentTime")||0;return this.cache_.currentTime};a.applyInitTime_=function e(){this.currentTime(this.cache_.initTime)};a.duration=function e(t){if(t===undefined){return this.cache_.duration!==undefined?this.cache_.duration:NaN}t=parseFloat(t);if(t<0){t=Infinity}if(t!==this.cache_.duration){this.cache_.duration=t;if(t===Infinity){this.addClass("vjs-live")}else{this.removeClass("vjs-live")}if(!isNaN(t)){this.trigger("durationchange")}}};a.remainingTime=function e(){return this.duration()-this.currentTime()};a.remainingTimeDisplay=function e(){return Math.floor(this.duration())-Math.floor(this.currentTime())};a.buffered=function e(){var e=this.techGet_("buffered");if(!e||!e.length){e=Et(0,0)}return e};a.bufferedPercent=function e(){return xt(this.buffered(),this.duration())};a.bufferedEnd=function e(){var t=this.buffered();var i=this.duration();var r=t.end(t.length-1);if(r>i){r=i}return r};a.volume=function e(t){var i;if(t!==undefined){i=Math.max(0,Math.min(1,parseFloat(t)));this.cache_.volume=i;this.techCall_("setVolume",i);if(i>0){this.lastVolume_(i)}return}i=parseFloat(this.techGet_("volume"));return isNaN(i)?1:i};a.muted=function e(t){if(t!==undefined){this.techCall_("setMuted",t);return}return this.techGet_("muted")||false};a.defaultMuted=function e(t){if(t!==undefined){return this.techCall_("setDefaultMuted",t)}return this.techGet_("defaultMuted")||false};a.lastVolume_=function e(t){if(t!==undefined&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume};a.supportsFullScreen=function e(){return this.techGet_("supportsFullScreen")||false};a.isFullscreen=function e(t){if(t!==undefined){var i=this.isFullscreen_;this.isFullscreen_=Boolean(t);if(this.isFullscreen_!==i&&this.fsApi_.prefixed){this.trigger("fullscreenchange")}this.toggleFullscreenClass_();return}return this.isFullscreen_};a.requestFullscreen=function e(i){var r=this.options_.Promise||t.Promise;if(r){var n=this;return new r(function(e,t){function r(){n.off("fullscreenerror",s);n.off("fullscreenchange",a)}function a(){r();e()}function s(e,i){r();t(i)}n.one("fullscreenchange",a);n.one("fullscreenerror",s);var o=n.requestFullscreenHelper_(i);if(o){o.then(r,r);return o}})}return this.requestFullscreenHelper_()};a.requestFullscreenHelper_=function e(t){var i=this;var r;if(!this.fsApi_.prefixed){r=this.options_.fullscreen&&this.options_.fullscreen.options||{};if(t!==undefined){r=t}}if(this.fsApi_.requestFullscreen){var n=this.el_[this.fsApi_.requestFullscreen](r);if(n){n.then(function(){return i.isFullscreen(true)},function(){return i.isFullscreen(false)})}return n}else if(this.tech_.supportsFullScreen()){this.techCall_("enterFullScreen")}else{this.enterFullWindow()}};a.exitFullscreen=function e(){var i=this.options_.Promise||t.Promise;if(i){var r=this;return new i(function(e,t){function i(){r.off("fullscreenerror",a);r.off("fullscreenchange",n)}function n(){i();e()}function a(e,r){i();t(r)}r.one("fullscreenchange",n);r.one("fullscreenerror",a);var s=r.exitFullscreenHelper_();if(s){s.then(i,i);return s}})}return this.exitFullscreenHelper_()};a.exitFullscreenHelper_=function e(){var t=this;if(this.fsApi_.requestFullscreen){var r=i[this.fsApi_.exitFullscreen]();if(r){r.then(function(){return t.isFullscreen(false)})}return r}else if(this.tech_.supportsFullScreen()){this.techCall_("exitFullScreen")}else{this.exitFullWindow()}};a.enterFullWindow=function e(){this.isFullscreen(true);this.isFullWindow=true;this.docOrigOverflow=i.documentElement.style.overflow;ve(i,"keydown",this.boundFullWindowOnEscKey_);i.documentElement.style.overflow="hidden";j(i.body,"vjs-full-window");this.trigger("enterFullWindow")};a.fullWindowOnEscKey=function e(t){if(Gt.isEventKey(t,"Esc")){if(this.isFullscreen()===true){this.exitFullscreen()}else{this.exitFullWindow()}}};a.exitFullWindow=function e(){this.isFullscreen(false);this.isFullWindow=false;ge(i,"keydown",this.boundFullWindowOnEscKey_);i.documentElement.style.overflow=this.docOrigOverflow;L(i.body,"vjs-full-window");this.trigger("exitFullWindow")};a.disablePictureInPicture=function e(t){if(t===undefined){return this.techGet_("disablePictureInPicture")}this.techCall_("setDisablePictureInPicture",t);this.options_.disablePictureInPicture=t;this.trigger("disablepictureinpicturechanged")};a.isInPictureInPicture=function e(t){if(t!==undefined){this.isInPictureInPicture_=!!t;this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_};a.requestPictureInPicture=function e(){if("pictureInPictureEnabled"in i&&this.disablePictureInPicture()===false){return this.techGet_("requestPictureInPicture")}};a.exitPictureInPicture=function e(){if("pictureInPictureEnabled"in i){return i.exitPictureInPicture()}};a.handleKeyDown=function e(t){var i=this.options_.userActions;if(!i||!i.hotkeys){return}var r=function e(t){var i=t.tagName.toLowerCase();if(t.isContentEditable){return true}var r=["button","checkbox","hidden","radio","reset","submit"];if(i==="input"){return r.indexOf(t.type)===-1}var n=["textarea"];return n.indexOf(i)!==-1};if(r(this.el_.ownerDocument.activeElement)){return}if(typeof i.hotkeys==="function"){i.hotkeys.call(this,t)}else{this.handleHotkeys(t)}};a.handleHotkeys=function e(t){var r=this.options_.userActions?this.options_.userActions.hotkeys:{};var n=r.fullscreenKey,a=n===void 0?function(e){return Gt.isEventKey(e,"f")}:n,s=r.muteKey,o=s===void 0?function(e){return Gt.isEventKey(e,"m")}:s,l=r.playPauseKey,u=l===void 0?function(e){return Gt.isEventKey(e,"k")||Gt.isEventKey(e,"Space")}:l;if(a.call(this,t)){t.preventDefault();t.stopPropagation();var c=qe.getComponent("FullscreenToggle");if(i[this.fsApi_.fullscreenEnabled]!==false){c.prototype.handleClick.call(this,t)}}else if(o.call(this,t)){t.preventDefault();t.stopPropagation();var d=qe.getComponent("MuteToggle");d.prototype.handleClick.call(this,t)}else if(u.call(this,t)){t.preventDefault();t.stopPropagation();var h=qe.getComponent("PlayToggle");h.prototype.handleClick.call(this,t)}};a.canPlayType=function e(t){var i;for(var r=0,n=this.options_.techOrder;r<n.length;r++){var a=n[r];var s=Hi.getTech(a);if(!s){s=qe.getComponent(a)}if(!s){o.error('The "'+a+'" tech is undefined. Skipped browser support check for that tech.');continue}if(s.isSupported()){i=s.canPlayType(t);if(i){return i}}}return""};a.selectSource=function e(t){var i=this;var r=this.options_.techOrder.map(function(e){return[e,Hi.getTech(e)]}).filter(function(e){var t=e[0],i=e[1];if(i){return i.isSupported()}o.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.');return false});var n=function e(t,i,r){var n;t.some(function(e){return i.some(function(t){n=r(e,t);if(n){return true}})});return n};var a;var s=function e(t){return function(e,i){return t(i,e)}};var l=function e(t,r){var n=t[0],a=t[1];if(a.canPlaySource(r,i.options_[n.toLowerCase()])){return{source:r,tech:n}}};if(this.options_.sourceOrder){a=n(t,r,s(l))}else{a=n(r,t,l)}return a||false};a.src=function e(t){var i=this;if(typeof t==="undefined"){return this.cache_.src||""}var r=dr(t);if(!r.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}this.changingSrc_=true;this.cache_.sources=r;this.updateSourceCaches_(r[0]);Xi(this,r[0],function(e,t){i.middleware_=t;i.cache_.sources=r;i.updateSourceCaches_(e);var n=i.src_(e);if(n){if(r.length>1){return i.src(r.slice(1))}i.changingSrc_=false;i.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);i.triggerReady();return}Zi(t,i.tech_)})};a.src_=function e(t){var i=this;var r=this.selectSource([t]);if(!r){return true}if(!Ve(r.tech,this.techName_)){this.changingSrc_=true;this.loadTech_(r.tech,r.source);this.tech_.ready(function(){i.changingSrc_=false});return false}this.ready(function(){if(this.tech_.constructor.prototype.hasOwnProperty("setSource")){this.techCall_("setSource",t)}else{this.techCall_("src",t.src)}this.changingSrc_=false},true);return false};a.load=function e(){this.techCall_("load")};a.reset=function e(){var i=this;var r=this.options_.Promise||t.Promise;if(this.paused()||!r){this.doReset_()}else{var n=this.play();zt(n.then(function(){return i.doReset_()}))}};a.doReset_=function e(){if(this.tech_){this.tech_.clearTracks("text")}this.resetCache_();this.poster("");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset");this.resetControlBarUI_();if(De(this)){this.trigger("playerreset")}};a.resetControlBarUI_=function e(){this.resetProgressBar_();this.resetPlaybackRate_();this.resetVolumeBar_()};a.resetProgressBar_=function e(){this.currentTime(0);var t=this.controlBar,i=t.durationDisplay,r=t.remainingTimeDisplay;if(i){i.updateContent()}if(r){r.updateContent()}};a.resetPlaybackRate_=function e(){this.playbackRate(this.defaultPlaybackRate());this.handleTechRateChange_()};a.resetVolumeBar_=function e(){this.volume(1);this.trigger("volumechange")};a.currentSources=function e(){var t=this.currentSource();var i=[];if(Object.keys(t).length!==0){i.push(t)}return this.cache_.sources||i};a.currentSource=function e(){return this.cache_.source||{}};a.currentSrc=function e(){return this.currentSource()&&this.currentSource().src||""};a.currentType=function e(){return this.currentSource()&&this.currentSource().type||""};a.preload=function e(t){if(t!==undefined){this.techCall_("setPreload",t);this.options_.preload=t;return}return this.techGet_("preload")};a.autoplay=function e(t){if(t===undefined){return this.options_.autoplay||false}var i;if(typeof t==="string"&&/(any|play|muted)/.test(t)){this.options_.autoplay=t;this.manualAutoplay_(t);i=false}else if(!t){this.options_.autoplay=false}else{this.options_.autoplay=true}i=typeof i==="undefined"?this.options_.autoplay:i;if(this.tech_){this.techCall_("setAutoplay",i)}};a.playsinline=function e(t){if(t!==undefined){this.techCall_("setPlaysinline",t);this.options_.playsinline=t;return this}return this.techGet_("playsinline")};a.loop=function e(t){if(t!==undefined){this.techCall_("setLoop",t);this.options_.loop=t;return}return this.techGet_("loop")};a.poster=function e(t){if(t===undefined){return this.poster_}if(!t){t=""}if(t===this.poster_){return}this.poster_=t;this.techCall_("setPoster",t);this.isPosterFromTech_=false;this.trigger("posterchange")};a.handleTechPosterChange_=function e(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";if(t!==this.poster_){this.poster_=t;this.isPosterFromTech_=true;this.trigger("posterchange")}}};a.controls=function e(t){if(t===undefined){return!!this.controls_}t=!!t;if(this.controls_===t){return}this.controls_=t;if(this.usingNativeControls()){this.techCall_("setControls",t)}if(this.controls_){this.removeClass("vjs-controls-disabled");this.addClass("vjs-controls-enabled");this.trigger("controlsenabled");if(!this.usingNativeControls()){this.addTechControlsListeners_()}}else{this.removeClass("vjs-controls-enabled");this.addClass("vjs-controls-disabled");this.trigger("controlsdisabled");if(!this.usingNativeControls()){this.removeTechControlsListeners_()}}};a.usingNativeControls=function e(t){if(t===undefined){return!!this.usingNativeControls_}t=!!t;if(this.usingNativeControls_===t){return}this.usingNativeControls_=t;if(this.usingNativeControls_){this.addClass("vjs-using-native-controls");this.trigger("usingnativecontrols")}else{this.removeClass("vjs-using-native-controls");this.trigger("usingcustomcontrols")}};a.error=function e(t){if(t===undefined){return this.error_||null}if(this.options_.suppressNotSupportedError&&t&&t.code===4){var i=function e(){this.error(t)};this.options_.suppressNotSupportedError=false;this.any(["click","touchstart"],i);this.one("loadstart",function(){this.off(["click","touchstart"],i)});return}if(t===null){this.error_=t;this.removeClass("vjs-error");if(this.errorDisplay){this.errorDisplay.close()}return}this.error_=new Ct(t);this.addClass("vjs-error");o.error("(CODE:"+this.error_.code+" "+Ct.errorTypes[this.error_.code]+")",this.error_.message,this.error_);this.trigger("error");return};a.reportUserActivity=function e(t){this.userActivity_=true};a.userActive=function e(t){if(t===undefined){return this.userActive_}t=!!t;if(t===this.userActive_){return}this.userActive_=t;if(this.userActive_){this.userActivity_=true;this.removeClass("vjs-user-inactive");this.addClass("vjs-user-active");this.trigger("useractive");return}if(this.tech_){this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault()})}this.userActivity_=false;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")};a.listenForUserActivity_=function e(){var t;var i;var r;var n=Ae(this,this.reportUserActivity);var a=function e(t){if(t.screenX!==i||t.screenY!==r){i=t.screenX;r=t.screenY;n()}};var s=function e(){n();this.clearInterval(t);t=this.setInterval(n,250)};var o=function e(i){n();this.clearInterval(t)};this.on("mousedown",s);this.on("mousemove",a);this.on("mouseup",o);this.on("mouseleave",o);var l=this.getChild("controlBar");if(l&&!_t&&!st){l.on("mouseenter",function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout;this.player().options_.inactivityTimeout=0});l.on("mouseleave",function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})}this.on("keydown",n);this.on("keyup",n);var u;this.setInterval(function(){if(!this.userActivity_){return}this.userActivity_=false;this.userActive(true);this.clearTimeout(u);var e=this.options_.inactivityTimeout;if(e<=0){return}u=this.setTimeout(function(){if(!this.userActivity_){this.userActive(false)}},e)},250)};a.playbackRate=function e(t){if(t!==undefined){this.techCall_("setPlaybackRate",t);return}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.cache_.lastPlaybackRate||this.techGet_("playbackRate")}return 1};a.defaultPlaybackRate=function e(t){if(t!==undefined){return this.techCall_("setDefaultPlaybackRate",t)}if(this.tech_&&this.tech_.featuresPlaybackRate){return this.techGet_("defaultPlaybackRate")}return 1};a.isAudio=function e(t){if(t!==undefined){this.isAudio_=!!t;return}return!!this.isAudio_};a.addTextTrack=function e(t,i,r){if(this.tech_){return this.tech_.addTextTrack(t,i,r)}};a.addRemoteTextTrack=function e(t,i){if(this.tech_){return this.tech_.addRemoteTextTrack(t,i)}};a.removeRemoteTextTrack=function e(t){if(t===void 0){t={}}var i=t,r=i.track;if(!r){r=t}if(this.tech_){return this.tech_.removeRemoteTextTrack(r)}};a.getVideoPlaybackQuality=function e(){return this.techGet_("getVideoPlaybackQuality")};a.videoWidth=function e(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};a.videoHeight=function e(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};a.language=function e(t){if(t===undefined){return this.language_}this.language_=String(t).toLowerCase()};a.languages=function e(){return Ge(n.prototype.options_.languages,this.languages_)};a.toJSON=function e(){var t=Ge(this.options_);var i=t.tracks;t.tracks=[];for(var r=0;r<i.length;r++){var n=i[r];n=Ge(n);n.player=undefined;t.tracks[r]=n}return t};a.createModal=function e(t,i){var r=this;i=i||{};i.content=t||"";var n=new Zt(this,i);this.addChild(n);n.on("dispose",function(){r.removeChild(n)});n.open();return n};a.updateCurrentBreakpoint_=function e(){if(!this.responsive()){return}var t=this.currentBreakpoint();var i=this.currentWidth();for(var r=0;r<ua.length;r++){var n=ua[r];var a=this.breakpoints_[n];if(i<=a){if(t===n){return}if(t){this.removeClass(ca[t])}this.addClass(ca[n]);this.breakpoint_=n;break}}};a.removeCurrentBreakpoint_=function e(){var t=this.currentBreakpointClass();this.breakpoint_="";if(t){this.removeClass(t)}};a.breakpoints=function e(t){if(t===undefined){return m(this.breakpoints_)}this.breakpoint_="";this.breakpoints_=m({},da,t);this.updateCurrentBreakpoint_();return m(this.breakpoints_)};a.responsive=function e(t){if(t===undefined){return this.responsive_}t=Boolean(t);var i=this.responsive_;if(t===i){return}this.responsive_=t;if(t){this.on("playerresize",this.updateCurrentBreakpoint_);this.updateCurrentBreakpoint_()}else{this.off("playerresize",this.updateCurrentBreakpoint_);this.removeCurrentBreakpoint_()}return t};a.currentBreakpoint=function e(){return this.breakpoint_};a.currentBreakpointClass=function e(){return ca[this.breakpoint_]||""};a.loadMedia=function e(t,i){var r=this;if(!t||typeof t!=="object"){return}this.reset();this.cache_.media=Ge(t);var n=this.cache_.media,a=n.artwork,s=n.poster,o=n.src,l=n.textTracks;if(!a&&s){this.cache_.media.artwork=[{src:s,type:ur(s)}]}if(o){this.src(o)}if(s){this.poster(s)}if(Array.isArray(l)){l.forEach(function(e){return r.addRemoteTextTrack(e,false)})}this.ready(i)};a.getMedia=function e(){if(!this.cache_.media){var t=this.poster();var i=this.currentSources();var r=Array.prototype.map.call(this.remoteTextTracks(),function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}});var n={src:i,textTracks:r};if(t){n.poster=t;n.artwork=[{src:n.poster,type:ur(n.poster)}]}return n}return Ge(this.cache_.media)};n.getTagSettings=function e(t){var i={sources:[],tracks:[]};var r=O(t);var n=r["data-setup"];if(I(t,"vjs-fill")){r.fill=true}if(I(t,"vjs-fluid")){r.fluid=true}if(n!==null){var a=kt(n||"{}"),s=a[0],l=a[1];if(s){o.error(s)}m(r,l)}m(i,r);if(t.hasChildNodes()){var u=t.childNodes;for(var c=0,d=u.length;c<d;c++){var h=u[c];var f=h.nodeName.toLowerCase();if(f==="source"){i.sources.push(O(h))}else if(f==="track"){i.tracks.push(O(h))}}}return i};a.flexNotSupported_=function e(){var t=i.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)};a.debug=function e(t){if(t===undefined){return this.debugEnabled_}if(t){this.trigger("debugon");this.previousLogLevel_=this.log.level;this.log.level("debug");this.debugEnabled_=true}else{this.trigger("debugoff");this.log.level(this.previousLogLevel_);this.previousLogLevel_=undefined;this.debugEnabled_=false}};return n}(qe);Fi.names.forEach(function(e){var t=Fi[e];ha.prototype[t.getterName]=function(){if(this.tech_){return this.tech_[t.getterName]()}this[t.privateName]=this[t.privateName]||new t.ListClass;return this[t.privateName]}});ha.prototype.crossorigin=ha.prototype.crossOrigin;ha.players={};var fa=t.navigator;ha.prototype.options_={techOrder:Hi.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:false,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:fa&&(fa.languages&&fa.languages[0]||fa.userLanguage||fa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:false};["ended","seeking","seekable","networkState","readyState"].forEach(function(e){ha.prototype[e]=function(){return this.techGet_(e)}});oa.forEach(function(e){ha.prototype["handleTech"+Fe(e)+"_"]=function(){return this.trigger(e)}});qe.registerComponent("Player",ha);var pa=u(function(e){function t(i,r){e.exports=t=Object.setPrototypeOf||function e(t,i){t.__proto__=i;return t};return t(i,r)}e.exports=t});function ma(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(e){return false}}var va=ma;var ga=u(function(e){function t(i,r,n){if(va()){e.exports=t=Reflect.construct}else{e.exports=t=function e(t,i,r){var n=[null];n.push.apply(n,i);var a=Function.bind.apply(t,n);var s=new a;if(r)pa(s,r.prototype);return s}}return t.apply(null,arguments)}e.exports=t});var ya="plugin";var _a="activePlugins_";var ba={};var Ma=function e(t){return ba.hasOwnProperty(t)};var Ta=function e(t){return Ma(t)?ba[t]:undefined};var Aa=function e(t,i){t[_a]=t[_a]||{};t[_a][i]=true};var wa=function e(t,i,r){var n=(r?"before":"")+"pluginsetup";t.trigger(n,i);t.trigger(n+":"+i.name,i)};var Ea=function e(t,i){var r=function e(){wa(this,{name:t,plugin:i,instance:null},true);var r=i.apply(this,arguments);Aa(this,t);wa(this,{name:t,plugin:i,instance:r});return r};Object.keys(i).forEach(function(e){r[e]=i[e]});return r};var xa=function e(t,i){i.prototype.name=t;return function(){wa(this,{name:t,plugin:i,instance:null},true);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++){r[n]=arguments[n]}var a=ga(i,[this].concat(r));this[t]=function(){return a};wa(this,a.getEventHash());return a}};var Sa=function(){function e(t){if(this.constructor===e){throw new Error("Plugin must be sub-classed; not directly instantiated.")}this.player=t;if(!this.log){this.log=this.player.log.createLogger(this.name)}Re(this);delete this.trigger;Ue(this,this.constructor.defaultState);Aa(t,this.name);this.dispose=Ae(this,this.dispose);t.on("dispose",this.dispose)}var t=e.prototype;t.version=function e(){return this.constructor.VERSION};t.getEventHash=function e(t){if(t===void 0){t={}}t.name=this.name;t.plugin=this.constructor;t.instance=this;return t};t.trigger=function e(t,i){if(i===void 0){i={}}return ye(this.eventBusEl_,t,this.getEventHash(i))};t.handleStateChanged=function e(t){};t.dispose=function e(){var t=this.name,i=this.player;this.trigger("dispose");this.off();i.off("dispose",this.dispose);i[_a][t]=false;this.player=this.state=null;i[t]=xa(t,ba[t])};e.isBasic=function t(i){var r=typeof i==="string"?Ta(i):i;return typeof r==="function"&&!e.prototype.isPrototypeOf(r.prototype)};e.registerPlugin=function t(i,r){if(typeof i!=="string"){throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".")}if(Ma(i)){o.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!')}else if(ha.prototype.hasOwnProperty(i)){throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!')}if(typeof r!=="function"){throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof r+".")}ba[i]=r;if(i!==ya){if(e.isBasic(r)){ha.prototype[i]=Ea(i,r)}else{ha.prototype[i]=xa(i,r)}}return r};e.deregisterPlugin=function e(t){if(t===ya){throw new Error("Cannot de-register base plugin.")}if(Ma(t)){delete ba[t];delete ha.prototype[t]}};e.getPlugins=function e(t){if(t===void 0){t=Object.keys(ba)}var i;t.forEach(function(e){var t=Ta(e);if(t){i=i||{};i[e]=t}});return i};e.getPluginVersion=function e(t){var i=Ta(t);return i&&i.VERSION||""};return e}();Sa.getPlugin=Ta;Sa.BASE_PLUGIN_NAME=ya;Sa.registerPlugin(ya,Sa);ha.prototype.usingPlugin=function(e){return!!this[_a]&&this[_a][e]===true};ha.prototype.hasPlugin=function(e){return!!Ma(e)};function Da(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:true,configurable:true}});if(t)pa(e,t)}var Ia=Da;var ja=function e(t,i){if(i===void 0){i={}}var r=function e(){t.apply(this,arguments)};var n={};if(typeof i==="object"){if(i.constructor!==Object.prototype.constructor){r=i.constructor}n=i}else if(typeof i==="function"){r=i}Ia(r,t);if(t){r.super_=t}for(var a in n){if(n.hasOwnProperty(a)){r.prototype[a]=n[a]}}return r};var La=function e(t){return t.indexOf("#")===0?t.slice(1):t};function Na(e,t,i){var r=Na.getPlayer(e);if(r){if(t){o.warn('Player "'+e+'" is already initialised. Options will not be applied.')}if(i){r.ready(i)}return r}var n=typeof e==="string"?X("#"+La(e)):e;if(!A(n)){throw new TypeError("The element or ID supplied is not valid. (videojs)")}if(!n.ownerDocument.defaultView||!n.ownerDocument.body.contains(n)){o.warn("The element supplied is not included in the DOM")}t=t||{};Na.hooks("beforesetup").forEach(function(e){var i=e(n,Ge(t));if(!v(i)||Array.isArray(i)){o.error("please return an object in beforesetup hooks");return}t=Ge(t,i)});var a=qe.getComponent("Player");r=new a(n,t,i);Na.hooks("setup").forEach(function(e){return e(r)});return r}Na.hooks_={};Na.hooks=function(e,t){Na.hooks_[e]=Na.hooks_[e]||[];if(t){Na.hooks_[e]=Na.hooks_[e].concat(t)}return Na.hooks_[e]};Na.hook=function(e,t){Na.hooks(e,t)};Na.hookOnce=function(e,t){Na.hooks(e,[].concat(t).map(function(t){var i=function i(){Na.removeHook(e,i);return t.apply(void 0,arguments)};return i}))};Na.removeHook=function(e,t){var i=Na.hooks(e).indexOf(t);if(i<=-1){return false}Na.hooks_[e]=Na.hooks_[e].slice();Na.hooks_[e].splice(i,1);return true};if(t.VIDEOJS_NO_DYNAMIC_STYLE!==true&&T()){var Ca=X(".vjs-styles-defaults");if(!Ca){Ca=re("vjs-styles-defaults");var Oa=X("head");if(Oa){Oa.insertBefore(Ca,Oa.firstChild)}ne(Ca,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}te(1,Na);Na.VERSION=r;Na.options=ha.prototype.options_;Na.getPlayers=function(){return ha.players};Na.getPlayer=function(e){var t=ha.players;var i;if(typeof e==="string"){var r=La(e);var n=t[r];if(n){return n}i=X("#"+r)}else{i=e}if(A(i)){var a=i,s=a.player,o=a.playerId;if(s||t[o]){return s||t[o]}}};Na.getAllPlayers=function(){return Object.keys(ha.players).map(function(e){return ha.players[e]}).filter(Boolean)};Na.players=ha.players;Na.getComponent=qe.getComponent;Na.registerComponent=function(e,t){if(Hi.isTech(t)){o.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")}qe.registerComponent.call(qe,e,t)};Na.getTech=Hi.getTech;Na.registerTech=Hi.registerTech;Na.use=qi;Object.defineProperty(Na,"middleware",{value:{},writeable:false,enumerable:true});Object.defineProperty(Na.middleware,"TERMINATOR",{value:Wi,writeable:false,enumerable:true});Na.browser=Mt;Na.TOUCH_ENABLED=vt;Na.extend=ja;Na.mergeOptions=Ge;Na.bind=Ae;Na.registerPlugin=Sa.registerPlugin;Na.deregisterPlugin=Sa.deregisterPlugin;Na.plugin=function(e,t){o.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Sa.registerPlugin(e,t)};Na.getPlugins=Sa.getPlugins;Na.getPlugin=Sa.getPlugin;Na.getPluginVersion=Sa.getPluginVersion;Na.addLanguage=function(e,t){var i;e=(""+e).toLowerCase();Na.options.languages=Ge(Na.options.languages,(i={},i[e]=t,i));return Na.options.languages[e]};Na.log=o;Na.createLogger=l;Na.createTimeRange=Na.createTimeRanges=Et;Na.formatTime=Lr;Na.setFormatTime=Ir;Na.resetFormatTime=jr;Na.parseUrl=di;Na.isCrossOrigin=pi;Na.EventTarget=xe;Na.on=ve;Na.one=_e;Na.off=ge;Na.trigger=ye;Na.xhr=bi;Na.TextTrack=Li;Na.AudioTrack=Ni;Na.VideoTrack=Ci;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(e){Na[e]=function(){o.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead");return K[e].apply(null,arguments)}});Na.computedStyle=y;Na.dom=K;Na.url=mi;Na.defineLazyProperty=na;return Na});var s=a.dedupeVideojs(e.videojs,n);s.addLanguage("en",{"Audio Player":"Audio Player","Video Player":"Video Player",Play:"Play",Pause:"Pause",Replay:"Replay","Current Time":"Current Time",Duration:"Duration","Remaining Time":"Remaining Time","Stream Type":"Stream Type",LIVE:"LIVE","Seek to live, currently behind live":"Seek to live, currently behind live","Seek to live, currently playing live":"Seek to live, currently playing live",Loaded:"Loaded",Progress:"Progress","Progress Bar":"Progress Bar","progress bar timing: currentTime={1} duration={2}":"{1} of {2}",Fullscreen:"Fullscreen","Non-Fullscreen":"Non-Fullscreen",Mute:"Mute",Unmute:"Unmute","Playback Rate":"Playback Rate",Subtitles:"Subtitles","subtitles off":"subtitles off",Captions:"Captions","captions off":"captions off",Chapters:"Chapters",Descriptions:"Descriptions","descriptions off":"descriptions off","Audio Track":"Audio Track","Volume Level":"Volume Level","You aborted the media playback":"You aborted the media playback","A network error caused the media download to fail part-way.":"A network error caused the media download to fail part-way.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"The media could not be loaded, either because the server or network failed or because the format is not supported.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.","No compatible source was found for this media.":"No compatible source was found for this media.","The media is encrypted and we do not have the keys to decrypt it.":"The media is encrypted and we do not have the keys to decrypt it.","Play Video":"Play Video",Close:"Close","Close Modal Dialog":"Close Modal Dialog","Modal Window":"Modal Window","This is a modal window":"This is a modal window","This modal can be closed by pressing the Escape key or activating the close button.":"This modal can be closed by pressing the Escape key or activating the close button.",", opens captions settings dialog":", opens captions settings dialog",", opens subtitles settings dialog":", opens subtitles settings dialog",", opens descriptions settings dialog":", opens descriptions settings dialog",", selected":", selected","captions settings":"captions settings","subtitles settings":"subtitles settings","descriptions settings":"descriptions settings",Text:"Text",White:"White",Black:"Black",Red:"Red",Green:"Green",Blue:"Blue",Yellow:"Yellow",Magenta:"Magenta",Cyan:"Cyan",Background:"Background",Window:"Window",Transparent:"Transparent","Semi-Transparent":"Semi-Transparent",Opaque:"Opaque","Font Size":"Font Size","Text Edge Style":"Text Edge Style",None:"None",Raised:"Raised",Depressed:"Depressed",Uniform:"Uniform",Dropshadow:"Dropshadow","Font Family":"Font Family","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif",Casual:"Casual",Script:"Script","Small Caps":"Small Caps",Reset:"Reset","restore all settings to the default values":"restore all settings to the default values",Done:"Done","Caption Settings Dialog":"Caption Settings Dialog","Beginning of dialog window. Escape will cancel and close the window.":"Beginning of dialog window. Escape will cancel and close the window.","End of dialog window.":"End of dialog window.","{1} is loading.":"{1} is loading.","Exit Picture-in-Picture":"Exit Picture-in-Picture","Picture-in-Picture":"Picture-in-Picture"});s.addLanguage("es",{Play:"Reproducir","Play Video":"Reproducir V\xeddeo",Pause:"Pausa","Current Time":"Tiempo reproducido",Duration:"Duraci\xf3n total","Remaining Time":"Tiempo restante","Stream Type":"Tipo de secuencia",LIVE:"DIRECTO",Loaded:"Cargado",Progress:"Progreso",Fullscreen:"Pantalla completa","Non-Fullscreen":"Pantalla no completa",Mute:"Silenciar",Unmute:"No silenciado","Playback Rate":"Velocidad de reproducci\xf3n",Subtitles:"Subt\xedtulos","subtitles off":"Subt\xedtulos desactivados",Captions:"Subt\xedtulos especiales","captions off":"Subt\xedtulos especiales desactivados",Chapters:"Cap\xedtulos","You aborted the media playback":"Ha interrumpido la reproducci\xf3n del v\xeddeo.","A network error caused the media download to fail part-way.":"Un error de red ha interrumpido la descarga del v\xeddeo.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"No se ha podido cargar el v\xeddeo debido a un fallo de red o del servidor o porque el formato es incompatible.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La reproducci\xf3n de v\xeddeo se ha interrumpido por un problema de corrupci\xf3n de datos o porque el v\xeddeo precisa funciones que su navegador no ofrece.","No compatible source was found for this media.":"No se ha encontrado ninguna fuente compatible con este v\xeddeo.","Audio Player":"Reproductor de audio","Video Player":"Reproductor de video",Replay:"Volver a reproducir","Seek to live, currently behind live":"Buscar en vivo, actualmente demorado con respecto a la transmisi\xf3n en vivo","Seek to live, currently playing live":"Buscar en vivo, actualmente reproduciendo en vivo","Progress Bar":"Barra de progreso","progress bar timing: currentTime={1} duration={2}":"{1} de {2}",Descriptions:"Descripciones","descriptions off":"descripciones desactivadas","Audio Track":"Pista de audio","Volume Level":"Nivel de volumen","The media is encrypted and we do not have the keys to decrypt it.":"El material audiovisual est\xe1 cifrado y no tenemos las claves para descifrarlo.",Close:"Cerrar","Modal Window":"Ventana modal","This is a modal window":"Esta es una ventana modal","This modal can be closed by pressing the Escape key or activating the close button.":"Esta ventana modal puede cerrarse presionando la tecla Escape o activando el bot\xf3n de cierre.",", opens captions settings dialog":", abre el di\xe1logo de configuraci\xf3n de leyendas",", opens subtitles settings dialog":", abre el di\xe1logo de configuraci\xf3n de subt\xedtulos",", selected":", seleccionado","Close Modal Dialog":"Cierra cuadro de di\xe1logo modal",", opens descriptions settings dialog":", abre el di\xe1logo de configuraci\xf3n de las descripciones","captions settings":"configuraci\xf3n de leyendas","subtitles settings":"configuraci\xf3n de subt\xedtulos","descriptions settings":"configuraci\xf3n de descripciones",Text:"Texto",White:"Blanco",Black:"Negro",Red:"Rojo",Green:"Verde",Blue:"Azul",Yellow:"Amarillo",Magenta:"Magenta",Cyan:"Cian",Background:"Fondo",Window:"Ventana",Transparent:"Transparente","Semi-Transparent":"Semitransparente",Opaque:"Opaca","Font Size":"Tama\xf1o de fuente","Text Edge Style":"Estilo de borde del texto",None:"Ninguno",Raised:"En relieve",Depressed:"Hundido",Uniform:"Uniforme",Dropshadow:"Sombra paralela","Font Family":"Familia de fuente","Proportional Sans-Serif":"Sans-Serif proporcional","Monospace Sans-Serif":"Sans-Serif monoespacio","Proportional Serif":"Serif proporcional","Monospace Serif":"Serif monoespacio",Casual:"Informal",Script:"Cursiva","Small Caps":"Min\xfasculas",Reset:"Restablecer","restore all settings to the default values":"restablece todas las configuraciones a los valores predeterminados",Done:"Listo","Caption Settings Dialog":"Di\xe1logo de configuraci\xf3n de leyendas","Beginning of dialog window. Escape will cancel and close the window.":"Comienzo de la ventana de di\xe1logo. La tecla Escape cancelar\xe1 la operaci\xf3n y cerrar\xe1 la ventana.","End of dialog window.":"Final de la ventana de di\xe1logo.","{1} is loading.":"{1} se est\xe1 cargando."});s.addLanguage("zh-CN",{Play:"\u64ad\u653e",Pause:"\u6682\u505c","Current Time":"\u5f53\u524d\u65f6\u95f4",Duration:"\u65f6\u957f","Remaining Time":"\u5269\u4f59\u65f6\u95f4","Stream Type":"\u5a92\u4f53\u6d41\u7c7b\u578b",LIVE:"\u76f4\u64ad",Loaded:"\u52a0\u8f7d\u5b8c\u6210",Progress:"\u8fdb\u5ea6",Fullscreen:"\u5168\u5c4f","Non-Fullscreen":"\u9000\u51fa\u5168\u5c4f","Picture-in-Picture":"\u753b\u4e2d\u753b","Exit Picture-in-Picture":"\u9000\u51fa\u753b\u4e2d\u753b",Mute:"\u9759\u97f3",Unmute:"\u53d6\u6d88\u9759\u97f3","Playback Rate":"\u64ad\u653e\u901f\u5ea6",Subtitles:"\u5b57\u5e55","subtitles off":"\u5173\u95ed\u5b57\u5e55",Captions:"\u5185\u5d4c\u5b57\u5e55","captions off":"\u5173\u95ed\u5185\u5d4c\u5b57\u5e55",Chapters:"\u8282\u76ee\u6bb5\u843d","Close Modal Dialog":"\u5173\u95ed\u5f39\u7a97",Descriptions:"\u63cf\u8ff0","descriptions off":"\u5173\u95ed\u63cf\u8ff0","Audio Track":"\u97f3\u8f68","You aborted the media playback":"\u89c6\u9891\u64ad\u653e\u88ab\u7ec8\u6b62","A network error caused the media download to fail part-way.":"\u7f51\u7edc\u9519\u8bef\u5bfc\u81f4\u89c6\u9891\u4e0b\u8f7d\u4e2d\u9014\u5931\u8d25\u3002","The media could not be loaded, either because the server or network failed or because the format is not supported.":"\u89c6\u9891\u56e0\u683c\u5f0f\u4e0d\u652f\u6301\u6216\u8005\u670d\u52a1\u5668\u6216\u7f51\u7edc\u7684\u95ee\u9898\u65e0\u6cd5\u52a0\u8f7d\u3002","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"\u7531\u4e8e\u89c6\u9891\u6587\u4ef6\u635f\u574f\u6216\u662f\u8be5\u89c6\u9891\u4f7f\u7528\u4e86\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u7684\u529f\u80fd\uff0c\u64ad\u653e\u7ec8\u6b62\u3002","No compatible source was found for this media.":"\u65e0\u6cd5\u627e\u5230\u6b64\u89c6\u9891\u517c\u5bb9\u7684\u6e90\u3002","The media is encrypted and we do not have the keys to decrypt it.":"\u89c6\u9891\u5df2\u52a0\u5bc6\uff0c\u65e0\u6cd5\u89e3\u5bc6\u3002","Play Video":"\u64ad\u653e\u89c6\u9891",Close:"\u5173\u95ed","Modal Window":"\u5f39\u7a97","This is a modal window":"\u8fd9\u662f\u4e00\u4e2a\u5f39\u7a97","This modal can be closed by pressing the Escape key or activating the close button.":"\u53ef\u4ee5\u6309ESC\u6309\u952e\u6216\u542f\u7528\u5173\u95ed\u6309\u94ae\u6765\u5173\u95ed\u6b64\u5f39\u7a97\u3002",", opens captions settings dialog":", \u5f00\u542f\u6807\u9898\u8bbe\u7f6e\u5f39\u7a97",", opens subtitles settings dialog":", \u5f00\u542f\u5b57\u5e55\u8bbe\u7f6e\u5f39\u7a97",", opens descriptions settings dialog":", \u5f00\u542f\u63cf\u8ff0\u8bbe\u7f6e\u5f39\u7a97",", selected":", \u9009\u62e9","captions settings":"\u5b57\u5e55\u8bbe\u5b9a","Audio Player":"\u97f3\u9891\u64ad\u653e\u5668","Video Player":"\u89c6\u9891\u64ad\u653e\u5668",Replay:"\u91cd\u65b0\u64ad\u653e","Progress Bar":"\u8fdb\u5ea6\u6761","Volume Level":"\u97f3\u91cf","subtitles settings":"\u5b57\u5e55\u8bbe\u5b9a","descriptions settings":"\u63cf\u8ff0\u8bbe\u5b9a",Text:"\u6587\u5b57",White:"\u767d",Black:"\u9ed1",Red:"\u7ea2",Green:"\u7eff",Blue:"\u84dd",Yellow:"\u9ec4",Magenta:"\u7d2b\u7ea2",Cyan:"\u9752",Background:"\u80cc\u666f",Window:"\u7a97\u53e3",Transparent:"\u900f\u660e","Semi-Transparent":"\u534a\u900f\u660e",Opaque:"\u4e0d\u900f\u660e","Font Size":"\u5b57\u4f53\u5c3a\u5bf8","Text Edge Style":"\u5b57\u4f53\u8fb9\u7f18\u6837\u5f0f",None:"\u65e0",Raised:"\u6d6e\u96d5",Depressed:"\u538b\u4f4e",Uniform:"\u5747\u5300",Dropshadow:"\u4e0b\u9634\u5f71","Font Family":"\u5b57\u4f53\u5e93","Proportional Sans-Serif":"\u6bd4\u4f8b\u65e0\u7ec6\u4f53","Monospace Sans-Serif":"\u5355\u95f4\u9694\u65e0\u7ec6\u4f53","Proportional Serif":"\u6bd4\u4f8b\u7ec6\u4f53","Monospace Serif":"\u5355\u95f4\u9694\u7ec6\u4f53",Casual:"\u8212\u9002",Script:"\u624b\u5199\u4f53","Small Caps":"\u5c0f\u578b\u5927\u5199\u5b57\u4f53",Reset:"\u91cd\u7f6e","restore all settings to the default values":"\u6062\u590d\u5168\u90e8\u8bbe\u5b9a\u81f3\u9884\u8bbe\u503c",Done:"\u5b8c\u6210","Caption Settings Dialog":"\u5b57\u5e55\u8bbe\u5b9a\u7a97\u53e3","Beginning of dialog window. Escape will cancel and close the window.":"\u6253\u5f00\u5bf9\u8bdd\u7a97\u53e3\u3002Escape\u952e\u5c06\u53d6\u6d88\u5e76\u5173\u95ed\u5bf9\u8bdd\u7a97\u53e3","End of dialog window.":"\u7ed3\u675f\u5bf9\u8bdd\u7a97\u53e3","Seek to live, currently behind live":"\u5c1d\u8bd5\u76f4\u64ad\uff0c\u5f53\u524d\u4e3a\u5ef6\u65f6\u64ad\u653e","Seek to live, currently playing live":"\u5c1d\u8bd5\u76f4\u64ad\uff0c\u5f53\u524d\u4e3a\u5b9e\u65f6\u64ad\u653e","progress bar timing: currentTime={1} duration={2}":"{1}/{2}","{1} is loading.":"\u6b63\u5728\u52a0\u8f7d {1}\u3002"});s.addLanguage("ja",{Play:"\u518d\u751f",Pause:"\u4e00\u6642\u505c\u6b62","Current Time":"\u73fe\u5728\u306e\u6642\u9593",Duration:"\u9577\u3055","Remaining Time":"\u6b8b\u308a\u306e\u6642\u9593","Stream Type":"\u30b9\u30c8\u30ea\u30fc\u30e0\u306e\u7a2e\u985e",LIVE:"\u30e9\u30a4\u30d6",Loaded:"\u30ed\u30fc\u30c9\u6e08\u307f",Progress:"\u9032\u884c\u72b6\u6cc1",Fullscreen:"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3","Non-Fullscreen":"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3\u4ee5\u5916",Mute:"\u30df\u30e5\u30fc\u30c8",Unmute:"\u30df\u30e5\u30fc\u30c8\u89e3\u9664","Playback Rate":"\u518d\u751f\u30ec\u30fc\u30c8",Subtitles:"\u30b5\u30d6\u30bf\u30a4\u30c8\u30eb","subtitles off":"\u30b5\u30d6\u30bf\u30a4\u30c8\u30eb \u30aa\u30d5",Captions:"\u30ad\u30e3\u30d7\u30b7\u30e7\u30f3","captions off":"\u30ad\u30e3\u30d7\u30b7\u30e7\u30f3 \u30aa\u30d5",Chapters:"\u30c1\u30e3\u30d7\u30bf\u30fc","You aborted the media playback":"\u52d5\u753b\u518d\u751f\u3092\u4e2d\u6b62\u3057\u307e\u3057\u305f","A network error caused the media download to fail part-way.":"\u30cd\u30c3\u30c8\u30ef\u30fc\u30af \u30a8\u30e9\u30fc\u306b\u3088\u308a\u52d5\u753b\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u9014\u4e2d\u3067\u5931\u6557\u3057\u307e\u3057\u305f","The media could not be loaded, either because the server or network failed or because the format is not supported.":"\u30b5\u30fc\u30d0\u30fc\u307e\u305f\u306f\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306e\u30a8\u30e9\u30fc\u3001\u307e\u305f\u306f\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u304c\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u52d5\u753b\u3092\u30ed\u30fc\u30c9\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"\u7834\u640d\u306e\u554f\u984c\u3001\u307e\u305f\u306f\u304a\u4f7f\u3044\u306e\u30d6\u30e9\u30a6\u30b6\u304c\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u306a\u3044\u6a5f\u80fd\u304c\u52d5\u753b\u306b\u4f7f\u7528\u3055\u308c\u3066\u3044\u305f\u305f\u3081\u3001\u52d5\u753b\u306e\u518d\u751f\u304c\u4e2d\u6b62\u3055\u308c\u307e\u3057\u305f","No compatible source was found for this media.":"\u3053\u306e\u52d5\u753b\u306b\u5bfe\u3057\u3066\u4e92\u63db\u6027\u306e\u3042\u308b\u30bd\u30fc\u30b9\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f"});s.addLanguage("ko",{Play:"\uc7ac\uc0dd",Pause:"\uc77c\uc2dc\uc911\uc9c0","Current Time":"\ud604\uc7ac \uc2dc\uac04",Duration:"\uc9c0\uc815 \uae30\uac04","Remaining Time":"\ub0a8\uc740 \uc2dc\uac04","Stream Type":"\uc2a4\ud2b8\ub9ac\ubc0d \uc720\ud615",LIVE:"\ub77c\uc774\ube0c",Loaded:"\ub85c\ub4dc\ub428",Progress:"\uc9c4\ud589",Fullscreen:"\uc804\uccb4 \ud654\uba74","Non-Fullscreen":"\uc804\uccb4 \ud654\uba74 \ud574\uc81c",Mute:"\uc74c\uc18c\uac70",Unmute:"\uc74c\uc18c\uac70 \ud574\uc81c","Playback Rate":"\uc7ac\uc0dd \ube44\uc728",Subtitles:"\uc11c\ube0c\ud0c0\uc774\ud2c0","subtitles off":"\uc11c\ube0c\ud0c0\uc774\ud2c0 \ub044\uae30",Captions:"\uc790\ub9c9","captions off":"\uc790\ub9c9 \ub044\uae30",Chapters:"\ucc55\ud130","You aborted the media playback":"\ube44\ub514\uc624 \uc7ac\uc0dd\uc744 \ucde8\uc18c\ud588\uc2b5\ub2c8\ub2e4.","A network error caused the media download to fail part-way.":"\ub124\ud2b8\uc6cc\ud06c \uc624\ub958\ub85c \uc778\ud558\uc5ec \ube44\ub514\uc624 \uc77c\ubd80\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\uc9c0 \ubabb \ud588\uc2b5\ub2c8\ub2e4.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"\ube44\ub514\uc624\ub97c \ub85c\ub4dc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc11c\ubc84 \ud639\uc740 \ub124\ud2b8\uc6cc\ud06c \uc624\ub958 \ub54c\ubb38\uc774\uac70\ub098 \uc9c0\uc6d0\ub418\uc9c0 \uc54a\ub294 \ud615\uc2dd \ub54c\ubb38\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"\ube44\ub514\uc624 \uc7ac\uc0dd\uc774 \ucde8\uc18c\ub410\uc2b5\ub2c8\ub2e4. \ube44\ub514\uc624\uac00 \uc190\uc0c1\ub418\uc5c8\uac70\ub098 \ube44\ub514\uc624\uac00 \uc0ac\uc6a9\ud558\ub294 \uae30\ub2a5\uc744 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uac83 \uac19\uc2b5\ub2c8\ub2e4.","No compatible source was found for this media.":"\ube44\ub514\uc624\uc5d0 \ud638\ud658\ub418\uc9c0 \uc54a\ub294 \uc18c\uc2a4\uac00 \uc788\uc2b5\ub2c8\ub2e4."});s.addLanguage("fr",{"Audio Player":"Lecteur audio","Video Player":"Lecteur vid\xe9o",Play:"Lecture",Pause:"Pause",Replay:"Revoir","Current Time":"Temps actuel",Duration:"Dur\xe9e","Remaining Time":"Temps restant","Stream Type":"Type de flux",LIVE:"EN DIRECT",Loaded:"Charg\xe9",Progress:"Progression","Progress Bar":"Barre de progression","progress bar timing: currentTime={1} duration={2}":"{1} de {2}",Fullscreen:"Plein \xe9cran","Non-Fullscreen":"Fen\xeatr\xe9",Mute:"Sourdine",Unmute:"Son activ\xe9","Playback Rate":"Vitesse de lecture",Subtitles:"Sous-titres","subtitles off":"Sous-titres d\xe9sactiv\xe9s",Captions:"Sous-titres transcrits","captions off":"Sous-titres transcrits d\xe9sactiv\xe9s",Chapters:"Chapitres",Descriptions:"Descriptions","descriptions off":"descriptions d\xe9sactiv\xe9es","Audio Track":"Piste audio","Volume Level":"Niveau de volume","You aborted the media playback":"Vous avez interrompu la lecture de la vid\xe9o.","A network error caused the media download to fail part-way.":"Une erreur de r\xe9seau a interrompu le t\xe9l\xe9chargement de la vid\xe9o.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Cette vid\xe9o n'a pas pu \xeatre charg\xe9e, soit parce que le serveur ou le r\xe9seau a \xe9chou\xe9 ou parce que le format n'est pas reconnu.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La lecture de la vid\xe9o a \xe9t\xe9 interrompue \xe0 cause d'un probl\xe8me de corruption ou parce que la vid\xe9o utilise des fonctionnalit\xe9s non prises en charge par votre navigateur.","No compatible source was found for this media.":"Aucune source compatible n'a \xe9t\xe9 trouv\xe9e pour cette vid\xe9o.","The media is encrypted and we do not have the keys to decrypt it.":"Le m\xe9dia est chiffr\xe9 et nous n'avons pas les cl\xe9s pour le d\xe9chiffrer.","Play Video":"Lire la vid\xe9o",Close:"Fermer","Close Modal Dialog":"Fermer la bo\xeete de dialogue modale","Modal Window":"Fen\xeatre modale","This is a modal window":"Ceci est une fen\xeatre modale","This modal can be closed by pressing the Escape key or activating the close button.":"Ce modal peut \xeatre ferm\xe9 en appuyant sur la touche \xc9chap ou activer le bouton de fermeture.",", opens captions settings dialog":", ouvrir les param\xe8tres des sous-titres transcrits",", opens subtitles settings dialog":", ouvrir les param\xe8tres des sous-titres",", opens descriptions settings dialog":", ouvrir les param\xe8tres des descriptions",", selected":", s\xe9lectionn\xe9","captions settings":"Param\xe8tres des sous-titres transcrits","subtitles settings":"Param\xe8tres des sous-titres","descriptions settings":"Param\xe8tres des descriptions",Text:"Texte",White:"Blanc",Black:"Noir",Red:"Rouge",Green:"Vert",Blue:"Bleu",Yellow:"Jaune",Magenta:"Magenta",Cyan:"Cyan",Background:"Arri\xe8re-plan",Window:"Fen\xeatre",Transparent:"Transparent","Semi-Transparent":"Semi-transparent",Opaque:"Opaque","Font Size":"Taille des caract\xe8res","Text Edge Style":"Style des contours du texte",None:"Aucun",Raised:"\xc9lev\xe9",Depressed:"Enfonc\xe9",Uniform:"Uniforme",Dropshadow:"Ombre port\xe9e","Font Family":"Famille de polices","Proportional Sans-Serif":"Polices \xe0 chasse variable sans empattement (Proportional Sans-Serif)","Monospace Sans-Serif":"Polices \xe0 chasse fixe sans empattement (Monospace Sans-Serif)","Proportional Serif":"Polices \xe0 chasse variable avec empattement (Proportional Serif)","Monospace Serif":"Polices \xe0 chasse fixe avec empattement (Monospace Serif)",Casual:"Manuscrite",Script:"Scripte","Small Caps":"Petites capitales",Reset:"R\xe9initialiser","restore all settings to the default values":"Restaurer tous les param\xe8tres aux valeurs par d\xe9faut",Done:"Termin\xe9","Caption Settings Dialog":"Bo\xeete de dialogue des param\xe8tres des sous-titres transcrits","Beginning of dialog window. Escape will cancel and close the window.":"D\xe9but de la fen\xeatre de dialogue. La touche d'\xe9chappement annulera et fermera la fen\xeatre.","End of dialog window.":"Fin de la fen\xeatre de dialogue."});s.addLanguage("en",{"Player Information":"Player Information","Session ID":"Session ID","Player Element ID":"Player Element ID","Session ID:":"Session ID:","Player Element ID:":"Player Element ID:","About Brightcove":"About Brightcove","Player Information Dialog":"Player Information Dialog","No plugins available.":"No plugins available.",yes:"yes",no:"no",Name:"Name",Version:"Version",Active:"Active","Current Playback Tech":"Current Playback Tech","Current Media Type":"Current Media Type","Video Name":"Video Name","Video ID":"Video ID","Current Bandwidth":"Current Bandwidth","Media Bytes Transferred":"Media Bytes Transferred","Media Requests":"Media Requests","Media Transfer Duration":"Media Transfer Duration","Rendition Width":"Rendition Width","Rendition Height":"Rendition Height",General:"General","Brightcove Player Version":"Brightcove Player Version","Video.js Version":"Video.js Version","Account ID":"Account ID","Player ID":"Player ID","Embed ID":"Embed ID","Application ID":"Application ID",Plugins:"Plugins",Source:"Source"});s.addLanguage("es",{"Player Information":"Informaci\xf3n del reproductor","Session ID":"Identificador de sesi\xf3n","Player Element ID":"Identificador de elemento del reproductor","Session ID:":"Identificador de sesi\xf3n:","Player Element ID:":"Identificador de elemento del reproductor:","About Brightcove":"Acerca de Brightcove","Player Information Dialog":"Cuadro de di\xe1logo de informaci\xf3n del reproductor","No plugins available.":"No hay ning\xfan complemento disponible.",yes:"yes",no:"no",Name:"Nombre",Version:"Versi\xf3n",Active:"Activo","Current Playback Tech":"Tecnolog\xeda de reproducci\xf3n actual","Current Media Type":"Tipo de medio actual","Video Name":"Nombre del v\xeddeo","Video ID":"Identificador de v\xeddeo","Current Bandwidth":"Ancho de banda actual","Media Bytes Transferred":"Bytes de medios transferidos","Media Requests":"Solicitudes de medios","Media Transfer Duration":"Duraci\xf3n de la transferencia de medios","Rendition Width":"Anchura de la variante de representaci\xf3n","Rendition Height":"Altura de la variante de representaci\xf3n",General:"Generalidades","Brightcove Player Version":"Versi\xf3n del reproductor de Brightcove","Video.js Version":"Versi\xf3n de Video.js","Account ID":"Identificador de cuenta","Player ID":"Identificador del reproductor","Embed ID":"Identificador de incrustaci\xf3n","Application ID":"Identificador de aplicaci\xf3n",Plugins:"Complementos",Source:"Origen"});s.addLanguage("ja",{"Player Information":"\u30d7\u30ec\u30fc\u30e4\u30fc\u60c5\u5831","Session ID":"\u30bb\u30c3\u30b7\u30e7\u30f3 ID","Player Element ID":"\u30d7\u30ec\u30fc\u30e4\u30fc\u8981\u7d20 ID","Session ID:":"\u30bb\u30c3\u30b7\u30e7\u30f3 ID:","Player Element ID:":"\u30d7\u30ec\u30fc\u30e4\u30fc\u8981\u7d20 ID:","About Brightcove":"\u30d6\u30e9\u30a4\u30c8\u30b3\u30fc\u30d6\u306b\u3064\u3044\u3066","Player Information Dialog":"\u30d7\u30ec\u30fc\u30e4\u30fc\u60c5\u5831\u30c0\u30a4\u30a2\u30ed\u30b0","No plugins available.":"\u5229\u7528\u3067\u304d\u308b\u30d7\u30e9\u30b0\u30a4\u30f3\u306f\u3042\u308a\u307e\u305b\u3093\u3002",yes:"\u306f\u3044",no:"\u3044\u3044\u3048",Name:"\u540d\u524d",Version:"\u30d0\u30fc\u30b8\u30e7\u30f3",Active:"\u30a2\u30af\u30c6\u30a3\u30d6","Current Playback Tech":"\u73fe\u5728\u306e\u518d\u751f\u30c6\u30af\u30ce\u30ed\u30b8\u30fc","Current Media Type":"\u73fe\u5728\u306e\u30e1\u30c7\u30a3\u30a2 \u30bf\u30a4\u30d7","Video Name":"\u52d5\u753b\u540d","Video ID":"\u52d5\u753b ID","Current Bandwidth":"\u73fe\u5728\u306e\u5e2f\u57df\u5e45","Media Bytes Transferred":"\u8ee2\u9001\u3055\u308c\u305f\u30e1\u30c7\u30a3\u30a2 \u30d0\u30a4\u30c8","Media Requests":"\u30e1\u30c7\u30a3\u30a2\u8981\u6c42","Media Transfer Duration":"\u30e1\u30c7\u30a3\u30a2\u8ee2\u9001\u6642\u9593","Rendition Width":"\u30ec\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u5e45","Rendition Height":"\u30ec\u30f3\u30c7\u30a3\u30b7\u30e7\u30f3\u9ad8\u3055",General:"\u5168\u822c","Brightcove Player Version":"Brightcove Player \u306e\u30d0\u30fc\u30b8\u30e7\u30f3","Video.js Version":"Video.js \u306e\u30d0\u30fc\u30b8\u30e7\u30f3","Account ID":"\u30a2\u30ab\u30a6\u30f3\u30c8 ID","Player ID":"\u30d7\u30ec\u30fc\u30e4\u30fc ID","Embed ID":"\u57cb\u3081\u8fbc\u307f ID","Application ID":"\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 ID",Plugins:"\u30d7\u30e9\u30b0\u30a4\u30f3",Source:"\u30bd\u30fc\u30b9"});s.addLanguage("ko",{"Player Information":"\ud50c\ub808\uc774\uc5b4 \uc815\ubcf4","Session ID":"\uc138\uc158 ID","Player Element ID":"\ud50c\ub808\uc774\uc5b4 \uc694\uc18c ID","Session ID:":"\uc138\uc158 ID:","Player Element ID:":"\ud50c\ub808\uc774\uc5b4 \uc694\uc18c ID:","About Brightcove":"Brightcove \uc18c\uac1c","Player Information Dialog":"\ud50c\ub808\uc774\uc5b4 \uc815\ubcf4 \ub300\ud654\uc0c1\uc790","No plugins available.":"\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ud50c\ub7ec\uadf8\uc778\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",yes:"\uc608",no:"\uc544\ub2c8\uc694",Name:"\uc774\ub984",Version:"\ubc84\uc804",Active:"\ud65c\uc131","Current Playback Tech":"\ud604\uc7ac \uc7ac\uc0dd \uae30\uc220","Current Media Type":"\ud604\uc7ac \ubbf8\ub514\uc5b4 \uc720\ud615","Video Name":"\ube44\ub514\uc624 \uc774\ub984","Video ID":"\ube44\ub514\uc624 ID","Current Bandwidth":"\ud604\uc7ac \ub300\uc5ed\ud3ed","Media Bytes Transferred":"\uc804\uc1a1\ub41c \ubbf8\ub514\uc5b4 \ubc14\uc774\ud2b8","Media Requests":"\ubbf8\ub514\uc5b4 \uc694\uccad","Media Transfer Duration":"\ubbf8\ub514\uc5b4 \uc804\uc1a1 \uc2dc\uac04","Rendition Width":"\ub80c\ub514\uc158 \ub108\ube44","Rendition Height":"\ub80c\ub514\uc158 \ub192\uc774",General:"\uc77c\ubc18","Brightcove Player Version":"Brightcove Player \ubc84\uc804","Video.js Version":"Video.js \ubc84\uc804","Account ID":"\uacc4\uc815 ID","Player ID":"\ud50c\ub808\uc774\uc5b4 ID","Embed ID":"\uc784\ubca0\ub4dc ID","Application ID":"\uc560\ud50c\ub9ac\ucf00\uc774\uc158 ID",Plugins:"\ud50c\ub7ec\uadf8\uc778",Source:"\uc18c\uc2a4"});s.addLanguage("fr",{"Player Information":"Informations sur le lecteur","Session ID":"ID de session","Player Element ID":"ID d'\xe9l\xe9ment du lecteur","Session ID:":"ID de session\xa0:","Player Element ID:":"ID d'\xe9l\xe9ment du lecteur\xa0:","About Brightcove":"\xc0 propos de Brightcove","Player Information Dialog":"Bo\xeete de dialogue d\u2019information du lecteur","No plugins available.":"Aucun plug-in n\u2019est disponible.",yes:"oui",no:"non",Name:"Nom",Version:"Version",Active:"Actif","Current Playback Tech":"Technologie de lecture actuelle","Current Media Type":"Type de m\xe9dia actuel","Video Name":"Nom de la vid\xe9o","Video ID":"ID de la vid\xe9o","Current Bandwidth":"Bande passante actuelle","Media Bytes Transferred":"Octets du m\xe9dia transf\xe9r\xe9s","Media Requests":"Demandes de m\xe9dia","Media Transfer Duration":"Dur\xe9e de transfert du m\xe9dia","Rendition Width":"Largeur du rendu","Rendition Height":"Hauteur du rendu",General:"G\xe9n\xe9ralit\xe9s","Brightcove Player Version":"Version du lecteur Brightcove","Video.js Version":"Version de Video.js","Account ID":"ID de compte","Player ID":"Player ID","Embed ID":"ID d'int\xe9gration","Application ID":"ID d'application",Plugins:"Plug-ins",Source:"Source"});var o=new a({accountId:"6058004203001",adConfigId:"",autoplay:"",css:{controlBarColor:"rgba(0, 0, 0, 0.18)",progressColor:"rgb(209, 2, 26)"},embedId:"default",media:{poster:{}},plugins:[{name:"perSourceBehaviors",autoInit:true},{name:"bcAnalytics",autoInit:true,options:{accountId:"6058004203001",embedId:"default",platformVersion:"6.46.4",playerId:"keoPsmO0E",playerName:"muplayer_v1"}},{name:"errors",autoInit:true,options:{}},{name:"catalog",autoInit:true,options:{accountId:"6058004203001",policyKey:"BCpkADawqM0zE5zT3Dy1Ngh76fedcsao8T7nb-8onNFd0XEIvY8JesQvWB1nYLaI1CHC5rHrk5h1lKgUp_kw5JFnYFWbgcgtbYgxJd9vcyU8kglK79mUYlwZMaNhrBrJVyLgdnCjDvrFmvSr"}},{name:"playlist",autoInit:false},{name:"qualityMenu",autoInit:true,options:{useResolutionLabels:true}},{name:"vr",autoInit:true},{name:"customEndscreen",autoInit:true,options:{content:""}}],contextMenu:false,playerId:"keoPsmO0E",preload:"auto",videoCloud:{policy_key:"BCpkADawqM0zE5zT3Dy1Ngh76fedcsao8T7nb-8onNFd0XEIvY8JesQvWB1nYLaI1CHC5rHrk5h1lKgUp_kw5JFnYFWbgcgtbYgxJd9vcyU8kglK79mUYlwZMaNhrBrJVyLgdnCjDvrFmvSr"},skin:"luna",playersCDN:"//players.brightcove.net",responsive:true,liveui:true,controlBar:{},version:"6.46.4"},{});if(!s.getTech("flash")){(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("video.js")):typeof i==="function"&&i.amd?i(["video.js"],t):e.videojsFlash=t(e.videojs)})(this,function(t){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;var i="5.4.1";var r="2.1.0";function n(e){e.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};e.streamFromParts=function(e,t){return e+"&"+t};e.streamToParts=function(e){var t={connection:"",stream:""};if(!e){return t}var i=e.search(/&(?!\w+=)/);var r=void 0;if(i!==-1){r=i+1}else{i=r=e.lastIndexOf("/")+1;if(i===0){i=r=e.length}}t.connection=e.substring(0,i);t.stream=e.substring(r,e.length);return t};e.isStreamingType=function(t){return t in e.streamingFormats};e.RTMP_RE=/^rtmp[set]?:\/\//i;e.isStreamingSrc=function(t){return e.RTMP_RE.test(t)};e.rtmpSourceHandler={};e.rtmpSourceHandler.canPlayType=function(t){if(e.isStreamingType(t)){return"maybe"}return""};e.rtmpSourceHandler.canHandleSource=function(t,i){var r=e.rtmpSourceHandler.canPlayType(t.type);if(r){return r}if(e.isStreamingSrc(t.src)){return"maybe"}return""};e.rtmpSourceHandler.handleSource=function(t,i,r){var n=e.streamToParts(t.src);i.setRtmpConnection(n.connection);i.setRtmpStream(n.stream)};e.registerSourceHandler(e.rtmpSourceHandler);return e}var a=typeof e!=="undefined"?e:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};var s;if(typeof e!=="undefined"){s=e}else if(typeof a!=="undefined"){s=a}else if(typeof self!=="undefined"){s=self}else{s={}}var o=s;var l=function(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}};var u=function(e,t){if(typeof t!=="function"&&t!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof t)}e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:false,writable:true,configurable:true}});if(t)Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t};var c=function(e,t){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t&&(typeof t==="object"||typeof t==="function")?t:e};var d=t.getComponent("Tech");var h=t.dom;var f=t.url;var p=t.createTimeRange;var m=t.mergeOptions;var v=o&&o.navigator||{};var g=function(e){u(t,e);function t(i,r){l(this,t);var n=c(this,e.call(this,i,r));if(i.source){n.ready(function(){this.setSource(i.source)},true)}if(i.startTime){n.ready(function(){this.load();this.play();this.currentTime(i.startTime)},true)}o.videojs=o.videojs||{};o.videojs.Flash=o.videojs.Flash||{};o.videojs.Flash.onReady=t.onReady;o.videojs.Flash.onEvent=t.onEvent;o.videojs.Flash.onError=t.onError;n.on("seeked",function(){this.lastSeekTarget_=undefined});return n}t.prototype.createEl=function e(){var r=this.options_;if(!r.swf){r.swf="https://vjs.zencdn.net/swf/"+i+"/video-js.swf"}var n=r.techId;var a=m({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:r.autoplay,preload:r.preload,loop:r.loop,muted:r.muted},r.flashVars);var s=m({wmode:"opaque",bgcolor:"#000000"},r.params);var o=m({id:n,name:n,class:"vjs-tech"},r.attributes);this.el_=t.embed(r.swf,a,s,o);this.el_.tech=this;return this.el_};t.prototype.play=function e(){if(this.ended()){this.setCurrentTime(0)}this.el_.vjs_play()};t.prototype.pause=function e(){this.el_.vjs_pause()};t.prototype.src=function e(t){if(t===undefined){return this.currentSrc()}return this.setSrc(t)};t.prototype.setSrc=function e(t){var i=this;t=f.getAbsoluteURL(t);this.el_.vjs_src(t);if(this.autoplay()){this.setTimeout(function(){return i.play()},0)}};t.prototype.seeking=function e(){return this.lastSeekTarget_!==undefined};t.prototype.setCurrentTime=function t(i){var r=this.seekable();if(r.length){i=i>r.start(0)?i:r.start(0);i=i<r.end(r.length-1)?i:r.end(r.length-1);this.lastSeekTarget_=i;this.trigger("seeking");this.el_.vjs_setProperty("currentTime",i);e.prototype.setCurrentTime.call(this)}};t.prototype.currentTime=function e(){if(this.seeking()){return this.lastSeekTarget_||0}return this.el_.vjs_getProperty("currentTime")};t.prototype.currentSrc=function e(){if(this.currentSource_){return this.currentSource_.src}return this.el_.vjs_getProperty("currentSrc")};t.prototype.duration=function e(){if(this.readyState()===0){return NaN}var e=this.el_.vjs_getProperty("duration");return e>=0?e:Infinity};t.prototype.load=function e(){this.el_.vjs_load()};t.prototype.poster=function e(){this.el_.vjs_getProperty("poster")};t.prototype.setPoster=function e(){};t.prototype.seekable=function e(){var t=this.duration();if(t===0){return p()}return p(0,t)};t.prototype.buffered=function e(){var t=this.el_.vjs_getProperty("buffered");if(t.length===0){return p()}return p(t[0][0],t[0][1])};t.prototype.supportsFullScreen=function e(){return false};t.prototype.enterFullScreen=function e(){return false};t.prototype.getVideoPlaybackQuality=function e(){var t=this.el_.vjs_getProperty("getVideoPlaybackQuality");if(o.performance&&typeof o.performance.now==="function"){t.creationTime=o.performance.now()}else if(o.performance&&o.performance.timing&&typeof o.performance.timing.navigationStart==="number"){t.creationTime=o.Date.now()-o.performance.timing.navigationStart}return t};return t}(d);var y=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"];var _=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"];var b=g.prototype;function M(e){var t=e.charAt(0).toUpperCase()+e.slice(1);b["set"+t]=function(t){return this.el_.vjs_setProperty(e,t)}}function T(e){b[e]=function(){return this.el_.vjs_getProperty(e)}}for(var A=0;A<y.length;A++){T(y[A]);M(y[A])}for(var w=0;w<_.length;w++){T(_[w])}g.isSupported=function(){if(t.browser.IS_CHROME&&!t.browser.IS_ANDROID||t.browser.IS_SAFARI&&!t.browser.IS_IOS){return true}return g.version()[0]>=10};d.withSourceHandlers(g);g.nativeSourceHandler={};g.nativeSourceHandler.canPlayType=function(e){if(e in g.formats){return"maybe"}return""};g.nativeSourceHandler.canHandleSource=function(e,t){var i=void 0;function r(e){var t=f.getFileExtension(e);if(t){return"video/"+t}return""}if(!e.type){i=r(e.src)}else{i=e.type.replace(/;.*/,"").toLowerCase()}return g.nativeSourceHandler.canPlayType(i)};g.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)};g.nativeSourceHandler.dispose=function(){};g.registerSourceHandler(g.nativeSourceHandler);g.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};g.onReady=function(e){var t=h.$("#"+e);var i=t&&t.tech;if(i&&i.el()){g.checkReady(i)}};g.checkReady=function(e){if(!e.el()){return}if(e.el().vjs_getProperty){e.triggerReady()}else{this.setTimeout(function(){g.checkReady(e)},50)}};g.onEvent=function(e,t){var i=h.$("#"+e).tech;var r=Array.prototype.slice.call(arguments,2);i.setTimeout(function(){i.trigger(t,r)},1)};g.onError=function(e,t){var i=h.$("#"+e).tech;if(t==="srcnotfound"){return i.error(4)}if(typeof t==="string"){i.error("FLASH: "+t)}else{t.origin="flash";i.error(t)}};g.version=function(){var e="0,0,0";try{e=new o.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(t){try{if(v.mimeTypes["application/x-shockwave-flash"].enabledPlugin){e=(v.plugins["Shockwave Flash 2.0"]||v.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}}catch(e){}}return e.split(",")};g.embed=function(e,t,i,r){var n=g.getEmbedCode(e,t,i,r);var a=h.createEl("div",{innerHTML:n}).childNodes[0];return a};g.getEmbedCode=function(e,t,i,r){var n='<object type="application/x-shockwave-flash" ';var a="";var s="";var o="";if(t){Object.getOwnPropertyNames(t).forEach(function(e){a+=e+"="+t[e]+"&amp;"})}i=m({movie:e,flashvars:a,allowScriptAccess:"always",allowNetworking:"all"},i);Object.getOwnPropertyNames(i).forEach(function(e){s+='<param name="'+e+'" value="'+i[e]+'" />'});r=m({data:e,width:"100%",height:"100%"},r);Object.getOwnPropertyNames(r).forEach(function(e){o+=e+'="'+r[e]+'" '});return""+n+o+">"+s+"</object>"};n(g);if(d.getTech("Flash")){t.log.warn("Not using videojs-flash as it appears to already be registered");t.log.warn("videojs-flash should only be used with video.js@6 and above")}else{t.registerTech("Flash",g)}g.VERSION=r;return g})}(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports,require("global/window"),require("video.js")):typeof i==="function"&&i.amd?i(["exports","global/window","video.js"],t):t(e.videojsFlashlsSourceHandler={},e.window,e.videojs)})(this,function(e,t,i){"use strict";t=t&&t.hasOwnProperty("default")?t["default"]:t;i=i&&i.hasOwnProperty("default")?i["default"]:i;var r=function(){this.init=function(){var e={};this.on=function(t,i){if(!e[t]){e[t]=[]}e[t]=e[t].concat(i)};this.off=function(t,i){var r;if(!e[t]){return false}r=e[t].indexOf(i);e[t]=e[t].slice();e[t].splice(r,1);return r>-1};this.trigger=function(t){var i,r,n,a;i=e[t];if(!i){return}if(arguments.length===2){n=i.length;for(r=0;r<n;++r){i[r].call(this,arguments[1])}}else{a=[];r=arguments.length;for(r=1;r<arguments.length;++r){a.push(arguments[r])}n=i.length;for(r=0;r<n;++r){i[r].apply(this,a)}}};this.dispose=function(){e={}}}};r.prototype.pipe=function(e){this.on("data",function(t){e.push(t)});this.on("done",function(t){e.flush(t)});return e};r.prototype.push=function(e){this.trigger("data",e)};r.prototype.flush=function(e){this.trigger("done",e)};var n=r;var a=4,s=128;var o=function(e){var t=0,i={payloadType:-1,payloadSize:0},r=0,n=0;while(t<e.byteLength){if(e[t]===s){break}while(e[t]===255){r+=255;t++}r+=e[t++];while(e[t]===255){n+=255;t++}n+=e[t++];if(!i.payload&&r===a){i.payloadType=r;i.payloadSize=n;i.payload=e.subarray(t,t+n);break}t+=n;r=0;n=0}return i};var l=function(e){if(e.payload[0]!==181){return null}if((e.payload[1]<<8|e.payload[2])!==49){return null}if(String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])!=="GA94"){return null}if(e.payload[7]!==3){return null}return e.payload.subarray(8,e.payload.length-1)};var u=function(e,t){var i=[],r,n,a,s;if(!(t[0]&64)){return i}n=t[0]&31;for(r=0;r<n;r++){a=r*3;s={type:t[a+2]&3,pts:e};if(t[a+2]&4){s.ccData=t[a+3]<<8|t[a+4];i.push(s)}}return i};var c=function(e){var t=e.byteLength,i=[],r=1,n,a;while(r<t-2){if(e[r]===0&&e[r+1]===0&&e[r+2]===3){i.push(r+2);r+=2}else{r++}}if(i.length===0){return e}n=t-i.length;a=new Uint8Array(n);var s=0;for(r=0;r<n;s++,r++){if(s===i[0]){s++;i.shift()}a[r]=e[s]}return a};var d={parseSei:o,parseUserData:l,parseCaptionPackets:u,discardEmulationPreventionBytes:c,USER_DATA_REGISTERED_ITU_T_T35:a};var h=function(){h.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new y(0,0),new y(0,1),new y(1,0),new y(1,1)];this.reset();this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data"));e.on("done",this.trigger.bind(this,"done"))},this)};h.prototype=new n;h.prototype.push=function(e){var t,i,r;if(e.nalUnitType!=="sei_rbsp"){return}t=d.parseSei(e.escapedRBSP);if(t.payloadType!==d.USER_DATA_REGISTERED_ITU_T_T35){return}i=d.parseUserData(t);if(!i){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}r=d.parseCaptionPackets(e.pts,i);this.captionPackets_=this.captionPackets_.concat(r);if(this.latestDts_!==e.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=e.dts};h.prototype.flush=function(){if(!this.captionPackets_.length){this.ccStreams_.forEach(function(e){e.flush()},this);return}this.captionPackets_.forEach(function(e,t){e.presortIndex=t});this.captionPackets_.sort(function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts});this.captionPackets_.forEach(function(e){if(e.type<2){this.dispatchCea608Packet(e)}},this);this.captionPackets_.length=0;this.ccStreams_.forEach(function(e){e.flush()},this);return};h.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(e){e.reset()})};h.prototype.dispatchCea608Packet=function(e){if(this.setsChannel1Active(e)){this.activeCea608Channel_[e.type]=0}else if(this.setsChannel2Active(e)){this.activeCea608Channel_[e.type]=1}if(this.activeCea608Channel_[e.type]===null){return}this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};h.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};h.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};var f={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var p=function(e){if(e===null){return""}e=f[e]||e;return String.fromCharCode(e)};var m=14;var v=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var g=function(){var e=[],t=m+1;while(t--){e.push("")}return e};var y=function(e,t){y.prototype.init.call(this);this.field_=e||0;this.dataChannel_=t||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,i,r,n,a;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}r=t>>>8;n=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(e.pts);this.flushDisplayed(e.pts);i=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=i;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(e.pts)}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=g()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=g()}else if(t===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(e.pts);this.displayed_=g()}this.mode_="paintOn";this.startPts_=e.pts}else if(this.isSpecialCharacter(r,n)){r=(r&3)<<8;a=p(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isExtCharacter(r,n)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}r=(r&3)<<8;a=p(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isMidRowCode(r,n)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((n&14)===14){this.addFormatting(e.pts,["i"])}if((n&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(r,n)){this.column_+=n&3}else if(this.isPAC(r,n)){var s=v.indexOf(t&7968);if(this.mode_==="rollUp"){this.setRollUp(e.pts,s)}if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(n&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(n)){if((n&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(r)){if(n===0){n=null}a=p(r);a+=p(n);this[this.mode_](e.pts,a);this.column_+=a.length}}};y.prototype=new n;y.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};y.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=g();this.nonDisplayed_=g();this.lastControlCode_=null;this.column_=0;this.row_=m;this.rollUpRows_=2;this.formatting_=[]};y.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};y.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};y.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&(t>=32&&t<=63)};y.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&(t>=32&&t<=47)};y.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&(t>=33&&t<=35)};y.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&(t>=64&&t<=127)};y.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};y.prototype.isNormalChar=function(e){return e>=32&&e<=127};y.prototype.setRollUp=function(e,t){if(this.mode_!=="rollUp"){this.row_=m;this.mode_="rollUp";this.flushDisplayed(e);this.nonDisplayed_=g();this.displayed_=g()}if(t!==undefined&&t!==this.row_){for(var i=0;i<this.rollUpRows_;i++){this.displayed_[t-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]=""}}if(t===undefined){t=this.row_}this.topRow_=t-this.rollUpRows_+1};y.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)};y.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[];this[this.mode_](e,t)};y.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t;this.nonDisplayed_[this.row_]=i};y.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};y.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.row_+1;e<m+1;e++){this.displayed_[e]=""}for(e=this.topRow_;e<this.row_;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[this.row_]=""};y.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};var _={CaptionStream:h,Cea608Stream:y};var b=_.CaptionStream;var M={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var T=function(e,t,i){var r,n="";for(r=t;r<i;r++){n+="%"+("00"+e[r].toString(16)).slice(-2)}return n},A=function(e,t,i){return decodeURIComponent(T(e,t,i))},w=function(e,t,i){return unescape(T(e,t,i))},E=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},x={TXXX:function(e){var t;if(e.data[0]!==3){return}for(t=1;t<e.data.length;t++){if(e.data[t]===0){e.description=A(e.data,1,t);e.value=A(e.data,t+1,e.data.length).replace(/\0*$/,"");break}}e.data=e.value},WXXX:function(e){var t;if(e.data[0]!==3){return}for(t=1;t<e.data.length;t++){if(e.data[t]===0){e.description=A(e.data,1,t);e.url=A(e.data,t+1,e.data.length);break}}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++){if(e.data[t]===0){e.owner=w(e.data,0,t);break}}e.privateData=e.data.subarray(t+1);e.data=e.privateData}},S;S=function(e){var t={debug:!!(e&&e.debug),descriptor:e&&e.descriptor},i=0,r=[],n=0,a;S.prototype.init.call(this);this.dispatchType=M.METADATA_STREAM_TYPE.toString(16);if(t.descriptor){for(a=0;a<t.descriptor.length;a++){this.dispatchType+=("00"+t.descriptor[a].toString(16)).slice(-2)}}this.push=function(e){var a,s,o,l,u,c;if(e.type!=="timed-metadata"){return}if(e.dataAlignmentIndicator){n=0;r.length=0}if(r.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){if(t.debug){console.log("Skipping unrecognized metadata packet")}return}r.push(e);n+=e.data.byteLength;if(r.length===1){i=E(e.data.subarray(6,10));i+=10}if(n<i){return}a={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts};for(u=0;u<i;){a.data.set(r[0].data.subarray(0,i-u),u);u+=r[0].data.byteLength;n-=r[0].data.byteLength;r.shift()}s=10;if(a.data[5]&64){s+=4;s+=E(a.data.subarray(10,14));i-=E(a.data.subarray(16,20))}do{o=E(a.data.subarray(s+4,s+8));if(o<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}c=String.fromCharCode(a.data[s],a.data[s+1],a.data[s+2],a.data[s+3]);l={id:c,data:a.data.subarray(s+10,s+o+10)};l.key=l.id;if(x[l.id]){x[l.id](l);if(l.owner==="com.apple.streaming.transportStreamTimestamp"){var d=l.data,h=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;h*=4;h+=d[7]&3;l.timeStamp=h;if(a.pts===undefined&&a.dts===undefined){a.pts=l.timeStamp;a.dts=l.timeStamp}this.trigger("timestamp",l)}}a.frames.push(l);s+=10;s+=o}while(s<i);this.trigger("data",a)}};S.prototype=new n;var D=S;var I=function e(t,i){var r={id:i.index+"",width:i.width,height:i.height,bandwidth:i.bitrate,isEnabled_:true};r.enabled=function(e){if(typeof e==="undefined"){return r.isEnabled_}if(e===r.isEnabled_){return}if(e===true||e===false){r.isEnabled_=e;t()}};return r};var j=function e(t){var i=null;var r=function e(){var r=i.filter(function(e){return e.enabled()});if(r.length===i.length||r.length===0){t.el_.vjs_setProperty("autoLevelCapping",-1);t.el_.vjs_setProperty("level",-1);return}if(r.length===1){t.el_.vjs_setProperty("level",parseInt(r[0].id,10));t.el_.vjs_setProperty("autoLevelCapping",-1);return}var n=r[r.length-1].id;t.el_.vjs_setProperty("autoLevelCapping",parseInt(n,10));t.el_.vjs_setProperty("level",-1)};return function(){if(!i){var e=t.el_.vjs_getProperty("levels");i=e.filter(function(e){return!e.audio}).map(I.bind(null,r))}return i}};var L=function e(t){var i=t.el_.vjs_getProperty("audioTracks");var r=t.audioTracks();var n=null;for(var a=0;a<r.length;a++){if(r[a].enabled){n=r[a].id;break}}if(n===null){return}for(var s=0;s<i.length;s++){if(n===i[s].title){t.el_.vjs_setProperty("audioTrack",s);return}}};var N=function e(t){var r=t.el_.vjs_getProperty("altAudioTracks");var n=t.el_.vjs_getProperty("audioTracks");var a=t.el_.vjs_getProperty("audioTrack");n.forEach(function(e,n){var s=r[e.id];t.audioTracks().addTrack(new i.AudioTrack({id:s.name,enabled:a===n,language:s.lang,default:s.default_track,label:s.name}))})};var C="1.4.8";var O=function e(t){Object.defineProperties(t.frame,{id:{get:function e(){i.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return t.value.key}},value:{get:function e(){i.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return t.value.data}},privateData:{get:function e(){i.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return t.value.data}}})};var k=function e(t,i,r){var n=t.remoteTextTracks()||[];for(var a=0;a<n.length;a++){var s=n[a];if(s.kind===i&&s.label===r){t.removeRemoteTextTrack(s)}}};var P=function e(t){var i=new Uint8Array(t.length);for(var r=0;r<t.length;r++){i[r]=t.charCodeAt(r)}return i};var R=function e(t,i,r){var n;var a;if(!r){return}if(!r.cues){return}n=r.cues.length;while(n--){a=r.cues[n];if(a.startTime<=i&&a.endTime>=t){r.removeCue(a)}}};var z=function e(t,i){if(t.length){R(0,t.start(0),i)}};var U=function e(t,i){var r=-1;for(var n=0;n<t.length;n++){if(t[n].id===i){r=n;break}}t.selectedIndex_=r;t.trigger({selectedIndex:r,type:"change"})};var B=1/30;var F=function e(t,r){var n=[];if(t&&t.length){for(var a=0;a<t.length;a++){if(r(t.start(a),t.end(a))){n.push([t.start(a),t.end(a)])}}}return i.createTimeRanges(n)};var V=function e(t,i){return F(t,function(e,t){return e-B<=i&&t+B>=i})};var G=function(){function e(e,t,r){var n=this;if(t.options_&&t.options_.playerId){var a=i(t.options_.playerId);if(!a.hasOwnProperty("hls")){Object.defineProperty(a,"hls",{get:function e(){i.log.warn("player.hls is deprecated. Use player.tech_.hls instead.");t.trigger({type:"usage",name:"flashls-player-access"});return n}})}}Object.defineProperties(this,{stats:{get:function e(){return this.tech_.el_.vjs_getProperty("stats")}},bandwidth:{get:function e(){return this.tech_.el_.vjs_getProperty("stats").bandwidth}}});this.tech_=t;this.metadataTrack_=null;this.inbandTextTracks_={};this.metadataStream_=new D;this.captionStream_=new b;this.offsetPts=null;this.offsetDts=null;this.onLoadedmetadata_=this.onLoadedmetadata_.bind(this);this.onSeeking_=this.onSeeking_.bind(this);this.onId3updated_=this.onId3updated_.bind(this);this.onCaptionData_=this.onCaptionData_.bind(this);this.onMetadataStreamData_=this.onMetadataStreamData_.bind(this);this.onCaptionStreamData_=this.onCaptionStreamData_.bind(this);this.onLevelSwitch_=this.onLevelSwitch_.bind(this);this.onLevelLoaded_=this.onLevelLoaded_.bind(this);this.onFragmentLoaded_=this.onFragmentLoaded_.bind(this);this.onAudioTrackChanged=this.onAudioTrackChanged.bind(this);this.onPlay_=this.onPlay_.bind(this);this.tech_.on("loadedmetadata",this.onLoadedmetadata_);this.tech_.on("seeking",this.onSeeking_);this.tech_.on("id3updated",this.onId3updated_);this.tech_.on("captiondata",this.onCaptionData_);this.tech_.on("levelswitch",this.onLevelSwitch_);this.tech_.on("levelloaded",this.onLevelLoaded_);this.tech_.on("fragmentloaded",this.onFragmentLoaded_);this.tech_.on("play",this.onPlay_);this.metadataStream_.on("data",this.onMetadataStreamData_);this.captionStream_.on("data",this.onCaptionStreamData_);this.playlists=new i.EventTarget;this.playlists.media=function(){return n.media_()}}var r=e.prototype;r.src=function e(t){if(!t){return}this.tech_.setSrc(t.src)};r.onPlay_=function e(){if(this.tech_.duration()===Infinity){var t=this.seekable();if(this.tech_.currentTime()<t.start(0)){return this.tech_.setCurrentTime(t.end(t.length-1))}}};r.seekable=function e(){var t=this.tech_.el_.vjs_getProperty("seekableStart");var r=this.tech_.el_.vjs_getProperty("seekableEnd");if(r===0){return i.createTimeRange()}return i.createTimeRange(t,r)};r.media_=function e(){var t=this.tech_.el_.vjs_getProperty("levels");var i=this.tech_.el_.vjs_getProperty("level");var r;if(t.length){r={resolvedUri:t[i].url,attributes:{BANDWIDTH:t[i].bitrate,RESOLUTION:{width:t[i].width,height:t[i].height}}}}return r};r.onLoadedmetadata_=function e(){var t=this;this.representations=j(this.tech_);var r=i.players[this.tech_.options_.playerId];if(r&&r.qualityLevels){this.qualityLevels_=r.qualityLevels();this.representations().forEach(function(e){t.qualityLevels_.addQualityLevel(e)});U(this.qualityLevels_,this.tech_.el_.vjs_getProperty("level")+"")}N(this.tech_);this.tech_.audioTracks().on("change",this.onAudioTrackChanged)};r.onAudioTrackChanged=function e(){L(this.tech_)};r.onLevelSwitch_=function e(t,i){if(this.qualityLevels_){U(this.qualityLevels_,i[0].levelIndex+"")}this.playlists.trigger("mediachange");this.tech_.trigger({type:"mediachange",bubbles:true})};r.onLevelLoaded_=function e(){this.playlists.trigger("loadedplaylist")};r.onFragmentLoaded_=function e(){this.tech_.trigger("bandwidthupdate");this.captionStream_.flush()};r.onSeeking_=function e(){var t=this;R(0,Infinity,this.metadataTrack_);var i=V(this.tech_.buffered(),this.tech_.currentTime());if(!i.length){Object.keys(this.inbandTextTracks_).forEach(function(e){R(0,Infinity,t.inbandTextTracks_[e])});this.captionStream_.reset()}};r.onId3updated_=function e(i,r){var n=t.atob(r[0]);var a=P(n);var s={type:"timed-metadata",dataAlignmentIndicator:true,data:a};this.metadataStream_.push(s)};r.onMetadataStreamData_=function e(i){var r=this;if(!this.metadataTrack_){this.metadataTrack_=this.tech_.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;this.metadataTrack_.inBandMetadataTrackDispatchType="15"}z(this.tech_.buffered(),this.metadataTrack_);var n=this.tech_.currentTime();i.frames.forEach(function(e){var i=new t.VTTCue(n,n+.1,e.value||e.url||e.data||"");i.frame=e;i.value=e;O(i);r.metadataTrack_.addCue(i)});if(this.metadataTrack_.cues&&this.metadataTrack_.cues.length){var a=this.metadataTrack_.cues;var s=[];var o=this.tech_.duration();if(isNaN(o)||Math.abs(o)===Infinity){o=Number.MAX_VALUE}for(var l=0;l<a.length;l++){s.push(a[l])}s.sort(function(e,t){return e.startTime-t.startTime});for(var u=0;u<s.length-1;u++){if(s[u].endTime!==s[u+1].startTime){s[u].endTime=s[u+1].startTime}}s[s.length-1].endTime=o}};r.onCaptionData_=function e(i,r){var n=this;r[0].forEach(function(e){if(!n.offsetPts){n.offsetPts=e.pos}if(!n.offsetDts){n.offsetDts=e.dts}n.captionStream_.push({pts:(e.pos-n.offsetPts)*9e4,dts:(e.dts-n.offsetDts)*9e4,escapedRBSP:P(t.atob(e.data)),nalUnitType:"sei_rbsp"})})};r.onCaptionStreamData_=function e(i){if(i){if(!this.inbandTextTracks_[i.stream]){k(this.tech_,"captions",i.stream);this.inbandTextTracks_[i.stream]=this.tech_.addRemoteTextTrack({kind:"captions",label:i.stream,id:i.stream},false).track}z(this.tech_.buffered(),this.inbandTextTracks_[i.stream]);this.inbandTextTracks_[i.stream].addCue(new t.VTTCue(i.startPts/9e4,i.endPts/9e4,i.text))}};r.dispose=function e(){this.tech_.off("loadedmetadata",this.onLoadedmetadata_);this.tech_.off("seeked",this.onSeeking_);this.tech_.off("id3updated",this.onId3updated_);this.tech_.off("captiondata",this.onCaptionData_);this.tech_.audioTracks().off("change",this.onAudioTrackChanged);this.tech_.off("levelswitch",this.onLevelSwitch_);this.tech_.off("levelloaded",this.onLevelLoaded_);this.tech_.off("fragmentloaded",this.onFragmentLoaded_);this.tech_.off("play",this.onPlay_);if(this.qualityLevels_){this.qualityLevels_.dispose()}};return e}();var H={};var Q=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;H.canPlayType=function(e){return Q.test(e)?"maybe":""};H.canHandleSource=function(e,t){return H.canPlayType(e.type)==="maybe"};H.handleSource=function(e,t,i){t.hls=new G(e,t,i);t.hls.src(e);return t.hls};i.getTech("Flash").registerSourceHandler(H,0);H.VERSION=C;e.FlashlsHandler=G;e.default=H;Object.defineProperty(e,"__esModule",{value:true})});(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports,require("global/document"),require("global/window"),require("video.js"),require("xmldom")):typeof i==="function"&&i.amd?i(["exports","global/document","global/window","video.js","xmldom"],t):(e=e||self,t(e.httpStreaming={},e.document,e.window,e.videojs,e.window))})(this,function(t,i,r,n,a){"use strict";i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i["default"]:i;r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r["default"]:r;n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n["default"]:n;function s(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}var o=s;function l(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var u=l;function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}function d(e,t){return t={exports:{}},e(t,t.exports),t.exports}var h=d(function(e,t){(function(t){var i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#.*)?$/;var r=/^([^\/?#]*)(.*)$/;var n=/(?:\/|^)\.(?=\/)/g;var a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g;var s={buildAbsoluteURL:function(e,t,i){i=i||{};e=e.trim();t=t.trim();if(!t){if(!i.alwaysNormalize){return e}var n=s.parseURL(e);if(!n){throw new Error("Error trying to parse base URL.")}n.path=s.normalizePath(n.path);return s.buildURLFromParts(n)}var a=s.parseURL(t);if(!a){throw new Error("Error trying to parse relative URL.")}if(a.scheme){if(!i.alwaysNormalize){return t}a.path=s.normalizePath(a.path);return s.buildURLFromParts(a)}var o=s.parseURL(e);if(!o){throw new Error("Error trying to parse base URL.")}if(!o.netLoc&&o.path&&o.path[0]!=="/"){var l=r.exec(o.path);o.netLoc=l[1];o.path=l[2]}if(o.netLoc&&!o.path){o.path="/"}var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc){u.netLoc=o.netLoc;if(a.path[0]!=="/"){if(!a.path){u.path=o.path;if(!a.params){u.params=o.params;if(!a.query){u.query=o.query}}}else{var c=o.path;var d=c.substring(0,c.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}}}if(u.path===null){u.path=i.alwaysNormalize?s.normalizePath(a.path):a.path}return s.buildURLFromParts(u)},parseURL:function(e){var t=i.exec(e);if(!t){return null}return{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}},normalizePath:function(e){e=e.split("").reverse().join("").replace(n,"");while(e.length!==(e=e.replace(a,"")).length){}return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=s})()});function f(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var p=f(h);var m=f(r);var v=function e(t,i){if(/^[a-z]+:/i.test(i)){return i}if(!/\/\//i.test(t)){t=p["default"].buildAbsoluteURL(m["default"].location&&m["default"].location.href||"",t)}return p["default"].buildAbsoluteURL(t,i)};var g=v;var y=g;var _=function e(t,i,r){if(t&&r&&r.responseURL&&i!==r.responseURL){return r.responseURL}return i};var b=function(){function e(){this.listeners={}}var t=e.prototype;t.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(i)};t.off=function e(t,i){if(!this.listeners[t]){return false}var r=this.listeners[t].indexOf(i);this.listeners[t]=this.listeners[t].slice(0);this.listeners[t].splice(r,1);return r>-1};t.trigger=function e(t){var i=this.listeners[t];if(!i){return}if(arguments.length===2){var r=i.length;for(var n=0;n<r;++n){i[n].call(this,arguments[1])}}else{var a=Array.prototype.slice.call(arguments,1);var s=i.length;for(var o=0;o<s;++o){i[o].apply(this,a)}}};t.dispose=function e(){this.listeners={}};t.pipe=function e(t){this.on("data",function(e){t.push(e)})};return e}();var M=b;var T=d(function(e){function t(){e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i){if(Object.prototype.hasOwnProperty.call(i,r)){e[r]=i[r]}}}return e};return t.apply(this,arguments)}e.exports=t});function A(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var w=A(r);var E=function e(t){return w["default"].atob?w["default"].atob(t):Buffer.from(t,"base64").toString("binary")};function x(e){var t=E(e);var i=new Uint8Array(t.length);for(var r=0;r<t.length;r++){i[r]=t.charCodeAt(r)}return i}var S=x;var D=function(e){u(t,e);function t(){var t;t=e.call(this)||this;t.buffer="";return t}var i=t.prototype;i.push=function e(t){var i;this.buffer+=t;i=this.buffer.indexOf("\n");for(;i>-1;i=this.buffer.indexOf("\n")){this.trigger("data",this.buffer.substring(0,i));this.buffer=this.buffer.substring(i+1)}};return t}(M);var I=function e(){var t="[^=]*";var i='"[^"]*"|[^,]*';var r="(?:"+t+")=(?:"+i+")";return new RegExp("(?:^|,)("+r+")")};var j=function e(t){var i=t.split(I());var r={};var n=i.length;var a;while(n--){if(i[n]===""){continue}a=/([^=]*)=(.*)/.exec(i[n]).slice(1);a[0]=a[0].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^\s+|\s+$/g,"");a[1]=a[1].replace(/^['"](.*)['"]$/g,"$1");r[a[0]]=a[1]}return r};var L=function(e){u(t,e);function t(){var t;t=e.call(this)||this;t.customParsers=[];t.tagMappers=[];return t}var i=t.prototype;i.push=function e(t){var i=this;var r;var n;t=t.trim();if(t.length===0){return}if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}var a=this.tagMappers.reduce(function(e,i){var r=i(t);if(r===t){return e}return e.concat([r])},[t]);a.forEach(function(e){for(var t=0;t<i.customParsers.length;t++){if(i.customParsers[t].call(i,e)){return}}if(e.indexOf("#EXT")!==0){i.trigger("data",{type:"comment",text:e.slice(1)});return}e=e.replace("\r","");r=/^#EXTM3U/.exec(e);if(r){i.trigger("data",{type:"tag",tagType:"m3u"});return}r=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"inf"};if(r[1]){n.duration=parseFloat(r[1])}if(r[2]){n.title=r[2]}i.trigger("data",n);return}r=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"targetduration"};if(r[1]){n.duration=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"totalduration"};if(r[1]){n.duration=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"version"};if(r[1]){n.version=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"media-sequence"};if(r[1]){n.number=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"discontinuity-sequence"};if(r[1]){n.number=parseInt(r[1],10)}i.trigger("data",n);return}r=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"playlist-type"};if(r[1]){n.playlistType=r[1]}i.trigger("data",n);return}r=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e);if(r){n={type:"tag",tagType:"byterange"};if(r[1]){n.length=parseInt(r[1],10)}if(r[2]){n.offset=parseInt(r[2],10)}i.trigger("data",n);return}r=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e);if(r){n={type:"tag",tagType:"allow-cache"};if(r[1]){n.allowed=!/NO/.test(r[1])}i.trigger("data",n);return}r=/^#EXT-X-MAP:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"map"};if(r[1]){var a=j(r[1]);if(a.URI){n.uri=a.URI}if(a.BYTERANGE){var s=a.BYTERANGE.split("@"),o=s[0],l=s[1];n.byterange={};if(o){n.byterange.length=parseInt(o,10)}if(l){n.byterange.offset=parseInt(l,10)}}}i.trigger("data",n);return}r=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"stream-inf"};if(r[1]){n.attributes=j(r[1]);if(n.attributes.RESOLUTION){var u=n.attributes.RESOLUTION.split("x");var c={};if(u[0]){c.width=parseInt(u[0],10)}if(u[1]){c.height=parseInt(u[1],10)}n.attributes.RESOLUTION=c}if(n.attributes.BANDWIDTH){n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)}if(n.attributes["PROGRAM-ID"]){n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10)}}i.trigger("data",n);return}r=/^#EXT-X-MEDIA:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"media"};if(r[1]){n.attributes=j(r[1])}i.trigger("data",n);return}r=/^#EXT-X-ENDLIST/.exec(e);if(r){i.trigger("data",{type:"tag",tagType:"endlist"});return}r=/^#EXT-X-DISCONTINUITY/.exec(e);if(r){i.trigger("data",{type:"tag",tagType:"discontinuity"});return}r=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"program-date-time"};if(r[1]){n.dateTimeString=r[1];n.dateTimeObject=new Date(r[1])}i.trigger("data",n);return}r=/^#EXT-X-KEY:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"key"};if(r[1]){n.attributes=j(r[1]);if(n.attributes.IV){if(n.attributes.IV.substring(0,2).toLowerCase()==="0x"){n.attributes.IV=n.attributes.IV.substring(2)}n.attributes.IV=n.attributes.IV.match(/.{8}/g);n.attributes.IV[0]=parseInt(n.attributes.IV[0],16);n.attributes.IV[1]=parseInt(n.attributes.IV[1],16);n.attributes.IV[2]=parseInt(n.attributes.IV[2],16);n.attributes.IV[3]=parseInt(n.attributes.IV[3],16);n.attributes.IV=new Uint32Array(n.attributes.IV)}}i.trigger("data",n);return}r=/^#EXT-X-START:?(.*)$/.exec(e);if(r){n={type:"tag",tagType:"start"};if(r[1]){n.attributes=j(r[1]);n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]);n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)}i.trigger("data",n);return}r=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"cue-out-cont"};if(r[1]){n.data=r[1]}else{n.data=""}i.trigger("data",n);return}r=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"cue-out"};if(r[1]){n.data=r[1]}else{n.data=""}i.trigger("data",n);return}r=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e);if(r){n={type:"tag",tagType:"cue-in"};if(r[1]){n.data=r[1]}else{n.data=""}i.trigger("data",n);return}i.trigger("data",{type:"tag",data:e.slice(4)})})};i.addParser=function e(t){var i=this;var r=t.expression,n=t.customType,a=t.dataParser,s=t.segment;if(typeof a!=="function"){a=function e(t){return t}}this.customParsers.push(function(e){var t=r.exec(e);if(t){i.trigger("data",{type:"custom",data:a(e),customType:n,segment:s});return true}})};i.addTagMapper=function e(t){var i=t.expression,r=t.map;var n=function e(t){if(i.test(t)){return r(t)}return t};this.tagMappers.push(n)};return t}(M);var N=function(e){u(t,e);function t(){var t;t=e.call(this)||this;t.lineStream=new D;t.parseStream=new L;t.lineStream.pipe(t.parseStream);var i=o(t);var r=[];var n={};var a;var s;var l=function e(){};var u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}};var c="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";var d=0;t.manifest={allowCache:true,discontinuityStarts:[],segments:[]};var h=0;t.parseStream.on("data",function(e){var t;var o;({tag:function f(){(({"allow-cache":function t(){this.manifest.allowCache=e.allowed;if(!("allowed"in e)){this.trigger("info",{message:"defaulting allowCache to YES"});this.manifest.allowCache=true}},byterange:function t(){var t={};if("length"in e){n.byterange=t;t.length=e.length;if(!("offset"in e)){e.offset=h}}if("offset"in e){n.byterange=t;t.offset=e.offset}h=t.offset+t.length},endlist:function e(){this.manifest.endList=true},inf:function t(){if(!("mediaSequence"in this.manifest)){this.manifest.mediaSequence=0;this.trigger("info",{message:"defaulting media sequence to zero"})}if(!("discontinuitySequence"in this.manifest)){this.manifest.discontinuitySequence=0;this.trigger("info",{message:"defaulting discontinuity sequence to zero"})}if(e.duration>0){n.duration=e.duration}if(e.duration===0){n.duration=.01;this.trigger("info",{message:"updating zero segment duration to a small value"})}this.manifest.segments=r},key:function t(){if(!e.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(e.attributes.METHOD==="NONE"){s=null;return}if(!e.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(e.attributes.KEYFORMAT===c){var i=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(i.indexOf(e.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(e.attributes.METHOD==="SAMPLE-AES-CENC"){this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"})}if(e.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(e.attributes.KEYID&&e.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:S(e.attributes.URI.split(",")[1])}};return}if(!e.attributes.METHOD){this.trigger("warn",{message:"defaulting key method to AES-128"})}s={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI};if(typeof e.attributes.IV!=="undefined"){s.iv=e.attributes.IV}},"media-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number});return}this.manifest.mediaSequence=e.number},"discontinuity-sequence":function t(){if(!isFinite(e.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number});return}this.manifest.discontinuitySequence=e.number;d=e.number},"playlist-type":function t(){if(!/VOD|EVENT/.test(e.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist});return}this.manifest.playlistType=e.playlistType},map:function t(){a={};if(e.uri){a.uri=e.uri}if(e.byterange){a.byterange=e.byterange}},"stream-inf":function t(){this.manifest.playlists=r;this.manifest.mediaGroups=this.manifest.mediaGroups||u;if(!e.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}if(!n.attributes){n.attributes={}}T(n.attributes,e.attributes)},media:function i(){this.manifest.mediaGroups=this.manifest.mediaGroups||u;if(!(e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var r=this.manifest.mediaGroups[e.attributes.TYPE];r[e.attributes["GROUP-ID"]]=r[e.attributes["GROUP-ID"]]||{};t=r[e.attributes["GROUP-ID"]];o={default:/yes/i.test(e.attributes.DEFAULT)};if(o.default){o.autoselect=true}else{o.autoselect=/yes/i.test(e.attributes.AUTOSELECT)}if(e.attributes.LANGUAGE){o.language=e.attributes.LANGUAGE}if(e.attributes.URI){o.uri=e.attributes.URI}if(e.attributes["INSTREAM-ID"]){o.instreamId=e.attributes["INSTREAM-ID"]}if(e.attributes.CHARACTERISTICS){o.characteristics=e.attributes.CHARACTERISTICS}if(e.attributes.FORCED){o.forced=/yes/i.test(e.attributes.FORCED)}t[e.attributes.NAME]=o},discontinuity:function e(){d+=1;n.discontinuity=true;this.manifest.discontinuityStarts.push(r.length)},"program-date-time":function t(){if(typeof this.manifest.dateTimeString==="undefined"){this.manifest.dateTimeString=e.dateTimeString;this.manifest.dateTimeObject=e.dateTimeObject}n.dateTimeString=e.dateTimeString;n.dateTimeObject=e.dateTimeObject},targetduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration});return}this.manifest.targetDuration=e.duration},totalduration:function t(){if(!isFinite(e.duration)||e.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration});return}this.manifest.totalDuration=e.duration},start:function t(){if(!e.attributes||isNaN(e.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}},"cue-out":function t(){n.cueOut=e.data},"cue-out-cont":function t(){n.cueOutCont=e.data},"cue-in":function t(){n.cueIn=e.data}})[e.tagType]||l).call(i)},uri:function t(){n.uri=e.uri;r.push(n);if(this.manifest.targetDuration&&!("duration"in n)){this.trigger("warn",{message:"defaulting segment duration to the target duration"});n.duration=this.manifest.targetDuration}if(s){n.key=s}n.timeline=d;if(a){n.map=a}n={}},comment:function e(){},custom:function t(){if(e.segment){n.custom=n.custom||{};n.custom[e.customType]=e.data}else{this.manifest.custom=this.manifest.custom||{};this.manifest.custom[e.customType]=e.data}}})[e.type].call(i)});return t}var i=t.prototype;i.push=function e(t){this.lineStream.push(t)};i.end=function e(){this.lineStream.push("\n")};i.addParser=function e(t){this.parseStream.addParser(t)};i.addTagMapper=function e(t){this.parseStream.addTagMapper(t)};return t}(M);var C=n.log;var O=function e(t,i){return t+"-"+i};var k=function e(t){var i=t.manifestString,r=t.customTagParsers,n=r===void 0?[]:r,a=t.customTagMappers,s=a===void 0?[]:a;var o=new N;n.forEach(function(e){return o.addParser(e)});s.forEach(function(e){return o.addTagMapper(e)});o.push(i);o.end();return o.manifest};var P=function e(t,i){["AUDIO","SUBTITLES"].forEach(function(e){for(var r in t.mediaGroups[e]){for(var n in t.mediaGroups[e][r]){var a=t.mediaGroups[e][r][n];i(a,e,r,n)}}})};var R=function e(t){var i=t.playlist,r=t.uri,n=t.id;i.id=n;if(r){i.uri=r}i.attributes=i.attributes||{}};var z=function e(t){var i=t.playlists.length;while(i--){var r=t.playlists[i];R({playlist:r,id:O(i,r.uri)});r.resolvedUri=y(t.uri,r.uri);t.playlists[r.id]=r;t.playlists[r.uri]=r;if(!r.attributes.BANDWIDTH){C.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}};var U=function e(t){P(t,function(e){if(e.uri){e.resolvedUri=y(t.uri,e.uri)}})};var B=function e(t,i){var n=O(0,i);var a={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:r.location.href,resolvedUri:r.location.href,playlists:[{uri:i,id:n,resolvedUri:i,attributes:{}}]};a.playlists[n]=a.playlists[0];a.playlists[i]=a.playlists[0];return a};var F=function e(t,i){t.uri=i;for(var r=0;r<t.playlists.length;r++){if(!t.playlists[r].uri){var n="placeholder-uri-"+r;t.playlists[r].uri=n}}P(t,function(e,i,r,n){if(!e.playlists||!e.playlists.length||e.playlists[0].uri){return}var a="placeholder-uri-"+i+"-"+r+"-"+n;var s=O(0,a);e.playlists[0].uri=a;e.playlists[0].id=s;t.playlists[s]=e.playlists[0];t.playlists[a]=e.playlists[0]});z(t);U(t)};var V=n.mergeOptions,G=n.EventTarget;var H=function e(t,i,r){var n=i.slice();r=r||0;var a=Math.min(t.length,i.length+r);for(var s=r;s<a;s++){n[s-r]=V(t[s],n[s-r])}return n};var Q=function e(t,i){if(!t.resolvedUri){t.resolvedUri=y(i,t.uri)}if(t.key&&!t.key.resolvedUri){t.key.resolvedUri=y(i,t.key.uri)}if(t.map&&!t.map.resolvedUri){t.map.resolvedUri=y(i,t.map.uri)}};var Y=function e(t,i){var r=V(t,{});var n=r.playlists[i.id];if(!n){return null}if(n.segments&&i.segments&&n.segments.length===i.segments.length&&n.endList===i.endList&&n.mediaSequence===i.mediaSequence){return null}var a=V(n,i);if(n.segments){a.segments=H(n.segments,i.segments,i.mediaSequence-n.mediaSequence)}a.segments.forEach(function(e){Q(e,a.resolvedUri)});for(var s=0;s<r.playlists.length;s++){if(r.playlists[s].id===i.id){r.playlists[s]=a}}r.playlists[i.id]=a;r.playlists[i.uri]=a;return r};var W=function e(t,i){var r=t.segments[t.segments.length-1];var n;if(i&&r&&r.duration){n=r.duration*1e3}else{n=(t.targetDuration||10)*500}return n};var q=function(e){u(t,e);function t(t,i,r){var n;if(r===void 0){r={}}n=e.call(this)||this;if(!t){throw new Error("A non-empty playlist URL or object is required")}var a=r,s=a.withCredentials,o=s===void 0?false:s,l=a.handleManifestRedirects,u=l===void 0?false:l;n.src=t;n.vhs_=i;n.withCredentials=o;n.handleManifestRedirects=u;var c=i.options_;n.customTagParsers=c&&c.customTagParsers||[];n.customTagMappers=c&&c.customTagMappers||[];n.state="HAVE_NOTHING";n.on("mediaupdatetimeout",function(){if(n.state!=="HAVE_METADATA"){return}n.state="HAVE_CURRENT_METADATA";n.request=n.vhs_.xhr({uri:y(n.master.uri,n.media().uri),withCredentials:n.withCredentials},function(e,t){if(!n.request){return}if(e){return n.playlistRequestError(n.request,n.media(),"HAVE_METADATA")}n.haveMetadata({playlistString:n.request.responseText,url:n.media().uri,id:n.media().id})})});return n}var i=t.prototype;i.playlistRequestError=function e(t,i,r){var n=i.uri,a=i.id;this.request=null;if(r){this.state=r}this.error={playlist:this.master.playlists[a],status:t.status,message:"HLS playlist request error at URL: "+n+".",responseText:t.responseText,code:t.status>=500?4:2};this.trigger("error")};i.haveMetadata=function e(t){var i=this;var n=t.playlistString,a=t.playlistObject,s=t.url,o=t.id;this.request=null;this.state="HAVE_METADATA";var l=a||k({manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers});R({playlist:l,uri:s,id:o});var u=Y(this.master,l);this.targetDuration=l.targetDuration;if(u){this.master=u;this.media_=this.master.playlists[o]}else{this.trigger("playlistunchanged")}if(!this.media().endList){r.clearTimeout(this.mediaUpdateTimeout);this.mediaUpdateTimeout=r.setTimeout(function(){i.trigger("mediaupdatetimeout")},W(this.media(),!!u))}this.trigger("loadedplaylist")};i.dispose=function e(){this.trigger("dispose");this.stopRequest();r.clearTimeout(this.mediaUpdateTimeout);r.clearTimeout(this.finalRenditionTimeout);this.off()};i.stopRequest=function e(){if(this.request){var t=this.request;this.request=null;t.onreadystatechange=null;t.abort()}};i.media=function e(t,i){var n=this;if(!t){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}if(typeof t==="string"){if(!this.master.playlists[t]){throw new Error("Unknown playlist URI: "+t)}t=this.master.playlists[t]}r.clearTimeout(this.finalRenditionTimeout);if(i){var a=t.targetDuration/2*1e3||5*1e3;this.finalRenditionTimeout=r.setTimeout(this.media.bind(this,t,false),a);return}var s=this.state;var o=!this.media_||t.id!==this.media_.id;if(this.master.playlists[t.id].endList||t.endList&&t.segments.length){if(this.request){this.request.onreadystatechange=null;this.request.abort();this.request=null}this.state="HAVE_METADATA";this.media_=t;if(o){this.trigger("mediachanging");if(s==="HAVE_MASTER"){this.trigger("loadedmetadata")}else{this.trigger("mediachange")}}return}if(!o){return}this.state="SWITCHING_MEDIA";if(this.request){if(t.resolvedUri===this.request.url){return}this.request.onreadystatechange=null;this.request.abort();this.request=null}if(this.media_){this.trigger("mediachanging")}this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},function(e,i){if(!n.request){return}t.resolvedUri=_(n.handleManifestRedirects,t.resolvedUri,i);if(e){return n.playlistRequestError(n.request,t,s)}n.haveMetadata({playlistString:i.responseText,url:t.uri,id:t.id});if(s==="HAVE_MASTER"){n.trigger("loadedmetadata")}else{n.trigger("mediachange")}})};i.pause=function e(){this.stopRequest();r.clearTimeout(this.mediaUpdateTimeout);if(this.state==="HAVE_NOTHING"){this.started=false}if(this.state==="SWITCHING_MEDIA"){if(this.media_){this.state="HAVE_METADATA"}else{this.state="HAVE_MASTER"}}else if(this.state==="HAVE_CURRENT_METADATA"){this.state="HAVE_METADATA"}};i.load=function e(t){var i=this;r.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(t){var a=n?n.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=r.setTimeout(function(){return i.load()},a);return}if(!this.started){this.start();return}if(n&&!n.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}};i.start=function e(){var t=this;this.started=true;if(typeof this.src==="object"){if(!this.src.uri){this.src.uri=r.location.href}this.src.resolvedUri=this.src.uri;setTimeout(function(){t.setupInitialPlaylist(t.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(e,i){if(!t.request){return}t.request=null;if(e){t.error={status:i.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:i.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}t.src=_(t.handleManifestRedirects,t.src,i);var r=k({manifestString:i.responseText,customTagParsers:t.customTagParsers,customTagMappers:t.customTagMappers});t.setupInitialPlaylist(r)})};i.srcUri=function e(){return typeof this.src==="string"?this.src:this.src.uri};i.setupInitialPlaylist=function e(t){this.state="HAVE_MASTER";if(t.playlists){this.master=t;F(this.master,this.srcUri());t.playlists.forEach(function(e){if(e.segments){e.segments.forEach(function(t){Q(t,e.resolvedUri)})}});this.trigger("loadedplaylist");if(!this.request){this.media(this.master.playlists[0])}return}var i=this.srcUri()||r.location.href;this.master=B(t,i);this.haveMetadata({playlistObject:t,url:i,id:this.master.playlists[0].id});this.trigger("loadedmetadata")};return t}(G);var X=1/30;var Z=X*3;var K=function e(t,i){var r=[];var a;if(t&&t.length){for(a=0;a<t.length;a++){if(i(t.start(a),t.end(a))){r.push([t.start(a),t.end(a)])}}}return n.createTimeRanges(r)};var J=function e(t,i){return K(t,function(e,t){return e-Z<=i&&t+Z>=i})};var $=function e(t,i){return K(t,function(e){return e-X>=i})};var ee=function e(t){if(t.length<2){return n.createTimeRanges()}var i=[];for(var r=1;r<t.length;r++){var a=t.end(r-1);var s=t.start(r);i.push([a,s])}return n.createTimeRanges(i)};var te=function e(t,i){var r=null;var a=null;var s=0;var o=[];var l=[];if(!t||!t.length||!i||!i.length){return n.createTimeRange()}var u=t.length;while(u--){o.push({time:t.start(u),type:"start"});o.push({time:t.end(u),type:"end"})}u=i.length;while(u--){o.push({time:i.start(u),type:"start"});o.push({time:i.end(u),type:"end"})}o.sort(function(e,t){return e.time-t.time});for(u=0;u<o.length;u++){if(o[u].type==="start"){s++;if(s===2){r=o[u].time}}else if(o[u].type==="end"){s--;if(s===1){a=o[u].time}}if(r!==null&&a!==null){l.push([r,a]);r=null;a=null}}return n.createTimeRanges(l)};var ie=function e(t){var i=[];if(!t||!t.length){return""}for(var r=0;r<t.length;r++){i.push(t.start(r)+" => "+t.end(r))}return i.join(", ")};var re=function e(t,i,r){if(r===void 0){r=1}var n=t.length?t.end(t.length-1):0;return(n-i)/r};var ne=function e(t){var i=[];for(var r=0;r<t.length;r++){i.push({start:t.start(r),end:t.end(r)})}return i};var ae=function e(t,i){if(t===i){return false}if(!t&&i||!i&&t){return true}if(t.length!==i.length){return true}for(var r=0;r<t.length;r++){if(t.start(r)!==i.start(r)||t.end(r)!==i.end(r)){return true}}return false};var se=n.createTimeRange;var oe=function e(t,i){var r=0;var n=i-t.mediaSequence;var a=t.segments[n];if(a){if(typeof a.start!=="undefined"){return{result:a.start,precise:true}}if(typeof a.end!=="undefined"){return{result:a.end-a.duration,precise:true}}}while(n--){a=t.segments[n];if(typeof a.end!=="undefined"){return{result:r+a.end,precise:true}}r+=a.duration;if(typeof a.start!=="undefined"){return{result:r+a.start,precise:true}}}return{result:r,precise:false}};var le=function e(t,i){var r=0;var n;var a=i-t.mediaSequence;for(;a<t.segments.length;a++){n=t.segments[a];if(typeof n.start!=="undefined"){return{result:n.start-r,precise:true}}r+=n.duration;if(typeof n.end!=="undefined"){return{result:n.end-r,precise:true}}}return{result:-1,precise:false}};var ue=function e(t,i,r){if(typeof i==="undefined"){i=t.mediaSequence+t.segments.length}if(i<t.mediaSequence){return 0}var n=oe(t,i);if(n.precise){return n.result}var a=le(t,i);if(a.precise){return a.result}return n.result+r};var ce=function e(t,i,n){if(!t){return 0}if(typeof n!=="number"){n=0}if(typeof i==="undefined"){if(t.totalDuration){return t.totalDuration}if(!t.endList){return r.Infinity}}return ue(t,i,n)};var de=function e(t,i,r){var n=0;if(i>r){var a=[r,i];i=a[0];r=a[1]}if(i<0){for(var s=i;s<Math.min(0,r);s++){n+=t.targetDuration}i=0}for(var o=i;o<r;o++){n+=t.segments[o].duration}return n};var he=function e(t,i){if(!t.segments.length){return 0}var r=t.segments.length;var n=t.segments[r-1].duration||t.targetDuration;var a=typeof i==="number"?i:n+t.targetDuration*2;if(a===0){return r}var s=0;while(r--){s+=t.segments[r].duration;if(s>=a){break}}return Math.max(0,r)};var fe=function e(t,i,r,n){if(!t||!t.segments){return null}if(t.endList){return ce(t)}if(i===null){return null}i=i||0;var a=r?he(t,n):t.segments.length;return ue(t,t.mediaSequence+a,i)};var pe=function e(t,i,r){var n=true;var a=i||0;var s=fe(t,i,n,r);if(s===null){return se()}return se(a,s)};var me=function e(t,i,r,n){var a;var s;var o=t.segments.length;var l=i-n;if(l<0){if(r>0){for(a=r-1;a>=0;a--){s=t.segments[a];l+=s.duration+X;if(l>0){return{mediaIndex:a,startTime:n-de(t,r,a)}}}}return{mediaIndex:0,startTime:i}}if(r<0){for(a=r;a<0;a++){l-=t.targetDuration;if(l<0){return{mediaIndex:0,startTime:i}}}r=0}for(a=r;a<o;a++){s=t.segments[a];l-=s.duration+X;if(l<0){return{mediaIndex:a,startTime:n+de(t,r,a)}}}return{mediaIndex:o-1,startTime:i}};var ve=function e(t){return t.excludeUntil&&t.excludeUntil>Date.now()};var ge=function e(t){return t.excludeUntil&&t.excludeUntil===Infinity};var ye=function e(t){var i=ve(t);return!t.disabled&&!i};var _e=function e(t){return t.disabled};var be=function e(t){for(var i=0;i<t.segments.length;i++){if(t.segments[i].key){return true}}return false};var Me=function e(t,i){return i.attributes&&i.attributes[t]};var Te=function e(t,i,r,n){if(n===void 0){n=0}if(!Me("BANDWIDTH",r)){return NaN}var a=t*r.attributes.BANDWIDTH;return(a-n*8)/i};var Ae=function e(t,i){if(t.playlists.length===1){return true}var r=i.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(function(e){if(!ye(e)){return false}return(e.attributes.BANDWIDTH||0)<r}).length===0};var we={duration:ce,seekable:pe,safeLiveIndex:he,getMediaInfoForTime:me,isEnabled:ye,isDisabled:_e,isBlacklisted:ve,isIncompatible:ge,playlistEnd:fe,isAes:be,hasAttribute:Me,estimateSegmentRequestTime:Te,isLowestEnabledRendition:Ae};var Ee=n.xhr,xe=n.mergeOptions;var Se=function e(t,i,r,n){var a=t.responseType==="arraybuffer"?t.response:t.responseText;if(!i&&a){t.responseTime=Date.now();t.roundTripTime=t.responseTime-t.requestTime;t.bytesReceived=a.byteLength||a.length;if(!t.bandwidth){t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3)}}if(r.headers){t.responseHeaders=r.headers}if(i&&i.code==="ETIMEDOUT"){t.timedout=true}if(!i&&!t.aborted&&r.statusCode!==200&&r.statusCode!==206&&r.statusCode!==0){i=new Error("XHR Failed with a response of: "+(t&&(a||t.responseText)))}n(i,t)};var De=function e(){var t=function e(t,i){t=xe({timeout:45e3},t);var r=e.beforeRequest||n.Vhs.xhr.beforeRequest;if(r&&typeof r==="function"){var a=r(t);if(a){t=a}}var s=Ee(t,function(e,t){return Se(s,e,t,i)});var o=s.abort;s.abort=function(){s.aborted=true;return o.apply(s,arguments)};s.uri=t.uri;s.requestTime=Date.now();return s};return t};var Ie=function e(t){var i=t.offset+t.length-1;var r=t.offset;return"bytes="+r+"-"+i};var je=function e(t){var i={};if(t.byterange){i.Range=Ie(t.byterange)}return i};var Le=d(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var i=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i;var r=/^application\/dash\+xml/i;var n=function e(t){if(i.test(t)){return"hls"}if(r.test(t)){return"dash"}if(t==="application/vnd.videojs.vhs+json"){return"vhs-json"}return null};t.simpleTypeFromSourceType=n});c(Le);var Ne=Le.simpleTypeFromSourceType;var Ce=function e(t,i){return t.start(i)+"-"+t.end(i)};var Oe=function e(t,i){var r=t.toString(16);return"00".substring(0,2-r.length)+r+(i%2?" ":"")};var ke=function e(t){if(t>=32&&t<126){return String.fromCharCode(t)}return"."};var Pe=function e(t){var i={};Object.keys(t).forEach(function(e){var r=t[e];if(ArrayBuffer.isView(r)){i[e]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}}else{i[e]=r}});return i};var Re=function e(t){var i=t.byterange||{length:Infinity,offset:0};return[i.length,i.offset,t.resolvedUri].join(",")};var ze=function e(t){return t.resolvedUri};var Ue=function e(t){var i=Array.prototype.slice.call(t);var r=16;var n="";var a;var s;for(var o=0;o<i.length/r;o++){a=i.slice(o*r,o*r+r).map(Oe).join("");s=i.slice(o*r,o*r+r).map(ke).join("");n+=a+" "+s+"\n"}return n};var Be=function e(t){var i=t.bytes;return Ue(i)};var Fe=function e(t){var i="";var r;for(r=0;r<t.length;r++){i+=Ce(t,r)+" "}return i};var Ve=Object.freeze({__proto__:null,createTransferableMessage:Pe,initSegmentId:Re,segmentKeyId:ze,hexDump:Ue,tagDump:Be,textRanges:Fe});var Ge=.25;var He=function e(t,i){if(!i.dateTimeObject){return null}var r=i.videoTimingInfo.transmuxerPrependedSeconds;var n=i.videoTimingInfo.transmuxedPresentationStart;var a=n+r;var s=t-a;return new Date(i.dateTimeObject.getTime()+s*1e3)};var Qe=function e(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds};var Ye=function e(t,i){var r;try{r=new Date(t)}catch(e){return null}if(!i||!i.segments||i.segments.length===0){return null}var n=i.segments[0];if(r<n.dateTimeObject){return null}for(var a=0;a<i.segments.length-1;a++){n=i.segments[a];var s=i.segments[a+1].dateTimeObject;if(r<s){break}}var o=i.segments[i.segments.length-1];var l=o.dateTimeObject;var u=o.videoTimingInfo?Qe(o.videoTimingInfo):o.duration+o.duration*Ge;var c=new Date(l.getTime()+u*1e3);if(r>c){return null}if(r>l){n=o}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:we.duration(i,i.mediaSequence+i.segments.indexOf(n)),type:n.videoTimingInfo?"accurate":"estimate"}};var We=function e(t,i){if(!i||!i.segments||i.segments.length===0){return null}var r=0;var n;for(var a=0;a<i.segments.length;a++){n=i.segments[a];r=n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration;if(t<=r){break}}var s=i.segments[i.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t){return null}if(t>r){if(t>r+s.duration*Ge){return null}n=s}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}};var qe=function e(t,i){var r;var n;try{r=new Date(t);n=new Date(i)}catch(e){}var a=r.getTime();var s=n.getTime();return(s-a)/1e3};var Xe=function e(t){if(!t.segments||t.segments.length===0){return false}for(var i=0;i<t.segments.length;i++){var r=t.segments[i];if(!r.dateTimeObject){return false}}return true};var Ze=function e(t){var i=t.playlist,r=t.time,n=r===void 0?undefined:r,a=t.callback;if(!a){throw new Error("getProgramTime: callback must be provided")}if(!i||n===undefined){return a({message:"getProgramTime: playlist and time must be provided"})}var s=We(n,i);if(!s){return a({message:"valid programTime was not found"})}if(s.type==="estimate"){return a({message:"Accurate programTime could not be determined."+" Please seek to e.seekTime and try again",seekTime:s.estimatedStart})}var o={mediaSeconds:n};var l=He(n,s.segment);if(l){o.programDateTime=l.toISOString()}return a(null,o)};var Ke=function e(t){var i=t.programTime,r=t.playlist,n=t.retryCount,a=n===void 0?2:n,s=t.seekTo,o=t.pauseAfterSeek,l=o===void 0?true:o,u=t.tech,c=t.callback;if(!c){throw new Error("seekToProgramTime: callback must be provided")}if(typeof i==="undefined"||!r||!s){return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"})}if(!r.endList&&!u.hasStarted_){return c({message:"player must be playing a live stream to start buffering"})}if(!Xe(r)){return c({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri})}var d=Ye(i,r);if(!d){return c({message:i+" was not found in the stream"})}var h=d.segment;var f=qe(h.dateTimeObject,i);if(d.type==="estimate"){if(a===0){return c({message:i+" is not buffered yet. Try again"})}s(d.estimatedStart+f);u.one("seeked",function(){e({programTime:i,playlist:r,retryCount:a-1,seekTo:s,pauseAfterSeek:l,tech:u,callback:c})});return}var p=h.start+f;var m=function e(){return c(null,u.currentTime())};u.one("seeked",m);if(l){u.pause()}s(p)};var Je=function e(t){return!!t&&typeof t==="object"};var $e=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}return i.reduce(function(t,i){Object.keys(i).forEach(function(r){if(Array.isArray(t[r])&&Array.isArray(i[r])){t[r]=t[r].concat(i[r])}else if(Je(t[r])&&Je(i[r])){t[r]=e(t[r],i[r])}else{t[r]=i[r]}});return t},{})};var et=function e(t){return Object.keys(t).map(function(e){return t[e]})};var tt=function e(t,i){var r=[];for(var n=t;n<i;n++){r.push(n)}return r};var it=function e(t){return t.reduce(function(e,t){return e.concat(t)},[])};var rt=function e(t){if(!t.length){return[]}var i=[];for(var r=0;r<t.length;r++){i.push(t[r])}return i};var nt=function e(t,i){return t.reduce(function(e,t,r){if(t[i]){e.push(r)}return e},[])};var at={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};var st=function e(t){var i=t.baseUrl,r=i===void 0?"":i,n=t.source,a=n===void 0?"":n,s=t.range,o=s===void 0?"":s,l=t.indexRange,u=l===void 0?"":l;var c={uri:a,resolvedUri:g(r||"",a)};if(o||u){var d=o?o:u;var h=d.split("-");var f=parseInt(h[0],10);var p=parseInt(h[1],10);c.byterange={length:p-f+1,offset:f}}return c};var ot=function e(t){var i=t.offset+t.length-1;return t.offset+"-"+i};var lt={static:function e(t){var i=t.duration,r=t.timescale,n=r===void 0?1:r,a=t.sourceDuration;return{start:0,end:Math.ceil(a/(i/n))}},dynamic:function e(t){var i=t.NOW,r=t.clientOffset,n=t.availabilityStartTime,a=t.timescale,s=a===void 0?1:a,o=t.duration,l=t.start,u=l===void 0?0:l,c=t.minimumUpdatePeriod,d=c===void 0?0:c,h=t.timeShiftBufferDepth,f=h===void 0?Infinity:h;var p=(i+r)/1e3;var m=n+u;var v=p+d;var g=v-m;var y=Math.ceil(g*s/o);var _=Math.floor((p-m-f)*s/o);var b=Math.floor((p-m)*s/o);return{start:Math.max(0,_),end:Math.min(y,b)}}};var ut=function e(t){return function(e,i){var r=t.duration,n=t.timescale,a=n===void 0?1:n,s=t.periodIndex,o=t.startNumber,l=o===void 0?1:o;return{number:l+e,duration:r/a,timeline:s,time:i*r}}};var ct=function e(t){var i=t.type,r=i===void 0?"static":i,n=t.duration,a=t.timescale,s=a===void 0?1:a,o=t.sourceDuration;var l=lt[r](t),u=l.start,c=l.end;var d=tt(u,c).map(ut(t));if(r==="static"){var h=d.length-1;d[h].duration=o-n/s*h}return d};var dt=function e(t){var i=t.baseUrl,r=t.initialization,n=r===void 0?{}:r,a=t.sourceDuration,s=t.indexRange,o=s===void 0?"":s,l=t.duration;if(!i){throw new Error(at.NO_BASE_URL)}var u=st({baseUrl:i,source:n.sourceURL,range:n.range});var c=st({baseUrl:i,source:i,indexRange:o});c.map=u;if(l){var d=ct(t);if(d.length){c.duration=d[0].duration;c.timeline=d[0].timeline}}else if(a){c.duration=a;c.timeline=0}c.number=0;return[c]};var ht=function e(t,i,r){var n=t.sidx.map?t.sidx.map:null;var a=t.sidx.duration;var s=t.timeline||0;var o=t.sidx.byterange;var l=o.offset+o.length;var u=i.timescale;var c=i.references.filter(function(e){return e.referenceType!==1});var d=[];var h=l+i.firstOffset;for(var f=0;f<c.length;f++){var p=i.references[f];var m=p.referencedSize;var v=p.subsegmentDuration;var g=h+m-1;var y=h+"-"+g;var _={baseUrl:r,timescale:u,timeline:s,periodIndex:s,duration:v,sourceDuration:a,indexRange:y};var b=dt(_)[0];if(n){b.map=n}d.push(b);h+=m}t.segments=d;return t};var ft=function e(t){var i=et(t.reduce(function(e,t){var i=t.attributes.id+(t.attributes.lang||"");if(e[i]){var r;if(t.segments[0]){t.segments[0].discontinuity=true}(r=e[i].segments).push.apply(r,t.segments);if(t.attributes.contentProtection){e[i].attributes.contentProtection=t.attributes.contentProtection}}else{e[i]=t}return e},{}));return i.map(function(e){e.discontinuityStarts=nt(e.segments,"discontinuity");return e})};var pt=function e(t,i){if(i===void 0){i={}}if(!Object.keys(i).length){return t}for(var r in t){var n=t[r];if(!n.sidx){continue}var a=n.sidx.uri+"-"+ot(n.sidx.byterange);var s=i[a]&&i[a].sidx;if(n.sidx&&s){ht(n,s,n.sidx.resolvedUri)}}return t};var mt=function e(t){var i;var r=t.attributes,n=t.segments,a=t.sidx;var s={attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};if(r.contentProtection){s.contentProtection=r.contentProtection}if(a){s.sidx=a}return s};var vt=function e(t){var i;var r=t.attributes,n=t.segments;if(typeof n==="undefined"){n=[{uri:r.baseUrl,timeline:r.periodIndex,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}];r.duration=r.sourceDuration}var a=(i={NAME:r.id,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i);if(r.codecs){a.CODECS=r.codecs}return{attributes:a,uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:r.baseUrl||"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1}};var gt=function e(t,i){if(i===void 0){i={}}var r;var n=t.reduce(function(e,t){var n=t.attributes.role&&t.attributes.role.value||"";var a=t.attributes.lang||"";var s="main";if(a){var o=n?" ("+n+")":"";s=""+t.attributes.lang+o}if(e[s]&&e[s].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth){return e}e[s]={language:a,autoselect:true,default:n==="main",playlists:pt([mt(t)],i),uri:""};if(typeof r==="undefined"&&n==="main"){r=t;r.default=true}return e},{});if(!r){var a=Object.keys(n)[0];n[a].default=true}return n};var yt=function e(t,i){if(i===void 0){i={}}return t.reduce(function(e,t){var r=t.attributes.lang||"text";if(e[r]){return e}e[r]={language:r,default:false,autoselect:false,playlists:pt([vt(t)],i),uri:""};return e},{})};var _t=function e(t){var i;var r=t.attributes,n=t.segments,a=t.sidx;var s={attributes:(i={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:(r.type||"static")==="static",timeline:r.periodIndex,resolvedUri:"",targetDuration:r.duration,segments:n,mediaSequence:n.length?n[0].number:1};if(r.contentProtection){s.contentProtection=r.contentProtection}if(a){s.sidx=a}return s};var bt=function e(t,i,r){var n;if(r===void 0){r={}}if(!t.length){return{}}var a=t[0].attributes,s=a.sourceDuration,o=a.type,l=o===void 0?"static":o,u=a.suggestedPresentationDelay,c=a.minimumUpdatePeriod;var d=function e(t){var i=t.attributes;return i.mimeType==="video/mp4"||i.contentType==="video"};var h=function e(t){var i=t.attributes;return i.mimeType==="audio/mp4"||i.contentType==="audio"};var f=function e(t){var i=t.attributes;return i.mimeType==="text/vtt"||i.contentType==="text"};var p=ft(t.filter(d)).map(_t);var m=ft(t.filter(h));var v=t.filter(f);var g={allowCache:true,discontinuityStarts:[],segments:[],endList:true,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:s,playlists:pt(p,r)};if(c>=0){g.minimumUpdatePeriod=c*1e3}if(i){g.locations=i}if(l==="dynamic"){g.suggestedPresentationDelay=u}if(m.length){g.mediaGroups.AUDIO.audio=gt(m,r)}if(v.length){g.mediaGroups.SUBTITLES.subs=yt(v,r)}return g};var Mt=function e(t,i,r){var n=t.NOW,a=t.clientOffset,s=t.availabilityStartTime,o=t.timescale,l=o===void 0?1:o,u=t.start,c=u===void 0?0:u,d=t.minimumUpdatePeriod,h=d===void 0?0:d;var f=(n+a)/1e3;var p=s+c;var m=f+h;var v=m-p;return Math.ceil((v*l-i)/r)};var Tt=function e(t,i){var r=t.type,n=r===void 0?"static":r,a=t.minimumUpdatePeriod,s=a===void 0?0:a,o=t.media,l=o===void 0?"":o,u=t.sourceDuration,c=t.timescale,d=c===void 0?1:c,h=t.startNumber,f=h===void 0?1:h,p=t.periodIndex;var m=[];var v=-1;for(var g=0;g<i.length;g++){var y=i[g];var _=y.d;var b=y.r||0;var M=y.t||0;if(v<0){v=M}if(M&&M>v){v=M}var T=void 0;if(b<0){var A=g+1;if(A===i.length){if(n==="dynamic"&&s>0&&l.indexOf("$Number$")>0){T=Mt(t,v,_)}else{T=(u*d-v)/_}}else{T=(i[A].t-v)/_}}else{T=b+1}var w=f+m.length+T;var E=f+m.length;while(E<w){m.push({number:E,duration:_/d,time:v,timeline:p});v+=_;E++}}return m};var At=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g;var wt=function e(t){return function(e,i,r,n){if(e==="$$"){return"$"}if(typeof t[i]==="undefined"){return e}var a=""+t[i];if(i==="RepresentationID"){return a}if(!r){n=1}else{n=parseInt(n,10)}if(a.length>=n){return a}return""+new Array(n-a.length+1).join("0")+a}};var Et=function e(t,i){return t.replace(At,wt(i))};var xt=function e(t,i){if(!t.duration&&!i){return[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]}if(t.duration){return ct(t)}return Tt(t,i)};var St=function e(t,i){var r={RepresentationID:t.id,Bandwidth:t.bandwidth||0};var n=t.initialization,a=n===void 0?{sourceURL:"",range:""}:n;var s=st({baseUrl:t.baseUrl,source:Et(a.sourceURL,r),range:a.range});var o=xt(t,i);return o.map(function(e){r.Number=e.number;r.Time=e.time;var i=Et(t.media||"",r);return{uri:i,timeline:e.timeline,duration:e.duration,resolvedUri:g(t.baseUrl||"",i),map:s,number:e.number}})};var Dt=function e(t,i){var r=t.baseUrl,n=t.initialization,a=n===void 0?{}:n;var s=st({baseUrl:r,source:a.sourceURL,range:a.range});var o=st({baseUrl:r,source:i.media,range:i.mediaRange});o.map=s;return o};var It=function e(t,i){var r=t.duration,n=t.segmentUrls,a=n===void 0?[]:n;if(!r&&!i||r&&i){throw new Error(at.SEGMENT_TIME_UNSPECIFIED)}var s=a.map(function(e){return Dt(t,e)});var o;if(r){o=ct(t)}if(i){o=Tt(t,i)}var l=o.map(function(e,t){if(s[t]){var i=s[t];i.timeline=e.timeline;i.duration=e.duration;i.number=e.number;return i}}).filter(function(e){return e});return l};var jt=function e(t){var i=t.attributes,r=t.segmentInfo;var n;var a;if(r.template){a=St;n=$e(i,r.template)}else if(r.base){a=dt;n=$e(i,r.base)}else if(r.list){a=It;n=$e(i,r.list)}var s={attributes:i};if(!a){return s}var o=a(n,r.timeline);if(n.duration){var l=n,u=l.duration,c=l.timescale,d=c===void 0?1:c;n.duration=u/d}else if(o.length){n.duration=o.reduce(function(e,t){return Math.max(e,Math.ceil(t.duration))},0)}else{n.duration=0}s.attributes=n;s.segments=o;if(r.base&&n.indexRange){s.sidx=o[0];s.segments=[]}return s};var Lt=function e(t){return t.map(jt)};var Nt=function e(t,i){return rt(t.childNodes).filter(function(e){var t=e.tagName;return t===i})};var Ct=function e(t){return t.textContent.trim()};var Ot=function e(t){var i=365*24*60*60;var r=30*24*60*60;var n=24*60*60;var a=60*60;var s=60;var o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/;var l=o.exec(t);if(!l){return 0}var u=l.slice(1),c=u[0],d=u[1],h=u[2],f=u[3],p=u[4],m=u[5];return parseFloat(c||0)*i+parseFloat(d||0)*r+parseFloat(h||0)*n+parseFloat(f||0)*a+parseFloat(p||0)*s+parseFloat(m||0)};var kt=function e(t){var i=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;if(i.test(t)){t+="Z"}return Date.parse(t)};var Pt={mediaPresentationDuration:function e(t){return Ot(t)},availabilityStartTime:function e(t){return kt(t)/1e3},minimumUpdatePeriod:function e(t){return Ot(t)},suggestedPresentationDelay:function e(t){return Ot(t)},type:function e(t){return t},timeShiftBufferDepth:function e(t){return Ot(t)},start:function e(t){return Ot(t)},width:function e(t){return parseInt(t,10)},height:function e(t){return parseInt(t,10)},bandwidth:function e(t){return parseInt(t,10)},startNumber:function e(t){return parseInt(t,10)},timescale:function e(t){return parseInt(t,10)},duration:function e(t){var i=parseInt(t,10);if(isNaN(i)){return Ot(t)}return i},d:function e(t){return parseInt(t,10)},t:function e(t){return parseInt(t,10)},r:function e(t){return parseInt(t,10)},DEFAULT:function e(t){return t}};var Rt=function e(t){if(!(t&&t.attributes)){return{}}return rt(t.attributes).reduce(function(e,t){var i=Pt[t.name]||Pt.DEFAULT;e[t.name]=i(t.value);return e},{})};var zt={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};var Ut=function e(t,i){if(!i.length){return t}return it(t.map(function(e){return i.map(function(t){return g(e,Ct(t))})}))};var Bt=function e(t){var i=Nt(t,"SegmentTemplate")[0];var r=Nt(t,"SegmentList")[0];var n=r&&Nt(r,"SegmentURL").map(function(e){return $e({tag:"SegmentURL"},Rt(e))});var a=Nt(t,"SegmentBase")[0];var s=r||i;var o=s&&Nt(s,"SegmentTimeline")[0];var l=r||a||i;var u=l&&Nt(l,"Initialization")[0];var c=i&&Rt(i);if(c&&u){c.initialization=u&&Rt(u)}else if(c&&c.initialization){c.initialization={sourceURL:c.initialization}}var d={template:c,timeline:o&&Nt(o,"S").map(function(e){return Rt(e)}),list:r&&$e(Rt(r),{segmentUrls:n,initialization:Rt(u)}),base:a&&$e(Rt(a),{initialization:Rt(u)})};Object.keys(d).forEach(function(e){if(!d[e]){delete d[e]}});return d};var Ft=function e(t,i,r){return function(e){var n=Nt(e,"BaseURL");var a=Ut(i,n);var s=$e(t,Rt(e));var o=Bt(e);return a.map(function(e){return{segmentInfo:$e(r,o),attributes:$e(s,{baseUrl:e})}})}};var Vt=function e(t){return t.reduce(function(e,t){var i=Rt(t);var r=zt[i.schemeIdUri];if(r){e[r]={attributes:i};var n=Nt(t,"cenc:pssh")[0];if(n){var a=Ct(n);var s=a&&S(a);e[r].pssh=s}}return e},{})};var Gt=function e(t,i,r){return function(e){var n=Rt(e);var a=Ut(i,Nt(e,"BaseURL"));var s=Nt(e,"Role")[0];var o={role:Rt(s)};var l=$e(t,n,o);var u=Vt(Nt(e,"ContentProtection"));if(Object.keys(u).length){l=$e(l,{contentProtection:u})}var c=Bt(e);var d=Nt(e,"Representation");var h=$e(r,c);return it(d.map(Ft(l,a,h)))}};var Ht=function e(t,i){return function(e,n){var a=Ut(i,Nt(e,"BaseURL"));var s=Rt(e);var o=parseInt(s.id,10);var l=r.isNaN(o)?n:o;var u=$e(t,{periodIndex:l});var c=Nt(e,"AdaptationSet");var d=Bt(e);return it(c.map(Gt(u,a,d)))}};var Qt=function e(t,i){if(i===void 0){i={}}var r=i,n=r.manifestUri,a=n===void 0?"":n,s=r.NOW,o=s===void 0?Date.now():s,l=r.clientOffset,u=l===void 0?0:l;var c=Nt(t,"Period");if(!c.length){throw new Error(at.INVALID_NUMBER_OF_PERIOD)}var d=Nt(t,"Location");var h=Rt(t);var f=Ut([a],Nt(t,"BaseURL"));h.sourceDuration=h.mediaPresentationDuration||0;h.NOW=o;h.clientOffset=u;if(d.length){h.locations=d.map(Ct)}return{locations:h.locations,representationInfo:it(c.map(Ht(h,f)))}};var Yt=function e(t){if(t===""){throw new Error(at.DASH_EMPTY_MANIFEST)}var i=new a.DOMParser;var r=i.parseFromString(t,"application/xml");var n=r&&r.documentElement.tagName==="MPD"?r.documentElement:null;if(!n||n&&n.getElementsByTagName("parsererror").length>0){throw new Error(at.DASH_INVALID_XML)}return n};var Wt=function e(t){var i=Nt(t,"UTCTiming")[0];if(!i){return null}var r=Rt(i);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT";r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(at.UNSUPPORTED_UTC_TIMING_SCHEME)}return r};var qt=function e(t,i){if(i===void 0){i={}}var r=Qt(Yt(t),i);var n=Lt(r.representationInfo);return bt(n,r.locations,i.sidxMapping)};var Xt=function e(t){return Wt(Yt(t))};var Zt=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8),earliestPresentationTime:t.getUint32(12),firstOffset:t.getUint32(16)},r=t.getUint16(22),n;for(n=24;r;n+=12,r--){i.references.push({referenceType:(e[n]&128)>>>7,referencedSize:t.getUint32(n)&2147483647,subsegmentDuration:t.getUint32(n+4),startsWithSap:!!(e[n+8]&128),sapType:(e[n+8]&112)>>>4,sapDeltaTime:t.getUint32(n+8)&268435455})}return i};var Kt=Zt;var Jt=d(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var i=function e(t){return t instanceof Uint8Array?t:new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0)};var r=function e(t){if(!t){return""}t=Array.prototype.slice.call(t);var r=String.fromCharCode.apply(null,i(t));try{return decodeURIComponent(escape(r))}catch(e){}return r};var n=function e(t,r){if(r===void 0){r=0}t=i(t);var n=t[r+6]<<21|t[r+7]<<14|t[r+8]<<7|t[r+9];var a=t[r+5];var s=(a&16)>>4;if(s){return n+20}return n+10};var a=function e(t,a){if(a===void 0){a=0}t=i(t);if(t.length-a<10||r(t.subarray(a,a+3))!=="ID3"){return a}a+=n(t,a);return e(t,a)};var s={aac:function e(t){var i=a(t);return t.length>=i+2&&(t[i]&255)===255&&(t[i+1]&224)===224&&(t[i+1]&22)===16},mp3:function e(t){var i=a(t);return t.length>=i+2&&(t[i]&255)===255&&(t[i+1]&224)===224&&(t[i+1]&6)===2},webm:function e(t){return t.length>=4&&(t[0]&255)===26&&(t[1]&255)===69&&(t[2]&255)===223&&(t[3]&255)===163},mp4:function e(t){return t.length>=8&&/^(f|s)typ$/.test(r(t.subarray(4,8)))&&!/^ftyp3g$/.test(r(t.subarray(4,10)))},"3gp":function e(t){return t.length>=10&&/^ftyp3g$/.test(r(t.subarray(4,10)))},ts:function e(t){if(t.length<189&&t.length>=1){return t[0]===71}var i=0;while(i+188<t.length&&i<188){if(t[i]===71&&t[i+188]===71){return true}i+=1}return false},flac:function e(t){return t.length>=4&&/^fLaC$/.test(r(t.subarray(0,4)))},ogg:function e(t){return t.length>=4&&/^OggS$/.test(r(t.subarray(0,4)))}};var o=Object.keys(s).filter(function(e){return e!=="ts"}).concat("ts");o.forEach(function(e){var t=s[e];s[e]=function(e){return t(i(e))}});var l=function e(t){t=i(t);for(var r=0;r<o.length;r++){var n=o[r];if(s[n](t)){return n}}return""};var u=function e(t){t=i(t);var n=0;while(n<t.length){var a=(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0;var s=r(t.subarray(n+4,n+8));if(s==="moof"){return true}if(a===0||a+n>t.length){n=t.length}else{n+=a}}return false};t.detectContainerForBytes=l;t.getId3Offset=a;t.id3Size=n;t.isLikely=s;t.isLikelyFmp4MediaSegment=u});c(Jt);var $t=Jt.detectContainerForBytes;var ei=Jt.getId3Offset;var ti=Jt.id3Size;var ii=Jt.isLikely;var ri=Jt.isLikelyFmp4MediaSegment;var ni=d(function(e,t){Object.defineProperty(t,"__esModule",{value:true});var i=function e(t){return ArrayBuffer.isView(t)};var r=function e(t){return t instanceof Uint8Array?t:new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0)};var n=function e(t){if(!t){return""}t=Array.prototype.slice.call(t);var i=String.fromCharCode.apply(null,r(t));try{return decodeURIComponent(escape(i))}catch(e){}return i};var a=function e(t,i){if(i===void 0){i=false}var r=[];if(typeof t!=="string"&&t&&typeof t.toString==="function"){t=t.toString()}if(typeof t!=="string"){return r}if(!i){t=unescape(encodeURIComponent(t))}return t.split("").map(function(e){return e.charCodeAt(0)&255})};var s=function e(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++){i[n]=arguments[n]}var a=i.reduce(function(e,t){var i=t&&(t.byteLength||t.length);e+=i||0;return e},0);var s=new Uint8Array(a);var o=0;i.forEach(function(e){e=r(e);s.set(e,o);o+=e.byteLength});return s};t.bytesToString=n;t.concatTypedArrays=s;t.isTypedArray=i;t.stringToBytes=a;t.toUint8=r});c(ni);var ai=ni.bytesToString;var si=ni.concatTypedArrays;var oi=ni.isTypedArray;var li=ni.stringToBytes;var ui=ni.toUint8;var ci=function e(t,i){if(t.readyState===4){return i()}return};var di=function e(t,i,r){var n=[];var a;var s=false;var o=function e(t,i,n,a){i.abort();s=true;return r(t,i,n,a)};var l=function e(t,i){if(s){return}if(t){return o(t,i,"",n)}var r=i.responseText.substring(n&&n.byteLength||0,i.responseText.length);n=si(n,li(r,true));a=a||ei(n);if(n.length<10||a&&n.length<a+2){return ci(i,function(){return o(t,i,"",n)})}var l=$t(n);if(l==="ts"&&n.length<188){return ci(i,function(){return o(t,i,"",n)})}if(!l&&n.length<376){return ci(i,function(){return o(t,i,"",n)})}return o(null,i,l,n)};var u={uri:t,beforeSend:function e(t){t.overrideMimeType("text/plain; charset=x-user-defined");t.addEventListener("progress",function(e){var i=e.total,r=e.loaded;return Se(t,null,{statusCode:t.status},l)})}};var c=i(u,function(e,t){return Se(c,e,t,l)});return c};var hi=n.EventTarget,fi=n.mergeOptions;var pi=function e(t){var i=t.masterXml,r=t.srcUrl,n=t.clientOffset,a=t.sidxMapping;var s=qt(i,{manifestUri:r,clientOffset:n,sidxMapping:a});F(s,r);return s};var mi=function e(t,i){var r=true;var n=fi(t,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod});for(var a=0;a<i.playlists.length;a++){var s=Y(n,i.playlists[a]);if(s){n=s;r=false}}P(i,function(e,t,i,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id;var o=Y(n,e.playlists[0]);if(o){n=o;n.mediaGroups[t][i][a].playlists[0]=n.playlists[s];r=false}}});if(i.minimumUpdatePeriod!==t.minimumUpdatePeriod){r=false}if(r){return null}return n};var vi=function e(t){var i=t.byterange.offset+t.byterange.length-1;return t.uri+"-"+t.byterange.offset+"-"+i};var gi=function e(t,i){var r=Boolean(!t.map&&!i.map);var n=r||Boolean(t.map&&i.map&&t.map.byterange.offset===i.map.byterange.offset&&t.map.byterange.length===i.map.byterange.length);return n&&t.uri===i.uri&&t.byterange.offset===i.byterange.offset&&t.byterange.length===i.byterange.length};var yi=function e(t,i){var r={};for(var n in t){var a=t[n];var s=a.sidx;if(s){var o=vi(s);if(!i[o]){break}var l=i[o].sidxInfo;if(gi(l,s)){r[o]=i[o]}}}return r};var _i=function e(t,i,r,n){var a=qt(t,{manifestUri:i,clientOffset:r});var s=yi(a.playlists,n);var o=s;P(a,function(e,t,i,r){if(e.playlists&&e.playlists.length){var a=e.playlists;o=fi(o,yi(a,n))}});return o};var bi=function e(t,i,r,a,s,o){var l={uri:_(s.handleManifestRedirects,i.resolvedUri),byterange:i.byterange,playlist:r};var u=n.mergeOptions(l,{responseType:"arraybuffer",headers:je(l)});return di(l.uri,a,function(e,i,n,s){if(e){return o(e,i)}if(!n||n!=="mp4"){return o({status:i.status,message:"Unsupported "+(n||"unknown")+" container type for sidx segment at URL: "+l.uri,response:"",playlist:r,internal:true,blacklistDuration:Infinity,code:2},i)}var c=l.byterange,d=c.offset,h=c.length;if(s.length>=h+d){return o(e,{response:s.subarray(d,d+h),status:i.status,uri:i.uri})}t.request=a(u,o)})};var Mi=function(e){u(t,e);function t(t,i,r,n){var a;if(r===void 0){r={}}a=e.call(this)||this;var s=r,l=s.withCredentials,u=l===void 0?false:l,c=s.handleManifestRedirects,d=c===void 0?false:c;a.vhs_=i;a.withCredentials=u;a.handleManifestRedirects=d;if(!t){throw new Error("A non-empty playlist URL or object is required")}a.on("minimumUpdatePeriod",function(){a.refreshXml_()});a.on("mediaupdatetimeout",function(){a.refreshMedia_(a.media().id)});a.state="HAVE_NOTHING";a.loadedPlaylists_={};if(typeof t==="string"){a.srcUrl=t;a.sidxMapping_={};return o(a)}a.setupChildLoader(n,t);return a}var i=t.prototype;i.setupChildLoader=function e(t,i){this.masterPlaylistLoader_=t;this.childPlaylist_=i};i.dispose=function e(){this.trigger("dispose");this.stopRequest();this.loadedPlaylists_={};r.clearTimeout(this.minimumUpdatePeriodTimeout_);r.clearTimeout(this.mediaRequest_);r.clearTimeout(this.mediaUpdateTimeout);this.off()};i.hasPendingRequest=function e(){return this.request||this.mediaRequest_};i.stopRequest=function e(){if(this.request){var t=this.request;this.request=null;t.onreadystatechange=null;t.abort()}};i.sidxRequestFinished_=function e(t,i,r,n){var a=this;return function(e,s){if(!a.request){return}a.request=null;if(e){a.error=typeof e==="object"?e:{status:s.status,message:"DASH playlist request error at URL: "+t.uri,response:s.response,code:2};if(r){a.state=r}a.trigger("error");return}var o=ui(s.response);var l=Kt(o.subarray(8));return n(i,l)}};i.media=function e(t){var i=this;if(!t){return this.media_}if(this.state==="HAVE_NOTHING"){throw new Error("Cannot switch media playlist from "+this.state)}var n=this.state;if(typeof t==="string"){if(!this.master.playlists[t]){throw new Error("Unknown playlist URI: "+t)}t=this.master.playlists[t]}var a=!this.media_||t.id!==this.media_.id;if(a&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList){this.state="HAVE_METADATA";this.media_=t;if(a){this.trigger("mediachanging");this.trigger("mediachange")}return}if(!a){return}if(this.media_){this.trigger("mediachanging")}if(!t.sidx){this.mediaRequest_=r.setTimeout(this.haveMetadata.bind(this,{startingState:n,playlist:t}),0);return}var s;var o;if(this.masterPlaylistLoader_){s=this.masterPlaylistLoader_.master;o=this.masterPlaylistLoader_.sidxMapping_}else{s=this.master;o=this.sidxMapping_}var l=vi(t.sidx);o[l]={sidxInfo:t.sidx};this.request=bi(this,t.sidx,t,this.vhs_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(t,s,n,function(e,r){if(!e||!r){throw new Error("failed to request sidx")}o[l].sidx=r;i.haveMetadata({startingState:n,playlist:e.playlists[t.id]})}))};i.haveMetadata=function e(t){var i=t.startingState,r=t.playlist;this.state="HAVE_METADATA";this.loadedPlaylists_[r.id]=r;this.mediaRequest_=null;this.refreshMedia_(r.id);if(i==="HAVE_MASTER"){this.trigger("loadedmetadata")}else{this.trigger("mediachange")}};i.pause=function e(){this.stopRequest();r.clearTimeout(this.mediaUpdateTimeout);r.clearTimeout(this.minimumUpdatePeriodTimeout_);if(this.state==="HAVE_NOTHING"){this.started=false}};i.load=function e(t){var i=this;r.clearTimeout(this.mediaUpdateTimeout);r.clearTimeout(this.minimumUpdatePeriodTimeout_);var n=this.media();if(t){var a=n?n.targetDuration/2*1e3:5*1e3;this.mediaUpdateTimeout=r.setTimeout(function(){return i.load()},a);return}if(!this.started){this.start();return}if(n&&!n.endList){this.trigger("mediaupdatetimeout")}else{this.trigger("loadedplaylist")}};i.start=function e(){var t=this;this.started=true;if(this.masterPlaylistLoader_){this.mediaRequest_=r.setTimeout(this.haveMaster_.bind(this),0);return}this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,i){if(!t.request){return}t.request=null;if(e){t.error={status:i.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:i.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}t.masterXml_=i.responseText;if(i.responseHeaders&&i.responseHeaders.date){t.masterLoaded_=Date.parse(i.responseHeaders.date)}else{t.masterLoaded_=Date.now()}t.srcUrl=_(t.handleManifestRedirects,t.srcUrl,i);t.syncClientServerClock_(t.onClientServerClockSync_.bind(t))})};i.syncClientServerClock_=function e(t){var i=this;var r=Xt(this.masterXml_);if(r===null){this.clientOffset_=this.masterLoaded_-Date.now();return t()}if(r.method==="DIRECT"){this.clientOffset_=r.value-Date.now();return t()}this.request=this.vhs_.xhr({uri:y(this.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},function(e,n){if(!i.request){return}if(e){i.clientOffset_=i.masterLoaded_-Date.now();return t()}var a;if(r.method==="HEAD"){if(!n.responseHeaders||!n.responseHeaders.date){a=i.masterLoaded_}else{a=Date.parse(n.responseHeaders.date)}}else{a=Date.parse(n.responseText)}i.clientOffset_=a-Date.now();t()})};i.haveMaster_=function e(){this.state="HAVE_MASTER";this.mediaRequest_=null;if(!this.masterPlaylistLoader_){this.updateMainManifest_(pi({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_}));this.trigger("loadedplaylist")}else if(!this.media_){this.media(this.childPlaylist_)}};i.updateMinimumUpdatePeriodTimeout_=function e(){var t=this;r.clearTimeout(this.minimumUpdatePeriodTimeout_);var i=function e(i){t.minimumUpdatePeriodTimeout_=r.setTimeout(function(){t.trigger("minimumUpdatePeriod")},i)};var n=this.master&&this.master.minimumUpdatePeriod;if(n>0){i(n)}else if(n===0){if(!this.media()){this.one("loadedplaylist",function(){i(t.media().targetDuration*1e3)})}else{i(this.media().targetDuration*1e3)}}};i.onClientServerClockSync_=function e(){this.haveMaster_();if(!this.hasPendingRequest()&&!this.media_){this.media(this.master.playlists[0])}this.updateMinimumUpdatePeriodTimeout_()};i.updateMainManifest_=function e(t){this.master=t;if(!this.master.locations||!this.master.locations.length){return}var i=this.master.locations[0];if(i!==this.srcUrl){this.srcUrl=i}};i.refreshXml_=function e(){var t=this;this.request=this.vhs_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,i){if(!t.request){return}t.request=null;if(e){t.error={status:i.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:i.responseText,code:2};if(t.state==="HAVE_NOTHING"){t.started=false}return t.trigger("error")}t.masterXml_=i.responseText;t.sidxMapping_=_i(t.masterXml_,t.srcUrl,t.clientOffset_,t.sidxMapping_);var r=pi({masterXml:t.masterXml_,srcUrl:t.srcUrl,clientOffset:t.clientOffset_,sidxMapping:t.sidxMapping_});var n=mi(t.master,r);var a=t.media().sidx;if(n){if(a){var s=vi(a);if(!t.sidxMapping_[s]){var o=t.media();t.request=bi(t,o.sidx,o,t.vhs_.xhr,{handleManifestRedirects:t.handleManifestRedirects},t.sidxRequestFinished_(o,r,t.state,function(e,i){if(!e||!i){throw new Error("failed to request sidx on minimumUpdatePeriod")}t.sidxMapping_[s].sidx=i;t.updateMinimumUpdatePeriodTimeout_();t.refreshMedia_(t.media().id);return}))}}else{t.updateMainManifest_(n);if(t.media_){t.media_=t.master.playlists[t.media_.id]}}}t.updateMinimumUpdatePeriodTimeout_()})};i.refreshMedia_=function e(t){var i=this;if(!t){throw new Error("refreshMedia_ must take a media id")}var n;var a;if(this.masterPlaylistLoader_){n=this.masterPlaylistLoader_.master;a=pi({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_})}else{n=this.master;a=pi({masterXml:this.masterXml_,srcUrl:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_})}var s=mi(n,a);if(s){if(this.masterPlaylistLoader_){this.masterPlaylistLoader_.master=s}else{this.master=s}this.media_=s.playlists[t]}else{this.media_=n.playlists[t];this.trigger("playlistunchanged")}if(!this.media().endList){this.mediaUpdateTimeout=r.setTimeout(function(){i.trigger("mediaupdatetimeout")},W(this.media(),!!s))}this.trigger("loadedplaylist")};return t}(hi);var Ti={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};var Ai=function e(t){var i=new Uint8Array(new ArrayBuffer(t.length));for(var r=0;r<t.length;r++){i[r]=t.charCodeAt(r)}return i.buffer};var wi=[];var Ei;var xi=function e(t,i,r){var n=t.data.segment,a=n.type,s=n.initSegment,o=n.captions,l=n.captionStreams,u=n.metadata,c=n.videoFrameDtsTime,d=n.videoFramePtsTime;i.buffer.push({captions:o,captionStreams:l,metadata:u});var h=t.data.segment.boxes||{data:t.data.segment.data};var f={type:a,data:new Uint8Array(h.data,h.data.byteOffset,h.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};if(typeof c!=="undefined"){f.videoFrameDtsTime=c}if(typeof d!=="undefined"){f.videoFramePtsTime=d}r(f)};var Si=function e(t){var i=t.transmuxedData,r=t.callback;i.buffer=[];r(i)};var Di=function e(t,i){i.gopInfo=t.data.gopInfo};var Ii=function e(t){var i=t.transmuxer,r=t.bytes,n=t.audioAppendStart,a=t.gopsToAlignWith,s=t.isPartial,o=t.remux,l=t.onData,u=t.onTrackInfo,c=t.onAudioTimingInfo,d=t.onVideoTimingInfo,h=t.onVideoSegmentTimingInfo,f=t.onId3,p=t.onCaptions,m=t.onDone;var v={isPartial:s,buffer:[]};var g=function e(t){if(!Ei){return}if(t.data.action==="data"){xi(t,v,l)}if(t.data.action==="trackinfo"){u(t.data.trackInfo)}if(t.data.action==="gopInfo"){Di(t,v)}if(t.data.action==="audioTimingInfo"){c(t.data.audioTimingInfo)}if(t.data.action==="videoTimingInfo"){d(t.data.videoTimingInfo)}if(t.data.action==="videoSegmentTimingInfo"){h(t.data.videoSegmentTimingInfo)}if(t.data.action==="id3Frame"){f([t.data.id3Frame],t.data.id3Frame.dispatchType)}if(t.data.action==="caption"){p(t.data.caption)}if(t.data.type!=="transmuxed"){return}i.onmessage=null;Si({transmuxedData:v,callback:m});ji()};i.onmessage=g;if(n){i.postMessage({action:"setAudioAppendStart",appendStart:n})}if(Array.isArray(a)){i.postMessage({action:"alignGopsWith",gopsToAlignWith:a})}if(typeof o!=="undefined"){i.postMessage({action:"setRemux",remux:o})}if(r.byteLength){var y=r instanceof ArrayBuffer?r:r.buffer;var _=r instanceof ArrayBuffer?0:r.byteOffset;i.postMessage({action:"push",data:y,byteOffset:_,byteLength:r.byteLength},[y])}i.postMessage({action:s?"partialFlush":"flush"})};var ji=function e(){Ei=null;if(wi.length){Ei=wi.shift();if(typeof Ei==="function"){Ei()}else{Ii(Ei)}}};var Li=function e(t,i){t.postMessage({action:i});ji()};var Ni=function e(t,i){if(!Ei){Ei=t;Li(i,t);return}wi.push(Li.bind(null,i,t))};var Ci=function e(t){Ni("reset",t)};var Oi=function e(t){Ni("endTimeline",t)};var ki=function e(t){if(!Ei){Ei=t;Ii(t);return}wi.push(t)};var Pi=function e(){Ei=null;wi.length=0};var Ri={reset:Ci,dispose:Pi,endTimeline:Oi,transmux:ki};var zi={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var Ui=function(){this.init=function(){var e={};this.on=function(t,i){if(!e[t]){e[t]=[]}e[t]=e[t].concat(i)};this.off=function(t,i){var r;if(!e[t]){return false}r=e[t].indexOf(i);e[t]=e[t].slice();e[t].splice(r,1);return r>-1};this.trigger=function(t){var i,r,n,a;i=e[t];if(!i){return}if(arguments.length===2){n=i.length;for(r=0;r<n;++r){i[r].call(this,arguments[1])}}else{a=[];r=arguments.length;for(r=1;r<arguments.length;++r){a.push(arguments[r])}n=i.length;for(r=0;r<n;++r){i[r].apply(this,a)}}};this.dispose=function(){e={}}}};Ui.prototype.pipe=function(e){this.on("data",function(t){e.push(t)});this.on("done",function(t){e.flush(t)});this.on("partialdone",function(t){e.partialFlush(t)});this.on("endedtimeline",function(t){e.endTimeline(t)});this.on("reset",function(t){e.reset(t)});return e};Ui.prototype.push=function(e){this.trigger("data",e)};Ui.prototype.flush=function(e){this.trigger("done",e)};Ui.prototype.partialFlush=function(e){this.trigger("partialdone",e)};Ui.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)};Ui.prototype.reset=function(e){this.trigger("reset",e)};var Bi=Ui;var Fi=8589934592;var Vi=4294967296;var Gi="shared";var Hi=function(e,t){var i=1;if(e>t){i=-1}while(Math.abs(t-e)>Vi){e+=i*Fi}return e};var Qi=function(e){var t,i;Qi.prototype.init.call(this);this.type_=e||Gi;this.push=function(e){if(this.type_!==Gi&&e.type!==this.type_){return}if(i===undefined){i=e.dts}e.dts=Hi(e.dts,i);e.pts=Hi(e.pts,i);t=e.dts;this.trigger("data",e)};this.flush=function(){i=t;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){i=void 0;t=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};Qi.prototype=new Bi;var Yi={TimestampRolloverStream:Qi,handleRollover:Hi};var Wi=function(e){var t=e[1]&31;t<<=8;t|=e[2];return t};var qi=function(e){return!!(e[1]&64)};var Xi=function(e){var t=0;if((e[3]&48)>>>4>1){t+=e[4]+1}return t};var Zi=function(e,t){var i=Wi(e);if(i===0){return"pat"}else if(i===t){return"pmt"}else if(t){return"pes"}return null};var Ki=function(e){var t=qi(e);var i=4+Xi(e);if(t){i+=e[i]+1}return(e[i+10]&31)<<8|e[i+11]};var Ji=function(e){var t={};var i=qi(e);var r=4+Xi(e);if(i){r+=e[r]+1}if(!(e[r+5]&1)){return}var n,a,s;n=(e[r+1]&15)<<8|e[r+2];a=3+n-4;s=(e[r+10]&15)<<8|e[r+11];var o=12+s;while(o<a){var l=r+o;t[(e[l+1]&31)<<8|e[l+2]]=e[l];o+=((e[l+3]&15)<<8|e[l+4])+5}return t};var $i=function(e,t){var i=Wi(e);var r=t[i];switch(r){case zi.H264_STREAM_TYPE:return"video";case zi.ADTS_STREAM_TYPE:return"audio";case zi.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}};var er=function(e){var t=qi(e);if(!t){return null}var i=4+Xi(e);if(i>=e.byteLength){return null}var r=null;var n;n=e[i+7];if(n&192){r={};r.pts=(e[i+9]&14)<<27|(e[i+10]&255)<<20|(e[i+11]&254)<<12|(e[i+12]&255)<<5|(e[i+13]&254)>>>3;r.pts*=4;r.pts+=(e[i+13]&6)>>>1;r.dts=r.pts;if(n&64){r.dts=(e[i+14]&14)<<27|(e[i+15]&255)<<20|(e[i+16]&254)<<12|(e[i+17]&255)<<5|(e[i+18]&254)>>>3;r.dts*=4;r.dts+=(e[i+18]&6)>>>1}}return r};var tr=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};var ir=function(e){var t=4+Xi(e);var i=e.subarray(t);var r=0;var n=0;var a=false;var s;for(;n<i.byteLength-3;n++){if(i[n+2]===1){r=n+5;break}}while(r<i.byteLength){switch(i[r]){case 0:if(i[r-1]!==0){r+=2;break}else if(i[r-2]!==0){r++;break}if(n+3!==r-2){s=tr(i[n+3]&31);if(s==="slice_layer_without_partitioning_rbsp_idr"){a=true}}do{r++}while(i[r]!==1&&r<i.length);n=r-2;r+=3;break;case 1:if(i[r-1]!==0||i[r-2]!==0){r+=3;break}s=tr(i[n+3]&31);if(s==="slice_layer_without_partitioning_rbsp_idr"){a=true}n=r-2;r+=3;break;default:r+=3;break}}i=i.subarray(n);r-=n;n=0;if(i&&i.byteLength>3){s=tr(i[n+3]&31);if(s==="slice_layer_without_partitioning_rbsp_idr"){a=true}}return a};var rr={parseType:Zi,parsePat:Ki,parsePmt:Ji,parsePayloadUnitStartIndicator:qi,parsePesType:$i,parsePesTime:er,videoPacketContainsKeyFrame:ir};var nr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var ar=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],r=e[t+5],n=(r&16)>>4;i=i>=0?i:0;if(n){return i+20}return i+10};var sr=function(e,t){if(e.length-t<10||e[t]!=="I".charCodeAt(0)||e[t+1]!=="D".charCodeAt(0)||e[t+2]!=="3".charCodeAt(0)){return t}t+=ar(e,t);return sr(e,t)};var or=function(e){var t=sr(e,0);return e.length>=t+2&&(e[t]&255)===255&&(e[t+1]&240)===240&&(e[t+1]&22)===16};var lr=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};var ur=function(e,t,i){var r,n="";for(r=t;r<i;r++){n+="%"+("00"+e[r].toString(16)).slice(-2)}return n};var cr=function(e,t,i){return unescape(ur(e,t,i))};var dr=function(e,t){var i=(e[t+5]&224)>>5,r=e[t+4]<<3,n=e[t+3]&3<<11;return n|r|i};var hr=function(e,t){if(e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(e[t]&255===255&&(e[t+1]&240)===240){return"audio"}return null};var fr=function(e){var t=0;while(t+5<e.length){if(e[t]!==255||(e[t+1]&246)!==240){t++;continue}return nr[(e[t+2]&60)>>>2]}return null};var pr=function(e){var t,i,r,n;t=10;if(e[5]&64){t+=4;t+=lr(e.subarray(10,14))}do{i=lr(e.subarray(t+4,t+8));if(i<1){return null}n=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]);if(n==="PRIV"){r=e.subarray(t+10,t+i+10);for(var a=0;a<r.byteLength;a++){if(r[a]===0){var s=cr(r,0,a);if(s==="com.apple.streaming.transportStreamTimestamp"){var o=r.subarray(a+1);var l=(o[3]&1)<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;l*=4;l+=o[7]&3;return l}break}}}t+=10;t+=i}while(t<e.byteLength);return null};var mr={isLikelyAacData:or,parseId3TagSize:ar,parseAdtsSize:dr,parseType:hr,parseSampleRate:fr,parseAacTimestamp:pr};var vr=9e4,gr,yr,_r,br,Mr,Tr,Ar;gr=function(e){return e*vr};yr=function(e,t){return e*t};_r=function(e){return e/vr};br=function(e,t){return e/t};Mr=function(e,t){return gr(br(e,t))};Tr=function(e,t){return yr(_r(e),t)};Ar=function(e,t,i){return _r(i?e:e-t)};var wr={ONE_SECOND_IN_TS:vr,secondsToVideoTs:gr,secondsToAudioTs:yr,videoTsToSeconds:_r,audioTsToSeconds:br,audioTsToVideoTs:Mr,videoTsToAudioTs:Tr,metadataTsToSeconds:Ar};var Er=wr.ONE_SECOND_IN_TS;var xr=Yi.handleRollover;var Sr={};Sr.ts=rr;Sr.aac=mr;var Dr=wr.ONE_SECOND_IN_TS;var Ir=188,jr=71;var Lr=function(e,t){var i=0,r=Ir,n,a;while(r<e.byteLength){if(e[i]===jr&&e[r]===jr){n=e.subarray(i,r);a=Sr.ts.parseType(n,t.pid);switch(a){case"pat":if(!t.pid){t.pid=Sr.ts.parsePat(n)}break;case"pmt":if(!t.table){t.table=Sr.ts.parsePmt(n)}break}if(t.pid&&t.table){return}i+=Ir;r+=Ir;continue}i++;r++}};var Nr=function(e,t,i){var r=0,n=Ir,a,s,o,l,u;var c=false;while(n<=e.byteLength){if(e[r]===jr&&(e[n]===jr||n===e.byteLength)){a=e.subarray(r,n);s=Sr.ts.parseType(a,t.pid);switch(s){case"pes":o=Sr.ts.parsePesType(a,t.table);l=Sr.ts.parsePayloadUnitStartIndicator(a);if(o==="audio"&&l){u=Sr.ts.parsePesTime(a);if(u){u.type="audio";i.audio.push(u);c=true}}break}if(c){break}r+=Ir;n+=Ir;continue}r++;n++}n=e.byteLength;r=n-Ir;c=false;while(r>=0){if(e[r]===jr&&(e[n]===jr||n===e.byteLength)){a=e.subarray(r,n);s=Sr.ts.parseType(a,t.pid);switch(s){case"pes":o=Sr.ts.parsePesType(a,t.table);l=Sr.ts.parsePayloadUnitStartIndicator(a);if(o==="audio"&&l){u=Sr.ts.parsePesTime(a);if(u){u.type="audio";i.audio.push(u);c=true}}break}if(c){break}r-=Ir;n-=Ir;continue}r--;n--}};var Cr=function(e,t,i){var r=0,n=Ir,a,s,o,l,u,c,d,h;var f=false;var p={data:[],size:0};while(n<e.byteLength){if(e[r]===jr&&e[n]===jr){a=e.subarray(r,n);s=Sr.ts.parseType(a,t.pid);switch(s){case"pes":o=Sr.ts.parsePesType(a,t.table);l=Sr.ts.parsePayloadUnitStartIndicator(a);if(o==="video"){if(l&&!f){u=Sr.ts.parsePesTime(a);if(u){u.type="video";i.video.push(u);f=true}}if(!i.firstKeyFrame){if(l){if(p.size!==0){c=new Uint8Array(p.size);d=0;while(p.data.length){h=p.data.shift();c.set(h,d);d+=h.byteLength}if(Sr.ts.videoPacketContainsKeyFrame(c)){var m=Sr.ts.parsePesTime(c);if(m){i.firstKeyFrame=m;i.firstKeyFrame.type="video"}else{console.warn("Failed to extract PTS/DTS from PES at first keyframe. "+"This could be an unusual TS segment, or else mux.js did not "+"parse your TS segment correctly. If you know your TS "+"segments do contain PTS/DTS on keyframes please file a bug "+"report! You can try ffprobe to double check for yourself.")}}p.size=0}}p.data.push(a);p.size+=a.byteLength}}break}if(f&&i.firstKeyFrame){break}r+=Ir;n+=Ir;continue}r++;n++}n=e.byteLength;r=n-Ir;f=false;while(r>=0){if(e[r]===jr&&e[n]===jr){a=e.subarray(r,n);s=Sr.ts.parseType(a,t.pid);switch(s){case"pes":o=Sr.ts.parsePesType(a,t.table);l=Sr.ts.parsePayloadUnitStartIndicator(a);if(o==="video"&&l){u=Sr.ts.parsePesTime(a);if(u){u.type="video";i.video.push(u);f=true}}break}if(f){break}r-=Ir;n-=Ir;continue}r--;n--}};var Or=function(e,t){if(e.audio&&e.audio.length){var i=t;if(typeof i==="undefined"){i=e.audio[0].dts}e.audio.forEach(function(e){e.dts=xr(e.dts,i);e.pts=xr(e.pts,i);e.dtsTime=e.dts/Dr;e.ptsTime=e.pts/Dr})}if(e.video&&e.video.length){var r=t;if(typeof r==="undefined"){r=e.video[0].dts}e.video.forEach(function(e){e.dts=xr(e.dts,r);e.pts=xr(e.pts,r);e.dtsTime=e.dts/Dr;e.ptsTime=e.pts/Dr});if(e.firstKeyFrame){var n=e.firstKeyFrame;n.dts=xr(n.dts,r);n.pts=xr(n.pts,r);n.dtsTime=n.dts/Dr;n.ptsTime=n.dts/Dr}}};var kr=function(e){var t=false,i=0,r=null,n=null,a=0,s=0,o;while(e.length-s>=3){var l=Sr.aac.parseType(e,s);switch(l){case"timed-metadata":if(e.length-s<10){t=true;break}a=Sr.aac.parseId3TagSize(e,s);if(a>e.length){t=true;break}if(n===null){o=e.subarray(s,s+a);n=Sr.aac.parseAacTimestamp(o)}s+=a;break;case"audio":if(e.length-s<7){t=true;break}a=Sr.aac.parseAdtsSize(e,s);if(a>e.length){t=true;break}if(r===null){o=e.subarray(s,s+a);r=Sr.aac.parseSampleRate(o)}i++;s+=a;break;default:s++;break}if(t){return null}}if(r===null||n===null){return null}var u=Dr/r;var c={audio:[{type:"audio",dts:n,pts:n},{type:"audio",dts:n+i*1024*u,pts:n+i*1024*u}]};return c};var Pr=function(e){var t={pid:null,table:null};var i={};Lr(e,t);for(var r in t.table){if(t.table.hasOwnProperty(r)){var n=t.table[r];switch(n){case zi.H264_STREAM_TYPE:i.video=[];Cr(e,t,i);if(i.video.length===0){delete i.video}break;case zi.ADTS_STREAM_TYPE:i.audio=[];Nr(e,t,i);if(i.audio.length===0){delete i.audio}break}}}return i};var Rr=function(e,t){var i=Sr.aac.isLikelyAacData(e);var r;if(i){r=kr(e)}else{r=Pr(e)}if(!r||!r.audio&&!r.video){return null}Or(r,t);return r};var zr={inspect:Rr,parseAudioPes_:Nr};var Ur=function e(t,i){var r=zr.inspect(t,i*Er);if(!r){return null}var n={hasVideo:r.video&&r.video.length===2||false,hasAudio:r.audio&&r.audio.length===2||false};if(n.hasVideo){n.videoStart=r.video[0].ptsTime}if(n.hasAudio){n.audioStart=r.audio[0].ptsTime}return n};var Br=function e(t){var i=0;var r;if(t.bytes){r=new Uint8Array(t.bytes);t.segments.forEach(function(e){r.set(e,i);i+=e.byteLength})}return r};var Fr=function(e){return e>>>0};var Vr=function(e){return("00"+e.toString(16)).slice(-2)};var Gr={toUnsigned:Fr,toHexString:Vr};var Hr=function(e){var t="";t+=String.fromCharCode(e[0]);t+=String.fromCharCode(e[1]);t+=String.fromCharCode(e[2]);t+=String.fromCharCode(e[3]);return t};var Qr=Hr;var Yr=Gr.toUnsigned;var Wr=function(e,t){var i=[],r,n,a,s,o;if(!t.length){return null}for(r=0;r<e.byteLength;){n=Yr(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);a=Qr(e.subarray(r+4,r+8));s=n>1?r+n:e.byteLength;if(a===t[0]){if(t.length===1){i.push(e.subarray(r+8,s))}else{o=Wr(e.subarray(r+8,s),t.slice(1));if(o.length){i=i.concat(o)}}}r=s}return i};var qr=Wr;var Xr=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4)},r=i.flags[2]&1,n=i.flags[2]&2,a=i.flags[2]&8,s=i.flags[2]&16,o=i.flags[2]&32,l=i.flags[0]&65536,u=i.flags[0]&131072,c;c=8;if(r){c+=4;i.baseDataOffset=t.getUint32(12);c+=4}if(n){i.sampleDescriptionIndex=t.getUint32(c);c+=4}if(a){i.defaultSampleDuration=t.getUint32(c);c+=4}if(s){i.defaultSampleSize=t.getUint32(c);c+=4}if(o){i.defaultSampleFlags=t.getUint32(c)}if(l){i.durationIsEmpty=true}if(!r&&u){i.baseDataOffsetIsMoof=true}return i};var Zr=Xr;var Kr=function(e){return{isLeading:(e[0]&12)>>>2,dependsOn:e[0]&3,isDependedOn:(e[1]&192)>>>6,hasRedundancy:(e[1]&48)>>>4,paddingValue:(e[1]&14)>>>1,isNonSyncSample:e[1]&1,degradationPriority:e[2]<<8|e[3]}};var Jr=Kr;var $r=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=t.flags[2]&1,n=t.flags[2]&4,a=t.flags[1]&1,s=t.flags[1]&2,o=t.flags[1]&4,l=t.flags[1]&8,u=i.getUint32(4),c=8,d;if(r){t.dataOffset=i.getInt32(c);c+=4}if(n&&u){d={flags:Jr(e.subarray(c,c+4))};c+=4;if(a){d.duration=i.getUint32(c);c+=4}if(s){d.size=i.getUint32(c);c+=4}if(l){if(t.version===1){d.compositionTimeOffset=i.getInt32(c)}else{d.compositionTimeOffset=i.getUint32(c)}c+=4}t.samples.push(d);u--}while(u--){d={};if(a){d.duration=i.getUint32(c);c+=4}if(s){d.size=i.getUint32(c);c+=4}if(o){d.flags=Jr(e.subarray(c,c+4));c+=4}if(l){if(t.version===1){d.compositionTimeOffset=i.getInt32(c)}else{d.compositionTimeOffset=i.getUint32(c)}c+=4}t.samples.push(d)}return t};var en=$r;var tn=Gr.toUnsigned;var rn=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:tn(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};if(t.version===1){t.baseMediaDecodeTime*=Math.pow(2,32);t.baseMediaDecodeTime+=tn(e[8]<<24|e[9]<<16|e[10]<<8|e[11])}return t};var nn=rn;var an=Gr.toUnsigned;var sn=Gr.toHexString;var on,ln,un,cn,dn,hn;on=function(e){var t={},i=qr(e,["moov","trak"]);return i.reduce(function(e,t){var i,r,n,a,s;i=qr(t,["tkhd"])[0];if(!i){return null}r=i[0];n=r===0?12:20;a=an(i[n]<<24|i[n+1]<<16|i[n+2]<<8|i[n+3]);s=qr(t,["mdia","mdhd"])[0];if(!s){return null}r=s[0];n=r===0?12:20;e[a]=an(s[n]<<24|s[n+1]<<16|s[n+2]<<8|s[n+3]);return e},t)};ln=function(e,t){var i,r,n;i=qr(t,["moof","traf"]);r=[].concat.apply([],i.map(function(t){return qr(t,["tfhd"]).map(function(i){var r,n,a;r=an(i[4]<<24|i[5]<<16|i[6]<<8|i[7]);n=e[r]||9e4;a=qr(t,["tfdt"]).map(function(e){var t,i;t=e[0];i=an(e[4]<<24|e[5]<<16|e[6]<<8|e[7]);if(t===1){i*=Math.pow(2,32);i+=an(e[8]<<24|e[9]<<16|e[10]<<8|e[11])}return i})[0];a=a||Infinity;return a/n})}));n=Math.min.apply(null,r);return isFinite(n)?n:0};un=function(e,t){var i=qr(t,["moof","traf"]);var r=0;var n=0;var a;if(i&&i.length){var s=qr(i[0],["tfhd"])[0];var o=qr(i[0],["trun"])[0];var l=qr(i[0],["tfdt"])[0];if(s){var u=Zr(s);a=u.trackId}if(l){var c=nn(l);r=c.baseMediaDecodeTime}if(o){var d=en(o);if(d.samples&&d.samples.length){n=d.samples[0].compositionTimeOffset||0}}}var h=e[a]||9e4;return(r+n)/h};cn=function(e){var t=qr(e,["moov","trak"]);var i=[];t.forEach(function(e){var t=qr(e,["mdia","hdlr"]);var r=qr(e,["tkhd"]);t.forEach(function(e,t){var n=Qr(e.subarray(8,12));var a=r[t];var s;var o;var l;if(n==="vide"){s=new DataView(a.buffer,a.byteOffset,a.byteLength);o=s.getUint8(0);l=o===0?s.getUint32(12):s.getUint32(20);i.push(l)}})});return i};hn=function(e){var t=e[0];var i=t===0?12:20;return an(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3])};dn=function(e){var t=qr(e,["moov","trak"]);var i=[];t.forEach(function(e){var t={};var r=qr(e,["tkhd"])[0];var n,a;if(r){n=new DataView(r.buffer,r.byteOffset,r.byteLength);a=n.getUint8(0);t.id=a===0?n.getUint32(12):n.getUint32(20)}var s=qr(e,["mdia","hdlr"])[0];if(s){var o=Qr(s.subarray(8,12));if(o==="vide"){t.type="video"}else if(o==="soun"){t.type="audio"}else{t.type=o}}var l=qr(e,["mdia","minf","stbl","stsd"])[0];if(l){var u=l.subarray(8);t.codec=Qr(u.subarray(4,8));var c=qr(u,[t.codec])[0];var d,h;if(c){if(/^[a-z]vc[1-9]$/i.test(t.codec)){d=c.subarray(78);h=Qr(d.subarray(4,8));if(h==="avcC"&&d.length>11){t.codec+=".";t.codec+=sn(d[9]);t.codec+=sn(d[10]);t.codec+=sn(d[11])}else{t.codec="avc1.4d400d"}}else if(/^mp4[a,v]$/i.test(t.codec)){d=c.subarray(28);h=Qr(d.subarray(4,8));if(h==="esds"&&d.length>20&&d[19]!==0){t.codec+="."+sn(d[19]);t.codec+="."+sn(d[20]>>>2&63).replace(/^0/,"")}else{t.codec="mp4a.40.2"}}}}var f=qr(e,["mdia","mdhd"])[0];if(f){t.timescale=hn(f)}i.push(t)});return i};var fn={findBox:qr,parseType:Qr,timescale:on,startTime:ln,compositionStartTime:un,videoTrackIds:cn,tracks:dn,getTimescaleFromMediaHeader:hn};var pn={FAILURE:2,TIMEOUT:-101,ABORTED:-102};var mn=function e(t){t.forEach(function(e){e.abort()})};var vn=function e(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}};var gn=function e(t){var i=t.target;var r=Date.now()-i.requestTime;var n={bandwidth:Infinity,bytesReceived:0,roundTripTime:r||0};n.bytesReceived=t.loaded;n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3);return n};var yn=function e(t,i){if(i.timedout){return{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:pn.TIMEOUT,xhr:i}}if(i.aborted){return{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:pn.ABORTED,xhr:i}}if(t){return{status:i.status,message:"HLS request errored at URL: "+i.uri,code:pn.FAILURE,xhr:i}}return null};var _n=function e(t,i){return function(e,r){var n=r.response;var a=yn(e,r);if(a){return i(a,t)}if(n.byteLength!==16){return i({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:pn.FAILURE,xhr:r},t)}var s=new DataView(n);t.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]);return i(null,t)}};var bn=function e(t){var i=t.segment,r=t.finishProcessingFn;return function(e,t){var n=t.response;var a=yn(e,t);if(a){return r(a,i)}if(n.byteLength===0){return r({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:pn.FAILURE,xhr:t},i)}i.map.bytes=new Uint8Array(t.response);var s=$t(i.map.bytes);if(s!=="mp4"){return r({status:t.status,message:"Found unsupported "+(s||"unknown")+" container for initialization segment at URL: "+t.uri,code:pn.FAILURE,internal:true,xhr:t},i)}var o=fn.tracks(i.map.bytes);o.forEach(function(e){i.map.tracks=i.map.tracks||{};if(i.map.tracks[e.type]){return}i.map.tracks[e.type]=e;if(e.id&&e.timescale){i.map.timescales=i.map.timescales||{};i.map.timescales[e.id]=e.timescale}});return r(null,i)}};var Mn=function e(t){var i=t.segment,r=t.finishProcessingFn,n=t.responseType;return function(e,t){var a=t.response;var s=yn(e,t);if(s){return r(s,i)}var o=n==="arraybuffer"||!t.responseText?t.response:Ai(t.responseText.substring(i.lastReachedChar||0));if(a.byteLength===0){return r({status:t.status,message:"Empty HLS segment content at URL: "+t.uri,code:pn.FAILURE,xhr:t},i)}i.stats=vn(t);if(i.key){i.encryptedBytes=new Uint8Array(o)}else{i.bytes=new Uint8Array(o)}return r(null,i)}};var Tn=function e(t){var i=t.segment,r=t.bytes,n=t.isPartial,a=t.trackInfoFn,s=t.timingInfoFn,o=t.videoSegmentTimingInfoFn,l=t.id3Fn,u=t.captionsFn,c=t.dataFn,d=t.doneFn;var h=i.map&&i.map.tracks||{};var f=Boolean(h.audio&&h.video);var p=s.bind(null,i,"audio","start");var m=s.bind(null,i,"audio","end");var v=s.bind(null,i,"video","start");var g=s.bind(null,i,"video","end");if(!n&&!i.lastReachedChar){var y=Ur(r,i.baseStartTime);if(y){a(i,{hasAudio:y.hasAudio,hasVideo:y.hasVideo,isMuxed:f});a=null;if(y.hasAudio&&!f){p(y.audioStart)}if(y.hasVideo){v(y.videoStart)}p=null;v=null}}ki({bytes:r,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,isPartial:n,remux:f,onData:function e(t){t.type=t.type==="combined"?"video":t.type;c(i,t)},onTrackInfo:function e(t){if(a){if(f){t.isMuxed=true}a(i,t)}},onAudioTimingInfo:function e(t){if(p&&typeof t.start!=="undefined"){p(t.start);p=null}if(m&&typeof t.end!=="undefined"){m(t.end)}},onVideoTimingInfo:function e(t){if(v&&typeof t.start!=="undefined"){v(t.start);v=null}if(g&&typeof t.end!=="undefined"){g(t.end)}},onVideoSegmentTimingInfo:function e(t){o(t)},onId3:function e(t,r){l(i,t,r)},onCaptions:function e(t){u(i,[t])},onDone:function e(t){if(!d||n){return}t.type=t.type==="combined"?"video":t.type;d(null,i,t)}})};var An=function e(t){var i=t.segment,r=t.bytes,n=t.isPartial,a=t.trackInfoFn,s=t.timingInfoFn,o=t.videoSegmentTimingInfoFn,l=t.id3Fn,u=t.captionsFn,c=t.dataFn,d=t.doneFn;var h=new Uint8Array(r);if(ri(h)){i.isFmp4=true;var f=i.map.tracks;var p={isFmp4:true,hasVideo:!!f.video,hasAudio:!!f.audio};if(f.audio&&f.audio.codec&&f.audio.codec!=="enca"){p.audioCodec=f.audio.codec}if(f.video&&f.video.codec&&f.video.codec!=="encv"){p.videoCodec=f.video.codec}if(f.video&&f.audio){p.isMuxed=true}a(i,p);var m=fn.startTime(i.map.timescales,h);if(p.hasAudio&&!p.isMuxed){s(i,"audio","start",m)}if(p.hasVideo){s(i,"video","start",m)}var v=function e(t){c(i,{data:r,type:p.hasAudio&&!p.isMuxed?"audio":"video"});if(t&&t.length){u(i,t)}d(null,i,{})};if(!f.video||!r.byteLength||!i.transmuxer){v();return}var g=r instanceof ArrayBuffer?r:r.buffer;var y=r instanceof ArrayBuffer?0:r.byteOffset;var _=function e(t){if(t.data.action!=="mp4Captions"){return}i.transmuxer.removeEventListener("message",e);var n=t.data.data;i.bytes=r=new Uint8Array(n,n.byteOffset||0,n.byteLength);v(t.data.captions)};i.transmuxer.addEventListener("message",_);i.transmuxer.postMessage({action:"pushMp4Captions",timescales:i.map.timescales,trackIds:[f.video.id],data:g,byteOffset:y,byteLength:r.byteLength},[g]);return}if(!i.transmuxer){d(null,i,{});return}if(typeof i.container==="undefined"){i.container=$t(h)}if(i.container!=="ts"&&i.container!=="aac"){a(i,{hasAudio:false,hasVideo:false});d(null,i,{});return}Tn({segment:i,bytes:r,isPartial:n,trackInfoFn:a,timingInfoFn:s,videoSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,dataFn:c,doneFn:d})};var wn=function e(t){var i=t.decryptionWorker,r=t.segment,n=t.trackInfoFn,a=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.id3Fn,l=t.captionsFn,u=t.dataFn,c=t.doneFn;var d=function e(t){if(t.data.source===r.requestId){i.removeEventListener("message",e);var d=t.data.decrypted;r.bytes=new Uint8Array(d.bytes,d.byteOffset,d.byteLength);An({segment:r,bytes:r.bytes,isPartial:false,trackInfoFn:n,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u,doneFn:c})}};i.addEventListener("message",d);var h;if(r.key.bytes.slice){h=r.key.bytes.slice()}else{h=new Uint32Array(Array.prototype.slice.call(r.key.bytes))}i.postMessage(Pe({source:r.requestId,encrypted:r.encryptedBytes,key:h,iv:r.key.iv}),[r.encryptedBytes.buffer,h.buffer])};var En=function e(t){var i=t.activeXhrs,r=t.decryptionWorker,n=t.trackInfoFn,a=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.id3Fn,l=t.captionsFn,u=t.dataFn,c=t.doneFn;var d=0;var h=false;return function(e,t){if(h){return}if(e){h=true;mn(i);return c(e,t)}d+=1;if(d===i.length){t.endOfAllRequests=Date.now();if(t.encryptedBytes){return wn({decryptionWorker:r,segment:t,trackInfoFn:n,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u,doneFn:c})}An({segment:t,bytes:t.bytes,isPartial:false,trackInfoFn:n,timingInfoFn:a,videoSegmentTimingInfoFn:s,id3Fn:o,captionsFn:l,dataFn:u,doneFn:c})}}};var xn=function e(t){var i=t.loadendState,r=t.abortFn;return function(e){var t=e.target;if(t.aborted&&r&&!i.calledAbortFn){r();i.calledAbortFn=true}}};var Sn=function e(t){var i=t.segment,r=t.progressFn,a=t.trackInfoFn,s=t.timingInfoFn,o=t.videoSegmentTimingInfoFn,l=t.id3Fn,u=t.captionsFn,c=t.dataFn,d=t.handlePartialData;return function(e){var t=e.target;if(t.aborted){return}if(d&&!i.key&&t.responseText&&t.responseText.length>=8){var h=Ai(t.responseText.substring(i.lastReachedChar||0));if(i.lastReachedChar||!ri(new Uint8Array(h))){i.lastReachedChar=t.responseText.length;An({segment:i,bytes:h,isPartial:true,trackInfoFn:a,timingInfoFn:s,videoSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,dataFn:c})}}i.stats=n.mergeOptions(i.stats,gn(e));if(!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived){i.stats.firstBytesReceivedAt=Date.now()}return r(e,i)}};var Dn=function e(t){var i=t.xhr,r=t.xhrOptions,a=t.decryptionWorker,s=t.segment,o=t.abortFn,l=t.progressFn,u=t.trackInfoFn,c=t.timingInfoFn,d=t.videoSegmentTimingInfoFn,h=t.id3Fn,f=t.captionsFn,p=t.dataFn,m=t.doneFn,v=t.handlePartialData;var g=[];var y=En({activeXhrs:g,decryptionWorker:a,trackInfoFn:u,timingInfoFn:c,videoSegmentTimingInfoFn:d,id3Fn:h,captionsFn:f,dataFn:p,doneFn:m});if(s.key&&!s.key.bytes){var _=n.mergeOptions(r,{uri:s.key.resolvedUri,responseType:"arraybuffer"});var b=_n(s,y);var M=i(_,b);g.push(M)}if(s.map&&!s.map.bytes){var T=n.mergeOptions(r,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:je(s.map)});var A=bn({segment:s,finishProcessingFn:y});var w=i(T,A);g.push(w)}var E=n.mergeOptions(r,{uri:s.resolvedUri,responseType:"arraybuffer",headers:je(s)});if(v){E.responseType="text";E.beforeSend=function(e){e.overrideMimeType("text/plain; charset=x-user-defined")}}var x=Mn({segment:s,finishProcessingFn:y,responseType:E.responseType});var S=i(E,x);S.addEventListener("progress",Sn({segment:s,progressFn:l,trackInfoFn:u,timingInfoFn:c,videoSegmentTimingInfoFn:d,id3Fn:h,captionsFn:f,dataFn:p,handlePartialData:v}));g.push(S);var D={};g.forEach(function(e){e.addEventListener("loadend",xn({loadendState:D,abortFn:o}))});return function(){return mn(g)}};var In=typeof e!=="undefined"?e:{},jn=typeof Symbol==="undefined"?"__target":Symbol(),Ln="application/javascript",Nn=In.BlobBuilder||In.WebKitBlobBuilder||In.MozBlobBuilder||In.MSBlobBuilder,Cn=In.URL||In.webkitURL||Cn&&Cn.msURL,On=In.Worker;function kn(e,t){return function i(r){var n=this;if(!t){return new On(e)}else if(On&&!r){var a=t.toString().replace(/^function.+?{/,"").slice(0,-1),s=Un(a);this[jn]=new On(s);Bn(this[jn],s);return this[jn]}else{var o={postMessage:function(e){if(n.onmessage){setTimeout(function(){n.onmessage({data:e,target:o})})}}};t.call(o);this.postMessage=function(e){setTimeout(function(){o.onmessage({data:e,target:n})})};this.isThisThread=true}}}if(On){var Pn,Rn=Un("self.onmessage = function () {}"),zn=new Uint8Array(1);try{Pn=new On(Rn);Pn.postMessage(zn,[zn.buffer])}catch(e){On=null}finally{Cn.revokeObjectURL(Rn);if(Pn){Pn.terminate()}}}function Un(e){try{return Cn.createObjectURL(new Blob([e],{type:Ln}))}catch(i){var t=new Nn;t.append(e);return Cn.createObjectURL(t.getBlob(type))}}function Bn(e,t){if(!e||!t)return;var i=e.terminate;e.objURL=t;e.terminate=function(){if(e.objURL)Cn.revokeObjectURL(e.objURL);i.call(e)}}var Fn=new kn("./transmuxer-worker.worker.js",function(e,t){var i=this;var r=function(){var e=function e(){this.init=function(){var e={};this.on=function(t,i){if(!e[t]){e[t]=[]}e[t]=e[t].concat(i)};this.off=function(t,i){var r;if(!e[t]){return false}r=e[t].indexOf(i);e[t]=e[t].slice();e[t].splice(r,1);return r>-1};this.trigger=function(t){var i,r,n,a;i=e[t];if(!i){return}if(arguments.length===2){n=i.length;for(r=0;r<n;++r){i[r].call(this,arguments[1])}}else{a=[];r=arguments.length;for(r=1;r<arguments.length;++r){a.push(arguments[r])}n=i.length;for(r=0;r<n;++r){i[r].apply(this,a)}}};this.dispose=function(){e={}}}};e.prototype.pipe=function(e){this.on("data",function(t){e.push(t)});this.on("done",function(t){e.flush(t)});this.on("partialdone",function(t){e.partialFlush(t)});this.on("endedtimeline",function(t){e.endTimeline(t)});this.on("reset",function(t){e.reset(t)});return e};e.prototype.push=function(e){this.trigger("data",e)};e.prototype.flush=function(e){this.trigger("done",e)};e.prototype.partialFlush=function(e){this.trigger("partialdone",e)};e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)};e.prototype.reset=function(e){this.trigger("reset",e)};var t=e;var r=Math.pow(2,32)-1;var n,a,s,o,l,u,c,d,h,f,p,m,v,g,y,_,b,M,T,A,w,E,x,S,D,I,j,L,N,C,O,k,P,R,z,U;(function(){var e;x={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if(typeof Uint8Array==="undefined"){return}for(e in x){if(x.hasOwnProperty(e)){x[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]}}S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]);I=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]);D=new Uint8Array([0,0,0,1]);j=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);L=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);N={video:j,audio:L};k=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);O=new Uint8Array([0,0,0,0,0,0,0,0]);P=new Uint8Array([0,0,0,0,0,0,0,0]);R=P;z=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);U=P;C=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])})();n=function e(t){var i=[],r=0,n,a,s;for(n=1;n<arguments.length;n++){i.push(arguments[n])}n=i.length;while(n--){r+=i[n].byteLength}a=new Uint8Array(r+8);s=new DataView(a.buffer,a.byteOffset,a.byteLength);s.setUint32(0,a.byteLength);a.set(t,4);for(n=0,r=8;n<i.length;n++){a.set(i[n],r);r+=i[n].byteLength}return a};a=function e(){return n(x.dinf,n(x.dref,k))};s=function e(t){return n(x.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))};o=function e(){return n(x.ftyp,S,D,S,I)};_=function e(t){return n(x.hdlr,N[t])};l=function e(t){return n(x.mdat,t)};y=function e(t){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,t.duration&255,85,196,0,0]);if(t.samplerate){i[12]=t.samplerate>>>24&255;i[13]=t.samplerate>>>16&255;i[14]=t.samplerate>>>8&255;i[15]=t.samplerate&255}return n(x.mdhd,i)};g=function e(t){return n(x.mdia,y(t),_(t.type),c(t))};u=function e(t){return n(x.mfhd,new Uint8Array([0,0,0,0,(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255]))};c=function e(t){return n(x.minf,t.type==="video"?n(x.vmhd,C):n(x.smhd,O),a(),M(t))};d=function e(t,i){var r=[],a=i.length;while(a--){r[a]=A(i[a])}return n.apply(null,[x.moof,u(t)].concat(r))};h=function e(t){var i=t.length,r=[];while(i--){r[i]=m(t[i])}return n.apply(null,[x.moov,p(4294967295)].concat(r).concat(f(t)))};f=function e(t){var i=t.length,r=[];while(i--){r[i]=w(t[i])}return n.apply(null,[x.mvex].concat(r))};p=function e(t){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return n(x.mvhd,i)};b=function e(t){var i=t.samples||[],r=new Uint8Array(4+i.length),a,s;for(s=0;s<i.length;s++){a=i[s].flags;r[s+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy}return n(x.sdtp,r)};M=function e(t){return n(x.stbl,T(t),n(x.stts,U),n(x.stsc,R),n(x.stsz,z),n(x.stco,P))};(function(){var e,t;T=function i(r){return n(x.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),r.type==="video"?e(r):t(r))};e=function e(t){var i=t.sps||[],r=t.pps||[],a=[],s=[],o,l;for(o=0;o<i.length;o++){a.push((i[o].byteLength&65280)>>>8);a.push(i[o].byteLength&255);a=a.concat(Array.prototype.slice.call(i[o]))}for(o=0;o<r.length;o++){s.push((r[o].byteLength&65280)>>>8);s.push(r[o].byteLength&255);s=s.concat(Array.prototype.slice.call(r[o]))}l=[x.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(t.width&65280)>>8,t.width&255,(t.height&65280)>>8,t.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),n(x.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([i.length],a,[r.length],s))),n(x.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))];if(t.sarRatio){var u=t.sarRatio[0],c=t.sarRatio[1];l.push(n(x.pasp,new Uint8Array([(u&4278190080)>>24,(u&16711680)>>16,(u&65280)>>8,u&255,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255])))}return n.apply(null,l)};t=function e(t){return n(x.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(t.channelcount&65280)>>8,t.channelcount&255,(t.samplesize&65280)>>8,t.samplesize&255,0,0,0,0,(t.samplerate&65280)>>8,t.samplerate&255,0,0]),s(t))}})();v=function e(t){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,0,(t.duration&4278190080)>>24,(t.duration&16711680)>>16,(t.duration&65280)>>8,t.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(t.width&65280)>>8,t.width&255,0,0,(t.height&65280)>>8,t.height&255,0,0]);return n(x.tkhd,i)};A=function e(t){var i,a,s,o,l,u,c;i=n(x.tfhd,new Uint8Array([0,0,0,58,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));u=Math.floor(t.baseMediaDecodeTime/(r+1));c=Math.floor(t.baseMediaDecodeTime%(r+1));a=n(x.tfdt,new Uint8Array([1,0,0,0,u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255]));l=32+20+8+16+8+8;if(t.type==="audio"){s=E(t,l);return n(x.traf,i,a,s)}o=b(t);s=E(t,o.length+l);return n(x.traf,i,a,s,o)};m=function e(t){t.duration=t.duration||4294967295;return n(x.trak,v(t),g(t))};w=function e(t){var i=new Uint8Array([0,0,0,0,(t.id&4278190080)>>24,(t.id&16711680)>>16,(t.id&65280)>>8,t.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);if(t.type!=="video"){i[i.length-1]=0}return n(x.trex,i)};(function(){var e,t,i;i=function e(t,i){var r=0,n=0,a=0,s=0;if(t.length){if(t[0].duration!==undefined){r=1}if(t[0].size!==undefined){n=2}if(t[0].flags!==undefined){a=4}if(t[0].compositionTimeOffset!==undefined){s=8}}return[0,0,r|n|a|s,1,(t.length&4278190080)>>>24,(t.length&16711680)>>>16,(t.length&65280)>>>8,t.length&255,(i&4278190080)>>>24,(i&16711680)>>>16,(i&65280)>>>8,i&255]};t=function e(t,r){var a,s,o,l,u,c;l=t.samples||[];r+=8+12+16*l.length;o=i(l,r);s=new Uint8Array(o.length+l.length*16);s.set(o);a=o.length;for(c=0;c<l.length;c++){u=l[c];s[a++]=(u.duration&4278190080)>>>24;s[a++]=(u.duration&16711680)>>>16;s[a++]=(u.duration&65280)>>>8;s[a++]=u.duration&255;s[a++]=(u.size&4278190080)>>>24;s[a++]=(u.size&16711680)>>>16;s[a++]=(u.size&65280)>>>8;s[a++]=u.size&255;s[a++]=u.flags.isLeading<<2|u.flags.dependsOn;s[a++]=u.flags.isDependedOn<<6|u.flags.hasRedundancy<<4|u.flags.paddingValue<<1|u.flags.isNonSyncSample;s[a++]=u.flags.degradationPriority&240<<8;s[a++]=u.flags.degradationPriority&15;s[a++]=(u.compositionTimeOffset&4278190080)>>>24;s[a++]=(u.compositionTimeOffset&16711680)>>>16;s[a++]=(u.compositionTimeOffset&65280)>>>8;s[a++]=u.compositionTimeOffset&255}return n(x.trun,s)};e=function e(t,r){var a,s,o,l,u,c;l=t.samples||[];r+=8+12+8*l.length;o=i(l,r);a=new Uint8Array(o.length+l.length*8);a.set(o);s=o.length;for(c=0;c<l.length;c++){u=l[c];a[s++]=(u.duration&4278190080)>>>24;a[s++]=(u.duration&16711680)>>>16;a[s++]=(u.duration&65280)>>>8;a[s++]=u.duration&255;a[s++]=(u.size&4278190080)>>>24;a[s++]=(u.size&16711680)>>>16;a[s++]=(u.size&65280)>>>8;a[s++]=u.size&255}return n(x.trun,a)};E=function i(r,n){if(r.type==="audio"){return e(r,n)}return t(r,n)}})();var B={ftyp:o,mdat:l,moof:d,moov:h,initSegment:function e(t){var i=o(),r=h(t),n;n=new Uint8Array(i.byteLength+r.byteLength);n.set(i);n.set(r,i.byteLength);return n}};var F=function e(t){var i,r,n=[],a=[];a.byteLength=0;a.nalCount=0;a.duration=0;n.byteLength=0;for(i=0;i<t.length;i++){r=t[i];if(r.nalUnitType==="access_unit_delimiter_rbsp"){if(n.length){n.duration=r.dts-n.dts;a.byteLength+=n.byteLength;a.nalCount+=n.length;a.duration+=n.duration;a.push(n)}n=[r];n.byteLength=r.data.byteLength;n.pts=r.pts;n.dts=r.dts}else{if(r.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"){n.keyFrame=true}n.duration=r.dts-n.dts;n.byteLength+=r.data.byteLength;n.push(r)}}if(a.length&&(!n.duration||n.duration<=0)){n.duration=a[a.length-1].duration}a.byteLength+=n.byteLength;a.nalCount+=n.length;a.duration+=n.duration;a.push(n);return a};var V=function e(t){var i,r,n=[],a=[];n.byteLength=0;n.nalCount=0;n.duration=0;n.pts=t[0].pts;n.dts=t[0].dts;a.byteLength=0;a.nalCount=0;a.duration=0;a.pts=t[0].pts;a.dts=t[0].dts;for(i=0;i<t.length;i++){r=t[i];if(r.keyFrame){if(n.length){a.push(n);a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration}n=[r];n.nalCount=r.length;n.byteLength=r.byteLength;n.pts=r.pts;n.dts=r.dts;n.duration=r.duration}else{n.duration+=r.duration;n.nalCount+=r.length;n.byteLength+=r.byteLength;n.push(r)}}if(a.length&&n.duration<=0){n.duration=a[a.length-1].duration}a.byteLength+=n.byteLength;a.nalCount+=n.nalCount;a.duration+=n.duration;a.push(n);return a};var G=function e(t){var i;if(!t[0][0].keyFrame&&t.length>1){i=t.shift();t.byteLength-=i.byteLength;t.nalCount-=i.nalCount;t[0][0].dts=i.dts;t[0][0].pts=i.pts;t[0][0].duration+=i.duration}return t};var H=function e(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}};var Q=function e(t,i){var r=H();r.dataOffset=i;r.compositionTimeOffset=t.pts-t.dts;r.duration=t.duration;r.size=4*t.length;r.size+=t.byteLength;if(t.keyFrame){r.flags.dependsOn=2;r.flags.isNonSyncSample=0}return r};var Y=function e(t,i){var r,n,a,s,o,l=i||0,u=[];for(r=0;r<t.length;r++){s=t[r];for(n=0;n<s.length;n++){o=s[n];a=Q(o,l);l+=a.size;u.push(a)}}return u};var W=function e(t){var i,r,n,a,s,o,l=0,u=t.byteLength,c=t.nalCount,d=u+4*c,h=new Uint8Array(d),f=new DataView(h.buffer);for(i=0;i<t.length;i++){a=t[i];for(r=0;r<a.length;r++){s=a[r];for(n=0;n<s.length;n++){o=s[n];f.setUint32(l,o.data.byteLength);l+=4;h.set(o.data,l);l+=o.data.byteLength}}}return h};var q=function e(t,i){var r,n=i||0,a=[];r=Q(t,n);a.push(r);return a};var X=function e(t){var i,r,n=0,a=t.byteLength,s=t.length,o=a+4*s,l=new Uint8Array(o),u=new DataView(l.buffer);for(i=0;i<t.length;i++){r=t[i];u.setUint32(n,r.data.byteLength);n+=4;l.set(r.data,n);n+=r.data.byteLength}return l};var Z={groupNalsIntoFrames:F,groupFramesIntoGops:V,extendFirstKeyFrame:G,generateSampleTable:Y,concatenateNalData:W,generateSampleTableForFrame:q,concatenateNalDataForFrame:X};var K=[33,16,5,32,164,27];var J=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];var $=function e(t){var i=[];while(t--){i.push(0)}return i};var ee=function e(t){return Object.keys(t).reduce(function(e,i){e[i]=new Uint8Array(t[i].reduce(function(e,t){return e.concat(t)},[]));return e},{})};var te;var ie=function e(){if(!te){var t={96000:[K,[227,64],$(154),[56]],88200:[K,[231],$(170),[56]],64000:[K,[248,192],$(240),[56]],48000:[K,[255,192],$(268),[55,148,128],$(54),[112]],44100:[K,[255,192],$(268),[55,163,128],$(84),[112]],32000:[K,[255,192],$(268),[55,234],$(226),[112]],24000:[K,[255,192],$(268),[55,255,128],$(268),[111,112],$(126),[224]],16000:[K,[255,192],$(268),[55,255,128],$(268),[111,255],$(269),[223,108],$(195),[1,192]],12000:[J,$(268),[3,127,248],$(268),[6,255,240],$(268),[13,255,224],$(268),[27,253,128],$(259),[56]],11025:[J,$(268),[3,127,248],$(268),[6,255,240],$(268),[13,255,224],$(268),[27,255,192],$(268),[55,175,128],$(108),[112]],8000:[J,$(268),[3,121,16],$(47),[7]]};te=ee(t)}return te};var re=9e4,ne,ae,se,oe,le,ue,ce;ne=function e(t){return t*re};ae=function e(t,i){return t*i};se=function e(t){return t/re};oe=function e(t,i){return t/i};le=function e(t,i){return ne(oe(t,i))};ue=function e(t,i){return ae(se(t),i)};ce=function e(t,i,r){return se(r?t:t-i)};var de={ONE_SECOND_IN_TS:re,secondsToVideoTs:ne,secondsToAudioTs:ae,videoTsToSeconds:se,audioTsToSeconds:oe,audioTsToVideoTs:le,videoTsToAudioTs:ue,metadataTsToSeconds:ce};var he=de.secondsToVideoTs;var fe=de.videoTsToSeconds;var pe=function e(t){var i,r,n=0;for(i=0;i<t.length;i++){r=t[i];n+=r.data.byteLength}return n};var me=function e(t,i,r,n){var a,s=0,o=0,l=0,u=0,c,d,h;if(!i.length){return}a=de.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate);s=Math.ceil(de.ONE_SECOND_IN_TS/(t.samplerate/1024));if(r&&n){o=a-Math.max(r,n);l=Math.floor(o/s);u=l*s}if(l<1||u>de.ONE_SECOND_IN_TS/2){return}c=ie()[t.samplerate];if(!c){c=i[0].data}for(d=0;d<l;d++){h=i[0];i.splice(0,0,{data:c,dts:h.dts-s,pts:h.pts-s})}t.baseMediaDecodeTime-=Math.floor(de.videoTsToAudioTs(u,t.samplerate))};var ve=function e(t,i,r){if(i.minSegmentDts>=r){return t}i.minSegmentDts=Infinity;return t.filter(function(e){if(e.dts>=r){i.minSegmentDts=Math.min(i.minSegmentDts,e.dts);i.minSegmentPts=i.minSegmentDts;return true}return false})};var ge=function e(t){var i,r,n=[];for(i=0;i<t.length;i++){r=t[i];n.push({size:r.data.byteLength,duration:1024})}return n};var ye=function e(t){var i,r,n=0,a=new Uint8Array(pe(t));for(i=0;i<t.length;i++){r=t[i];a.set(r.data,n);n+=r.data.byteLength}return a};var _e={prefixWithSilence:me,trimAdtsFramesByEarliestDts:ve,generateSampleTable:ge,concatenateFrameData:ye};var be=de.ONE_SECOND_IN_TS;var Me=function e(t,i){if(typeof i.pts==="number"){if(t.timelineStartInfo.pts===undefined){t.timelineStartInfo.pts=i.pts}if(t.minSegmentPts===undefined){t.minSegmentPts=i.pts}else{t.minSegmentPts=Math.min(t.minSegmentPts,i.pts)}if(t.maxSegmentPts===undefined){t.maxSegmentPts=i.pts}else{t.maxSegmentPts=Math.max(t.maxSegmentPts,i.pts)}}if(typeof i.dts==="number"){if(t.timelineStartInfo.dts===undefined){t.timelineStartInfo.dts=i.dts}if(t.minSegmentDts===undefined){t.minSegmentDts=i.dts}else{t.minSegmentDts=Math.min(t.minSegmentDts,i.dts)}if(t.maxSegmentDts===undefined){t.maxSegmentDts=i.dts}else{t.maxSegmentDts=Math.max(t.maxSegmentDts,i.dts)}}};var Te=function e(t){delete t.minSegmentDts;delete t.maxSegmentDts;delete t.minSegmentPts;delete t.maxSegmentPts};var Ae=function e(t,i){var r,n,a=t.minSegmentDts;if(!i){a-=t.timelineStartInfo.dts}r=t.timelineStartInfo.baseMediaDecodeTime;r+=a;r=Math.max(0,r);if(t.type==="audio"){n=t.samplerate/be;r*=n;r=Math.floor(r)}return r};var we={clearDtsInfo:Te,calculateTrackBaseMediaDecodeTime:Ae,collectDtsInfo:Me};var Ee=4,xe=128;var Se=function e(t){var i=0,r={payloadType:-1,payloadSize:0},n=0,a=0;while(i<t.byteLength){if(t[i]===xe){break}while(t[i]===255){n+=255;i++}n+=t[i++];while(t[i]===255){a+=255;i++}a+=t[i++];if(!r.payload&&n===Ee){var s=String.fromCharCode(t[i+3],t[i+4],t[i+5],t[i+6]);if(s==="GA94"){r.payloadType=n;r.payloadSize=a;r.payload=t.subarray(i,i+a);break}else{r.payload=void 0}}i+=a;n=0;a=0}return r};var De=function e(t){if(t.payload[0]!==181){return null}if((t.payload[1]<<8|t.payload[2])!==49){return null}if(String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])!=="GA94"){return null}if(t.payload[7]!==3){return null}return t.payload.subarray(8,t.payload.length-1)};var Ie=function e(t,i){var r=[],n,a,s,o;if(!(i[0]&64)){return r}a=i[0]&31;for(n=0;n<a;n++){s=n*3;o={type:i[s+2]&3,pts:t};if(i[s+2]&4){o.ccData=i[s+3]<<8|i[s+4];r.push(o)}}return r};var je=function e(t){var i=t.byteLength,r=[],n=1,a,s;while(n<i-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){r.push(n+2);n+=2}else{n++}}if(r.length===0){return t}a=i-r.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===r[0]){o++;r.shift()}s[n]=t[o]}return s};var Le={parseSei:Se,parseUserData:De,parseCaptionPackets:Ie,discardEmulationPreventionBytes:je,USER_DATA_REGISTERED_ITU_T_T35:Ee};var Ne=function e(){e.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new ze(0,0),new ze(0,1),new ze(1,0),new ze(1,1)];this.reset();this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data"));e.on("partialdone",this.trigger.bind(this,"partialdone"));e.on("done",this.trigger.bind(this,"done"))},this)};Ne.prototype=new t;Ne.prototype.push=function(e){var t,i,r;if(e.nalUnitType!=="sei_rbsp"){return}t=Le.parseSei(e.escapedRBSP);if(t.payloadType!==Le.USER_DATA_REGISTERED_ITU_T_T35){return}i=Le.parseUserData(t);if(!i){return}if(e.dts<this.latestDts_){this.ignoreNextEqualDts_=true;return}else if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--;if(!this.numSameDts_){this.ignoreNextEqualDts_=false}return}r=Le.parseCaptionPackets(e.pts,i);this.captionPackets_=this.captionPackets_.concat(r);if(this.latestDts_!==e.dts){this.numSameDts_=0}this.numSameDts_++;this.latestDts_=e.dts};Ne.prototype.flushCCStreams=function(e){this.ccStreams_.forEach(function(t){return e==="flush"?t.flush():t.partialFlush()},this)};Ne.prototype.flushStream=function(e){if(!this.captionPackets_.length){this.flushCCStreams(e);return}this.captionPackets_.forEach(function(e,t){e.presortIndex=t});this.captionPackets_.sort(function(e,t){if(e.pts===t.pts){return e.presortIndex-t.presortIndex}return e.pts-t.pts});this.captionPackets_.forEach(function(e){if(e.type<2){this.dispatchCea608Packet(e)}},this);this.captionPackets_.length=0;this.flushCCStreams(e)};Ne.prototype.flush=function(){return this.flushStream("flush")};Ne.prototype.partialFlush=function(){return this.flushStream("partialFlush")};Ne.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=false;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(e){e.reset()})};Ne.prototype.dispatchCea608Packet=function(e){if(this.setsTextOrXDSActive(e)){this.activeCea608Channel_[e.type]=null}else if(this.setsChannel1Active(e)){this.activeCea608Channel_[e.type]=0}else if(this.setsChannel2Active(e)){this.activeCea608Channel_[e.type]=1}if(this.activeCea608Channel_[e.type]===null){return}this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};Ne.prototype.setsChannel1Active=function(e){return(e.ccData&30720)===4096};Ne.prototype.setsChannel2Active=function(e){return(e.ccData&30720)===6144};Ne.prototype.setsTextOrXDSActive=function(e){return(e.ccData&28928)===256||(e.ccData&30974)===4138||(e.ccData&30974)===6186};var Ce={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496};var Oe=function e(t){if(t===null){return""}t=Ce[t]||t;return String.fromCharCode(t)};var ke=14;var Pe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152];var Re=function e(){var t=[],i=ke+1;while(i--){t.push("")}return t};var ze=function e(t,i){e.prototype.init.call(this);this.field_=t||0;this.dataChannel_=i||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(e){var t,i,r,n,a;t=e.ccData&32639;if(t===this.lastControlCode_){this.lastControlCode_=null;return}if((t&61440)===4096){this.lastControlCode_=t}else if(t!==this.PADDING_){this.lastControlCode_=null}r=t>>>8;n=t&255;if(t===this.PADDING_){return}else if(t===this.RESUME_CAPTION_LOADING_){this.mode_="popOn"}else if(t===this.END_OF_CAPTION_){this.mode_="popOn";this.clearFormatting(e.pts);this.flushDisplayed(e.pts);i=this.displayed_;this.displayed_=this.nonDisplayed_;this.nonDisplayed_=i;this.startPts_=e.pts}else if(t===this.ROLL_UP_2_ROWS_){this.rollUpRows_=2;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_3_ROWS_){this.rollUpRows_=3;this.setRollUp(e.pts)}else if(t===this.ROLL_UP_4_ROWS_){this.rollUpRows_=4;this.setRollUp(e.pts)}else if(t===this.CARRIAGE_RETURN_){this.clearFormatting(e.pts);this.flushDisplayed(e.pts);this.shiftRowsUp_();this.startPts_=e.pts}else if(t===this.BACKSPACE_){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}}else if(t===this.ERASE_DISPLAYED_MEMORY_){this.flushDisplayed(e.pts);this.displayed_=Re()}else if(t===this.ERASE_NON_DISPLAYED_MEMORY_){this.nonDisplayed_=Re()}else if(t===this.RESUME_DIRECT_CAPTIONING_){if(this.mode_!=="paintOn"){this.flushDisplayed(e.pts);this.displayed_=Re()}this.mode_="paintOn";this.startPts_=e.pts}else if(this.isSpecialCharacter(r,n)){r=(r&3)<<8;a=Oe(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isExtCharacter(r,n)){if(this.mode_==="popOn"){this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1)}else{this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1)}r=(r&3)<<8;a=Oe(r|n);this[this.mode_](e.pts,a);this.column_++}else if(this.isMidRowCode(r,n)){this.clearFormatting(e.pts);this[this.mode_](e.pts," ");this.column_++;if((n&14)===14){this.addFormatting(e.pts,["i"])}if((n&1)===1){this.addFormatting(e.pts,["u"])}}else if(this.isOffsetControlCode(r,n)){this.column_+=n&3}else if(this.isPAC(r,n)){var s=Pe.indexOf(t&7968);if(this.mode_==="rollUp"){if(s-this.rollUpRows_+1<0){s=this.rollUpRows_-1}this.setRollUp(e.pts,s)}if(s!==this.row_){this.clearFormatting(e.pts);this.row_=s}if(n&1&&this.formatting_.indexOf("u")===-1){this.addFormatting(e.pts,["u"])}if((t&16)===16){this.column_=((t&14)>>1)*4}if(this.isColorPAC(n)){if((n&14)===14){this.addFormatting(e.pts,["i"])}}}else if(this.isNormalChar(r)){if(n===0){n=null}a=Oe(r);a+=Oe(n);this[this.mode_](e.pts,a);this.column_+=a.length}}};ze.prototype=new t;ze.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){try{return e.trim()}catch(e){console.error("Skipping malformed caption.");return""}}).join("\n").replace(/^\n+|\n+$/g,"");if(t.length){this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})}};ze.prototype.reset=function(){this.mode_="popOn";this.topRow_=0;this.startPts_=0;this.displayed_=Re();this.nonDisplayed_=Re();this.lastControlCode_=null;this.column_=0;this.row_=ke;this.rollUpRows_=2;this.formatting_=[]};ze.prototype.setConstants=function(){if(this.dataChannel_===0){this.BASE_=16;this.EXT_=17;this.CONTROL_=(20|this.field_)<<8;this.OFFSET_=23}else if(this.dataChannel_===1){this.BASE_=24;this.EXT_=25;this.CONTROL_=(28|this.field_)<<8;this.OFFSET_=31}this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};ze.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63};ze.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63};ze.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47};ze.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35};ze.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127};ze.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127};ze.prototype.isNormalChar=function(e){return e>=32&&e<=127};ze.prototype.setRollUp=function(e,t){if(this.mode_!=="rollUp"){this.row_=ke;this.mode_="rollUp";this.flushDisplayed(e);this.nonDisplayed_=Re();this.displayed_=Re()}if(t!==undefined&&t!==this.row_){for(var i=0;i<this.rollUpRows_;i++){this.displayed_[t-i]=this.displayed_[this.row_-i];this.displayed_[this.row_-i]=""}}if(t===undefined){t=this.row_}this.topRow_=t-this.rollUpRows_+1};ze.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)};ze.prototype.clearFormatting=function(e){if(!this.formatting_.length){return}var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[];this[this.mode_](e,t)};ze.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t;this.nonDisplayed_[this.row_]=i};ze.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};ze.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++){this.displayed_[e]=""}for(e=this.row_+1;e<ke+1;e++){this.displayed_[e]=""}for(e=this.topRow_;e<this.row_;e++){this.displayed_[e]=this.displayed_[e+1]}this.displayed_[this.row_]=""};ze.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t;this.displayed_[this.row_]=i};var Ue={CaptionStream:Ne,Cea608Stream:ze};var Be={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21};var Fe=8589934592;var Ve=4294967296;var Ge="shared";var He=function e(t,i){var r=1;if(t>i){r=-1}while(Math.abs(i-t)>Ve){t+=r*Fe}return t};var Qe=function e(t){var i,r;e.prototype.init.call(this);this.type_=t||Ge;this.push=function(e){if(this.type_!==Ge&&e.type!==this.type_){return}if(r===undefined){r=e.dts}e.dts=He(e.dts,r);e.pts=He(e.pts,r);i=e.dts;this.trigger("data",e)};this.flush=function(){r=i;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.discontinuity=function(){r=void 0;i=void 0};this.reset=function(){this.discontinuity();this.trigger("reset")}};Qe.prototype=new t;var Ye={TimestampRolloverStream:Qe,handleRollover:He};var We=function e(t,i,r){var n,a="";for(n=i;n<r;n++){a+="%"+("00"+t[n].toString(16)).slice(-2)}return a},qe=function e(t,i,r){return decodeURIComponent(We(t,i,r))},Xe=function e(t,i,r){return unescape(We(t,i,r))},Ze=function e(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},Ke={TXXX:function e(t){var i;if(t.data[0]!==3){return}for(i=1;i<t.data.length;i++){if(t.data[i]===0){t.description=qe(t.data,1,i);t.value=qe(t.data,i+1,t.data.length).replace(/\0*$/,"");break}}t.data=t.value},WXXX:function e(t){var i;if(t.data[0]!==3){return}for(i=1;i<t.data.length;i++){if(t.data[i]===0){t.description=qe(t.data,1,i);t.url=qe(t.data,i+1,t.data.length);break}}},PRIV:function e(t){var i;for(i=0;i<t.data.length;i++){if(t.data[i]===0){t.owner=Xe(t.data,0,i);break}}t.privateData=t.data.subarray(i+1);t.data=t.privateData}},Je;Je=function e(t){var i={debug:!!(t&&t.debug),descriptor:t&&t.descriptor},r=0,n=[],a=0,s;Je.prototype.init.call(this);this.dispatchType=Be.METADATA_STREAM_TYPE.toString(16);if(i.descriptor){for(s=0;s<i.descriptor.length;s++){this.dispatchType+=("00"+i.descriptor[s].toString(16)).slice(-2)}}this.push=function(e){var t,s,o,l,u,c;if(e.type!=="timed-metadata"){return}if(e.dataAlignmentIndicator){a=0;n.length=0}if(n.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){if(i.debug){console.log("Skipping unrecognized metadata packet")}return}n.push(e);a+=e.data.byteLength;if(n.length===1){r=Ze(e.data.subarray(6,10));r+=10}if(a<r){return}t={data:new Uint8Array(r),frames:[],pts:n[0].pts,dts:n[0].dts};for(u=0;u<r;){t.data.set(n[0].data.subarray(0,r-u),u);u+=n[0].data.byteLength;a-=n[0].data.byteLength;n.shift()}s=10;if(t.data[5]&64){s+=4;s+=Ze(t.data.subarray(10,14));r-=Ze(t.data.subarray(16,20))}do{o=Ze(t.data.subarray(s+4,s+8));if(o<1){return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}c=String.fromCharCode(t.data[s],t.data[s+1],t.data[s+2],t.data[s+3]);l={id:c,data:t.data.subarray(s+10,s+o+10)};l.key=l.id;if(Ke[l.id]){Ke[l.id](l);if(l.owner==="com.apple.streaming.transportStreamTimestamp"){var d=l.data,h=(d[3]&1)<<30|d[4]<<22|d[5]<<14|d[6]<<6|d[7]>>>2;h*=4;h+=d[7]&3;l.timeStamp=h;if(t.pts===undefined&&t.dts===undefined){t.pts=l.timeStamp;t.dts=l.timeStamp}this.trigger("timestamp",l)}}t.frames.push(l);s+=10;s+=o}while(s<r);this.trigger("data",t)}};Je.prototype=new t;var $e=Je;var et=Ye.TimestampRolloverStream;var tt,it,rt;var nt=188,at=71;tt=function e(){var t=new Uint8Array(nt),i=0;tt.prototype.init.call(this);this.push=function(e){var r=0,n=nt,a;if(i){a=new Uint8Array(e.byteLength+i);a.set(t.subarray(0,i));a.set(e,i);i=0}else{a=e}while(n<a.byteLength){if(a[r]===at&&a[n]===at){this.trigger("data",a.subarray(r,n));r+=nt;n+=nt;continue}r++;n++}if(r<a.byteLength){t.set(a.subarray(r),0);i=a.byteLength-r}};this.flush=function(){if(i===nt&&t[0]===at){this.trigger("data",t);i=0}this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")};this.reset=function(){i=0;this.trigger("reset")}};tt.prototype=new t;it=function e(){var t,i,r,n;it.prototype.init.call(this);n=this;this.packetsWaitingForPmt=[];this.programMapTable=undefined;t=function e(t,n){var a=0;if(n.payloadUnitStartIndicator){a+=t[a]+1}if(n.type==="pat"){i(t.subarray(a),n)}else{r(t.subarray(a),n)}};i=function e(t,i){i.section_number=t[7];i.last_section_number=t[8];n.pmtPid=(t[10]&31)<<8|t[11];i.pmtPid=n.pmtPid};r=function e(t,i){var r,a,s,o;if(!(t[5]&1)){return}n.programMapTable={video:null,audio:null,"timed-metadata":{}};r=(t[1]&15)<<8|t[2];a=3+r-4;s=(t[10]&15)<<8|t[11];o=12+s;while(o<a){var l=t[o];var u=(t[o+1]&31)<<8|t[o+2];if(l===Be.H264_STREAM_TYPE&&n.programMapTable.video===null){n.programMapTable.video=u}else if(l===Be.ADTS_STREAM_TYPE&&n.programMapTable.audio===null){n.programMapTable.audio=u}else if(l===Be.METADATA_STREAM_TYPE){n.programMapTable["timed-metadata"][u]=l}o+=((t[o+3]&15)<<8|t[o+4])+5}i.programMapTable=n.programMapTable};this.push=function(e){var i={},r=4;i.payloadUnitStartIndicator=!!(e[1]&64);i.pid=e[1]&31;i.pid<<=8;i.pid|=e[2];if((e[3]&48)>>>4>1){r+=e[r]+1}if(i.pid===0){i.type="pat";t(e.subarray(r),i);this.trigger("data",i)}else if(i.pid===this.pmtPid){i.type="pmt";t(e.subarray(r),i);this.trigger("data",i);while(this.packetsWaitingForPmt.length){this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}}else if(this.programMapTable===undefined){this.packetsWaitingForPmt.push([e,r,i])}else{this.processPes_(e,r,i)}};this.processPes_=function(e,t,i){if(i.pid===this.programMapTable.video){i.streamType=Be.H264_STREAM_TYPE}else if(i.pid===this.programMapTable.audio){i.streamType=Be.ADTS_STREAM_TYPE}else{i.streamType=this.programMapTable["timed-metadata"][i.pid]}i.type="pes";i.data=e.subarray(t);this.trigger("data",i)}};it.prototype=new t;it.STREAM_TYPES={h264:27,adts:15};rt=function e(){var t=this,i={data:[],size:0},r={data:[],size:0},n={data:[],size:0},a,s=function e(t,i){var r;i.packetLength=6+(t[4]<<8|t[5]);i.dataAlignmentIndicator=(t[6]&4)!==0;r=t[7];if(r&192){i.pts=(t[9]&14)<<27|(t[10]&255)<<20|(t[11]&254)<<12|(t[12]&255)<<5|(t[13]&254)>>>3;i.pts*=4;i.pts+=(t[13]&6)>>>1;i.dts=i.pts;if(r&64){i.dts=(t[14]&14)<<27|(t[15]&255)<<20|(t[16]&254)<<12|(t[17]&255)<<5|(t[18]&254)>>>3;i.dts*=4;i.dts+=(t[18]&6)>>>1}}i.data=t.subarray(9+t[8])},o=function e(i,r,n){var a=new Uint8Array(i.size),o={type:r},l=0,u=0,c=false,d;if(!i.data.length||i.size<9){return}o.trackId=i.data[0].pid;for(l=0;l<i.data.length;l++){d=i.data[l];a.set(d.data,u);u+=d.data.byteLength}s(a,o);c=r==="video"||o.packetLength<=i.size;if(n||c){i.size=0;i.data.length=0}if(c){t.trigger("data",o)}};rt.prototype.init.call(this);this.push=function(e){({pat:function e(){},pes:function t(){var a,s;switch(e.streamType){case Be.H264_STREAM_TYPE:a=i;s="video";break;case Be.ADTS_STREAM_TYPE:a=r;s="audio";break;case Be.METADATA_STREAM_TYPE:a=n;s="timed-metadata";break;default:return}if(e.payloadUnitStartIndicator){o(a,s,true)}a.data.push(e);a.size+=e.data.byteLength},pmt:function i(){var r={type:"metadata",tracks:[]};a=e.programMapTable;if(a.video!==null){r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.video,codec:"avc",type:"video"})}if(a.audio!==null){r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+a.audio,codec:"adts",type:"audio"})}t.trigger("data",r)}})[e.type]()};this.reset=function(){i.size=0;i.data.length=0;r.size=0;r.data.length=0;this.trigger("reset")};this.flushStreams_=function(){o(i,"video");o(r,"audio");o(n,"timed-metadata")};this.flush=function(){this.flushStreams_();this.trigger("done")}};rt.prototype=new t;var st={PAT_PID:0,MP2T_PACKET_LENGTH:nt,TransportPacketStream:tt,TransportParseStream:it,ElementaryStream:rt,TimestampRolloverStream:et,CaptionStream:Ue.CaptionStream,Cea608Stream:Ue.Cea608Stream,MetadataStream:$e};for(var ot in Be){if(Be.hasOwnProperty(ot)){st[ot]=Be[ot]}}var lt=st;var ut=de.ONE_SECOND_IN_TS;var ct;var dt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];ct=function e(t){var i,r=0;ct.prototype.init.call(this);this.push=function(e){var n=0,a,s,o,l,u,c;if(!t){r=0}if(e.type!=="audio"){return}if(i){l=i;i=new Uint8Array(l.byteLength+e.data.byteLength);i.set(l);i.set(e.data,l.byteLength)}else{i=e.data}while(n+5<i.length){if(i[n]!==255||(i[n+1]&246)!==240){n++;continue}s=(~i[n+1]&1)*2;a=(i[n+3]&3)<<11|i[n+4]<<3|(i[n+5]&224)>>5;u=((i[n+6]&3)+1)*1024;c=u*ut/dt[(i[n+2]&60)>>>2];o=n+a;if(i.byteLength<o){return}this.trigger("data",{pts:e.pts+r*c,dts:e.dts+r*c,sampleCount:u,audioobjecttype:(i[n+2]>>>6&3)+1,channelcount:(i[n+2]&1)<<2|(i[n+3]&192)>>>6,samplerate:dt[(i[n+2]&60)>>>2],samplingfrequencyindex:(i[n+2]&60)>>>2,samplesize:16,data:i.subarray(n+7+s,o)});r++;if(i.byteLength===o){i=undefined;return}i=i.subarray(o)}};this.flush=function(){r=0;this.trigger("done")};this.reset=function(){i=void 0;this.trigger("reset")};this.endTimeline=function(){i=void 0;this.trigger("endedtimeline")}};ct.prototype=new t;var ht=ct;var ft;ft=function e(t){var i=t.byteLength,r=0,n=0;this.length=function(){return 8*i};this.bitsAvailable=function(){return 8*i+n};this.loadWord=function(){var e=t.byteLength-i,a=new Uint8Array(4),s=Math.min(4,i);if(s===0){throw new Error("no bytes available")}a.set(t.subarray(e,e+s));r=new DataView(a.buffer).getUint32(0);n=s*8;i-=s};this.skipBits=function(e){var t;if(n>e){r<<=e;n-=e}else{e-=n;t=Math.floor(e/8);e-=t*8;i-=t;this.loadWord();r<<=e;n-=e}};this.readBits=function(e){var t=Math.min(n,e),a=r>>>32-t;n-=t;if(n>0){r<<=t}else if(i>0){this.loadWord()}t=e-t;if(t>0){return a<<t|this.readBits(t)}return a};this.skipLeadingZeros=function(){var e;for(e=0;e<n;++e){if((r&2147483648>>>e)!==0){r<<=e;n-=e;return e}}this.loadWord();return e+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1};this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();if(1&e){return 1+e>>>1}return-1*(e>>>1)};this.readBoolean=function(){return this.readBits(1)===1};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var pt=ft;var mt,vt;var gt;vt=function e(){var t=0,i,r;vt.prototype.init.call(this);this.push=function(e){var n;if(!r){r=e.data}else{n=new Uint8Array(r.byteLength+e.data.byteLength);n.set(r);n.set(e.data,r.byteLength);r=n}var a=r.byteLength;for(;t<a-3;t++){if(r[t+2]===1){i=t+5;break}}while(i<a){switch(r[i]){case 0:if(r[i-1]!==0){i+=2;break}else if(r[i-2]!==0){i++;break}if(t+3!==i-2){this.trigger("data",r.subarray(t+3,i-2))}do{i++}while(r[i]!==1&&i<a);t=i-2;i+=3;break;case 1:if(r[i-1]!==0||r[i-2]!==0){i+=3;break}this.trigger("data",r.subarray(t+3,i-2));t=i-2;i+=3;break;default:i+=3;break}}r=r.subarray(t);i-=t;t=0};this.reset=function(){r=null;t=0;this.trigger("reset")};this.flush=function(){if(r&&r.byteLength>3){this.trigger("data",r.subarray(t+3))}r=null;t=0;this.trigger("done")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline")}};vt.prototype=new t;gt={100:true,110:true,122:true,244:true,44:true,83:true,86:true,118:true,128:true,138:true,139:true,134:true};mt=function e(){var t=new vt,i,r,n,a,s,o,l;mt.prototype.init.call(this);i=this;this.push=function(e){if(e.type!=="video"){return}r=e.trackId;n=e.pts;a=e.dts;t.push(e)};t.on("data",function(e){var t={trackId:r,pts:n,dts:a,data:e};switch(e[0]&31){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp";t.escapedRBSP=s(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp";t.escapedRBSP=s(e.subarray(1));t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp";break}i.trigger("data",t)});t.on("done",function(){i.trigger("done")});t.on("partialdone",function(){i.trigger("partialdone")});t.on("reset",function(){i.trigger("reset")});t.on("endedtimeline",function(){i.trigger("endedtimeline")});this.flush=function(){t.flush()};this.partialFlush=function(){t.partialFlush()};this.reset=function(){t.reset()};this.endTimeline=function(){t.endTimeline()};l=function e(t,i){var r=8,n=8,a,s;for(a=0;a<t;a++){if(n!==0){s=i.readExpGolomb();n=(r+s+256)%256}r=n===0?r:n}};s=function e(t){var i=t.byteLength,r=[],n=1,a,s;while(n<i-2){if(t[n]===0&&t[n+1]===0&&t[n+2]===3){r.push(n+2);n+=2}else{n++}}if(r.length===0){return t}a=i-r.length;s=new Uint8Array(a);var o=0;for(n=0;n<a;o++,n++){if(o===r[0]){o++;r.shift()}s[n]=t[o]}return s};o=function e(t){var i=0,r=0,n=0,a=0,s=1,o,u,c,d,h,f,p,m,v,g,y,_,b,M;o=new pt(t);u=o.readUnsignedByte();d=o.readUnsignedByte();c=o.readUnsignedByte();o.skipUnsignedExpGolomb();if(gt[u]){h=o.readUnsignedExpGolomb();if(h===3){o.skipBits(1)}o.skipUnsignedExpGolomb();o.skipUnsignedExpGolomb();o.skipBits(1);if(o.readBoolean()){y=h!==3?8:12;for(M=0;M<y;M++){if(o.readBoolean()){if(M<6){l(16,o)}else{l(64,o)}}}}}o.skipUnsignedExpGolomb();f=o.readUnsignedExpGolomb();if(f===0){o.readUnsignedExpGolomb()}else if(f===1){o.skipBits(1);o.skipExpGolomb();o.skipExpGolomb();p=o.readUnsignedExpGolomb();for(M=0;M<p;M++){o.skipExpGolomb()}}o.skipUnsignedExpGolomb();o.skipBits(1);m=o.readUnsignedExpGolomb();v=o.readUnsignedExpGolomb();g=o.readBits(1);if(g===0){o.skipBits(1)}o.skipBits(1);if(o.readBoolean()){i=o.readUnsignedExpGolomb();r=o.readUnsignedExpGolomb();n=o.readUnsignedExpGolomb();a=o.readUnsignedExpGolomb()}if(o.readBoolean()){if(o.readBoolean()){b=o.readUnsignedByte();switch(b){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:{_=[o.readUnsignedByte()<<8|o.readUnsignedByte(),o.readUnsignedByte()<<8|o.readUnsignedByte()];break}}if(_){s=_[0]/_[1]}}}return{profileIdc:u,levelIdc:c,profileCompatibility:d,width:Math.ceil(((m+1)*16-i*2-r*2)*s),height:(2-g)*(v+1)*16-n*2-a*2,sarRatio:_}}};mt.prototype=new t;var yt={H264Stream:mt,NalByteStream:vt};var _t=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];var bt=function e(t,i){var r=t[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9],n=t[i+5],a=(n&16)>>4;r=r>=0?r:0;if(a){return r+20}return r+10};var Mt=function e(t,i){if(t.length-i<10||t[i]!=="I".charCodeAt(0)||t[i+1]!=="D".charCodeAt(0)||t[i+2]!=="3".charCodeAt(0)){return i}i+=bt(t,i);return e(t,i)};var Tt=function e(t){var i=Mt(t,0);return t.length>=i+2&&(t[i]&255)===255&&(t[i+1]&240)===240&&(t[i+1]&22)===16};var At=function e(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]};var wt=function e(t,i,r){var n,a="";for(n=i;n<r;n++){a+="%"+("00"+t[n].toString(16)).slice(-2)}return a};var Et=function e(t,i,r){return unescape(wt(t,i,r))};var xt=function e(t,i){var r=(t[i+5]&224)>>5,n=t[i+4]<<3,a=t[i+3]&3<<11;return a|n|r};var St=function e(t,i){if(t[i]==="I".charCodeAt(0)&&t[i+1]==="D".charCodeAt(0)&&t[i+2]==="3".charCodeAt(0)){return"timed-metadata"}else if(t[i]&255===255&&(t[i+1]&240)===240){return"audio"}return null};var Dt=function e(t){var i=0;while(i+5<t.length){if(t[i]!==255||(t[i+1]&246)!==240){i++;continue}return _t[(t[i+2]&60)>>>2]}return null};var It=function e(t){var i,r,n,a;i=10;if(t[5]&64){i+=4;i+=At(t.subarray(10,14))}do{r=At(t.subarray(i+4,i+8));if(r<1){return null}a=String.fromCharCode(t[i],t[i+1],t[i+2],t[i+3]);if(a==="PRIV"){n=t.subarray(i+10,i+r+10);for(var s=0;s<n.byteLength;s++){if(n[s]===0){var o=Et(n,0,s);if(o==="com.apple.streaming.transportStreamTimestamp"){var l=n.subarray(s+1);var u=(l[3]&1)<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;u*=4;u+=l[7]&3;return u}break}}}i+=10;i+=r}while(i<t.byteLength);return null};var jt={isLikelyAacData:Tt,parseId3TagSize:bt,parseAdtsSize:xt,parseType:St,parseSampleRate:Dt,parseAacTimestamp:It};var Lt;Lt=function e(){var t=new Uint8Array,i=0;Lt.prototype.init.call(this);this.setTimestamp=function(e){i=e};this.push=function(e){var r=0,n=0,a,s,o,l;if(t.length){l=t.length;t=new Uint8Array(e.byteLength+l);t.set(t.subarray(0,l));t.set(e,l)}else{t=e}while(t.length-n>=3){if(t[n]==="I".charCodeAt(0)&&t[n+1]==="D".charCodeAt(0)&&t[n+2]==="3".charCodeAt(0)){if(t.length-n<10){break}r=jt.parseId3TagSize(t,n);if(n+r>t.length){break}s={type:"timed-metadata",data:t.subarray(n,n+r)};this.trigger("data",s);n+=r;continue}else if((t[n]&255)===255&&(t[n+1]&240)===240){if(t.length-n<7){break}r=jt.parseAdtsSize(t,n);if(n+r>t.length){break}o={type:"audio",data:t.subarray(n,n+r),pts:i,dts:i};this.trigger("data",o);n+=r;continue}n++}a=t.length-n;if(a>0){t=t.subarray(n)}else{t=new Uint8Array}};this.reset=function(){t=new Uint8Array;this.trigger("reset")};this.endTimeline=function(){t=new Uint8Array;this.trigger("endedtimeline")}};Lt.prototype=new t;var Nt=Lt;var Ct=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"];var Ot=Ct;var kt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"];var Pt=kt;var Rt=yt.H264Stream;var zt=jt.isLikelyAacData;var Ut=de.ONE_SECOND_IN_TS;var Bt,Ft,Vt,Gt;var Ht=function e(t,i){var r;if(t.length!==i.length){return false}for(r=0;r<t.length;r++){if(t[r]!==i[r]){return false}}return true};var Qt=function e(t,i,r,n,a,s){var o=r-i,l=n-i,u=a-r;return{start:{dts:t,pts:t+o},end:{dts:t+l,pts:t+u},prependedContentDuration:s,baseMediaDecodeTime:t}};Ft=function e(t,i){var r=[],n=0,a=0,s=0,o=Infinity;i=i||{};Ft.prototype.init.call(this);this.push=function(e){we.collectDtsInfo(t,e);if(t){Ot.forEach(function(i){t[i]=e[i]})}r.push(e)};this.setEarliestDts=function(e){a=e};this.setVideoBaseMediaDecodeTime=function(e){o=e};this.setAudioAppendStart=function(e){s=e};this.flush=function(){var e,l,u,c,d;if(r.length===0){this.trigger("done","AudioSegmentStream");return}e=_e.trimAdtsFramesByEarliestDts(r,t,a);t.baseMediaDecodeTime=we.calculateTrackBaseMediaDecodeTime(t,i.keepOriginalTimestamps);_e.prefixWithSilence(t,e,s,o);t.samples=_e.generateSampleTable(e);u=B.mdat(_e.concatenateFrameData(e));r=[];l=B.moof(n,[t]);c=new Uint8Array(l.byteLength+u.byteLength);n++;c.set(l);c.set(u,l.byteLength);we.clearDtsInfo(t);d=Math.ceil(Ut*1024/t.samplerate);if(e.length){this.trigger("timingInfo",{start:e[0].pts,end:e[0].pts+e.length*d})}this.trigger("data",{track:t,boxes:c});this.trigger("done","AudioSegmentStream")};this.reset=function(){we.clearDtsInfo(t);r=[];this.trigger("reset")}};Ft.prototype=new t;Bt=function e(t,i){var r=0,n=[],a=[],s,o;i=i||{};Bt.prototype.init.call(this);delete t.minPTS;this.gopCache_=[];this.push=function(e){we.collectDtsInfo(t,e);if(e.nalUnitType==="seq_parameter_set_rbsp"&&!s){s=e.config;t.sps=[e.data];Pt.forEach(function(e){t[e]=s[e]},this)}if(e.nalUnitType==="pic_parameter_set_rbsp"&&!o){o=e.data;t.pps=[e.data]}n.push(e)};this.flush=function(){var e,s,o,l,u,c,d=0,h,f;while(n.length){if(n[0].nalUnitType==="access_unit_delimiter_rbsp"){break}n.shift()}if(n.length===0){this.resetStream_();this.trigger("done","VideoSegmentStream");return}e=Z.groupNalsIntoFrames(n);o=Z.groupFramesIntoGops(e);if(!o[0][0].keyFrame){s=this.getGopForFusion_(n[0],t);if(s){d=s.duration;o.unshift(s);o.byteLength+=s.byteLength;o.nalCount+=s.nalCount;o.pts=s.pts;o.dts=s.dts;o.duration+=s.duration}else{o=Z.extendFirstKeyFrame(o)}}if(a.length){var p;if(i.alignGopsAtEnd){p=this.alignGopsAtEnd_(o)}else{p=this.alignGopsAtStart_(o)}if(!p){this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);n=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}we.clearDtsInfo(t);o=p}we.collectDtsInfo(t,o);t.samples=Z.generateSampleTable(o);u=B.mdat(Z.concatenateNalData(o));t.baseMediaDecodeTime=we.calculateTrackBaseMediaDecodeTime(t,i.keepOriginalTimestamps);this.trigger("processedGopsInfo",o.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}));h=o[0];f=o[o.length-1];this.trigger("segmentTimingInfo",Qt(t.baseMediaDecodeTime,h.dts,h.pts,f.dts+f.duration,f.pts+f.duration,d));this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration});this.gopCache_.unshift({gop:o.pop(),pps:t.pps,sps:t.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);n=[];this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime);this.trigger("timelineStartInfo",t.timelineStartInfo);l=B.moof(r,[t]);c=new Uint8Array(l.byteLength+u.byteLength);r++;c.set(l);c.set(u,l.byteLength);this.trigger("data",{track:t,boxes:c});this.resetStream_();this.trigger("done","VideoSegmentStream")};this.reset=function(){this.resetStream_();n=[];this.gopCache_.length=0;a.length=0;this.trigger("reset")};this.resetStream_=function(){we.clearDtsInfo(t);s=undefined;o=undefined};this.getGopForFusion_=function(e){var i=45e3,r=1e4,n=Infinity,a,s,o,l,u;for(u=0;u<this.gopCache_.length;u++){l=this.gopCache_[u];o=l.gop;if(!(t.pps&&Ht(t.pps[0],l.pps[0]))||!(t.sps&&Ht(t.sps[0],l.sps[0]))){continue}if(o.dts<t.timelineStartInfo.dts){continue}a=e.dts-o.dts-o.duration;if(a>=-r&&a<=i){if(!s||n>a){s=l;n=a}}}if(s){return s.gop}return null};this.alignGopsAtStart_=function(e){var t,i,r,n,s,o,l,u;s=e.byteLength;o=e.nalCount;l=e.duration;t=i=0;while(t<a.length&&i<e.length){r=a[t];n=e[i];if(r.pts===n.pts){break}if(n.pts>r.pts){t++;continue}i++;s-=n.byteLength;o-=n.nalCount;l-=n.duration}if(i===0){return e}if(i===e.length){return null}u=e.slice(i);u.byteLength=s;u.duration=l;u.nalCount=o;u.pts=u[0].pts;u.dts=u[0].dts;return u};this.alignGopsAtEnd_=function(e){var t,i,r,n,s,o;t=a.length-1;i=e.length-1;s=null;o=false;while(t>=0&&i>=0){r=a[t];n=e[i];if(r.pts===n.pts){o=true;break}if(r.pts>n.pts){t--;continue}if(t===a.length-1){s=i}i--}if(!o&&s===null){return null}var l;if(o){l=i}else{l=s}if(l===0){return e}var u=e.slice(l);var c=u.reduce(function(e,t){e.byteLength+=t.byteLength;e.duration+=t.duration;e.nalCount+=t.nalCount;return e},{byteLength:0,duration:0,nalCount:0});u.byteLength=c.byteLength;u.duration=c.duration;u.nalCount=c.nalCount;u.pts=u[0].pts;u.dts=u[0].dts;return u};this.alignGopsWith=function(e){a=e}};Bt.prototype=new t;Gt=function e(t,i){this.numberOfTracks=0;this.metadataStream=i;t=t||{};if(typeof t.remux!=="undefined"){this.remuxTracks=!!t.remux}else{this.remuxTracks=true}if(typeof t.keepOriginalTimestamps==="boolean"){this.keepOriginalTimestamps=t.keepOriginalTimestamps}else{this.keepOriginalTimestamps=false}this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.pendingBytes=0;this.emittedTracks=0;Gt.prototype.init.call(this);this.push=function(e){if(e.text){return this.pendingCaptions.push(e)}if(e.frames){return this.pendingMetadata.push(e)}this.pendingTracks.push(e.track);this.pendingBytes+=e.boxes.byteLength;if(e.track.type==="video"){this.videoTrack=e.track;this.pendingBoxes.push(e.boxes)}if(e.track.type==="audio"){this.audioTrack=e.track;this.pendingBoxes.unshift(e.boxes)}}};Gt.prototype=new t;Gt.prototype.flush=function(e){var t=0,i={captions:[],captionStreams:{},metadata:[],info:{}},r,n,a,s=0,o;if(this.pendingTracks.length<this.numberOfTracks){if(e!=="VideoSegmentStream"&&e!=="AudioSegmentStream"){return}else if(this.remuxTracks){return}else if(this.pendingTracks.length===0){this.emittedTracks++;if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}return}}if(this.videoTrack){s=this.videoTrack.timelineStartInfo.pts;Pt.forEach(function(e){i.info[e]=this.videoTrack[e]},this)}else if(this.audioTrack){s=this.audioTrack.timelineStartInfo.pts;Ot.forEach(function(e){i.info[e]=this.audioTrack[e]},this)}if(this.videoTrack||this.audioTrack){if(this.pendingTracks.length===1){i.type=this.pendingTracks[0].type}else{i.type="combined"}this.emittedTracks+=this.pendingTracks.length;a=B.initSegment(this.pendingTracks);i.initSegment=new Uint8Array(a.byteLength);i.initSegment.set(a);i.data=new Uint8Array(this.pendingBytes);for(o=0;o<this.pendingBoxes.length;o++){i.data.set(this.pendingBoxes[o],t);t+=this.pendingBoxes[o].byteLength}for(o=0;o<this.pendingCaptions.length;o++){r=this.pendingCaptions[o];r.startTime=de.metadataTsToSeconds(r.startPts,s,this.keepOriginalTimestamps);r.endTime=de.metadataTsToSeconds(r.endPts,s,this.keepOriginalTimestamps);i.captionStreams[r.stream]=true;i.captions.push(r)}for(o=0;o<this.pendingMetadata.length;o++){n=this.pendingMetadata[o];n.cueTime=de.metadataTsToSeconds(n.pts,s,this.keepOriginalTimestamps);i.metadata.push(n)}i.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingCaptions.length=0;this.pendingBytes=0;this.pendingMetadata.length=0;this.trigger("data",i);for(o=0;o<i.captions.length;o++){r=i.captions[o];this.trigger("caption",r)}for(o=0;o<i.metadata.length;o++){n=i.metadata[o];this.trigger("id3Frame",n)}}if(this.emittedTracks>=this.numberOfTracks){this.trigger("done");this.emittedTracks=0}};Gt.prototype.setRemux=function(e){this.remuxTracks=e};Vt=function e(t){var i=this,r=true,n,a;Vt.prototype.init.call(this);t=t||{};this.baseMediaDecodeTime=t.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e;e.type="aac";e.metadataStream=new lt.MetadataStream;e.aacStream=new Nt;e.audioTimestampRolloverStream=new lt.TimestampRolloverStream("audio");e.timedMetadataTimestampRolloverStream=new lt.TimestampRolloverStream("timed-metadata");e.adtsStream=new ht;e.coalesceStream=new Gt(t,e.metadataStream);e.headOfPipeline=e.aacStream;e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream);e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream);e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)});e.aacStream.on("data",function(r){if(r.type!=="timed-metadata"&&r.type!=="audio"||e.audioSegmentStream){return}a=a||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"};e.coalesceStream.numberOfTracks++;e.audioSegmentStream=new Ft(a,t);e.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo"));e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream);i.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!n})});e.coalesceStream.on("data",this.trigger.bind(this,"data"));e.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var e={};this.transmuxPipeline_=e;e.type="ts";e.metadataStream=new lt.MetadataStream;e.packetStream=new lt.TransportPacketStream;e.parseStream=new lt.TransportParseStream;e.elementaryStream=new lt.ElementaryStream;e.timestampRolloverStream=new lt.TimestampRolloverStream;e.adtsStream=new ht;e.h264Stream=new Rt;e.captionStream=new lt.CaptionStream;e.coalesceStream=new Gt(t,e.metadataStream);e.headOfPipeline=e.packetStream;e.packetStream.pipe(e.parseStream).pipe(e.elementaryStream).pipe(e.timestampRolloverStream);e.timestampRolloverStream.pipe(e.h264Stream);e.timestampRolloverStream.pipe(e.adtsStream);e.timestampRolloverStream.pipe(e.metadataStream).pipe(e.coalesceStream);e.h264Stream.pipe(e.captionStream).pipe(e.coalesceStream);e.elementaryStream.on("data",function(r){var s;if(r.type==="metadata"){s=r.tracks.length;while(s--){if(!n&&r.tracks[s].type==="video"){n=r.tracks[s];n.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime}else if(!a&&r.tracks[s].type==="audio"){a=r.tracks[s];a.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime}}if(n&&!e.videoSegmentStream){e.coalesceStream.numberOfTracks++;e.videoSegmentStream=new Bt(n,t);e.videoSegmentStream.on("timelineStartInfo",function(r){if(a&&!t.keepOriginalTimestamps){a.timelineStartInfo=r;e.audioSegmentStream.setEarliestDts(r.dts-i.baseMediaDecodeTime)}});e.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo"));e.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo"));e.videoSegmentStream.on("baseMediaDecodeTime",function(t){if(a){e.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}});e.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo"));e.h264Stream.pipe(e.videoSegmentStream).pipe(e.coalesceStream)}if(a&&!e.audioSegmentStream){e.coalesceStream.numberOfTracks++;e.audioSegmentStream=new Ft(a,t);e.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo"));e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream)}i.trigger("trackinfo",{hasAudio:!!a,hasVideo:!!n})}});e.coalesceStream.on("data",this.trigger.bind(this,"data"));e.coalesceStream.on("id3Frame",function(t){t.dispatchType=e.metadataStream.dispatchType;i.trigger("id3Frame",t)});e.coalesceStream.on("caption",this.trigger.bind(this,"caption"));e.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(e){var i=this.transmuxPipeline_;if(!t.keepOriginalTimestamps){this.baseMediaDecodeTime=e}if(a){a.timelineStartInfo.dts=undefined;a.timelineStartInfo.pts=undefined;we.clearDtsInfo(a);if(i.audioTimestampRolloverStream){i.audioTimestampRolloverStream.discontinuity()}}if(n){if(i.videoSegmentStream){i.videoSegmentStream.gopCache_=[]}n.timelineStartInfo.dts=undefined;n.timelineStartInfo.pts=undefined;we.clearDtsInfo(n);i.captionStream.reset()}if(i.timestampRolloverStream){i.timestampRolloverStream.discontinuity()}};this.setAudioAppendStart=function(e){if(a){this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)}};this.setRemux=function(e){var i=this.transmuxPipeline_;t.remux=e;if(i&&i.coalesceStream){i.coalesceStream.setRemux(e)}};this.alignGopsWith=function(e){if(n&&this.transmuxPipeline_.videoSegmentStream){this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)}};this.push=function(e){if(r){var t=zt(e);if(t&&this.transmuxPipeline_.type!=="aac"){this.setupAacPipeline()}else if(!t&&this.transmuxPipeline_.type!=="ts"){this.setupTsPipeline()}r=false}this.transmuxPipeline_.headOfPipeline.push(e)};this.flush=function(){r=true;this.transmuxPipeline_.headOfPipeline.flush()};this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()};this.reset=function(){if(this.transmuxPipeline_.headOfPipeline){this.transmuxPipeline_.headOfPipeline.reset()}};this.resetCaptions=function(){if(this.transmuxPipeline_.captionStream){this.transmuxPipeline_.captionStream.reset()}}};Vt.prototype=new t;var Yt={Transmuxer:Vt,VideoSegmentStream:Bt,AudioSegmentStream:Ft,AUDIO_PROPERTIES:Ot,VIDEO_PROPERTIES:Pt,generateVideoSegmentTimingInfo:Qt};var Wt=Yt.Transmuxer;var qt={Adts:ht,h264:yt};var Xt=de.ONE_SECOND_IN_TS;var Zt=function e(t,i){var r=[],n=0,a=0,s=0,o=Infinity,l=null,u=null;i=i||{};e.prototype.init.call(this);this.push=function(e){we.collectDtsInfo(t,e);if(t){Ot.forEach(function(i){t[i]=e[i]})}r.push(e)};this.setEarliestDts=function(e){a=e};this.setVideoBaseMediaDecodeTime=function(e){o=e};this.setAudioAppendStart=function(e){s=e};this.processFrames_=function(){var e,c,d,h,f;if(r.length===0){return}e=_e.trimAdtsFramesByEarliestDts(r,t,a);if(e.length===0){return}t.baseMediaDecodeTime=we.calculateTrackBaseMediaDecodeTime(t,i.keepOriginalTimestamps);_e.prefixWithSilence(t,e,s,o);t.samples=_e.generateSampleTable(e);d=B.mdat(_e.concatenateFrameData(e));r=[];c=B.moof(n,[t]);n++;t.initSegment=B.initSegment([t]);h=new Uint8Array(c.byteLength+d.byteLength);h.set(c);h.set(d,c.byteLength);we.clearDtsInfo(t);if(l===null){u=l=e[0].pts}u+=e.length*(Xt*1024/t.samplerate);f={start:l};this.trigger("timingInfo",f);this.trigger("data",{track:t,boxes:h})};this.flush=function(){this.processFrames_();this.trigger("timingInfo",{start:l,end:u});this.resetTiming_();this.trigger("done","AudioSegmentStream")};this.partialFlush=function(){this.processFrames_();this.trigger("partialdone","AudioSegmentStream")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline","AudioSegmentStream")};this.resetTiming_=function(){we.clearDtsInfo(t);l=null;u=null};this.reset=function(){this.resetTiming_();r=[];this.trigger("reset")}};Zt.prototype=new t;var Kt=Zt;var Jt=function e(t,i){var r=0,n=[],a=[],s,o,l=null,u=null,c,d=true;i=i||{};e.prototype.init.call(this);this.push=function(e){we.collectDtsInfo(t,e);if(typeof t.timelineStartInfo.dts==="undefined"){t.timelineStartInfo.dts=e.dts}if(e.nalUnitType==="seq_parameter_set_rbsp"&&!s){s=e.config;t.sps=[e.data];Pt.forEach(function(e){t[e]=s[e]},this)}if(e.nalUnitType==="pic_parameter_set_rbsp"&&!o){o=e.data;t.pps=[e.data]}n.push(e)};this.processNals_=function(e){var s;n=a.concat(n);while(n.length){if(n[0].nalUnitType==="access_unit_delimiter_rbsp"){break}n.shift()}if(n.length===0){return}var o=Z.groupNalsIntoFrames(n);if(!o.length){return}a=o[o.length-1];if(e){o.pop();o.duration-=a.duration;o.nalCount-=a.length;o.byteLength-=a.byteLength}if(!o.length){n=[];return}this.trigger("timelineStartInfo",t.timelineStartInfo);if(d){c=Z.groupFramesIntoGops(o);if(!c[0][0].keyFrame){c=Z.extendFirstKeyFrame(c);if(!c[0][0].keyFrame){n=[].concat.apply([],o).concat(a);a=[];return}o=[].concat.apply([],c);o.duration=c.duration}d=false}if(l===null){l=o[0].pts;u=l}u+=o.duration;this.trigger("timingInfo",{start:l,end:u});for(s=0;s<o.length;s++){var h=o[s];t.samples=Z.generateSampleTableForFrame(h);var f=B.mdat(Z.concatenateNalDataForFrame(h));we.clearDtsInfo(t);we.collectDtsInfo(t,h);t.baseMediaDecodeTime=we.calculateTrackBaseMediaDecodeTime(t,i.keepOriginalTimestamps);var p=B.moof(r,[t]);r++;t.initSegment=B.initSegment([t]);var m=new Uint8Array(p.byteLength+f.byteLength);m.set(p);m.set(f,p.byteLength);this.trigger("data",{track:t,boxes:m,sequence:r,videoFrameDts:h.dts,videoFramePts:h.pts})}n=[]};this.resetTimingAndConfig_=function(){s=undefined;o=undefined;l=null;u=null};this.partialFlush=function(){this.processNals_(true);this.trigger("partialdone","VideoSegmentStream")};this.flush=function(){this.processNals_(false);this.resetTimingAndConfig_();this.trigger("done","VideoSegmentStream")};this.endTimeline=function(){this.flush();this.trigger("endedtimeline","VideoSegmentStream")};this.reset=function(){this.resetTimingAndConfig_();a=[];n=[];d=true;this.trigger("reset")}};Jt.prototype=new t;var $t=Jt;var ei=jt.isLikelyAacData;var ti=function e(i){i.prototype=new t;i.prototype.init.call(i);return i};var ii=function e(t){var i={type:"ts",tracks:{audio:null,video:null},packet:new lt.TransportPacketStream,parse:new lt.TransportParseStream,elementary:new lt.ElementaryStream,timestampRollover:new lt.TimestampRolloverStream,adts:new qt.Adts,h264:new qt.h264.H264Stream,captionStream:new lt.CaptionStream,metadataStream:new lt.MetadataStream};i.headOfPipeline=i.packet;i.packet.pipe(i.parse).pipe(i.elementary).pipe(i.timestampRollover);i.timestampRollover.pipe(i.h264);i.h264.pipe(i.captionStream);i.timestampRollover.pipe(i.metadataStream);i.timestampRollover.pipe(i.adts);i.elementary.on("data",function(e){if(e.type!=="metadata"){return}for(var r=0;r<e.tracks.length;r++){if(!i.tracks[e.tracks[r].type]){i.tracks[e.tracks[r].type]=e.tracks[r];i.tracks[e.tracks[r].type].timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime}}if(i.tracks.video&&!i.videoSegmentStream){i.videoSegmentStream=new $t(i.tracks.video,t);i.videoSegmentStream.on("timelineStartInfo",function(e){if(i.tracks.audio&&!t.keepOriginalTimestamps){i.audioSegmentStream.setEarliestDts(e.dts-t.baseMediaDecodeTime)}});i.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo"));i.videoSegmentStream.on("data",function(e){i.trigger("data",{type:"video",data:e})});i.videoSegmentStream.on("done",i.trigger.bind(i,"done"));i.videoSegmentStream.on("partialdone",i.trigger.bind(i,"partialdone"));i.videoSegmentStream.on("endedtimeline",i.trigger.bind(i,"endedtimeline"));i.h264.pipe(i.videoSegmentStream)}if(i.tracks.audio&&!i.audioSegmentStream){i.audioSegmentStream=new Kt(i.tracks.audio,t);i.audioSegmentStream.on("data",function(e){i.trigger("data",{type:"audio",data:e})});i.audioSegmentStream.on("done",i.trigger.bind(i,"done"));i.audioSegmentStream.on("partialdone",i.trigger.bind(i,"partialdone"));i.audioSegmentStream.on("endedtimeline",i.trigger.bind(i,"endedtimeline"));i.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo"));i.adts.pipe(i.audioSegmentStream)}i.trigger("trackinfo",{hasAudio:!!i.tracks.audio,hasVideo:!!i.tracks.video})});i.captionStream.on("data",function(e){var r;if(i.tracks.video){r=i.tracks.video.timelineStartInfo.pts||0}else{r=0}e.startTime=de.metadataTsToSeconds(e.startPts,r,t.keepOriginalTimestamps);e.endTime=de.metadataTsToSeconds(e.endPts,r,t.keepOriginalTimestamps);i.trigger("caption",e)});i=ti(i);i.metadataStream.on("data",i.trigger.bind(i,"id3Frame"));return i};var ri=function e(t){var i={type:"aac",tracks:{audio:null},metadataStream:new lt.MetadataStream,aacStream:new Nt,audioRollover:new lt.TimestampRolloverStream("audio"),timedMetadataRollover:new lt.TimestampRolloverStream("timed-metadata"),adtsStream:new ht(true)};i.headOfPipeline=i.aacStream;i.aacStream.pipe(i.audioRollover).pipe(i.adtsStream);i.aacStream.pipe(i.timedMetadataRollover).pipe(i.metadataStream);i.metadataStream.on("timestamp",function(e){i.aacStream.setTimestamp(e.timeStamp)});i.aacStream.on("data",function(e){if(e.type!=="timed-metadata"&&e.type!=="audio"||i.audioSegmentStream){return}i.tracks.audio=i.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:t.baseMediaDecodeTime},codec:"adts",type:"audio"};i.audioSegmentStream=new Kt(i.tracks.audio,t);i.audioSegmentStream.on("data",function(e){i.trigger("data",{type:"audio",data:e})});i.audioSegmentStream.on("partialdone",i.trigger.bind(i,"partialdone"));i.audioSegmentStream.on("done",i.trigger.bind(i,"done"));i.audioSegmentStream.on("endedtimeline",i.trigger.bind(i,"endedtimeline"));i.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo"));i.adtsStream.pipe(i.audioSegmentStream);i.trigger("trackinfo",{hasAudio:!!i.tracks.audio,hasVideo:!!i.tracks.video})});i=ti(i);i.metadataStream.on("data",i.trigger.bind(i,"id3Frame"));return i};var ni=function e(t,i){t.on("data",i.trigger.bind(i,"data"));t.on("done",i.trigger.bind(i,"done"));t.on("partialdone",i.trigger.bind(i,"partialdone"));t.on("endedtimeline",i.trigger.bind(i,"endedtimeline"));t.on("audioTimingInfo",i.trigger.bind(i,"audioTimingInfo"));t.on("videoTimingInfo",i.trigger.bind(i,"videoTimingInfo"));t.on("trackinfo",i.trigger.bind(i,"trackinfo"));t.on("id3Frame",function(e){e.dispatchType=t.metadataStream.dispatchType;e.cueTime=de.videoTsToSeconds(e.pts);i.trigger("id3Frame",e)});t.on("caption",function(e){i.trigger("caption",e)})};var ai=function e(t){var i=null,r=true;t=t||{};e.prototype.init.call(this);t.baseMediaDecodeTime=t.baseMediaDecodeTime||0;this.push=function(e){if(r){var n=ei(e);if(n&&(!i||i.type!=="aac")){i=ri(t);ni(i,this)}else if(!n&&(!i||i.type!=="ts")){i=ii(t);ni(i,this)}r=false}i.headOfPipeline.push(e)};this.flush=function(){if(!i){return}r=true;i.headOfPipeline.flush()};this.partialFlush=function(){if(!i){return}i.headOfPipeline.partialFlush()};this.endTimeline=function(){if(!i){return}i.headOfPipeline.endTimeline()};this.reset=function(){if(!i){return}i.headOfPipeline.reset()};this.setBaseMediaDecodeTime=function(e){if(!t.keepOriginalTimestamps){t.baseMediaDecodeTime=e}if(!i){return}if(i.tracks.audio){i.tracks.audio.timelineStartInfo.dts=undefined;i.tracks.audio.timelineStartInfo.pts=undefined;we.clearDtsInfo(i.tracks.audio);if(i.audioRollover){i.audioRollover.discontinuity()}}if(i.tracks.video){if(i.videoSegmentStream){i.videoSegmentStream.gopCache_=[]}i.tracks.video.timelineStartInfo.dts=undefined;i.tracks.video.timelineStartInfo.pts=undefined;we.clearDtsInfo(i.tracks.video)}if(i.timestampRollover){i.timestampRollover.discontinuity()}};this.setRemux=function(e){t.remux=e;if(i&&i.coalesceStream){i.coalesceStream.setRemux(e)}};this.setAudioAppendStart=function(e){if(!i||!i.tracks.audio||!i.audioSegmentStream){return}i.audioSegmentStream.setAudioAppendStart(e)};this.alignGopsWith=function(e){return}};ai.prototype=new t;var si=ai;var oi=function e(t){return t>>>0};var li=function e(t){return("00"+t.toString(16)).slice(-2)};var ui={toUnsigned:oi,toHexString:li};var ci=function e(t){var i="";i+=String.fromCharCode(t[0]);i+=String.fromCharCode(t[1]);i+=String.fromCharCode(t[2]);i+=String.fromCharCode(t[3]);return i};var di=ci;var hi=ui.toUnsigned;var fi=function e(t,i){var r=[],n,a,s,o,l;if(!i.length){return null}for(n=0;n<t.byteLength;){a=hi(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);s=di(t.subarray(n+4,n+8));o=a>1?n+a:t.byteLength;if(s===i[0]){if(i.length===1){r.push(t.subarray(n+8,o))}else{l=e(t.subarray(n+8,o),i.slice(1));if(l.length){r=r.concat(l)}}}n=o}return r};var pi=fi;var mi=ui.toUnsigned;var vi=function e(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:mi(t[4]<<24|t[5]<<16|t[6]<<8|t[7])};if(i.version===1){i.baseMediaDecodeTime*=Math.pow(2,32);i.baseMediaDecodeTime+=mi(t[8]<<24|t[9]<<16|t[10]<<8|t[11])}return i};var gi=vi;var yi=function e(t){return{isLeading:(t[0]&12)>>>2,dependsOn:t[0]&3,isDependedOn:(t[1]&192)>>>6,hasRedundancy:(t[1]&48)>>>4,paddingValue:(t[1]&14)>>>1,isNonSyncSample:t[1]&1,degradationPriority:t[2]<<8|t[3]}};var _i=yi;var bi=function e(t){var i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},r=new DataView(t.buffer,t.byteOffset,t.byteLength),n=i.flags[2]&1,a=i.flags[2]&4,s=i.flags[1]&1,o=i.flags[1]&2,l=i.flags[1]&4,u=i.flags[1]&8,c=r.getUint32(4),d=8,h;if(n){i.dataOffset=r.getInt32(d);d+=4}if(a&&c){h={flags:_i(t.subarray(d,d+4))};d+=4;if(s){h.duration=r.getUint32(d);d+=4}if(o){h.size=r.getUint32(d);d+=4}if(u){if(i.version===1){h.compositionTimeOffset=r.getInt32(d)}else{h.compositionTimeOffset=r.getUint32(d)}d+=4}i.samples.push(h);c--}while(c--){h={};if(s){h.duration=r.getUint32(d);d+=4}if(o){h.size=r.getUint32(d);d+=4}if(l){h.flags=_i(t.subarray(d,d+4));d+=4}if(u){if(i.version===1){h.compositionTimeOffset=r.getInt32(d)}else{h.compositionTimeOffset=r.getUint32(d)}d+=4}i.samples.push(h)}return i};var Mi=bi;var Ti=function e(t){var i=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:i.getUint32(4)},n=r.flags[2]&1,a=r.flags[2]&2,s=r.flags[2]&8,o=r.flags[2]&16,l=r.flags[2]&32,u=r.flags[0]&65536,c=r.flags[0]&131072,d;d=8;if(n){d+=4;r.baseDataOffset=i.getUint32(12);d+=4}if(a){r.sampleDescriptionIndex=i.getUint32(d);d+=4}if(s){r.defaultSampleDuration=i.getUint32(d);d+=4}if(o){r.defaultSampleSize=i.getUint32(d);d+=4}if(l){r.defaultSampleFlags=i.getUint32(d)}if(u){r.durationIsEmpty=true}if(!n&&c){r.baseDataOffsetIsMoof=true}return r};var Ai=Ti;var wi=Le.discardEmulationPreventionBytes;var Ei=Ue.CaptionStream;var xi=function e(t,i){var r=t;for(var n=0;n<i.length;n++){var a=i[n];if(r<a.size){return a}r-=a.size}return null};var Si=function e(t,i,r){var n=new DataView(t.buffer,t.byteOffset,t.byteLength),a=[],s,o,l,u;for(o=0;o+4<t.length;o+=l){l=n.getUint32(o);o+=4;if(l<=0){continue}switch(t[o]&31){case 6:var c=t.subarray(o+1,o+1+l);var d=xi(o,i);s={nalUnitType:"sei_rbsp",size:l,data:c,escapedRBSP:wi(c),trackId:r};if(d){s.pts=d.pts;s.dts=d.dts;u=d}else if(u){s.pts=u.pts;s.dts=u.dts}else{console.log("We've encountered a nal unit without data. See mux.js#233.");break}a.push(s);break}}return a};var Di=function e(t,i,r){var n=i;var a=r.defaultSampleDuration||0;var s=r.defaultSampleSize||0;var o=r.trackId;var l=[];t.forEach(function(e){var t=Mi(e);var i=t.samples;i.forEach(function(e){if(e.duration===undefined){e.duration=a}if(e.size===undefined){e.size=s}e.trackId=o;e.dts=n;if(e.compositionTimeOffset===undefined){e.compositionTimeOffset=0}e.pts=n+e.compositionTimeOffset;n+=e.duration});l=l.concat(i)});return l};var Ii=function e(t,i){var r=pi(t,["moof","traf"]);var n=pi(t,["mdat"]);var a={};var s=[];n.forEach(function(e,t){var i=r[t];s.push({mdat:e,traf:i})});s.forEach(function(e){var t=e.mdat;var r=e.traf;var n=pi(r,["tfhd"]);var s=Ai(n[0]);var o=s.trackId;var l=pi(r,["tfdt"]);var u=l.length>0?gi(l[0]).baseMediaDecodeTime:0;var c=pi(r,["trun"]);var d;var h;if(i===o&&c.length>0){d=Di(c,u,s);h=Si(t,d,o);if(!a[o]){a[o]=[]}a[o]=a[o].concat(h)}});return a};var ji=function e(t,i,r){var n;if(i===null){return null}n=Ii(t,i);return{seiNals:n[i],timescale:r}};var Li=function e(){var t=false;var i;var r;var n;var a;var s;var o;this.isInitialized=function(){return t};this.init=function(e){i=new Ei;t=true;o=e?e.isPartial:false;i.on("data",function(e){e.startTime=e.startPts/a;e.endTime=e.endPts/a;s.captions.push(e);s.captionStreams[e.stream]=true})};this.isNewInit=function(e,t){if(e&&e.length===0||t&&typeof t==="object"&&Object.keys(t).length===0){return false}return n!==e[0]||a!==t[n]};this.parse=function(e,t,i){var o;if(!this.isInitialized()){return null}else if(!t||!i){return null}else if(this.isNewInit(t,i)){n=t[0];a=i[n]}else if(n===null||!a){r.push(e);return null}while(r.length>0){var l=r.shift();this.parse(l,t,i)}o=ji(e,n,a);if(o===null||!o.seiNals){return null}this.pushNals(o.seiNals);this.flushStream();return s};this.pushNals=function(e){if(!this.isInitialized()||!e||e.length===0){return null}e.forEach(function(e){i.push(e)})};this.flushStream=function(){if(!this.isInitialized()){return null}if(!o){i.flush()}else{i.partialFlush()}};this.clearParsedCaptions=function(){s.captions=[];s.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized()){return null}i.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){r=[];n=null;a=null;if(!s){s={captions:[],captionStreams:{}}}else{this.clearParsedCaptions()}this.resetCaptionStream()};this.reset()};var Ni=Li;var Ci=function e(t){if(t==="AudioSegmentStream"){return"audio"}return t==="VideoSegmentStream"?"video":""};var Oi=function e(t,i){i.on("data",function(e){var i=e.initSegment;e.initSegment={data:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength};var r=e.data;e.data=r.buffer;t.postMessage({action:"data",segment:e,byteOffset:r.byteOffset,byteLength:r.byteLength},[e.data])});i.on("done",function(e){t.postMessage({action:"done"})});i.on("gopInfo",function(e){t.postMessage({action:"gopInfo",gopInfo:e})});i.on("videoSegmentTimingInfo",function(e){var i={start:{decode:fe(e.start.dts),presentation:fe(e.start.pts)},end:{decode:fe(e.end.dts),presentation:fe(e.end.pts)},baseMediaDecodeTime:fe(e.baseMediaDecodeTime)};if(e.prependedContentDuration){i.prependedContentDuration=fe(e.prependedContentDuration)}t.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:i})});i.on("id3Frame",function(e){t.postMessage({action:"id3Frame",id3Frame:e})});i.on("caption",function(e){t.postMessage({action:"caption",caption:e})});i.on("trackinfo",function(e){t.postMessage({action:"trackinfo",trackInfo:e})});i.on("audioTimingInfo",function(e){t.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:fe(e.start),end:fe(e.end)}})});i.on("videoTimingInfo",function(e){t.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:fe(e.start),end:fe(e.end)}})})};var ki=function e(t,i){i.on("data",function(e){var i={data:e.data.track.initSegment.buffer,byteOffset:e.data.track.initSegment.byteOffset,byteLength:e.data.track.initSegment.byteLength};var r={data:e.data.boxes.buffer,byteOffset:e.data.boxes.byteOffset,byteLength:e.data.boxes.byteLength};var n={boxes:r,initSegment:i,type:e.type,sequence:e.data.sequence};if(typeof e.data.videoFrameDts!=="undefined"){n.videoFrameDtsTime=fe(e.data.videoFrameDts)}if(typeof e.data.videoFramePts!=="undefined"){n.videoFramePtsTime=fe(e.data.videoFramePts)}t.postMessage({action:"data",segment:n},[n.boxes.data,n.initSegment.data])});i.on("id3Frame",function(e){t.postMessage({action:"id3Frame",id3Frame:e})});i.on("caption",function(e){t.postMessage({action:"caption",caption:e})});i.on("done",function(e){t.postMessage({action:"done",type:Ci(e)})});i.on("partialdone",function(e){t.postMessage({action:"partialdone",type:Ci(e)})});i.on("endedsegment",function(e){t.postMessage({action:"endedSegment",type:Ci(e)})});i.on("trackinfo",function(e){t.postMessage({action:"trackinfo",trackInfo:e})});i.on("audioTimingInfo",function(e){if(e.start===null){t.postMessage({action:"audioTimingInfo",audioTimingInfo:e});return}var i={start:fe(e.start)};if(e.end){i.end=fe(e.end)}t.postMessage({action:"audioTimingInfo",audioTimingInfo:i})});i.on("videoTimingInfo",function(e){var i={start:fe(e.start)};if(e.end){i.end=fe(e.end)}t.postMessage({action:"videoTimingInfo",videoTimingInfo:i})})};var Pi=function(){function e(e,t){this.options=t||{};this.self=e;this.init()}var t=e.prototype;t.init=function e(){if(this.transmuxer){this.transmuxer.dispose()}this.transmuxer=this.options.handlePartialData?new si(this.options):new Wt(this.options);if(this.options.handlePartialData){ki(this.self,this.transmuxer)}else{Oi(this.self,this.transmuxer)}};t.pushMp4Captions=function e(t){if(!this.captionParser){this.captionParser=new Ni;this.captionParser.init()}var i=new Uint8Array(t.data,t.byteOffset,t.byteLength);var r=this.captionParser.parse(i,t.trackIds,t.timescales);this.self.postMessage({action:"mp4Captions",captions:r&&r.captions||[],data:i.buffer},[i.buffer])};t.clearAllMp4Captions=function e(){if(this.captionParser){this.captionParser.clearAllCaptions()}};t.clearParsedMp4Captions=function e(){if(this.captionParser){this.captionParser.clearParsedCaptions()}};t.push=function e(t){var i=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(i)};t.reset=function e(){this.transmuxer.reset()};t.setTimestampOffset=function e(t){var i=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(he(i)))};t.setAudioAppendStart=function e(t){this.transmuxer.setAudioAppendStart(Math.ceil(he(t.appendStart)))};t.setRemux=function e(t){this.transmuxer.setRemux(t.remux)};t.flush=function e(t){this.transmuxer.flush();i.postMessage({action:"done",type:"transmuxed"})};t.partialFlush=function e(t){this.transmuxer.partialFlush();i.postMessage({action:"partialdone",type:"transmuxed"})};t.endTimeline=function e(){this.transmuxer.endTimeline();i.postMessage({action:"endedtimeline",type:"transmuxed"})};t.alignGopsWith=function e(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())};return e}();var Ri=function e(t){t.onmessage=function(e){if(e.data.action==="init"&&e.data.options){this.messageHandlers=new Pi(t,e.data.options);return}if(!this.messageHandlers){this.messageHandlers=new Pi(t)}if(e.data&&e.data.action&&e.data.action!=="init"){if(this.messageHandlers[e.data.action]){this.messageHandlers[e.data.action](e.data)}}}};var zi=new Ri(i);return zi}()});var Vn=d(function(e,t){Object.defineProperty(t,"__esModule",{value:true});function i(e){return e&&typeof e==="object"&&"default"in e?e:{default:e}}var n=i(r);var a={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/};var s=function e(t){if(!t){return t}return t.replace(/avc1\.(\d+)\.(\d+)/i,function(e,t,i){var r=("00"+Number(t).toString(16)).slice(-2);var n=("00"+Number(i).toString(16)).slice(-2);return"avc1."+r+"00"+n})};var o=function e(t){return t.map(s)};var l=function e(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(e){return o([e])[0]})};var u=function e(t){if(t===void 0){t=""}var i=t.split(",");var r={};i.forEach(function(e){e=e.trim();["video","audio"].forEach(function(t){var i=a[t].exec(e.toLowerCase());if(!i||i.length<=1){return}var n=e.substring(0,i[1].length);var s=e.replace(n,"");r[t]={type:n,details:s}})});return r};var c=function e(t,i){if(!t.mediaGroups.AUDIO||!i){return null}var r=t.mediaGroups.AUDIO[i];if(!r){return null}for(var n in r){var a=r[n];if(a.default&&a.playlists){return u(a.playlists[0].attributes.CODECS)}}return null};var d=function e(t){if(t===void 0){t=""}return a.video.test(t.trim().toLowerCase())};var h=function e(t){if(t===void 0){t=""}return a.audio.test(t.trim().toLowerCase())};var f=function e(t){if(!t||typeof t!=="string"){return}var i=t.toLowerCase().split(",").map(function(e){return s(e.trim())});var r="video";if(i.length===1&&h(i[0])){r="audio"}var n="mp4";if(i.every(function(e){return a.mp4.test(e)})){n="mp4"}else if(i.every(function(e){return a.webm.test(e)})){n="webm"}else if(i.every(function(e){return a.ogg.test(e)})){n="ogg"}return r+"/"+n+';codecs="'+t+'"'};var p=function e(t){if(t===void 0){t=""}return n["default"].MediaSource&&n["default"].MediaSource.isTypeSupported&&n["default"].MediaSource.isTypeSupported(f(t))||false};var m=function e(t){if(t===void 0){t=""}return t.toLowerCase().split(",").every(function(e){e=e.trim();return a.muxerVideo.test(e)||a.muxerAudio.test(e)})};var v="mp4a.40.2";var g="avc1.4d400d";t.DEFAULT_AUDIO_CODEC=v;t.DEFAULT_VIDEO_CODEC=g;t.browserSupportsCodec=p;t.codecsFromDefault=c;t.getMimeForCodec=f;t.isAudioCodec=h;t.isVideoCodec=d;t.mapLegacyAvcCodecs=l;t.muxerSupportsCodec=m;t.parseCodecs=u;t.translateLegacyCodec=s;t.translateLegacyCodecs=o});c(Vn);var Gn=Vn.DEFAULT_AUDIO_CODEC;var Hn=Vn.DEFAULT_VIDEO_CODEC;var Qn=Vn.browserSupportsCodec;var Yn=Vn.codecsFromDefault;var Wn=Vn.getMimeForCodec;var qn=Vn.isAudioCodec;var Xn=Vn.isVideoCodec;var Zn=Vn.mapLegacyAvcCodecs;var Kn=Vn.muxerSupportsCodec;var Jn=Vn.parseCodecs;var $n=Vn.translateLegacyCodec;var ea=Vn.translateLegacyCodecs;var ta=function e(t){var i=t.attributes||{};if(i.CODECS){return Jn(i.CODECS)}};var ia=function e(t,i){var r=i.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&r.AUDIO&&t.mediaGroups.AUDIO[r.AUDIO]};var ra=function e(t,i){if(!ia(t,i)){return true}var r=i.attributes||{};var n=t.mediaGroups.AUDIO[r.AUDIO];for(var a in n){if(!n[a].uri&&!n[a].playlists){return true}}return false};var na=function e(t,i){var r=i.attributes||{};var n=ta(i)||{};if(ia(t,i)&&!n.audio){if(!ra(t,i)){var a=Yn(t,r.AUDIO);if(a){n.audio=a.audio}}}var s={};if(n.video){s.video=$n(""+n.video.type+n.video.details)}if(n.audio){s.audio=$n(""+n.audio.type+n.audio.details)}return s};var aa=function e(t){if(n.log.debug){return n.log.debug.bind(n,"VHS:",t+" >")}return function(){}};var sa=aa("PlaylistSelector");var oa=function e(t){if(!t||!t.playlist){return}var i=t.playlist;return JSON.stringify({id:i.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:i.attributes&&i.attributes.CODECS||""})};var la=function e(t,i){if(!t){return""}var n=r.getComputedStyle(t);if(!n){return""}return n[i]};var ua=function e(t,i){var r=t.slice();t.sort(function(e,t){var n=i(e,t);if(n===0){return r.indexOf(e)-r.indexOf(t)}return n})};var ca=function e(t,i){var n;var a;if(t.attributes.BANDWIDTH){n=t.attributes.BANDWIDTH}n=n||r.Number.MAX_VALUE;if(i.attributes.BANDWIDTH){a=i.attributes.BANDWIDTH}a=a||r.Number.MAX_VALUE;return n-a};var da=function e(t,i){var n;var a;if(t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width){n=t.attributes.RESOLUTION.width}n=n||r.Number.MAX_VALUE;if(i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width){a=i.attributes.RESOLUTION.width}a=a||r.Number.MAX_VALUE;if(n===a&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH){return t.attributes.BANDWIDTH-i.attributes.BANDWIDTH}return n-a};var ha=function e(t,i,n,a,s){var o={bandwidth:i,width:n,height:a,limitRenditionByPlayerDimensions:s};var l=t.playlists.map(function(e){var t;var i=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width;var n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;t=e.attributes.BANDWIDTH;t=t||r.Number.MAX_VALUE;return{bandwidth:t,width:i,height:n,playlist:e}});ua(l,function(e,t){return e.bandwidth-t.bandwidth});l=l.filter(function(e){return!we.isIncompatible(e.playlist)});var u=l.filter(function(e){return we.isEnabled(e.playlist)});if(!u.length){u=l.filter(function(e){return!we.isDisabled(e.playlist)})}var c=u.filter(function(e){return e.bandwidth*Ti.BANDWIDTH_VARIANCE<i});var d=c[c.length-1];var h=c.filter(function(e){return e.bandwidth===d.bandwidth})[0];if(s===false){var f=h||u[0]||l[0];if(f&&f.playlist){var p="sortedPlaylistReps";if(h){p="bandwidthBestRep"}if(u[0]){p="enabledPlaylistReps"}sa("choosing "+oa(f)+" using "+p+" with options",o);return f.playlist}sa("could not choose a playlist with options",o);return null}var m=c.filter(function(e){return e.width&&e.height});ua(m,function(e,t){return e.width-t.width});var v=m.filter(function(e){return e.width===n&&e.height===a});d=v[v.length-1];var g=v.filter(function(e){return e.bandwidth===d.bandwidth})[0];var y;var _;var b;if(!g){y=m.filter(function(e){return e.width>n||e.height>a});_=y.filter(function(e){return e.width===y[0].width&&e.height===y[0].height});d=_[_.length-1];b=_.filter(function(e){return e.bandwidth===d.bandwidth})[0]}var M=b||g||h||u[0]||l[0];if(M&&M.playlist){var T="sortedPlaylistReps";if(b){T="resolutionPlusOneRep"}else if(g){T="resolutionBestRep"}else if(h){T="bandwidthBestRep"}else if(u[0]){T="enabledPlaylistReps"}sa("choosing "+oa(M)+" using "+T+" with options",o);return M.playlist}sa("could not choose a playlist with options",o);return null};var fa=function e(){var t=this.useDevicePixelRatio?r.devicePixelRatio||1:1;return ha(this.playlists.master,this.systemBandwidth,parseInt(la(this.tech_.el(),"width"),10)*t,parseInt(la(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions)};var pa=function e(t){var i=-1;if(t<0||t>1){throw new Error("Moving average bandwidth decay must be between 0 and 1.")}return function(){var e=this.useDevicePixelRatio?r.devicePixelRatio||1:1;if(i<0){i=this.systemBandwidth}i=t*this.systemBandwidth+(1-t)*i;return ha(this.playlists.master,i,parseInt(la(this.tech_.el(),"width"),10)*e,parseInt(la(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions)}};var ma=function e(t){var i=t.master,r=t.currentTime,n=t.bandwidth,a=t.duration,s=t.segmentDuration,o=t.timeUntilRebuffer,l=t.currentTimeline,u=t.syncController;var c=i.playlists.filter(function(e){return!we.isIncompatible(e)});var d=c.filter(we.isEnabled);if(!d.length){d=c.filter(function(e){return!we.isDisabled(e)})}var h=d.filter(we.hasAttribute.bind(null,"BANDWIDTH"));var f=h.map(function(e){var t=u.getSyncPoint(e,a,l,r);var i=t?1:2;var c=we.estimateSegmentRequestTime(s,n,e);var d=c*i-o;return{playlist:e,rebufferingImpact:d}});var p=f.filter(function(e){return e.rebufferingImpact<=0});ua(p,function(e,t){return ca(t.playlist,e.playlist)});if(p.length){return p[0]}ua(f,function(e,t){return e.rebufferingImpact-t.rebufferingImpact});return f[0]||null};var va=function e(){var t=this;var i=this.playlists.master.playlists.filter(we.isEnabled);ua(i,function(e,t){return ca(e,t)});var r=i.filter(function(e){return!!na(t.playlists.master,e).video});return r[0]||null};var ga=function e(t,i,r){if(!t[r]){i.trigger({type:"usage",name:"vhs-608"});i.trigger({type:"usage",name:"hls-608"});var n=i.textTracks().getTrackById(r);if(n){t[r]=n}else{t[r]=i.addRemoteTextTrack({kind:"captions",id:r,label:r},false).track}}};var ya=function e(t){var i=t.inbandTextTracks,n=t.captionArray,a=t.timestampOffset;if(!n){return}var s=r.WebKitDataCue||r.VTTCue;n.forEach(function(e){var t=e.stream;i[t].addCue(new s(e.startTime+a,e.endTime+a,e.text))})};var _a=function e(t){Object.defineProperties(t.frame,{id:{get:function e(){n.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return t.value.key}},value:{get:function e(){n.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");return t.value.data}},privateData:{get:function e(){n.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return t.value.data}}})};var ba=function e(t){var i=t.inbandTextTracks,n=t.metadataArray,a=t.timestampOffset,s=t.videoDuration;if(!n){return}var o=r.WebKitDataCue||r.VTTCue;var l=i.metadataTrack_;if(!l){return}n.forEach(function(e){var t=e.cueTime+a;if(typeof t!=="number"||r.isNaN(t)||t<0||!(t<Infinity)){return}e.frames.forEach(function(e){var i=new o(t,t,e.value||e.url||e.data||"");i.frame=e;i.value=e;_a(i);l.addCue(i)})});if(!l.cues||!l.cues.length){return}var u=l.cues;var c=[];for(var d=0;d<u.length;d++){if(u[d]){c.push(u[d])}}var h=c.reduce(function(e,t){var i=e[t.startTime]||[];i.push(t);e[t.startTime]=i;return e},{});var f=Object.keys(h).sort(function(e,t){return Number(e)-Number(t)});f.forEach(function(e,t){var i=h[e];var r=Number(f[t+1])||s;i.forEach(function(e){e.endTime=r})})};var Ma=function e(t,i,r){if(t.metadataTrack_){return}t.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},false).track;t.metadataTrack_.inBandMetadataTrackDispatchType=i};var Ta=function e(t,i,r){var n;var a;if(!r){return}if(!r.cues){return}n=r.cues.length;while(n--){a=r.cues[n];if(a.startTime>=t&&a.endTime<=i){r.removeCue(a)}}};var Aa=function e(t){var i=t.cues;if(!i){return}for(var r=0;r<i.length;r++){var n=[];var a=0;for(var s=0;s<i.length;s++){if(i[r].startTime===i[s].startTime&&i[r].endTime===i[s].endTime&&i[r].text===i[s].text){a++;if(a>1){n.push(i[s])}}}if(n.length){n.forEach(function(e){return t.removeCue(e)})}}};var wa=function e(t,i,r){if(typeof i==="undefined"||i===null||!t.length){return[]}var n=Math.ceil((i-r+3)*Er);var a;for(a=0;a<t.length;a++){if(t[a].pts>n){break}}return t.slice(a)};var Ea=function e(t,i,r){if(!i.length){return t}if(r){return i.slice()}var n=i[0].pts;var a=0;for(a;a<t.length;a++){if(t[a].pts>=n){break}}return t.slice(0,a).concat(i)};var xa=function e(t,i,r,n){var a=Math.ceil((i-n)*Er);var s=Math.ceil((r-n)*Er);var o=t.slice();var l=t.length;while(l--){if(t[l].pts<=s){break}}if(l===-1){return o}var u=l+1;while(u--){if(t[u].pts<=a){break}}u=Math.max(u,0);o.splice(u,l-u+1);return o};var Sa=function e(t,i){if(!t&&!i||!t&&i||t&&!i){return false}if(t===i){return true}var r=Object.keys(t).sort();var n=Object.keys(i).sort();if(r.length!==n.length){return false}for(var a=0;a<r.length;a++){var s=r[a];if(s!==n[a]){return false}if(t[s]!==i[s]){return false}}return true};var Da=500;var Ia=function e(t){return typeof t==="number"&&isFinite(t)};var ja=function e(t,i,r){if(t!=="main"||!i||!r){return null}if(!r.hasAudio&&!r.hasVideo){return"Neither audio nor video found in segment."}if(i.hasVideo&&!r.hasVideo){return"Only audio found in segment when we expected video."+" We can't switch to audio only from a stream that had video."+" To get rid of this message, please add codec information to the manifest."}if(!i.hasVideo&&r.hasVideo){return"Video found in segment when we expected only audio."+" We can't switch to a stream with video from an audio only stream."+" To get rid of this message, please add codec information to the manifest."}return null};var La=function e(t,i,r){var n=i-Ti.BACK_BUFFER_LENGTH;if(t.length){n=Math.max(n,t.start(0))}var a=i-r;return Math.min(a,n)};var Na=function e(t){var i=t.segment,r=i.start,n=i.end,a=t.playlist,s=a.mediaSequence,o=a.id,l=a.segments,u=l===void 0?[]:l,c=t.mediaIndex,d=t.timeline;return["appending ["+c+"] of ["+s+", "+(s+u.length)+"] from playlist ["+o+"]","["+r+" => "+n+"] in timeline ["+d+"]"].join(" ")};var Ca=function e(t){return t+"TimingInfo"};var Oa=function e(t){var i=t.segmentTimeline,r=t.currentTimeline,n=t.startOfSegment,a=t.buffered,s=t.overrideCheck;if(!s&&i===r){return null}return a.length?a.end(a.length-1):n};var ka=function e(t){var i=t.timelineChangeController,r=t.currentTimeline,n=t.segmentTimeline,a=t.loaderType,s=t.audioDisabled;if(r===n){return false}if(a==="audio"){var o=i.lastTimelineChange({type:"main"});return!o||o.to!==n}if(a==="main"&&s){var l=i.pendingTimelineChange({type:"audio"});if(l&&l.to===n){return false}return true}return false};var Pa=function(e){u(t,e);function t(t,i){var r;r=e.call(this)||this;if(!t){throw new TypeError("Initialization settings are required")}if(typeof t.currentTime!=="function"){throw new TypeError("No currentTime getter specified")}if(!t.mediaSource){throw new TypeError("No MediaSource specified")}r.bandwidth=t.bandwidth;r.throughput={rate:0,count:0};r.roundTrip=NaN;r.resetStats_();r.mediaIndex=null;r.hasPlayed_=t.hasPlayed;r.currentTime_=t.currentTime;r.seekable_=t.seekable;r.seeking_=t.seeking;r.duration_=t.duration;r.mediaSource_=t.mediaSource;r.vhs_=t.vhs;r.loaderType_=t.loaderType;r.currentMediaInfo_=void 0;r.startingMediaInfo_=void 0;r.segmentMetadataTrack_=t.segmentMetadataTrack;r.goalBufferLength_=t.goalBufferLength;r.sourceType_=t.sourceType;r.sourceUpdater_=t.sourceUpdater;r.inbandTextTracks_=t.inbandTextTracks;r.state_="INIT";r.handlePartialData_=t.handlePartialData;r.timelineChangeController_=t.timelineChangeController;r.shouldSaveSegmentTimingInfo_=true;r.checkBufferTimeout_=null;r.error_=void 0;r.currentTimeline_=-1;r.pendingSegment_=null;r.xhrOptions_=null;r.pendingSegments_=[];r.audioDisabled_=false;r.isPendingTimestampOffset_=false;r.gopBuffer_=[];r.timeMapping_=0;r.safeAppend_=n.browser.IE_VERSION>=11;r.appendInitSegment_={audio:true,video:true};r.playlistOfLastInitSegment_={audio:null,video:null};r.callQueue_=[];r.loadQueue_=[];r.metadataQueue_={id3:[],caption:[]};r.activeInitSegmentId_=null;r.initSegments_={};r.cacheEncryptionKeys_=t.cacheEncryptionKeys;r.keyCache_={};r.decrypter_=t.decrypter;r.syncController_=t.syncController;r.syncPoint_={segmentIndex:0,time:0};r.transmuxer_=r.createTransmuxer_();r.triggerSyncInfoUpdate_=function(){return r.trigger("syncinfoupdate")};r.syncController_.on("syncinfoupdate",r.triggerSyncInfoUpdate_);r.mediaSource_.addEventListener("sourceopen",function(){if(!r.isEndOfStream_()){r.ended_=false}});r.fetchAtBuffer_=false;r.logger_=aa("SegmentLoader["+r.loaderType_+"]");Object.defineProperty(o(r),"state",{get:function e(){return this.state_},set:function e(t){if(t!==this.state_){this.logger_(this.state_+" -> "+t);this.state_=t;this.trigger("statechange")}}});r.sourceUpdater_.on("ready",function(){if(r.hasEnoughInfoToAppend_()){r.processCallQueue_()}});if(r.loaderType_==="main"){r.timelineChangeController_.on("pendingtimelinechange",function(){if(r.hasEnoughInfoToAppend_()){r.processCallQueue_()}})}if(r.loaderType_==="audio"){r.timelineChangeController_.on("timelinechange",function(){if(r.hasEnoughInfoToLoad_()){r.processLoadQueue_()}if(r.hasEnoughInfoToAppend_()){r.processCallQueue_()}})}return r}var i=t.prototype;i.createTransmuxer_=function e(){var t=new Fn;t.postMessage({action:"init",options:{remux:false,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:true,handlePartialData:this.handlePartialData_}});return t};i.resetStats_=function e(){this.mediaBytesTransferred=0;this.mediaRequests=0;this.mediaRequestsAborted=0;this.mediaRequestsTimedout=0;this.mediaRequestsErrored=0;this.mediaTransferDuration=0;this.mediaSecondsLoaded=0};i.dispose=function e(){this.trigger("dispose");this.state="DISPOSED";this.pause();this.abort_();if(this.transmuxer_){this.transmuxer_.terminate();Ri.dispose()}this.resetStats_();if(this.checkBufferTimeout_){r.clearTimeout(this.checkBufferTimeout_)}if(this.syncController_&&this.triggerSyncInfoUpdate_){this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_)}this.off()};i.setAudio=function e(t){this.audioDisabled_=!t;if(t){this.appendInitSegment_.audio=true}else{this.sourceUpdater_.removeAudio(0,this.duration_())}};i.abort=function e(){if(this.state!=="WAITING"){if(this.pendingSegment_){this.pendingSegment_=null}return}this.abort_();this.state="READY";if(!this.paused()){this.monitorBuffer_()}};i.abort_=function e(){if(this.pendingSegment_&&this.pendingSegment_.abortRequests){this.pendingSegment_.abortRequests()}this.pendingSegment_=null;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_)};i.checkForAbort_=function e(t){if(this.state==="APPENDING"&&!this.pendingSegment_){this.state="READY";return true}if(!this.pendingSegment_||this.pendingSegment_.requestId!==t){return true}return false};i.error=function e(t){if(typeof t!=="undefined"){this.logger_("error occurred:",t);this.error_=t}this.pendingSegment_=null;return this.error_};i.endOfStream=function e(){this.ended_=true;if(this.transmuxer_){Ri.reset(this.transmuxer_)}this.gopBuffer_.length=0;this.pause();this.trigger("ended")};i.buffered_=function e(){if(!this.sourceUpdater_||!this.startingMediaInfo_){return n.createTimeRanges()}if(this.loaderType_==="main"){var t=this.startingMediaInfo_,i=t.hasAudio,r=t.hasVideo,a=t.isMuxed;if(r&&i&&!this.audioDisabled_&&!a){return this.sourceUpdater_.buffered()}if(r){return this.sourceUpdater_.videoBuffered()}}return this.sourceUpdater_.audioBuffered()};i.initSegmentForMap=function e(t,i){if(i===void 0){i=false}if(!t){return null}var r=Re(t);var n=this.initSegments_[r];if(i&&!n&&t.bytes){this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}}return n||t};i.segmentKey=function e(t,i){if(i===void 0){i=false}if(!t){return null}var r=ze(t);var n=this.keyCache_[r];if(this.cacheEncryptionKeys_&&i&&!n&&t.bytes){this.keyCache_[r]=n={resolvedUri:t.resolvedUri,bytes:t.bytes}}var a={resolvedUri:(n||t).resolvedUri};if(n){a.bytes=n.bytes}return a};i.couldBeginLoading_=function e(){return this.playlist_&&!this.paused()};i.load=function e(){this.monitorBuffer_();if(!this.playlist_){return}this.syncController_.setDateTimeMapping(this.playlist_);if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"){return}this.state="READY"};i.init_=function e(){this.state="READY";this.resetEverything();return this.monitorBuffer_()};i.playlist=function e(t,i){if(i===void 0){i={}}if(!t){return}var r=this.playlist_;var n=this.pendingSegment_;this.playlist_=t;this.xhrOptions_=i;if(this.state==="INIT"){t.syncInfo={mediaSequence:t.mediaSequence,time:0}}var a=null;if(r){if(r.id){a=r.id}else if(r.uri){a=r.uri}}this.logger_("playlist update ["+a+" => "+(t.id||t.uri)+"]");this.trigger("syncinfoupdate");if(this.state==="INIT"&&this.couldBeginLoading_()){return this.init_()}if(!r||r.uri!==t.uri){if(this.mediaIndex!==null||this.handlePartialData_){this.resyncLoader()}this.currentMediaInfo_=void 0;this.trigger("playlistupdate");return}var s=t.mediaSequence-r.mediaSequence;this.logger_("live window shift ["+s+"]");if(this.mediaIndex!==null){this.mediaIndex-=s}if(n){n.mediaIndex-=s;if(n.mediaIndex>=0){n.segment=t.segments[n.mediaIndex]}}this.syncController_.saveExpiredSegmentInfo(r,t)};i.pause=function e(){if(this.checkBufferTimeout_){r.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=null}};i.paused=function e(){return this.checkBufferTimeout_===null};i.resetEverything=function e(t){this.ended_=false;this.appendInitSegment_={audio:true,video:true};this.resetLoader();this.remove(0,Infinity,t);if(this.transmuxer_){this.transmuxer_.postMessage({action:"clearAllMp4Captions"})}};i.resetLoader=function e(){this.fetchAtBuffer_=false;this.resyncLoader()};i.resyncLoader=function e(){if(this.transmuxer_){Ri.reset(this.transmuxer_)}this.mediaIndex=null;this.syncPoint_=null;this.isPendingTimestampOffset_=false;this.callQueue_=[];this.loadQueue_=[];this.metadataQueue_.id3=[];this.metadataQueue_.caption=[];this.abort();if(this.transmuxer_){this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}};i.remove=function e(t,i,r){if(r===void 0){r=function e(){}}if(i===Infinity){i=this.duration_()}if(!this.sourceUpdater_||!this.currentMediaInfo_){return}var n=1;var a=function e(){n--;if(n===0){r()}};if(!this.audioDisabled_){n++;this.sourceUpdater_.removeAudio(t,i,a)}if(this.loaderType_==="main"&&this.currentMediaInfo_&&this.currentMediaInfo_.hasVideo){this.gopBuffer_=xa(this.gopBuffer_,t,i,this.timeMapping_);n++;this.sourceUpdater_.removeVideo(t,i,a)}for(var s in this.inbandTextTracks_){Ta(t,i,this.inbandTextTracks_[s])}Ta(t,i,this.segmentMetadataTrack_);a()};i.monitorBuffer_=function e(){if(this.checkBufferTimeout_){r.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=r.setTimeout(this.monitorBufferTick_.bind(this),1)};i.monitorBufferTick_=function e(){if(this.state==="READY"){this.fillBuffer_()}if(this.checkBufferTimeout_){r.clearTimeout(this.checkBufferTimeout_)}this.checkBufferTimeout_=r.setTimeout(this.monitorBufferTick_.bind(this),Da)};i.fillBuffer_=function e(){if(this.sourceUpdater_.updating()){return}if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var t=this.buffered_();var i=this.checkBuffer_(t,this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(!i){return}i.timestampOffset=Oa({segmentTimeline:i.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i.startOfSegment,buffered:t,overrideCheck:this.isPendingTimestampOffset_});this.isPendingTimestampOffset_=false;if(typeof i.timestampOffset==="number"){this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:i.timeline})}this.loadSegment_(i)};i.isEndOfStream_=function e(t,i){if(t===void 0){t=this.mediaIndex}if(i===void 0){i=this.playlist_}if(!i||!this.mediaSource_){return false}var r=t+1===i.segments.length;return i.endList&&this.mediaSource_.readyState==="open"&&r};i.checkBuffer_=function e(t,i,r,n,a,s){var o=0;if(t.length){o=t.end(t.length-1)}var l=Math.max(0,o-a);if(!i.segments.length){return null}if(l>=this.goalBufferLength_()){return null}if(!n&&l>=1){return null}var u=null;var c;var d=false;if(s===null){u=this.getSyncSegmentCandidate_(i);d=true}else if(r!==null){var h=i.segments[r];if(h&&h.end){c=h.end}else{c=o}u=r+1}else if(this.fetchAtBuffer_){var f=we.getMediaInfoForTime(i,o,s.segmentIndex,s.time);u=f.mediaIndex;c=f.startTime}else{var p=we.getMediaInfoForTime(i,a,s.segmentIndex,s.time);u=p.mediaIndex;c=p.startTime}var m=this.generateSegmentInfo_(i,u,c,d);if(!m){return}if(this.mediaSource_&&this.playlist_&&m.mediaIndex===this.playlist_.segments.length-1&&this.mediaSource_.readyState==="ended"&&!this.seeking_()){return}this.logger_("checkBuffer_ returning "+m.uri,{segmentInfo:m,playlist:i,currentMediaIndex:r,nextMediaIndex:u,startOfSegment:c,isSyncRequest:d});return m};i.getSyncSegmentCandidate_=function e(t){var i=this;if(this.currentTimeline_===-1){return 0}var r=t.segments.map(function(e,t){return{timeline:e.timeline,segmentIndex:t}}).filter(function(e){return e.timeline===i.currentTimeline_});if(r.length){return r[Math.min(r.length-1,1)].segmentIndex}return Math.max(t.segments.length-1,0)};i.generateSegmentInfo_=function e(t,i,r,n){if(i<0||i>=t.segments.length){return null}var a=t.segments[i];var s=this.sourceUpdater_.audioBuffered();var o=this.sourceUpdater_.videoBuffered();var l;var u;if(s.length){l=s.end(s.length-1)-this.sourceUpdater_.audioTimestampOffset()}if(o.length){u=wa(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)}return{requestId:"segment-loader-"+Math.random(),uri:a.resolvedUri,mediaIndex:i,isSyncRequest:n,startOfSegment:r,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:a.timeline,duration:a.duration,segment:a,byteLength:0,transmuxer:this.transmuxer_,audioAppendStart:l,gopsToAlignWith:u}};i.earlyAbortWhenNeeded_=function e(t){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH){return}if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3){return}var i=this.currentTime_();var r=t.bandwidth;var n=this.pendingSegment_.duration;var a=we.estimateSegmentRequestTime(n,r,this.playlist_,t.bytesReceived);var s=re(this.buffered_(),i,this.vhs_.tech_.playbackRate())-1;if(a<=s){return}var o=ma({master:this.vhs_.playlists.master,currentTime:i,bandwidth:r,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:s,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!o){return}var l=a-s;var u=l-o.rebufferingImpact;var c=.5;if(s<=X){c=1}if(!o.playlist||o.playlist.uri===this.playlist_.uri||u<c){return}this.bandwidth=o.playlist.attributes.BANDWIDTH*Ti.BANDWIDTH_VARIANCE+1;this.trigger("earlyabort")};i.handleAbort_=function e(){this.mediaRequestsAborted+=1};i.handleProgress_=function e(t,i){this.earlyAbortWhenNeeded_(i.stats);if(this.checkForAbort_(i.requestId)){return}this.trigger("progress")};i.handleTrackInfo_=function e(t,i){this.earlyAbortWhenNeeded_(t.stats);if(this.checkForAbort_(t.requestId)){return}if(this.checkForIllegalMediaSwitch(i)){return}i=i||{};if(!Sa(this.currentMediaInfo_,i)){this.appendInitSegment_={audio:true,video:true};this.startingMediaInfo_=i;this.currentMediaInfo_=i;this.logger_("trackinfo update",i);this.trigger("trackinfo")}if(this.checkForAbort_(t.requestId)){return}this.pendingSegment_.trackInfo=i;if(this.hasEnoughInfoToAppend_()){this.processCallQueue_()}};i.handleTimingInfo_=function e(t,i,r,n){this.earlyAbortWhenNeeded_(t.stats);if(this.checkForAbort_(t.requestId)){return}var a=this.pendingSegment_;var s=Ca(i);a[s]=a[s]||{};a[s][r]=n;this.logger_("timinginfo: "+i+" - "+r+" - "+n);if(this.hasEnoughInfoToAppend_()){this.processCallQueue_()}};i.handleCaptions_=function e(t,i){var r=this;this.earlyAbortWhenNeeded_(t.stats);if(this.checkForAbort_(t.requestId)){return}if(i.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var n=this.pendingSegment_;if(!n.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,i));return}var a=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();var s={};i.forEach(function(e){s[e.stream]=s[e.stream]||{startTime:Infinity,captions:[],endTime:0};var t=s[e.stream];t.startTime=Math.min(t.startTime,e.startTime+a);t.endTime=Math.max(t.endTime,e.endTime+a);t.captions.push(e)});Object.keys(s).forEach(function(e){var t=s[e],i=t.startTime,n=t.endTime,o=t.captions;var l=r.inbandTextTracks_;r.logger_("adding cues from "+i+" -> "+n+" for "+e);ga(l,r.vhs_.tech_,e);Ta(i,n,l[e]);ya({captionArray:o,inbandTextTracks:l,timestampOffset:a})});if(this.transmuxer_){this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}};i.handleId3_=function e(t,i,r){this.earlyAbortWhenNeeded_(t.stats);if(this.checkForAbort_(t.requestId)){return}var n=this.pendingSegment_;if(!n.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,i,r));return}var a=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();Ma(this.inbandTextTracks_,r,this.vhs_.tech_);ba({inbandTextTracks:this.inbandTextTracks_,metadataArray:i,timestampOffset:a,videoDuration:this.duration_()})};i.processMetadataQueue_=function e(){this.metadataQueue_.id3.forEach(function(e){return e()});this.metadataQueue_.caption.forEach(function(e){return e()});this.metadataQueue_.id3=[];this.metadataQueue_.caption=[]};i.processCallQueue_=function e(){var t=this.callQueue_;this.callQueue_=[];t.forEach(function(e){return e()})};i.processLoadQueue_=function e(){var t=this.loadQueue_;this.loadQueue_=[];t.forEach(function(e){return e()})};i.hasEnoughInfoToLoad_=function e(){if(this.loaderType_!=="audio"){return true}var t=this.pendingSegment_;if(!t){return false}if(!this.currentMediaInfo_){return true}if(ka({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})){return false}return true};i.hasEnoughInfoToAppend_=function e(){if(!this.sourceUpdater_.ready()){return false}var t=this.pendingSegment_;if(!t||!t.trackInfo){return false}if(!this.handlePartialData_){var i=this.currentMediaInfo_,r=i.hasAudio,n=i.hasVideo,a=i.isMuxed;if(n&&!t.videoTimingInfo){return false}if(r&&!this.audioDisabled_&&!a&&!t.audioTimingInfo){return false}}if(ka({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_})){return false}return true};i.handleData_=function e(t,i){this.earlyAbortWhenNeeded_(t.stats);if(this.checkForAbort_(t.requestId)){return}if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,t,i));return}var r=this.pendingSegment_;this.setTimeMapping_(r.timeline);this.updateMediaSecondsLoaded_(r.segment);if(this.mediaSource_.readyState==="closed"){return}if(t.map){t.map=this.initSegmentForMap(t.map,true);r.segment.map=t.map}if(t.key){this.segmentKey(t.key,true)}r.isFmp4=t.isFmp4;r.timingInfo=r.timingInfo||{};if(r.isFmp4){this.trigger("fmp4");r.timingInfo.start=r[Ca(i.type)].start}else{var n=this.loaderType_==="main"&&this.currentMediaInfo_.hasVideo;var a;if(n){a=this.handlePartialData_?i.videoFramePtsTime:r.videoTimingInfo.start}r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:n,firstVideoFrameTimeForData:a,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}this.updateAppendInitSegmentStatus(r,i.type);this.updateSourceBufferTimestampOffset_(r);r.hasAppendedData_=true;this.processMetadataQueue_();this.appendData_(r,i)};i.updateAppendInitSegmentStatus=function e(t,i){if(this.loaderType_==="main"&&typeof t.timestampOffset==="number"&&!t.changedTimestampOffset){this.appendInitSegment_={audio:true,video:true}}if(this.playlistOfLastInitSegment_[i]!==t.playlist){this.appendInitSegment_[i]=true}};i.getInitSegmentAndUpdateState_=function e(t){var i=t.type,r=t.initSegment,n=t.map,a=t.playlist;if(n){var s=Re(n);if(this.activeInitSegmentId_===s){return null}r=this.initSegmentForMap(n,true).bytes;this.activeInitSegmentId_=s}if(r&&this.appendInitSegment_[i]){this.playlistOfLastInitSegment_[i]=a;this.appendInitSegment_[i]=n?true:false;this.activeInitSegmentId_=null;return r}return null};i.appendToSourceBuffer_=function e(t){var i=this;var r=t.segmentInfo,n=t.type,a=t.initSegment,s=t.data;var o=[s];var l=s.byteLength;if(a){o.unshift(a);l+=a.byteLength}var u=Br({bytes:l,segments:o});this.sourceUpdater_.appendBuffer({segmentInfo:r,type:n,bytes:u},function(e){if(e){i.error(n+" append of "+u.length+"b failed for segment #"+r.mediaIndex+" in playlist "+r.playlist.id);i.trigger("appenderror")}})};i.handleVideoSegmentTimingInfo_=function e(t,i){if(!this.pendingSegment_||t!==this.pendingSegment_.requestId){return}var r=this.pendingSegment_.segment;if(!r.videoTimingInfo){r.videoTimingInfo={}}r.videoTimingInfo.transmuxerPrependedSeconds=i.prependedContentDuration||0;r.videoTimingInfo.transmuxedPresentationStart=i.start.presentation;r.videoTimingInfo.transmuxedPresentationEnd=i.end.presentation;r.videoTimingInfo.baseMediaDecodeTime=i.baseMediaDecodeTime};i.appendData_=function e(t,i){var r=i.type,n=i.data;if(!n||!n.byteLength){return}if(r==="audio"&&this.audioDisabled_){return}var a=this.getInitSegmentAndUpdateState_({type:r,initSegment:i.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:r,initSegment:a,data:n})};i.loadSegment_=function e(t){var i=this;this.state="WAITING";this.pendingSegment_=t;this.trimBackBuffer_(t);if(typeof t.timestampOffset==="number"){if(this.transmuxer_){this.transmuxer_.postMessage({action:"clearAllMp4Captions"})}}if(!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var e=i.buffered_();if(typeof t.timestampOffset==="number"){t.timestampOffset=Oa({segmentTimeline:t.timeline,currentTimeline:i.currentTimeline_,startOfSegment:t.startOfSegment,buffered:e,overrideCheck:true})}delete t.audioAppendStart;var r=i.sourceUpdater_.audioBuffered();if(r.length){t.audioAppendStart=r.end(r.length-1)-i.sourceUpdater_.audioTimestampOffset()}i.updateTransmuxerAndRequestSegment_(t)});return}this.updateTransmuxerAndRequestSegment_(t)};i.updateTransmuxerAndRequestSegment_=function e(t){if(this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)){this.gopBuffer_.length=0;t.gopsToAlignWith=[];this.timeMapping_=0;this.transmuxer_.postMessage({action:"reset"});this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset})}var i=this.createSimplifiedSegmentObj_(t);t.abortRequests=Dn({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:i,handlePartialData:this.handlePartialData_,abortFn:this.handleAbort_.bind(this),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleVideoSegmentTimingInfo_.bind(this,t.requestId),captionsFn:this.handleCaptions_.bind(this),id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this)})};i.trimBackBuffer_=function e(t){var i=La(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);if(i>0){this.remove(0,i)}};i.createSimplifiedSegmentObj_=function e(t){var i=t.segment;var r={resolvedUri:i.resolvedUri,byterange:i.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith};var n=t.playlist.segments[t.mediaIndex];if(n&&n.end&&n.timeline===i.timeline){r.baseStartTime=n.end+t.timestampOffset}if(i.key){var a=i.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);r.key=this.segmentKey(i.key);r.key.iv=a}if(i.map){r.map=this.initSegmentForMap(i.map)}return r};i.saveTransferStats_=function e(t){this.mediaRequests+=1;if(t){this.mediaBytesTransferred+=t.bytesReceived;this.mediaTransferDuration+=t.roundTripTime}};i.saveBandwidthRelatedStats_=function e(t){this.bandwidth=t.bandwidth;this.roundTrip=t.roundTripTime;this.pendingSegment_.byteLength=t.bytesReceived};i.handleTimeout_=function e(){this.mediaRequestsTimedout+=1;this.bandwidth=1;this.roundTrip=NaN;this.trigger("bandwidthupdate")};i.segmentRequestFinished_=function e(t,i,r){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,i,r));return}this.saveTransferStats_(i.stats);if(!this.pendingSegment_){return}if(i.requestId!==this.pendingSegment_.requestId){return}if(t){this.pendingSegment_=null;this.state="READY";if(t.code===pn.ABORTED){return}this.pause();if(t.code===pn.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1;this.error(t);this.trigger("error");return}this.saveBandwidthRelatedStats_(i.stats);var n=this.pendingSegment_;n.endOfAllRequests=i.endOfAllRequests;if(r.gopInfo){this.gopBuffer_=Ea(this.gopBuffer_,r.gopInfo,this.safeAppend_)}this.state="APPENDING";var a=this.isEndOfStream_(n.mediaIndex,n.playlist);var s=this.mediaIndex!==null;var o=n.timeline!==this.currentTimeline_&&n.timeline>0;if(!n.isFmp4&&(a||s&&o)){Ri.endTimeline(this.transmuxer_)}this.trigger("appending");this.waitForAppendsToComplete_(n)};i.setTimeMapping_=function e(t){var i=this.syncController_.mappingForTimeline(t);if(i!==null){this.timeMapping_=i}};i.updateMediaSecondsLoaded_=function e(t){if(typeof t.start==="number"&&typeof t.end==="number"){this.mediaSecondsLoaded+=t.end-t.start}else{this.mediaSecondsLoaded+=t.duration}};i.shouldUpdateTransmuxerTimestampOffset_=function e(t){if(t===null){return false}if(this.loaderType_==="main"&&t!==this.sourceUpdater_.videoTimestampOffset()){return true}if(!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset()){return true}return false};i.trueSegmentStart_=function e(t){var i=t.currentStart,r=t.playlist,n=t.mediaIndex,a=t.firstVideoFrameTimeForData,s=t.currentVideoTimestampOffset,o=t.useVideoTimingInfo,l=t.videoTimingInfo,u=t.audioTimingInfo;if(typeof i!=="undefined"){return i}if(!o){return u.start}var c=r.segments[n-1];if(n===0||!c||typeof c.start==="undefined"||c.end!==a+s){return a}return l.start};i.waitForAppendsToComplete_=function e(t){if(!this.currentMediaInfo_){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:Infinity});this.trigger("error");return}var i=this.currentMediaInfo_,r=i.hasAudio,n=i.hasVideo,a=i.isMuxed;var s=this.loaderType_==="main"&&n;var o=!this.audioDisabled_&&r&&!a;t.waitingOnAppends=0;if(!t.hasAppendedData_){if(!t.timingInfo&&typeof t.timestampOffset==="number"){this.isPendingTimestampOffset_=true}t.timingInfo={start:0};t.waitingOnAppends++;if(!this.isPendingTimestampOffset_){this.updateSourceBufferTimestampOffset_(t);this.processMetadataQueue_()}this.checkAppendsDone_(t);return}if(s){t.waitingOnAppends++}if(o){t.waitingOnAppends++}if(s){this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t))}if(o){this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))}};i.checkAppendsDone_=function e(t){if(this.checkForAbort_(t.requestId)){return}t.waitingOnAppends--;if(t.waitingOnAppends===0){this.handleAppendsDone_()}};i.checkForIllegalMediaSwitch=function e(t){var i=ja(this.loaderType_,this.currentMediaInfo_,t);if(i){this.error({message:i,blacklistDuration:Infinity});this.trigger("error");return true}return false};i.updateSourceBufferTimestampOffset_=function e(t){if(t.timestampOffset===null||typeof t.timingInfo.start!=="number"||t.changedTimestampOffset||this.loaderType_!=="main"){return}var i=false;t.timestampOffset-=t.timingInfo.start;t.changedTimestampOffset=true;if(t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()){this.sourceUpdater_.videoTimestampOffset(t.timestampOffset);i=true}if(t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()){this.sourceUpdater_.audioTimestampOffset(t.timestampOffset);i=true}if(i){this.trigger("timestampoffset")}};i.updateTimingInfoEnd_=function e(t){t.timingInfo=t.timingInfo||{};var i=this.loaderType_==="main"&&this.currentMediaInfo_.hasVideo;var r=i&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;if(!r){return}t.timingInfo.end=typeof r.end==="number"?r.end:r.start+t.duration};i.handleAppendsDone_=function e(){if(this.pendingSegment_){this.trigger("appendsdone")}if(!this.pendingSegment_){this.state="READY";if(!this.paused()){this.monitorBuffer_()}return}var t=this.pendingSegment_;this.updateTimingInfoEnd_(t);if(this.shouldSaveSegmentTimingInfo_){this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:this.loaderType_==="main"})}this.logger_(Na(t));this.recordThroughput_(t);this.pendingSegment_=null;this.state="READY";if(t.isSyncRequest){this.trigger("syncinfoupdate");return}this.addSegmentMetadataCue_(t);this.fetchAtBuffer_=true;if(this.currentTimeline_!==t.timeline){this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline});if(this.loaderType_==="main"&&!this.audioDisabled_){this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})}}this.currentTimeline_=t.timeline;this.trigger("syncinfoupdate");var i=t.segment;if(i.end&&this.currentTime_()-i.end>t.playlist.targetDuration*3){this.resetEverything();return}var r=this.mediaIndex!==null;if(r){this.trigger("bandwidthupdate")}this.trigger("progress");this.mediaIndex=t.mediaIndex;if(this.isEndOfStream_(t.mediaIndex,t.playlist)){this.endOfStream()}this.trigger("appended");if(!this.paused()){this.monitorBuffer_()}};i.recordThroughput_=function e(t){var i=this.throughput.rate;var r=Date.now()-t.endOfAllRequests+1;var n=Math.floor(t.byteLength/r*8*1e3);this.throughput.rate+=(n-i)/++this.throughput.count};i.addSegmentMetadataCue_=function e(t){if(!this.segmentMetadataTrack_){return}var i=t.segment;var n=i.start;var a=i.end;if(!Ia(n)||!Ia(a)){return}Ta(n,a,this.segmentMetadataTrack_);var s=r.WebKitDataCue||r.VTTCue;var o={custom:i.custom,dateTimeObject:i.dateTimeObject,dateTimeString:i.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:n,end:a};var l=JSON.stringify(o);var u=new s(n,a,l);u.value=o;this.segmentMetadataTrack_.addCue(u)};return t}(n.EventTarget);function Ra(){}var za=function e(t){if(typeof t!=="string"){return t}return t.replace(/./,function(e){return e.toUpperCase()})};var Ua=["video","audio"];var Ba=function e(t,i){var r=i[t+"Buffer"];return r&&r.updating||i.queuePending[t]};var Fa=function e(t,i){for(var r=0;r<i.length;r++){var n=i[r];if(n.type==="mediaSource"){return null}if(n.type===t){return r}}return null};var Va=function e(t,i){if(i.queue.length===0){return}var r=0;var n=i.queue[r];if(n.type==="mediaSource"){if(!i.updating()&&i.mediaSource.readyState!=="closed"){i.queue.shift();n.action(i);if(n.doneFn){n.doneFn()}e("audio",i);e("video",i)}return}if(t==="mediaSource"){return}if(!i.started_||i.mediaSource.readyState==="closed"||Ba(t,i)){return}if(n.type!==t){r=Fa(t,i.queue);if(r===null){return}n=i.queue[r]}i.queue.splice(r,1);n.action(t,i);if(!n.doneFn){e(t,i);return}i.queuePending[t]=n};var Ga=function e(t,i){var r=i[t+"Buffer"];var n=za(t);if(!r){return}r.removeEventListener("updateend",i["on"+n+"UpdateEnd_"]);r.removeEventListener("error",i["on"+n+"Error_"]);i.codecs[t]=null;i[t+"Buffer"]=null};var Ha=function e(t,i){return t&&i&&Array.prototype.indexOf.call(t.sourceBuffers,i)!==-1};var Qa={appendBuffer:function e(t,i){return function(e,r){var n=r[e+"Buffer"];if(!Ha(r.mediaSource,n)){return}r.logger_("Appending segment "+i.mediaIndex+"'s "+t.length+" bytes to "+e+"Buffer");n.appendBuffer(t)}},remove:function e(t,i){return function(e,r){var n=r[e+"Buffer"];if(!Ha(r.mediaSource,n)){return}r.logger_("Removing "+t+" to "+i+" from "+e+"Buffer");n.remove(t,i)}},timestampOffset:function e(t){return function(e,i){var r=i[e+"Buffer"];if(!Ha(i.mediaSource,r)){return}i.logger_("Setting "+e+"timestampOffset to "+t);r.timestampOffset=t}},callback:function e(t){return function(e,i){t()}},endOfStream:function e(t){return function(e){if(e.mediaSource.readyState!=="open"){return}e.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{e.mediaSource.endOfStream(t)}catch(e){n.log.warn("Failed to call media source endOfStream",e)}}},duration:function e(t){return function(e){e.logger_("Setting mediaSource duration to "+t);try{e.mediaSource.duration=t}catch(e){n.log.warn("Failed to set media source duration",e)}}},abort:function e(){return function(e,t){if(t.mediaSource.readyState!=="open"){return}var i=t[e+"Buffer"];if(!Ha(t.mediaSource,i)){return}t.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(t){n.log.warn("Failed to abort on "+e+"Buffer",t)}}},addSourceBuffer:function e(t,i){return function(e){var r=za(t);var n=Wn(i);e.logger_("Adding "+t+"Buffer with codec "+i+" to mediaSource");var a=e.mediaSource.addSourceBuffer(n);a.addEventListener("updateend",e["on"+r+"UpdateEnd_"]);a.addEventListener("error",e["on"+r+"Error_"]);e.codecs[t]=i;e[t+"Buffer"]=a}},removeSourceBuffer:function e(t){return function(e){var i=e[t+"Buffer"];Ga(t,e);if(!Ha(e.mediaSource,i)){return}e.logger_("Removing "+t+"Buffer with codec "+e.codecs[t]+" from mediaSource");try{e.mediaSource.removeSourceBuffer(i)}catch(e){n.log.warn("Failed to removeSourceBuffer "+t+"Buffer",e)}}},changeType:function e(t){return function(e,i){var r=i[e+"Buffer"];var n=Wn(t);if(!Ha(i.mediaSource,r)){return}if(i.codecs[e]===t){return}i.logger_("changing "+e+"Buffer codec from "+i.codecs[e]+" to "+t);r.changeType(n);i.codecs[e]=t}}};var Ya=function e(t){var i=t.type,r=t.sourceUpdater,n=t.action,a=t.doneFn,s=t.name;r.queue.push({type:i,action:n,doneFn:a,name:s});Va(i,r)};var Wa=function e(t,i){return function(e){if(i.queuePending[t]){var r=i.queuePending[t].doneFn;i.queuePending[t]=null;if(r){r(i[t+"Error_"])}}Va(t,i)}};var qa=function(e){u(t,e);function t(t){var i;i=e.call(this)||this;i.mediaSource=t;i.sourceopenListener_=function(){return Va("mediaSource",o(i))};i.mediaSource.addEventListener("sourceopen",i.sourceopenListener_);i.logger_=aa("SourceUpdater");i.audioTimestampOffset_=0;i.videoTimestampOffset_=0;i.queue=[];i.queuePending={audio:null,video:null};i.delayedAudioAppendQueue_=[];i.videoAppendQueued_=false;i.codecs={};i.onVideoUpdateEnd_=Wa("video",o(i));i.onAudioUpdateEnd_=Wa("audio",o(i));i.onVideoError_=function(e){i.videoError_=e};i.onAudioError_=function(e){i.audioError_=e};i.started_=false;return i}var i=t.prototype;i.ready=function e(){return this.started_};i.createSourceBuffers=function e(t){if(this.ready()){return}this.addOrChangeSourceBuffers(t);this.started_=true;this.trigger("ready")};i.addSourceBuffer=function e(t,i){Ya({type:"mediaSource",sourceUpdater:this,action:Qa.addSourceBuffer(t,i),name:"addSourceBuffer"})};i.abort=function e(t){Ya({type:t,sourceUpdater:this,action:Qa.abort(t),name:"abort"})};i.removeSourceBuffer=function e(t){if(!this.canRemoveSourceBuffer()){n.log.error("removeSourceBuffer is not supported!");return}Ya({type:"mediaSource",sourceUpdater:this,action:Qa.removeSourceBuffer(t),name:"removeSourceBuffer"})};i.canRemoveSourceBuffer=function e(){return!n.browser.IE_VERSION&&r.MediaSource&&r.MediaSource.prototype&&typeof r.MediaSource.prototype.removeSourceBuffer==="function"};t.canChangeType=function e(){return r.SourceBuffer&&r.SourceBuffer.prototype&&typeof r.SourceBuffer.prototype.changeType==="function"};i.canChangeType=function e(){return this.constructor.canChangeType()};i.changeType=function e(t,i){if(!this.canChangeType()){n.log.error("changeType is not supported!");return}Ya({type:t,sourceUpdater:this,action:Qa.changeType(i),name:"changeType"})};i.addOrChangeSourceBuffers=function e(t){var i=this;if(!t||typeof t!=="object"||Object.keys(t).length===0){throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs")}Object.keys(t).forEach(function(e){var r=t[e];if(!i.ready()){return i.addSourceBuffer(e,r)}if(i.canChangeType()){i.changeType(e,r)}})};i.appendBuffer=function e(t,i){var r=this;var n=t.segmentInfo,a=t.type,s=t.bytes;this.processedAppend_=true;if(a==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([t,i]);this.logger_("delayed audio append of "+s.length+" until video append");return}Ya({type:a,sourceUpdater:this,action:Qa.appendBuffer(s,n||{mediaIndex:-1}),doneFn:i,name:"appendBuffer"});if(a==="video"){this.videoAppendQueued_=true;if(!this.delayedAudioAppendQueue_.length){return}var o=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+o.length+" appendBuffers");this.delayedAudioAppendQueue_.length=0;o.forEach(function(e){r.appendBuffer.apply(r,e)})}};i.audioBuffered=function e(){if(!Ha(this.mediaSource,this.audioBuffer)){return n.createTimeRange()}return this.audioBuffer.buffered?this.audioBuffer.buffered:n.createTimeRange()};i.videoBuffered=function e(){if(!Ha(this.mediaSource,this.videoBuffer)){return n.createTimeRange()}return this.videoBuffer.buffered?this.videoBuffer.buffered:n.createTimeRange()};i.buffered=function e(){var t=Ha(this.mediaSource,this.videoBuffer)?this.videoBuffer:null;var i=Ha(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;if(i&&!t){return this.audioBuffered()}if(t&&!i){return this.videoBuffered()}return te(this.audioBuffered(),this.videoBuffered())};i.setDuration=function e(t,i){if(i===void 0){i=Ra}Ya({type:"mediaSource",sourceUpdater:this,action:Qa.duration(t),name:"duration",doneFn:i})};i.endOfStream=function e(t,i){if(t===void 0){t=null}if(i===void 0){i=Ra}if(typeof t!=="string"){t=undefined}Ya({type:"mediaSource",sourceUpdater:this,action:Qa.endOfStream(t),name:"endOfStream",doneFn:i})};i.removeAudio=function e(t,i,r){if(r===void 0){r=Ra}if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){r();return}Ya({type:"audio",sourceUpdater:this,action:Qa.remove(t,i),doneFn:r,name:"remove"})};i.removeVideo=function e(t,i,r){if(r===void 0){r=Ra}if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){r();return}Ya({type:"video",sourceUpdater:this,action:Qa.remove(t,i),doneFn:r,name:"remove"})};i.updating=function e(){if(Ba("audio",this)||Ba("video",this)){return true}return false};i.audioTimestampOffset=function e(t){if(typeof t!=="undefined"&&this.audioBuffer&&this.audioTimestampOffset_!==t){Ya({type:"audio",sourceUpdater:this,action:Qa.timestampOffset(t),name:"timestampOffset"});this.audioTimestampOffset_=t}return this.audioTimestampOffset_};i.videoTimestampOffset=function e(t){if(typeof t!=="undefined"&&this.videoBuffer&&this.videoTimestampOffset!==t){Ya({type:"video",sourceUpdater:this,action:Qa.timestampOffset(t),name:"timestampOffset"});this.videoTimestampOffset_=t}return this.videoTimestampOffset_};i.audioQueueCallback=function e(t){if(!this.audioBuffer){return}Ya({type:"audio",sourceUpdater:this,action:Qa.callback(t),name:"callback"})};i.videoQueueCallback=function e(t){if(!this.videoBuffer){return}Ya({type:"video",sourceUpdater:this,action:Qa.callback(t),name:"callback"})};i.dispose=function e(){var t=this;this.trigger("dispose");Ua.forEach(function(e){t.abort(e);if(t.canRemoveSourceBuffer()){t.removeSourceBuffer(e)}else{t[e+"QueueCallback"](function(){return Ga(e,t)})}});this.videoAppendQueued_=false;this.delayedAudioAppendQueue_.length=0;if(this.sourceopenListener_){this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_)}this.off()};return t}(n.EventTarget);var Xa=function e(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))};var Za=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)}));var Ka=function(e){u(t,e);function t(t,i){var r;if(i===void 0){i={}}r=e.call(this,t,i)||this;r.handlePartialData_=false;r.mediaSource_=null;r.subtitlesTrack_=null;r.loaderType_="subtitle";r.featuresNativeTextTracks_=t.featuresNativeTextTracks;r.shouldSaveSegmentTimingInfo_=false;return r}var i=t.prototype;i.createTransmuxer_=function e(){return null};i.buffered_=function e(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length){return n.createTimeRanges()}var t=this.subtitlesTrack_.cues;var i=t[0].startTime;var r=t[t.length-1].startTime;return n.createTimeRanges([[i,r]])};i.initSegmentForMap=function e(t,i){if(i===void 0){i=false}if(!t){return null}var r=Re(t);var n=this.initSegments_[r];if(i&&!n&&t.bytes){var a=Za.byteLength+t.bytes.byteLength;var s=new Uint8Array(a);s.set(t.bytes);s.set(Za,t.bytes.byteLength);this.initSegments_[r]=n={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:s}}return n||t};i.couldBeginLoading_=function e(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()};i.init_=function e(){this.state="READY";this.resetEverything();return this.monitorBuffer_()};i.track=function e(t){if(typeof t==="undefined"){return this.subtitlesTrack_}this.subtitlesTrack_=t;if(this.state==="INIT"&&this.couldBeginLoading_()){this.init_()}return this.subtitlesTrack_};i.remove=function e(t,i){Ta(t,i,this.subtitlesTrack_)};i.fillBuffer_=function e(){var t=this;if(!this.syncPoint_){this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())}var i=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);i=this.skipEmptySegments_(i);if(!i){return}if(this.syncController_.timestampOffsetForTimeline(i.timeline)===null){var r=function e(){t.state="READY";if(!t.paused()){t.monitorBuffer_()}};this.syncController_.one("timestampoffset",r);this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(i)};i.skipEmptySegments_=function e(t){while(t&&t.segment.empty){t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest)}return t};i.stopForError=function e(t){this.error(t);this.state="READY";this.pause();this.trigger("error")};i.segmentRequestFinished_=function e(t,i,n){var a=this;if(!this.subtitlesTrack_){this.state="READY";return}this.saveTransferStats_(i.stats);if(!this.pendingSegment_){this.state="READY";this.mediaRequestsAborted+=1;return}if(t){if(t.code===pn.TIMEOUT){this.handleTimeout_()}if(t.code===pn.ABORTED){this.mediaRequestsAborted+=1}else{this.mediaRequestsErrored+=1}this.stopForError(t);return}this.saveBandwidthRelatedStats_(i.stats);this.state="APPENDING";this.trigger("appending");var s=this.pendingSegment_;var o=s.segment;if(o.map){o.map.bytes=i.map.bytes}s.bytes=i.bytes;if(typeof r.WebVTT!=="function"&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var l;var u=function e(){a.subtitlesTrack_.tech_.off("vttjsloaded",l);a.stopForError({message:"Error loading vtt.js"});return};l=function e(){a.subtitlesTrack_.tech_.off("vttjserror",u);a.segmentRequestFinished_(t,i,n)};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",l);this.subtitlesTrack_.tech_.one("vttjserror",u);return}o.requested=true;try{this.parseVTTCues_(s)}catch(e){this.stopForError({message:e.message});return}this.updateTimeMapping_(s,this.syncController_.timelines[s.timeline],this.playlist_);if(s.cues.length){s.timingInfo={start:s.cues[0].startTime,end:s.cues[s.cues.length-1].endTime}}else{s.timingInfo={start:s.startOfSegment,end:s.startOfSegment+s.duration}}if(s.isSyncRequest){this.trigger("syncinfoupdate");this.pendingSegment_=null;this.state="READY";return}s.byteLength=s.bytes.byteLength;this.mediaSecondsLoaded+=o.duration;s.cues.forEach(function(e){a.subtitlesTrack_.addCue(a.featuresNativeTextTracks_?new r.VTTCue(e.startTime,e.endTime,e.text):e)});Aa(this.subtitlesTrack_);this.handleAppendsDone_()};i.handleData_=function e(){};i.updateTimingInfoEnd_=function e(){};i.parseVTTCues_=function e(t){var i;var a=false;if(typeof r.TextDecoder==="function"){i=new r.TextDecoder("utf8")}else{i=r.WebVTT.StringDecoder();a=true}var s=new r.WebVTT.Parser(r,r.vttjs,i);t.cues=[];t.timestampmap={MPEGTS:0,LOCAL:0};s.oncue=t.cues.push.bind(t.cues);s.ontimestampmap=function(e){t.timestampmap=e};s.onparsingerror=function(e){n.log.warn("Error encountered when parsing cues: "+e.message)};if(t.segment.map){var o=t.segment.map.bytes;if(a){o=Xa(o)}s.parse(o)}var l=t.bytes;if(a){l=Xa(l)}s.parse(l);s.flush()};i.updateTimeMapping_=function e(t,i,r){var n=t.segment;if(!i){return}if(!t.cues.length){n.empty=true;return}var a=t.timestampmap;var s=a.MPEGTS/Er-a.LOCAL+i.mapping;t.cues.forEach(function(e){e.startTime+=s;e.endTime+=s});if(!r.syncInfo){var o=t.cues[0].startTime;var l=t.cues[t.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:Math.min(o,l-n.duration)}}};return t}(Pa);var Ja=function e(t,i){var r=t.cues;for(var n=0;n<r.length;n++){var a=r[n];if(i>=a.adStartTime&&i<=a.adEndTime){return a}}return null};var $a=function e(t,i,n){if(n===void 0){n=0}if(!t.segments){return}var a=n;var s;for(var o=0;o<t.segments.length;o++){var l=t.segments[o];if(!s){s=Ja(i,a+l.duration/2)}if(s){if("cueIn"in l){s.endTime=a;s.adEndTime=a;a+=l.duration;s=null;continue}if(a<s.endTime){a+=l.duration;continue}s.endTime+=l.duration}else{if("cueOut"in l){s=new r.VTTCue(a,a+l.duration,l.cueOut);s.adStartTime=a;s.adEndTime=a+parseFloat(l.cueOut);i.addCue(s)}if("cueOutCont"in l){var u=l.cueOutCont.split("/").map(parseFloat),c=u[0],d=u[1];s=new r.VTTCue(a,a+l.duration,"");s.adStartTime=a-c;s.adEndTime=s.adStartTime+d;i.addCue(s)}}a+=l.duration}};var es=[{name:"VOD",run:function e(t,i,r,n,a){if(r!==Infinity){var s={time:0,segmentIndex:0};return s}return null}},{name:"ProgramDateTime",run:function e(t,i,r,n,a){if(!t.datetimeToDisplayTime){return null}var s=i.segments||[];var o=null;var l=null;a=a||0;for(var u=0;u<s.length;u++){var c=s[u];if(c.dateTimeObject){var d=c.dateTimeObject.getTime()/1e3;var h=d+t.datetimeToDisplayTime;var f=Math.abs(a-h);if(l!==null&&(f===0||l<f)){break}l=f;o={time:h,segmentIndex:u}}}return o}},{name:"Segment",run:function e(t,i,r,n,a){var s=i.segments||[];var o=null;var l=null;a=a||0;for(var u=0;u<s.length;u++){var c=s[u];if(c.timeline===n&&typeof c.start!=="undefined"){var d=Math.abs(a-c.start);if(l!==null&&l<d){break}if(!o||l===null||l>=d){l=d;o={time:c.start,segmentIndex:u}}}}return o}},{name:"Discontinuity",run:function e(t,i,r,n,a){var s=null;a=a||0;if(i.discontinuityStarts&&i.discontinuityStarts.length){var o=null;for(var l=0;l<i.discontinuityStarts.length;l++){var u=i.discontinuityStarts[l];var c=i.discontinuitySequence+l+1;var d=t.discontinuities[c];if(d){var h=Math.abs(a-d.time);if(o!==null&&o<h){break}if(!s||o===null||o>=h){o=h;s={time:d.time,segmentIndex:u}}}}}return s}},{name:"Playlist",run:function e(t,i,r,n,a){if(i.syncInfo){var s={time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence};return s}return null}}];var ts=function(e){u(t,e);function t(t){var i;i=e.call(this)||this;i.timelines=[];i.discontinuities=[];i.datetimeToDisplayTime=null;i.logger_=aa("SyncController");return i}var i=t.prototype;i.getSyncPoint=function e(t,i,r,n){var a=this.runStrategies_(t,i,r,n);if(!a.length){return null}return this.selectSyncPoint_(a,{key:"time",value:n})};i.getExpiredTime=function e(t,i){if(!t||!t.segments){return null}var r=this.runStrategies_(t,i,t.discontinuitySequence,0);if(!r.length){return null}var n=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});if(n.segmentIndex>0){n.time*=-1}return Math.abs(n.time+de(t,n.segmentIndex,0))};i.runStrategies_=function e(t,i,r,n){var a=[];for(var s=0;s<es.length;s++){var o=es[s];var l=o.run(this,t,i,r,n);if(l){l.strategy=o.name;a.push({strategy:o.name,syncPoint:l})}}return a};i.selectSyncPoint_=function e(t,i){var r=t[0].syncPoint;var n=Math.abs(t[0].syncPoint[i.key]-i.value);var a=t[0].strategy;for(var s=1;s<t.length;s++){var o=Math.abs(t[s].syncPoint[i.key]-i.value);if(o<n){n=o;r=t[s].syncPoint;a=t[s].strategy}}this.logger_("syncPoint for ["+i.key+": "+i.value+"] chosen with strategy"+(" ["+a+"]: [time:"+r.time+",")+(" segmentIndex:"+r.segmentIndex+"]"));return r};i.saveExpiredSegmentInfo=function e(t,i){var r=i.mediaSequence-t.mediaSequence;for(var n=r-1;n>=0;n--){var a=t.segments[n];if(a&&typeof a.start!=="undefined"){i.syncInfo={mediaSequence:t.mediaSequence+n,time:a.start};this.logger_("playlist refresh sync: [time:"+i.syncInfo.time+","+(" mediaSequence: "+i.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}};i.setDateTimeMapping=function e(t){if(!this.datetimeToDisplayTime&&t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var i=t.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-i}};i.saveSegmentTimingInfo=function e(t){var i=t.segmentInfo,r=t.shouldSaveTimelineMapping;var n=this.calculateSegmentTimeMapping_(i,i.timingInfo,r);if(n){this.saveDiscontinuitySyncInfo_(i);if(!i.playlist.syncInfo){i.playlist.syncInfo={mediaSequence:i.playlist.mediaSequence+i.mediaIndex,time:i.segment.start}}}};i.timestampOffsetForTimeline=function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].time};i.mappingForTimeline=function e(t){if(typeof this.timelines[t]==="undefined"){return null}return this.timelines[t].mapping};i.calculateSegmentTimeMapping_=function e(t,i,r){var n=t.segment;var a=this.timelines[t.timeline];if(t.timestampOffset!==null){a={time:t.startOfSegment,mapping:t.startOfSegment-i.start};if(r){this.timelines[t.timeline]=a;this.trigger("timestampoffset");this.logger_("time mapping for timeline "+t.timeline+": "+("[time: "+a.time+"] [mapping: "+a.mapping+"]"))}n.start=t.startOfSegment;n.end=i.end+a.mapping}else if(a){n.start=i.start+a.mapping;n.end=i.end+a.mapping}else{return false}return true};i.saveDiscontinuitySyncInfo_=function e(t){var i=t.playlist;var r=t.segment;if(r.discontinuity){this.discontinuities[r.timeline]={time:r.start,accuracy:0}}else if(i.discontinuityStarts&&i.discontinuityStarts.length){for(var n=0;n<i.discontinuityStarts.length;n++){var a=i.discontinuityStarts[n];var s=i.discontinuitySequence+n+1;var o=a-t.mediaIndex;var l=Math.abs(o);if(!this.discontinuities[s]||this.discontinuities[s].accuracy>l){var u=void 0;if(o<0){u=r.start-de(i,t.mediaIndex,a)}else{u=r.end+de(i,t.mediaIndex+1,a)}this.discontinuities[s]={time:u,accuracy:l}}}}};i.dispose=function e(){this.trigger("dispose");this.off()};return t}(n.EventTarget);var is=function(e){u(t,e);function t(){var t;t=e.call(this)||this;t.pendingTimelineChanges_={};t.lastTimelineChanges_={};return t}var i=t.prototype;i.clearPendingTimelineChange=function e(t){this.pendingTimelineChanges_[t]=null;this.trigger("pendingtimelinechange")};i.pendingTimelineChange=function e(t){var i=t.type,r=t.from,n=t.to;if(typeof r==="number"&&typeof n==="number"){this.pendingTimelineChanges_[i]={type:i,from:r,to:n};this.trigger("pendingtimelinechange")}return this.pendingTimelineChanges_[i]};i.lastTimelineChange=function e(t){var i=t.type,r=t.from,n=t.to;if(typeof r==="number"&&typeof n==="number"){this.lastTimelineChanges_[i]={type:i,from:r,to:n};delete this.pendingTimelineChanges_[i];this.trigger("timelinechange")}return this.lastTimelineChanges_[i]};i.dispose=function e(){this.trigger("dispose");this.pendingTimelineChanges_={};this.lastTimelineChanges_={};this.off()};return t}(n.EventTarget);var rs=new kn("./decrypter-worker.worker.js",function(e,t){var i=this;var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function t(t,i,r){if(i)e(t.prototype,i);if(r)e(t,r);return t}var r=t;function n(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var a=n;var s=function(){function e(){this.listeners={}}var t=e.prototype;t.on=function e(t,i){if(!this.listeners[t]){this.listeners[t]=[]}this.listeners[t].push(i)};t.off=function e(t,i){if(!this.listeners[t]){return false}var r=this.listeners[t].indexOf(i);this.listeners[t]=this.listeners[t].slice(0);this.listeners[t].splice(r,1);return r>-1};t.trigger=function e(t){var i=this.listeners[t];if(!i){return}if(arguments.length===2){var r=i.length;for(var n=0;n<r;++n){i[n].call(this,arguments[1])}}else{var a=Array.prototype.slice.call(arguments,1);var s=i.length;for(var o=0;o<s;++o){i[o].apply(this,a)}}};t.dispose=function e(){this.listeners={}};t.pipe=function e(t){this.on("data",function(e){t.push(e)})};return e}();var o=s;function l(e){return e.subarray(0,e.byteLength-e[e.byteLength-1])}var u=function e(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]];var i=t[0];var r=t[1];var n=i[4];var a=r[4];var s;var o;var l;var u=[];var c=[];var d;var h;var f;var p;var m;var v;for(s=0;s<256;s++){c[(u[s]=s<<1^(s>>7)*283)^s]=s}for(o=l=0;!n[o];o^=d||1,l=c[l]||1){p=l^l<<1^l<<2^l<<3^l<<4;p=p>>8^p&255^99;n[o]=p;a[p]=o;f=u[h=u[d=u[o]]];v=f*16843009^h*65537^d*257^o*16843008;m=u[p]*257^p*16843008;for(s=0;s<4;s++){i[s][o]=m=m<<24^m>>>8;r[s][p]=v=v<<24^v>>>8}}for(s=0;s<5;s++){i[s]=i[s].slice(0);r[s]=r[s].slice(0)}return t};var c=null;var d=function(){function e(e){if(!c){c=u()}this._tables=[[c[0][0].slice(),c[0][1].slice(),c[0][2].slice(),c[0][3].slice(),c[0][4].slice()],[c[1][0].slice(),c[1][1].slice(),c[1][2].slice(),c[1][3].slice(),c[1][4].slice()]];var t;var i;var r;var n=this._tables[0][4];var a=this._tables[1];var s=e.length;var o=1;if(s!==4&&s!==6&&s!==8){throw new Error("Invalid aes key size")}var l=e.slice(0);var d=[];this._key=[l,d];for(t=s;t<4*s+28;t++){r=l[t-1];if(t%s===0||s===8&&t%s===4){r=n[r>>>24]<<24^n[r>>16&255]<<16^n[r>>8&255]<<8^n[r&255];if(t%s===0){r=r<<8^r>>>24^o<<24;o=o<<1^(o>>7)*283}}l[t]=l[t-s]^r}for(i=0;t;i++,t--){r=l[i&3?t:t-4];if(t<=4||i<4){d[i]=r}else{d[i]=a[0][n[r>>>24]]^a[1][n[r>>16&255]]^a[2][n[r>>8&255]]^a[3][n[r&255]]}}}var t=e.prototype;t.decrypt=function e(t,i,r,n,a,s){var o=this._key[1];var l=t^o[0];var u=n^o[1];var c=r^o[2];var d=i^o[3];var h;var f;var p;var m=o.length/4-2;var v;var g=4;var y=this._tables[1];var _=y[0];var b=y[1];var M=y[2];var T=y[3];var A=y[4];for(v=0;v<m;v++){h=_[l>>>24]^b[u>>16&255]^M[c>>8&255]^T[d&255]^o[g];f=_[u>>>24]^b[c>>16&255]^M[d>>8&255]^T[l&255]^o[g+1];p=_[c>>>24]^b[d>>16&255]^M[l>>8&255]^T[u&255]^o[g+2];d=_[d>>>24]^b[l>>16&255]^M[u>>8&255]^T[c&255]^o[g+3];g+=4;l=h;u=f;c=p}for(v=0;v<4;v++){a[(3&-v)+s]=A[l>>>24]<<24^A[u>>16&255]<<16^A[c>>8&255]<<8^A[d&255]^o[g++];h=l;l=u;u=c;c=d;d=h}};return e}();var h=function(e){a(t,e);function t(){var t;t=e.call(this,o)||this;t.jobs=[];t.delay=1;t.timeout_=null;return t}var i=t.prototype;i.processJob_=function e(){this.jobs.shift()();if(this.jobs.length){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}else{this.timeout_=null}};i.push=function e(t){this.jobs.push(t);if(!this.timeout_){this.timeout_=setTimeout(this.processJob_.bind(this),this.delay)}};return t}(o);var f=function e(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24};var p=function e(t,i,r){var n=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2);var a=new d(Array.prototype.slice.call(i));var s=new Uint8Array(t.byteLength);var o=new Int32Array(s.buffer);var l;var u;var c;var h;var p;var m;var v;var g;var y;l=r[0];u=r[1];c=r[2];h=r[3];for(y=0;y<n.length;y+=4){p=f(n[y]);m=f(n[y+1]);v=f(n[y+2]);g=f(n[y+3]);a.decrypt(p,m,v,g,o,y);o[y]=f(o[y]^l);o[y+1]=f(o[y+1]^u);o[y+2]=f(o[y+2]^c);o[y+3]=f(o[y+3]^h);l=p;u=m;c=v;h=g}return s};var m=function(){function e(t,i,r,n){var a=e.STEP;var s=new Int32Array(t.buffer);var o=new Uint8Array(t.byteLength);var u=0;this.asyncStream_=new h;this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),i,r,o));for(u=a;u<s.length;u+=a){r=new Uint32Array([f(s[u-4]),f(s[u-3]),f(s[u-2]),f(s[u-1])]);this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),i,r,o))}this.asyncStream_.push(function(){n(null,l(o))})}var t=e.prototype;t.decryptChunk_=function e(t,i,r,n){return function(){var e=p(t,i,r);n.set(e,t.byteOffset)}};r(e,null,[{key:"STEP",get:function e(){return 32e3}}]);return e}();var v=function e(t){var i={};Object.keys(t).forEach(function(e){var r=t[e];if(ArrayBuffer.isView(r)){i[e]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}}else{i[e]=r}});return i};var g=function e(t){t.onmessage=function(e){var i=e.data;var r=new Uint8Array(i.encrypted.bytes,i.encrypted.byteOffset,i.encrypted.byteLength);var n=new Uint32Array(i.key.bytes,i.key.byteOffset,i.key.byteLength/4);var a=new Uint32Array(i.iv.bytes,i.iv.byteOffset,i.iv.byteLength/4);new m(r,n,a,function(e,r){t.postMessage(v({source:i.source,decrypted:r}),[r.buffer])})}};var y=new g(i);return y}()});var ns=function e(t){var i=t.default?"main":"alternative";if(t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0){i="main-desc"}return i};var as=function e(t,i){t.abort();t.pause();if(i&&i.activePlaylistLoader){i.activePlaylistLoader.pause();i.activePlaylistLoader=null}};var ss=function e(t,i){i.activePlaylistLoader=t;t.load()};var os=function e(t,i){return function(){var e=i.segmentLoaders,r=e[t],n=e.main,a=i.mediaTypes[t];var s=a.activeTrack();var o=a.activeGroup(s);var l=a.activePlaylistLoader;as(r,a);if(!o){return}if(!o.playlistLoader){if(l){n.resetEverything()}return}r.resyncLoader();ss(o.playlistLoader,a)}};var ls=function e(t,i){return function(){var e=i.segmentLoaders[t];e.abort();e.pause()}};var us=function e(t,i){return function(){var e=i.segmentLoaders,r=e[t],n=e.main,a=i.mediaTypes[t];var s=a.activeTrack();var o=a.activeGroup(s);var l=a.activePlaylistLoader;as(r,a);if(!o){return}if(t==="AUDIO"){if(!o.playlistLoader){n.setAudio(true);n.resetEverything();return}r.setAudio(true);n.setAudio(false)}if(l===o.playlistLoader){ss(o.playlistLoader,a);return}if(r.track){r.track(s)}r.resetEverything();ss(o.playlistLoader,a)}};var cs={AUDIO:function e(t,i){return function(){var e=i.segmentLoaders[t],r=i.mediaTypes[t],a=i.blacklistCurrentPlaylist;as(e,r);var s=r.activeTrack();var o=r.activeGroup();var l=(o.filter(function(e){return e.default})[0]||o[0]).id;var u=r.tracks[l];if(s===u){a({message:"Problem encountered loading the default audio track."});return}n.log.warn("Problem encountered loading the alternate audio track."+"Switching back to default.");for(var c in r.tracks){r.tracks[c].enabled=r.tracks[c]===u}r.onTrackChanged()}},SUBTITLES:function e(t,i){return function(){var e=i.segmentLoaders[t],r=i.mediaTypes[t];n.log.warn("Problem encountered loading the subtitle track."+"Disabling subtitle track.");as(e,r);var a=r.activeTrack();if(a){a.mode="disabled"}r.onTrackChanged()}}};var ds={AUDIO:function e(t,i,r){if(!i){return}var n=r.tech,a=r.requestOptions,s=r.segmentLoaders[t];i.on("loadedmetadata",function(){var e=i.media();s.playlist(e,a);if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}});i.on("loadedplaylist",function(){s.playlist(i.media(),a);if(!n.paused()){s.load()}});i.on("error",cs[t](t,r))},SUBTITLES:function e(t,i,r){var n=r.tech,a=r.requestOptions,s=r.segmentLoaders[t],o=r.mediaTypes[t];i.on("loadedmetadata",function(){var e=i.media();s.playlist(e,a);s.track(o.activeTrack());if(!n.paused()||e.endList&&n.preload()!=="none"){s.load()}});i.on("loadedplaylist",function(){s.playlist(i.media(),a);if(!n.paused()){s.load()}});i.on("error",cs[t](t,r))}};var hs={AUDIO:function e(t,i){var r=i.vhs,a=i.sourceType,s=i.segmentLoaders[t],o=i.requestOptions,l=i.master,u=l.mediaGroups,c=l.playlists,d=i.mediaTypes[t],h=d.groups,f=d.tracks,p=i.masterPlaylistLoader;if(!u[t]||Object.keys(u[t]).length===0){u[t]={main:{default:{default:true}}}}var m=function e(s){if(!h[s]){h[s]=[]}var l=c.filter(function(e){return e.attributes[t]===s});var d=function e(c){var d=u[t][s][c];var m=l.filter(function(e){return e.resolvedUri!==d.resolvedUri});if(!m.length&&l.length){delete d.resolvedUri}var v=void 0;if(a==="vhs-json"&&d.playlists){v=new q(d.playlists[0],r,o)}else if(d.resolvedUri){v=new q(d.resolvedUri,r,o)}else if(d.playlists&&a==="dash"){v=new Mi(d.playlists[0],r,o,p)}else{v=null}d=n.mergeOptions({id:c,playlistLoader:v},d);ds[t](t,d.playlistLoader,i);h[s].push(d);if(typeof f[c]==="undefined"){var g=new n.AudioTrack({id:c,kind:ns(d),enabled:false,language:d.language,default:d.default,label:c});f[c]=g}};for(var m in u[t][s]){d(m)}};for(var v in u[t]){m(v)}s.on("error",cs[t](t,i))},SUBTITLES:function e(t,i){var r=i.tech,a=i.vhs,s=i.sourceType,o=i.segmentLoaders[t],l=i.requestOptions,u=i.master.mediaGroups,c=i.mediaTypes[t],d=c.groups,h=c.tracks,f=i.masterPlaylistLoader;for(var p in u[t]){if(!d[p]){d[p]=[]}for(var m in u[t][p]){if(u[t][p][m].forced){continue}var v=u[t][p][m];var g=void 0;if(s==="hls"){g=new q(v.resolvedUri,a,l)}else if(s==="dash"){g=new Mi(v.playlists[0],a,l,f)}else if(s==="vhs-json"){g=new q(v.playlists?v.playlists[0]:v.resolvedUri,a,l)}v=n.mergeOptions({id:m,playlistLoader:g},v);ds[t](t,v.playlistLoader,i);d[p].push(v);if(typeof h[m]==="undefined"){var y=r.addRemoteTextTrack({id:m,kind:"subtitles",default:v.default&&v.autoselect,language:v.language,label:m},false).track;h[m]=y}}}o.on("error",cs[t](t,i))},"CLOSED-CAPTIONS":function e(t,i){var r=i.tech,a=i.master.mediaGroups,s=i.mediaTypes[t],o=s.groups,l=s.tracks;for(var u in a[t]){if(!o[u]){o[u]=[]}for(var c in a[t][u]){var d=a[t][u][c];if(!d.instreamId.match(/CC\d/)){continue}o[u].push(n.mergeOptions({id:c},d));if(typeof l[c]==="undefined"){var h=r.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default&&d.autoselect,language:d.language,label:c},false).track;l[c]=h}}}}};var fs=function e(t,i){return function(e){var r=i.masterPlaylistLoader,n=i.mediaTypes[t].groups;var a=r.media();if(!a){return null}var s=null;if(a.attributes[t]){s=n[a.attributes[t]]}s=s||n.main;if(typeof e==="undefined"){return s}if(e===null){return null}return s.filter(function(t){return t.id===e.id})[0]||null}};var ps={AUDIO:function e(t,i){return function(){var e=i.mediaTypes[t].tracks;for(var r in e){if(e[r].enabled){return e[r]}}return null}},SUBTITLES:function e(t,i){return function(){var e=i.mediaTypes[t].tracks;for(var r in e){if(e[r].mode==="showing"||e[r].mode==="hidden"){return e[r]}}return null}}};var ms=function e(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){hs[e](e,t)});var i=t.mediaTypes,r=t.masterPlaylistLoader,n=t.tech,a=t.vhs;["AUDIO","SUBTITLES"].forEach(function(e){i[e].activeGroup=fs(e,t);i[e].activeTrack=ps[e](e,t);i[e].onGroupChanged=os(e,t);i[e].onGroupChanging=ls(e,t);i[e].onTrackChanged=us(e,t)});var s=i.AUDIO.activeGroup();if(s){var o=(s.filter(function(e){return e.default})[0]||s[0]).id;i.AUDIO.tracks[o].enabled=true;i.AUDIO.onTrackChanged()}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(e){return i[e].onGroupChanged()})});r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(e){return i[e].onGroupChanging()})});var l=function e(){i.AUDIO.onTrackChanged();n.trigger({type:"usage",name:"vhs-audio-change"});n.trigger({type:"usage",name:"hls-audio-change"})};n.audioTracks().addEventListener("change",l);n.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged);a.on("dispose",function(){n.audioTracks().removeEventListener("change",l);n.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)});n.clearTracks("audio");for(var u in i.AUDIO.tracks){n.audioTracks().addTrack(i.AUDIO.tracks[u])}};var vs=function e(){var t={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ra,activeTrack:Ra,onGroupChanged:Ra,onTrackChanged:Ra}});return t};var gs=60*2;var ys;var _s=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"];var bs=function e(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]};var Ms=function e(t){var i=t.currentPlaylist,r=t.nextPlaylist,a=t.forwardBuffer,s=t.bufferLowWaterLine,o=t.bufferHighWaterLine,l=t.duration,u=t.experimentalBufferBasedABR,c=t.log;if(!r){n.log.warn("We received no playlist to switch to. Please check your stream.");return false}var d="allowing switch "+(i&&i.id||"null")+" -> "+r.id;if(!i||!i.endList){c(d+" as current playlist "+(!i?"is not set":"is live"));return true}if(r.id===i.id){return false}var h=u?Ti.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Ti.MAX_BUFFER_LOW_WATER_LINE;if(l<h){c(d+" as duration < max low water line ("+l+" < "+h+")");return true}var f=r.attributes.BANDWIDTH;var p=i.attributes.BANDWIDTH;if(f<p&&(!u||a<o)){var m=d+" as next bandwidth < current bandwidth ("+f+" < "+p+")";if(u){m+=" and forwardBuffer < bufferHighWaterLine ("+a+" < "+o+")"}c(m);return true}if((!u||f>p)&&a>=s){var v=d+" as forwardBuffer >= bufferLowWaterLine ("+a+" >= "+s+")";if(u){v+=" and next bandwidth > current bandwidth ("+f+" > "+p+")"}c(v);return true}c("not "+d+" as no switching criteria met");return false};var Ts=function(e){u(t,e);function t(t){var i;i=e.call(this)||this;var a=t.src,s=t.handleManifestRedirects,l=t.withCredentials,u=t.tech,c=t.bandwidth,d=t.externVhs,h=t.useCueTags,f=t.blacklistDuration,p=t.enableLowInitialPlaylist,m=t.sourceType,v=t.cacheEncryptionKeys,g=t.handlePartialData,y=t.experimentalBufferBasedABR;if(!a){throw new Error("A non-empty playlist URL or JSON manifest string is required")}ys=d;i.experimentalBufferBasedABR=Boolean(y);i.withCredentials=l;i.tech_=u;i.vhs_=u.vhs;i.sourceType_=m;i.useCueTags_=h;i.blacklistDuration=f;i.enableLowInitialPlaylist=p;if(i.useCueTags_){i.cueTagsTrack_=i.tech_.addTextTrack("metadata","ad-cues");i.cueTagsTrack_.inBandMetadataTrackDispatchType=""}i.requestOptions_={withCredentials:l,handleManifestRedirects:s,timeout:null};i.on("error",i.pauseLoading);i.mediaTypes_=vs();i.mediaSource=new r.MediaSource;i.handleDurationChange_=i.handleDurationChange_.bind(o(i));i.handleSourceOpen_=i.handleSourceOpen_.bind(o(i));i.handleSourceEnded_=i.handleSourceEnded_.bind(o(i));i.mediaSource.addEventListener("durationchange",i.handleDurationChange_);i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_);i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_);i.seekable_=n.createTimeRanges();i.hasPlayed_=false;i.syncController_=new ts(t);i.segmentMetadataTrack_=u.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},false).track;i.decrypter_=new rs;i.sourceUpdater_=new qa(i.mediaSource);i.inbandTextTracks_={};i.timelineChangeController_=new is;var _={vhs:i.vhs_,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function e(){return i.seekable()},seeking:function e(){return i.tech_.seeking()},duration:function e(){return i.duration()},hasPlayed:function e(){return i.hasPlayed_},goalBufferLength:function e(){return i.goalBufferLength()},bandwidth:c,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:v,handlePartialData:g,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_};i.masterPlaylistLoader_=i.sourceType_==="dash"?new Mi(a,i.vhs_,i.requestOptions_):new q(a,i.vhs_,i.requestOptions_);i.setupMasterPlaylistLoaderListeners_();i.mainSegmentLoader_=new Pa(n.mergeOptions(_,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),t);i.audioSegmentLoader_=new Pa(n.mergeOptions(_,{loaderType:"audio"}),t);i.subtitleSegmentLoader_=new Ka(n.mergeOptions(_,{loaderType:"vtt",featuresNativeTextTracks:i.tech_.featuresNativeTextTracks}),t);i.setupSegmentLoaderListeners_();if(i.experimentalBufferBasedABR){i.startABRTimer_();i.tech_.on("pause",function(){return i.stopABRTimer_()});i.tech_.on("play",function(){return i.startABRTimer_()})}_s.forEach(function(e){i[e+"_"]=bs.bind(o(i),e)});i.logger_=aa("MPC");i.triggeredFmp4Usage=false;i.masterPlaylistLoader_.load();return i}var i=t.prototype;i.checkABR_=function e(){var t=this.selectPlaylist();if(this.shouldSwitchToMedia_(t)){this.masterPlaylistLoader_.media(t)}};i.startABRTimer_=function e(){var t=this;this.stopABRTimer_();this.abrTimer_=r.setInterval(function(){return t.checkABR_()},250)};i.stopABRTimer_=function e(){if(this.tech_.scrubbing&&this.tech_.scrubbing()){return}r.clearInterval(this.abrTimer_);this.abrTimer_=null};i.setupMasterPlaylistLoaderListeners_=function e(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=t.masterPlaylistLoader_.media();var i=e.targetDuration*1.5*1e3;if(Ae(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=i}if(e.endList&&t.tech_.preload()!=="none"){t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load()}ms({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)});t.triggerPresenceUsage_(t.master(),e);t.setupFirstPlay();if(!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()){t.trigger("selectedinitialmedia")}else{t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){t.trigger("selectedinitialmedia")})}});this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=t.masterPlaylistLoader_.media();if(!e){t.excludeUnsupportedVariants_();var i;if(t.enableLowInitialPlaylist){i=t.selectInitialPlaylist()}if(!i){i=t.selectPlaylist()}if(!i||!t.shouldSwitchToMedia_(i)){return}t.initialMedia_=i;t.masterPlaylistLoader_.media(t.initialMedia_);var r=t.sourceType_==="vhs-json"&&t.initialMedia_.segments;if(!r){return}e=t.initialMedia_}t.handleUpdatedMediaPlaylist(e)});this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort();t.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",function(){var e=t.masterPlaylistLoader_.media();var i=e.targetDuration*1.5*1e3;if(Ae(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())){t.requestOptions_.timeout=0}else{t.requestOptions_.timeout=i}t.mainSegmentLoader_.playlist(e,t.requestOptions_);t.mainSegmentLoader_.load();t.tech_.trigger({type:"mediachange",bubbles:true})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=t.masterPlaylistLoader_.media();var i=t.stuckAtPlaylistEnd_(e);if(i){t.blacklistCurrentPlaylist({message:"Playlist no longer updating."});t.tech_.trigger("playliststuck")}});this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"});t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"});t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})};i.handleUpdatedMediaPlaylist=function e(t){if(this.useCueTags_){this.updateAdCues_(t)}this.mainSegmentLoader_.playlist(t,this.requestOptions_);this.updateDuration(!t.endList);if(!this.tech_.paused()){this.mainSegmentLoader_.load();if(this.audioSegmentLoader_){this.audioSegmentLoader_.load()}}};i.triggerPresenceUsage_=function e(t,i){var r=t.mediaGroups||{};var n=true;var a=Object.keys(r.AUDIO);for(var s in r.AUDIO){for(var o in r.AUDIO[s]){var l=r.AUDIO[s][o];if(!l.uri){n=false}}}if(n){this.tech_.trigger({type:"usage",name:"vhs-demuxed"});this.tech_.trigger({type:"usage",name:"hls-demuxed"})}if(Object.keys(r.SUBTITLES).length){this.tech_.trigger({type:"usage",name:"vhs-webvtt"});this.tech_.trigger({type:"usage",name:"hls-webvtt"})}if(ys.Playlist.isAes(i)){this.tech_.trigger({type:"usage",name:"vhs-aes"});this.tech_.trigger({type:"usage",name:"hls-aes"})}if(a.length&&Object.keys(r.AUDIO[a[0]]).length>1){this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"});this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})}if(this.useCueTags_){this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"});this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}};i.shouldSwitchToMedia_=function e(t){var i=this.masterPlaylistLoader_.media();var r=this.tech_.buffered();var n=r.length?r.end(r.length-1)-this.tech_.currentTime():0;var a=this.bufferLowWaterLine();var s=this.bufferHighWaterLine();return Ms({currentPlaylist:i,nextPlaylist:t,forwardBuffer:n,bufferLowWaterLine:a,bufferHighWaterLine:s,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})};i.setupSegmentLoaderListeners_=function e(){var t=this;if(!this.experimentalBufferBasedABR){this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=t.selectPlaylist();if(t.shouldSwitchToMedia_(e)){t.masterPlaylistLoader_.media(e)}t.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")})}this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())});this.mainSegmentLoader_.on("appenderror",function(){t.error=t.mainSegmentLoader_.error_;t.trigger("error")});this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"});t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()});this.audioSegmentLoader_.on("appenderror",function(){t.error=t.audioSegmentLoader_.error_;t.trigger("error")});this.mainSegmentLoader_.on("ended",function(){t.logger_("main segment loader ended");t.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(e){if(t.experimentalBufferBasedABR){return}t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the "+"request without rebuffering."},gs)});var i=function e(){if(!t.sourceUpdater_.ready()){return t.tryToCreateSourceBuffers_()}var i=t.getCodecsOrExclude_();if(!i){return}t.sourceUpdater_.addOrChangeSourceBuffers(i)};this.mainSegmentLoader_.on("trackinfo",i);this.audioSegmentLoader_.on("trackinfo",i);this.mainSegmentLoader_.on("fmp4",function(){if(!t.triggeredFmp4Usage){t.tech_.trigger({type:"usage",name:"vhs-fmp4"});t.tech_.trigger({type:"usage",name:"hls-fmp4"});t.triggeredFmp4Usage=true}});this.audioSegmentLoader_.on("fmp4",function(){if(!t.triggeredFmp4Usage){t.tech_.trigger({type:"usage",name:"vhs-fmp4"});t.tech_.trigger({type:"usage",name:"hls-fmp4"});t.triggeredFmp4Usage=true}});this.audioSegmentLoader_.on("ended",function(){t.logger_("audioSegmentLoader ended");t.onEndOfStream()})};i.mediaSecondsLoaded_=function e(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)};i.load=function e(){this.mainSegmentLoader_.load();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.load()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.load()}};i.smoothQualityChange_=function e(t){if(t===void 0){t=this.selectPlaylist()}if(t===this.masterPlaylistLoader_.media()){return}this.masterPlaylistLoader_.media(t);this.mainSegmentLoader_.resetLoader()};i.fastQualityChange_=function e(t){var i=this;if(t===void 0){t=this.selectPlaylist()}if(t===this.masterPlaylistLoader_.media()){return}this.masterPlaylistLoader_.media(t);this.mainSegmentLoader_.resetEverything(function(){if(n.browser.IE_VERSION||n.browser.IS_EDGE){i.tech_.setCurrentTime(i.tech_.currentTime()+.04)}else{i.tech_.setCurrentTime(i.tech_.currentTime())}})};i.play=function e(){if(this.setupFirstPlay()){return}if(this.tech_.ended()){this.tech_.setCurrentTime(0)}if(this.hasPlayed_){this.load()}var t=this.tech_.seekable();if(this.tech_.duration()===Infinity){if(this.tech_.currentTime()<t.start(0)){return this.tech_.setCurrentTime(t.end(t.length-1))}}};i.setupFirstPlay=function e(){var t=this;var i=this.masterPlaylistLoader_.media();if(!i||this.tech_.paused()||this.hasPlayed_){return false}if(!i.endList){var r=this.seekable();if(!r.length){return false}if(n.browser.IE_VERSION&&this.tech_.readyState()===0){this.tech_.one("loadedmetadata",function(){t.trigger("firstplay");t.tech_.setCurrentTime(r.end(0));t.hasPlayed_=true});return false}this.trigger("firstplay");this.tech_.setCurrentTime(r.end(0))}this.hasPlayed_=true;this.load();return true};i.handleSourceOpen_=function e(){this.tryToCreateSourceBuffers_();if(this.tech_.autoplay()){var t=this.tech_.play();if(typeof t!=="undefined"&&typeof t.then==="function"){t.then(null,function(e){})}}this.trigger("sourceopen")};i.handleSourceEnded_=function e(){if(!this.inbandTextTracks_.metadataTrack_){return}var t=this.inbandTextTracks_.metadataTrack_.cues;if(!t||!t.length){return}var i=this.duration();t[t.length-1].endTime=isNaN(i)||Math.abs(i)===Infinity?Number.MAX_VALUE:i};i.handleDurationChange_=function e(){this.tech_.trigger("durationchange")};i.onEndOfStream=function e(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(!this.mainSegmentLoader_.currentMediaInfo_||this.mainSegmentLoader_.currentMediaInfo_.hasVideo){t=t&&this.audioSegmentLoader_.ended_}else{t=this.audioSegmentLoader_.ended_}}if(!t){return}this.stopABRTimer_();this.sourceUpdater_.endOfStream()};i.stuckAtPlaylistEnd_=function e(t){var i=this.seekable();if(!i.length){return false}var r=this.syncController_.getExpiredTime(t,this.duration());if(r===null){return false}var n=ys.Playlist.playlistEnd(t,r);var a=this.tech_.currentTime();var s=this.tech_.buffered();if(!s.length){return n-a<=Z}var o=s.end(s.length-1);return o-a<=Z&&n-o<=Z};i.blacklistCurrentPlaylist=function e(t,i){if(t===void 0){t={}}var r=t.playlist||this.masterPlaylistLoader_.media();i=i||t.blacklistDuration||this.blacklistDuration;if(!r){this.error=t;if(this.mediaSource.readyState!=="open"){this.trigger("error")}else{this.sourceUpdater_.endOfStream("network")}return}var a=this.masterPlaylistLoader_.master.playlists;var s=a.filter(ye);var o=s.length===1&&s[0]===r;if(a.length===1&&i!==Infinity){n.log.warn("Problem encountered with playlist "+r.id+". "+"Trying again since it is the only playlist.");this.tech_.trigger("retryplaylist");return this.masterPlaylistLoader_.load(o)}if(o){var l=false;a.forEach(function(e){if(e===r){return}var t=e.excludeUntil;if(typeof t!=="undefined"&&t!==Infinity){l=true;delete e.excludeUntil}});if(l){n.log.warn("Removing other playlists from the exclusion list because the last "+"rendition is about to be excluded.");this.tech_.trigger("retryplaylist")}}r.excludeUntil=Date.now()+i*1e3;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"});this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var u=this.selectPlaylist();if(!u){this.error="Playback cannot continue. No available working or supported playlists.";this.trigger("error");return}var c=t.internal?this.logger_:n.log.warn;var d=t.message?" "+t.message:"";c((t.internal?"Internal problem":"Problem")+" encountered with playlist "+r.id+"."+(d+" Switching to playlist "+u.id+"."));if(u.attributes.AUDIO!==r.attributes.AUDIO){this.delegateLoaders_("audio",["abort","pause"])}if(u.attributes.SUBTITLES!==r.attributes.SUBTITLES){this.delegateLoaders_("subtitle",["abort","pause"])}this.delegateLoaders_("main",["abort","pause"]);return this.masterPlaylistLoader_.media(u,o)};i.pauseLoading=function e(){this.delegateLoaders_("all",["abort","pause"]);this.stopABRTimer_()};i.delegateLoaders_=function e(t,i){var r=this;var n=[];var a=t==="all";if(a||t==="main"){n.push(this.masterPlaylistLoader_)}var s=[];if(a||t==="audio"){s.push("AUDIO")}if(a||t==="subtitle"){s.push("CLOSED-CAPTIONS");s.push("SUBTITLES")}s.forEach(function(e){var t=r.mediaTypes_[e]&&r.mediaTypes_[e].activePlaylistLoader;if(t){n.push(t)}});["main","audio","subtitle"].forEach(function(e){var i=r[e+"SegmentLoader_"];if(i&&(t===e||t==="all")){n.push(i)}});n.forEach(function(e){return i.forEach(function(t){if(typeof e[t]==="function"){e[t]()}})})};i.setCurrentTime=function e(t){var i=J(this.tech_.buffered(),t);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())){return 0}if(!this.masterPlaylistLoader_.media().segments){return 0}if(i&&i.length){return t}this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();if(this.mediaTypes_.AUDIO.activePlaylistLoader){this.audioSegmentLoader_.resetEverything();this.audioSegmentLoader_.abort()}if(this.mediaTypes_.SUBTITLES.activePlaylistLoader){this.subtitleSegmentLoader_.resetEverything();this.subtitleSegmentLoader_.abort()}this.load()};i.duration=function e(){if(!this.masterPlaylistLoader_){return 0}var t=this.masterPlaylistLoader_.media();if(!t){return 0}if(!t.endList){return Infinity}if(this.mediaSource){return this.mediaSource.duration}return ys.Playlist.duration(t)};i.seekable=function e(){return this.seekable_};i.onSyncInfoUpdate_=function e(){var t;if(!this.masterPlaylistLoader_){return}var i=this.masterPlaylistLoader_.media();if(!i){return}var r=this.syncController_.getExpiredTime(i,this.duration());if(r===null){return}var a=this.masterPlaylistLoader_.master.suggestedPresentationDelay;var s=ys.Playlist.seekable(i,r,a);if(s.length===0){return}if(this.mediaTypes_.AUDIO.activePlaylistLoader){i=this.mediaTypes_.AUDIO.activePlaylistLoader.media();r=this.syncController_.getExpiredTime(i,this.duration());if(r===null){return}t=ys.Playlist.seekable(i,r,a);if(t.length===0){return}}var o;var l;if(this.seekable_&&this.seekable_.length){o=this.seekable_.end(0);l=this.seekable_.start(0)}if(!t){this.seekable_=s}else if(t.start(0)>s.end(0)||s.start(0)>t.end(0)){this.seekable_=s}else{this.seekable_=n.createTimeRanges([[t.start(0)>s.start(0)?t.start(0):s.start(0),t.end(0)<s.end(0)?t.end(0):s.end(0)]])}if(this.seekable_&&this.seekable_.length){if(this.seekable_.end(0)===o&&this.seekable_.start(0)===l){return}}this.logger_("seekable updated ["+ie(this.seekable_)+"]");this.tech_.trigger("seekablechanged")};i.updateDuration=function e(t){if(this.updateDuration_){this.mediaSource.removeEventListener("sourceopen",this.updateDuration_);this.updateDuration_=null}if(this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,t);this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(t){var i=this.seekable();if(!i.length){return}if(isNaN(this.mediaSource.duration)||this.mediaSource.duration<i.end(i.length-1)){this.sourceUpdater_.setDuration(i.end(i.length-1))}return}var r=this.tech_.buffered();var n=ys.Playlist.duration(this.masterPlaylistLoader_.media());if(r.length>0){n=Math.max(n,r.end(r.length-1))}if(this.mediaSource.duration!==n){this.sourceUpdater_.setDuration(n)}};i.dispose=function e(){var t=this;this.trigger("dispose");this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(e){var i=t.mediaTypes_[e].groups;for(var r in i){i[r].forEach(function(e){if(e.playlistLoader){e.playlistLoader.dispose()}})}});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose();this.sourceUpdater_.dispose();this.timelineChangeController_.dispose();this.stopABRTimer_();if(this.updateDuration_){this.mediaSource.removeEventListener("sourceopen",this.updateDuration_)}this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_);this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_);this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_);this.off()};i.master=function e(){return this.masterPlaylistLoader_.master};i.media=function e(){return this.masterPlaylistLoader_.media()||this.initialMedia_};i.areMediaTypesKnown_=function e(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(!this.mainSegmentLoader_.currentMediaInfo_||t&&!this.audioSegmentLoader_.currentMediaInfo_){return false}return true};i.getCodecsOrExclude_=function e(){var t=this;var i={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};i.video=i.main;var r=na(this.master(),this.media());var n={};var a=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(i.main.hasVideo){n.video=r.video||i.main.videoCodec||Hn}if(i.main.isMuxed){n.video+=","+(r.audio||i.main.audioCodec||Gn)}if(i.main.hasAudio&&!i.main.isMuxed||i.audio.hasAudio||a){n.audio=r.audio||i.main.audioCodec||i.audio.audioCodec||Gn;i.audio.isFmp4=i.main.hasAudio&&!i.main.isMuxed?i.main.isFmp4:i.audio.isFmp4}if(!n.audio&&!n.video){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:Infinity});return}var s=function e(t,i){return t?Qn(i):Kn(i)};var o={};var l;["video","audio"].forEach(function(e){if(n.hasOwnProperty(e)&&!s(i[e].isFmp4,n[e])){var t=i[e].isFmp4?"browser":"muxer";o[t]=o[t]||[];o[t].push(n[e]);if(e==="audio"){l=t}}});if(a&&l&&this.media().attributes.AUDIO){var u=this.media().attributes.AUDIO;this.master().playlists.forEach(function(e){var i=e.attributes&&e.attributes.AUDIO;if(i===u&&e!==t.media()){e.excludeUntil=Infinity}});this.logger_("excluding audio group "+u+" as "+l+' does not support codec(s): "'+n.audio+'"')}if(Object.keys(o).length){var c=Object.keys(o).reduce(function(e,t){if(e){e+=", "}e+=t+' does not support codec(s): "'+o[t].join(",")+'"';return e},"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:true,message:c,blacklistDuration:Infinity});return}if(this.sourceUpdater_.ready()&&!this.sourceUpdater_.canChangeType()){var d=[];["video","audio"].forEach(function(e){var i=(Jn(t.sourceUpdater_.codecs[e]||"")[e]||{}).type;var r=(Jn(n[e]||"")[e]||{}).type;if(i&&r&&i.toLowerCase()!==r.toLowerCase()){d.push('"'+t.sourceUpdater_.codecs[e]+'" -> "'+n[e]+'"')}});if(d.length){this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+d.join(", ")+".",blacklistDuration:Infinity,internal:true});return}}return n};i.tryToCreateSourceBuffers_=function e(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.ready()){return}if(!this.areMediaTypesKnown_()){return}var t=this.getCodecsOrExclude_();if(!t){return}this.sourceUpdater_.createSourceBuffers(t);var i=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(i)};i.excludeUnsupportedVariants_=function e(){var t=this;this.master().playlists.forEach(function(e){var i=na(t.master,e);if(i.audio&&!Kn(i.audio)&&!Qn(i.audio)){e.excludeUntil=Infinity}if(i.video&&!Kn(i.video)&&!Qn(i.video)){e.excludeUntil=Infinity}})};i.excludeIncompatibleVariants_=function e(t){var i=this;var r=Jn(t);var n=Object.keys(r).length;this.master().playlists.forEach(function(e){if(e.excludeUntil===Infinity){return}var t={};var a=2;var s=[];var o=na(i.masterPlaylistLoader_.master,e);if(o.audio||o.video){var l=[o.video,o.audio].filter(Boolean).join(",");t=Jn(l);a=Object.keys(t).length}if(a!==n){s.push('codec count "'+a+'" !== "'+n+'"');e.excludeUntil=Infinity}if(!i.sourceUpdater_.canChangeType()){if(t.video&&r.video&&t.video.type.toLowerCase()!==r.video.type.toLowerCase()){s.push('video codec "'+t.video.type+'" !== "'+r.video.type+'"');e.excludeUntil=Infinity}if(t.audio&&r.audio&&t.audio.type.toLowerCase()!==r.audio.type.toLowerCase()){e.excludeUntil=Infinity;s.push('audio codec "'+t.audio.type+'" !== "'+r.audio.type+'"')}}if(s.length){i.logger_("blacklisting "+e.id+": "+s.join(" && "))}})};i.updateAdCues_=function e(t){var i=0;var r=this.seekable();if(r.length){i=r.start(0)}$a(t,this.cueTagsTrack_,i)};i.goalBufferLength=function e(){var t=this.tech_.currentTime();var i=Ti.GOAL_BUFFER_LENGTH;var r=Ti.GOAL_BUFFER_LENGTH_RATE;var n=Math.max(i,Ti.MAX_GOAL_BUFFER_LENGTH);return Math.min(i+t*r,n)};i.bufferLowWaterLine=function e(){var t=this.tech_.currentTime();var i=Ti.BUFFER_LOW_WATER_LINE;var r=Ti.BUFFER_LOW_WATER_LINE_RATE;var n=Math.max(i,Ti.MAX_BUFFER_LOW_WATER_LINE);var a=Math.max(i,Ti.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(i+t*r,this.experimentalBufferBasedABR?a:n)};i.bufferHighWaterLine=function e(){return Ti.BUFFER_HIGH_WATER_LINE};return t}(n.EventTarget);var As=function e(t,i,r){return function(e){var n=t.master.playlists[i];var a=ge(n);var s=ye(n);if(typeof e==="undefined"){return s}if(e){delete n.disabled}else{n.disabled=true}if(e!==s&&!a){r();if(e){t.trigger("renditionenabled")}else{t.trigger("renditiondisabled")}}return e}};var ws=function e(t,i,r){var n=t.masterPlaylistController_,a=t.options_.smoothQualityChange;var s=a?"smooth":"fast";var o=n[s+"QualityChange_"].bind(n);if(i.attributes.RESOLUTION){var l=i.attributes.RESOLUTION;this.width=l.width;this.height=l.height}this.bandwidth=i.attributes.BANDWIDTH;this.codecs=na(n.master(),i);this.playlist=i;this.id=r;this.enabled=As(t.playlists,i.id,o)};var Es=function e(t){var i=t.playlists;t.representations=function(){if(!i||!i.master||!i.master.playlists){return[]}return i.master.playlists.filter(function(e){return!ge(e)}).map(function(e,i){return new ws(t,e,e.id)})}};var xs=["seeking","seeked","pause","playing","error"];var Ss=function e(t){var i=t.buffered,r=t.targetDuration,n=t.currentTime;if(!i.length){return false}if(i.end(0)-i.start(0)<r*2){return false}if(n>i.start(0)){return false}return i.start(0)-n<r};var Ds=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController;this.tech_=e.tech;this.seekable=e.seekable;this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow;this.media=e.media;this.consecutiveUpdates=0;this.lastRecordedTime=null;this.timer_=null;this.checkCurrentTimeTimeout_=null;this.logger_=aa("PlaybackWatcher");this.logger_("initialize");var i=function e(){return t.monitorCurrentTime_()};var n=function e(){return t.techWaiting_()};var a=function e(){return t.cancelTimer_()};var s=function e(){return t.fixesBadSeeks_()};var o=this.masterPlaylistController_;var l=["main","subtitle","audio"];var u={};l.forEach(function(e){u[e]={reset:function i(){return t.resetSegmentDownloads_(e)},updateend:function i(){return t.checkSegmentDownloads_(e)}};o[e+"SegmentLoader_"].on("appendsdone",u[e].updateend);o[e+"SegmentLoader_"].on("playlistupdate",u[e].reset);t.tech_.on(["seeked","seeking"],u[e].reset)});this.tech_.on("seekablechanged",s);this.tech_.on("waiting",n);this.tech_.on(xs,a);this.tech_.on("canplay",i);this.dispose=function(){t.logger_("dispose");t.tech_.off("seekablechanged",s);t.tech_.off("waiting",n);t.tech_.off(xs,a);t.tech_.off("canplay",i);l.forEach(function(e){o[e+"SegmentLoader_"].off("appendsdone",u[e].updateend);o[e+"SegmentLoader_"].off("playlistupdate",u[e].reset);t.tech_.off(["seeked","seeking"],u[e].reset)});if(t.checkCurrentTimeTimeout_){r.clearTimeout(t.checkCurrentTimeTimeout_)}t.cancelTimer_()}}var t=e.prototype;t.monitorCurrentTime_=function e(){this.checkCurrentTime_();if(this.checkCurrentTimeTimeout_){r.clearTimeout(this.checkCurrentTimeTimeout_)}this.checkCurrentTimeTimeout_=r.setTimeout(this.monitorCurrentTime_.bind(this),250)};t.resetSegmentDownloads_=function e(t){var i=this.masterPlaylistController_[t+"SegmentLoader_"];if(this[t+"StalledDownloads_"]>0){this.logger_("resetting possible stalled download count for "+t+" loader")}this[t+"StalledDownloads_"]=0;this[t+"Buffered_"]=i.buffered_()};t.checkSegmentDownloads_=function e(t){var i=this.masterPlaylistController_;var r=i[t+"SegmentLoader_"];var n=r.buffered_();var a=ae(this[t+"Buffered_"],n);this[t+"Buffered_"]=n;if(a){this.resetSegmentDownloads_(t);return}this[t+"StalledDownloads_"]++;this.logger_("found #"+this[t+"StalledDownloads_"]+" "+t+" appends that did not increase buffer (possible stalled download)",{playlistId:r.playlist_&&r.playlist_.id,buffered:ne(n)});if(this[t+"StalledDownloads_"]<10){return}this.logger_(t+" loader stalled download exclusion");this.resetSegmentDownloads_(t);this.tech_.trigger({type:"usage",name:"vhs-"+t+"-download-exclusion"});if(t==="subtitle"){return}i.blacklistCurrentPlaylist({message:"Excessive "+t+" segment downloading detected."},Infinity)};t.checkCurrentTime_=function e(){if(this.tech_.seeking()&&this.fixesBadSeeks_()){this.consecutiveUpdates=0;this.lastRecordedTime=this.tech_.currentTime();return}if(this.tech_.paused()||this.tech_.seeking()){return}var t=this.tech_.currentTime();var i=this.tech_.buffered();if(this.lastRecordedTime===t&&(!i.length||t+Z>=i.end(i.length-1))){return this.techWaiting_()}if(this.consecutiveUpdates>=5&&t===this.lastRecordedTime){this.consecutiveUpdates++;this.waiting_()}else if(t===this.lastRecordedTime){this.consecutiveUpdates++}else{this.consecutiveUpdates=0;this.lastRecordedTime=t}};t.cancelTimer_=function e(){this.consecutiveUpdates=0;if(this.timer_){this.logger_("cancelTimer_");clearTimeout(this.timer_)}this.timer_=null};t.fixesBadSeeks_=function e(){var t=this.tech_.seeking();if(!t){return false}var i=this.seekable();var r=this.tech_.currentTime();var n=this.afterSeekableWindow_(i,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow);var a;if(n){var s=i.end(i.length-1);a=s}if(this.beforeSeekableWindow_(i,r)){var o=i.start(0);a=o+(o===i.end(0)?0:Z)}if(typeof a!=="undefined"){this.logger_("Trying to seek outside of seekable at time "+r+" with "+("seekable range "+ie(i)+". Seeking to ")+(a+"."));this.tech_.setCurrentTime(a);return true}var l=this.tech_.buffered();if(Ss({buffered:l,targetDuration:this.media().targetDuration,currentTime:r})){a=l.start(0)+Z;this.logger_("Buffered region starts ("+l.start(0)+") "+(" just beyond seek point ("+r+"). Seeking to "+a+"."));this.tech_.setCurrentTime(a);return true}return false};t.waiting_=function e(){if(this.techWaiting_()){return}var t=this.tech_.currentTime();var i=this.tech_.buffered();var r=J(i,t);if(r.length&&t+3<=r.end(0)){this.cancelTimer_();this.tech_.setCurrentTime(t);this.logger_("Stopped at "+t+" while inside a buffered region "+("["+r.start(0)+" -> "+r.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time.");this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}};t.techWaiting_=function e(){var t=this.seekable();var i=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()){return true}if(this.tech_.seeking()||this.timer_!==null){return true}if(this.beforeSeekableWindow_(t,i)){var r=t.end(t.length-1);this.logger_("Fell out of live window at time "+i+". Seeking to "+("live point (seekable end) "+r));this.cancelTimer_();this.tech_.setCurrentTime(r);this.tech_.trigger({type:"usage",name:"vhs-live-resync"});this.tech_.trigger({type:"usage",name:"hls-live-resync"});return true}var n=this.tech_.vhs.masterPlaylistController_.sourceUpdater_;var a=this.tech_.buffered();var s=this.videoUnderflow_({audioBuffered:n.audioBuffered(),videoBuffered:n.videoBuffered(),currentTime:i});if(s){this.cancelTimer_();this.tech_.setCurrentTime(i);this.tech_.trigger({type:"usage",name:"vhs-video-underflow"});this.tech_.trigger({type:"usage",name:"hls-video-underflow"});return true}var o=$(a,i);if(o.length>0){var l=o.start(0)-i;this.logger_("Stopped at "+i+", setting timer for "+l+", seeking "+("to "+o.start(0)));this.cancelTimer_();this.timer_=setTimeout(this.skipTheGap_.bind(this),l*1e3,i);return true}return false};t.afterSeekableWindow_=function e(t,i,r,n){if(n===void 0){n=false}if(!t.length){return false}var a=t.end(t.length-1)+Z;var s=!r.endList;if(s&&n){a=t.end(t.length-1)+r.targetDuration*3}if(i>a){return true}return false};t.beforeSeekableWindow_=function e(t,i){if(t.length&&t.start(0)>0&&i<t.start(0)-Z){return true}return false};t.videoUnderflow_=function e(t){var i=t.videoBuffered,r=t.audioBuffered,n=t.currentTime;if(!i){return}var a;if(i.length&&r.length){var s=J(i,n-3);var o=J(i,n);var l=J(r,n);if(l.length&&!o.length&&s.length){a={start:s.end(0),end:l.end(0)}}}else{var u=$(i,n);if(!u.length){a=this.gapFromVideoUnderflow_(i,n)}}if(a){this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+n));return true}return false};t.skipTheGap_=function e(t){var i=this.tech_.buffered();var r=this.tech_.currentTime();var n=$(i,r);this.cancelTimer_();if(n.length===0||r!==t){return}this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",t,"nextRange start:",n.start(0));this.tech_.setCurrentTime(n.start(0)+X);this.tech_.trigger({type:"usage",name:"vhs-gap-skip"});this.tech_.trigger({type:"usage",name:"hls-gap-skip"})};t.gapFromVideoUnderflow_=function e(t,i){var r=ee(t);for(var n=0;n<r.length;n++){var a=r.start(n);var s=r.end(n);if(i-a<4&&i-a>2){return{start:a,end:s}}}return null};return e}();var Is={errorInterval:30,getSource:function e(t){var i=this.tech({IWillNotUseThisInPlugins:true});var r=i.currentSource_||this.currentSource();return t(r)}};var js=function e(t,i){var r=0;var a=0;var s=n.mergeOptions(Is,i);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"});t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function e(){if(a){t.currentTime(a)}};var l=function e(i){if(i===null||i===undefined){return}a=t.duration()!==Infinity&&t.currentTime()||0;t.one("loadedmetadata",o);t.src(i);t.trigger({type:"usage",name:"vhs-error-reload"});t.trigger({type:"usage",name:"hls-error-reload"});t.play()};var u=function e(){if(Date.now()-r<s.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"});t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!=="function"){n.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}r=Date.now();return s.getSource.call(t,l)};var c=function e(){t.off("loadedmetadata",o);t.off("error",u);t.off("dispose",e)};var d=function i(r){c();e(t,r)};t.on("error",u);t.on("dispose",c);t.reloadSourceOnError=d};var Ls=function e(t){js(this,t)};var Ns="2.3.1";var Cs="5.6.7";var Os="0.14.0";var ks="4.5.0";var Ps="3.1.0";var Rs={PlaylistLoader:q,Playlist:we,utils:Ve,STANDARD_PLAYLIST_SELECTOR:fa,INITIAL_PLAYLIST_SELECTOR:va,lastBandwidthSelector:fa,movingAverageBandwidthSelector:pa,comparePlaylistBandwidth:ca,comparePlaylistResolution:da,xhr:De()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","BACK_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(e){Object.defineProperty(Rs,e,{get:function t(){n.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing");return Ti[e]},set:function t(i){n.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing");if(typeof i!=="number"||i<0){n.log.warn("value of Vhs."+e+" must be greater than or equal to 0");return}Ti[e]=i}})});var zs="videojs-vhs";var Us=function e(t,i){var r=i.media();var n=-1;for(var a=0;a<t.length;a++){if(t[a].id===r.id){n=a;break}}t.selectedIndex_=n;t.trigger({selectedIndex:n,type:"change"})};var Bs=function e(t,i){i.representations().forEach(function(e){t.addQualityLevel(e)});Us(t,i.playlists)};Rs.canPlaySource=function(){return n.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var Fs=function e(t,i,r){if(!t){return t}var a={video:i&&i.attributes&&i.attributes.CODECS,audio:r&&r.attributes&&r.attributes.CODECS};if(!a.audio&&a.video&&a.video.split(",").length>1){a.video.split(",").forEach(function(e){e=e.trim();if(qn(e)){a.audio=e}else if(Xn(e)){a.video=e}})}var s=a.video?'video/mp4;codecs="'+a.video+'"':null;var o=a.audio?'audio/mp4;codecs="'+a.audio+'"':null;var l={};for(var u in t){l[u]={audioContentType:o,videoContentType:s};if(i.contentProtection&&i.contentProtection[u]&&i.contentProtection[u].pssh){l[u].pssh=i.contentProtection[u].pssh}if(typeof t[u]==="string"){l[u].url=t[u]}}return n.mergeOptions(t,l)};var Vs=function e(t,i){return t.reduce(function(e,t){if(!t.contentProtection){return e}var r=i.reduce(function(e,i){var r=t.contentProtection[i];if(r&&r.pssh){e[i]={pssh:r.pssh}}return e},{});if(Object.keys(r).length){e.push(r)}return e},[])};var Gs=function e(t){var i=t.player,r=t.sourceKeySystems,a=t.media,s=t.audioMedia,o=t.mainPlaylists;var l=Fs(r,a,s);if(!l){return}i.currentSource().keySystems=l;if(l&&!i.eme){n.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin");return}if(n.browser.IE_VERSION===11||!i.eme.initializeMediaKeys){return}var u=s?o.concat([s]):o;var c=Vs(u,Object.keys(r));c.forEach(function(e){i.eme.initializeMediaKeys({keySystems:e})})};var Hs=function e(){if(!r.localStorage){return null}var t=r.localStorage.getItem(zs);if(!t){return null}try{return JSON.parse(t)}catch(e){return null}};var Qs=function e(t){if(!r.localStorage){return false}var i=Hs();i=i?n.mergeOptions(i,t):t;try{r.localStorage.setItem(zs,JSON.stringify(i))}catch(e){return false}return i};var Ys=function e(t){if(t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0){return JSON.parse(t.substring(t.indexOf(",")+1))}return t};Rs.supportsNativeHls=function(){if(!i||!i.createElement){return false}var e=i.createElement("video");if(!n.getTech("Html5").isSupported()){return false}var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some(function(t){return/maybe|probably/i.test(e.canPlayType(t))})}();Rs.supportsNativeDash=function(){if(!i||!i.createElement||!n.getTech("Html5").isSupported()){return false}return/maybe|probably/i.test(i.createElement("video").canPlayType("application/dash+xml"))}();Rs.supportsTypeNatively=function(e){if(e==="hls"){return Rs.supportsNativeHls}if(e==="dash"){return Rs.supportsNativeDash}return false};Rs.isSupported=function(){return n.log.warn("HLS is no longer a tech. Please remove it from "+"your player's techOrder.")};var Ws=n.getComponent("Component");var qs=function(e){u(t,e);function t(t,r,a){var s;s=e.call(this,r,n.mergeOptions(a.hls,a.vhs))||this;if(a.hls&&Object.keys(a.hls).length){n.log.warn("Using hls options is deprecated. Use vhs instead.")}if(r.options_&&r.options_.playerId){var l=n(r.options_.playerId);if(!l.hasOwnProperty("hls")){Object.defineProperty(l,"hls",{get:function e(){n.log.warn("player.hls is deprecated. Use player.tech().vhs instead.");r.trigger({type:"usage",name:"hls-player-access"});return o(s)},configurable:true})}if(!l.hasOwnProperty("vhs")){Object.defineProperty(l,"vhs",{get:function e(){n.log.warn("player.vhs is deprecated. Use player.tech().vhs instead.");r.trigger({type:"usage",name:"vhs-player-access"});return o(s)},configurable:true})}if(!l.hasOwnProperty("dash")){Object.defineProperty(l,"dash",{get:function e(){n.log.warn("player.dash is deprecated. Use player.tech().vhs instead.");return o(s)},configurable:true})}s.player_=l}s.tech_=r;s.source_=t;s.stats={};s.ignoreNextSeekingEvent_=false;s.setOptions_();if(s.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks){r.overrideNativeAudioTracks(true);r.overrideNativeVideoTracks(true)}else if(s.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks)){throw new Error("Overriding native HLS requires emulated tracks. "+"See https://git.io/vMpjB")}s.on(i,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(e){var t=i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement;if(t&&t.contains(s.tech_.el())){s.masterPlaylistController_.smoothQualityChange_()}});s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=false;return}this.setCurrentTime(this.tech_.currentTime())});s.on(s.tech_,"error",function(){if(this.tech_.error()&&this.masterPlaylistController_){this.masterPlaylistController_.pauseLoading()}});s.on(s.tech_,"play",s.play);return s}var a=t.prototype;a.setOptions_=function e(){var t=this;this.options_.withCredentials=this.options_.withCredentials||false;this.options_.handleManifestRedirects=this.options_.handleManifestRedirects===false?false:true;this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions===false?false:true;this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||false;this.options_.smoothQualityChange=this.options_.smoothQualityChange||false;this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage!=="undefined"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||false;this.options_.customTagParsers=this.options_.customTagParsers||[];this.options_.customTagMappers=this.options_.customTagMappers||[];this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||false;this.options_.handlePartialData=this.options_.handlePartialData||false;if(typeof this.options_.blacklistDuration!=="number"){this.options_.blacklistDuration=5*60}if(typeof this.options_.bandwidth!=="number"){if(this.options_.useBandwidthFromLocalStorage){var i=Hs();if(i&&i.bandwidth){this.options_.bandwidth=i.bandwidth;this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"});this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})}if(i&&i.throughput){this.options_.throughput=i.throughput;this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"});this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"})}}}if(typeof this.options_.bandwidth!=="number"){this.options_.bandwidth=Ti.INITIAL_BANDWIDTH}this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Ti.INITIAL_BANDWIDTH;["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","handlePartialData","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR"].forEach(function(e){if(typeof t.source_[e]!=="undefined"){t.options_[e]=t.source_[e]}});this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions;this.useDevicePixelRatio=this.options_.useDevicePixelRatio};a.src=function e(t,i){var a=this;if(!t){return}this.setOptions_();this.options_.src=Ys(this.source_.src);this.options_.tech=this.tech_;this.options_.externVhs=Rs;this.options_.sourceType=Ne(i);this.options_.seekTo=function(e){a.tech_.setCurrentTime(e)};this.masterPlaylistController_=new Ts(this.options_);this.playbackWatcher_=new Ds(n.mergeOptions(this.options_,{seekable:function e(){return a.seekable()},media:function e(){return a.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_}));this.masterPlaylistController_.on("error",function(){var e=n.players[a.tech_.options_.playerId];var t=a.masterPlaylistController_.error;if(typeof t==="object"&&!t.code){t.code=3}else if(typeof t==="string"){t={message:t,code:3}}e.error(t)});var s=this.options_.experimentalBufferBasedABR?Rs.movingAverageBandwidthSelector(.55):Rs.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this);this.masterPlaylistController_.selectInitialPlaylist=Rs.INITIAL_PLAYLIST_SELECTOR.bind(this);this.playlists=this.masterPlaylistController_.masterPlaylistLoader_;this.mediaSource=this.masterPlaylistController_.mediaSource;Object.defineProperties(this,{selectPlaylist:{get:function e(){return this.masterPlaylistController_.selectPlaylist},set:function e(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function e(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function e(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function e(){var t=1/(this.bandwidth||1);var i;if(this.throughput>0){i=1/this.throughput}else{i=0}var r=Math.floor(1/(t+i));return r},set:function e(){n.log.error('The "systemBandwidth" property is read-only')}}});if(this.options_.bandwidth){this.bandwidth=this.options_.bandwidth}if(this.options_.throughput){this.throughput=this.options_.throughput}Object.defineProperties(this.stats,{bandwidth:{get:function e(){return a.bandwidth||0},enumerable:true},mediaRequests:{get:function e(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:true},mediaRequestsAborted:{get:function e(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:true},mediaRequestsTimedout:{get:function e(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:true},mediaRequestsErrored:{get:function e(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:true},mediaTransferDuration:{get:function e(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:true},mediaBytesTransferred:{get:function e(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:true},mediaSecondsLoaded:{get:function e(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:true},buffered:{get:function e(){return ne(a.tech_.buffered())},enumerable:true},currentTime:{get:function e(){return a.tech_.currentTime()},enumerable:true},currentSource:{get:function e(){return a.tech_.currentSource_},enumerable:true},currentTech:{get:function e(){return a.tech_.name_},enumerable:true},duration:{get:function e(){return a.tech_.duration()},enumerable:true},master:{get:function e(){return a.playlists.master},enumerable:true},playerDimensions:{get:function e(){return a.tech_.currentDimensions()},enumerable:true},seekable:{get:function e(){return ne(a.tech_.seekable())},enumerable:true},timestamp:{get:function e(){return Date.now()},enumerable:true},videoPlaybackQuality:{get:function e(){return a.tech_.getVideoPlaybackQuality()},enumerable:true}});this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_));this.tech_.on("bandwidthupdate",function(){if(a.options_.useBandwidthFromLocalStorage){Qs({bandwidth:a.bandwidth,throughput:Math.round(a.throughput)})}});this.masterPlaylistController_.on("selectedinitialmedia",function(){Es(a)});this.masterPlaylistController_.sourceUpdater_.on("ready",function(){var e=a.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;Gs({player:a.player_,sourceKeySystems:a.source_.keySystems,media:a.playlists.media(),audioMedia:e&&e.media(),mainPlaylists:a.playlists.master.playlists})});this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")});this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=true});this.setupQualityLevels_();if(!this.tech_.el()){return}this.mediaSourceUrl_=r.URL.createObjectURL(this.masterPlaylistController_.mediaSource);this.tech_.src(this.mediaSourceUrl_)};a.setupQualityLevels_=function e(){var t=this;var i=n.players[this.tech_.options_.playerId];if(!i||!i.qualityLevels||this.qualityLevels_){return}this.qualityLevels_=i.qualityLevels();this.masterPlaylistController_.on("selectedinitialmedia",function(){Bs(t.qualityLevels_,t)});this.playlists.on("mediachange",function(){Us(t.qualityLevels_,t.playlists)})};t.version=function e(){return{"@videojs/http-streaming":Ns,"mux.js":Cs,"mpd-parser":Os,"m3u8-parser":ks,"aes-decrypter":Ps}};a.version=function e(){return this.constructor.version()};a.canChangeType=function e(){return qa.canChangeType()};a.play=function e(){this.masterPlaylistController_.play()};a.setCurrentTime=function e(t){this.masterPlaylistController_.setCurrentTime(t)};a.duration=function e(){return this.masterPlaylistController_.duration()};a.seekable=function e(){return this.masterPlaylistController_.seekable()};a.dispose=function t(){if(this.playbackWatcher_){this.playbackWatcher_.dispose()}if(this.masterPlaylistController_){this.masterPlaylistController_.dispose()}if(this.qualityLevels_){this.qualityLevels_.dispose()}if(this.player_){delete this.player_.vhs;delete this.player_.dash;delete this.player_.hls}if(this.tech_&&this.tech_.vhs){delete this.tech_.vhs}if(this.tech_){delete this.tech_.hls}if(this.mediaSourceUrl_&&r.URL.revokeObjectURL){r.URL.revokeObjectURL(this.mediaSourceUrl_);this.mediaSourceUrl_=null}e.prototype.dispose.call(this)};a.convertToProgramTime=function e(t,i){return Ze({playlist:this.masterPlaylistController_.media(),time:t,callback:i})};a.seekToProgramTime=function e(t,i,r,n){if(r===void 0){r=true}if(n===void 0){n=2}return Ke({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:n,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:i})};return t}(Ws);var Xs={name:"videojs-http-streaming",VERSION:Ns,canHandleSource:function e(t,i){if(i===void 0){i={}}var r=n.mergeOptions(n.options,i);return Xs.canPlayType(t.type,r)},handleSource:function e(t,i,r){if(r===void 0){r={}}var a=n.mergeOptions(n.options,r);i.vhs=new qs(t,i,a);if(!n.hasOwnProperty("hls")){Object.defineProperty(i,"hls",{get:function e(){n.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead.");return i.vhs},configurable:true})}i.vhs.xhr=De();i.vhs.src(t.src,t.type);return i.vhs},canPlayType:function e(t,i){if(i===void 0){i={}}var r=n.mergeOptions(n.options,i),a=r.vhs.overrideNative,s=a===void 0?!n.browser.IS_ANY_SAFARI:a;var o=Ne(t);var l=o&&(!Rs.supportsTypeNatively(o)||s);return l?"maybe":""}};var Zs=function e(){return Qn("avc1.4d400d,mp4a.40.2")};if(Zs()){n.getTech("Html5").registerSourceHandler(Xs,0)}n.VhsHandler=qs;Object.defineProperty(n,"HlsHandler",{get:function e(){n.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead.");return qs},configurable:true});n.VhsSourceHandler=Xs;Object.defineProperty(n,"HlsSourceHandler",{get:function e(){n.log.warn("videojs.HlsSourceHandler is deprecated. "+"Use videojs.VhsSourceHandler instead.");return Xs},configurable:true});n.Vhs=Rs;Object.defineProperty(n,"Hls",{get:function e(){n.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead.");return Rs},configurable:true});if(!n.use){n.registerComponent("Hls",Rs);n.registerComponent("Vhs",Rs)}n.options.vhs=n.options.vhs||{};n.options.hls=n.options.hls||{};if(n.registerPlugin){n.registerPlugin("reloadSourceOnError",Ls)}else{n.plugin("reloadSourceOnError",Ls)}t.LOCAL_STORAGE_KEY=zs;t.Vhs=Rs;t.VhsHandler=qs;t.VhsSourceHandler=Xs;t.emeKeySystems=Fs;t.expandDataUri=Ys;t.getAllPsshKeySystemsOptions=Vs;t.setupEmeOptions=Gs;t.simpleTypeFromSourceType=Ne;Object.defineProperty(t,"__esModule",{value:true})});(function(){if(s.getPlugin("perSourceBehaviors")){return}(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("video.js")):typeof i==="function"&&i.amd?i(["video.js"],t):e.videojsPerSourceBehaviors=t(e.videojs)})(typeof self!=="undefined"?self:this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var t="2.1.0";var i=e.getTech("Html5");var r=e.registerPlugin||e.plugin;var n=["abort","emptied","loadstart","play"];var a=["abort","emptied"];var s=["ad-playback","ads-ready?","postroll?","preroll?"];var o=function e(t){return s.indexOf(t)>-1};var l=function e(t){return t.usingPlugin("ads")&&typeof t.ads.inAdBreak==="function"};var u=function e(t,i){if(!t.usingPlugin("ads")){return false}if(l(t)){return t.ads.isInAdMode()&&i.type!=="loadstart"}return o(t.ads.state)};var c=function r(){var s=this;var o=[];var l;var c=false;var d;var h=true;var f=function t(i){return function(t,r){var n=this;if(this.perSourceBehaviors.disabled()){return}var a=arguments.length===2;var s=this.currentSrc();var l=[t];var u=e.bind(a?this:t,arguments[arguments.length-1]);var c=function e(){var t=n.currentSrc()!==s;if(n.perSourceBehaviors.disabled()){return}if(t||i){n.off.apply(n,l)}if(!t){u.apply(void 0,arguments)}};c.guid=u.guid;if(!a){l.push(r)}l.push(c);o.push(l);return this.on.apply(this,l)}};this.perSourceBehaviors={disable:e.bind(this,function e(){this.clearTimeout(d);d=null;c=true;return c}),disabled:function e(){return c},enable:function e(){c=false;return c},enabled:function e(){return!c},isSrcStable:function e(){return h},VERSION:t};this.onPerSrc=f();this.onePerSrc=f(true);this.on("dispose",function(){o.length=0});this.on(n,function(e){if(s.perSourceBehaviors.disabled()||d||u(s,e)){return}if(h&&a.indexOf(e.type)>-1){h=false;s.trigger("sourceunstable")}var t=[];var r=function e(i){return t.push({time:Date.now(),event:i})};r(e);s.on(i.Events,r);d=s.setTimeout(function(){var e=s.currentSrc();h=true;d=null;s.off(i.Events,r);if(e&&e!==l){o.forEach(function(e){return s.off.apply(s,e)});o.length=0;s.trigger("sourcechanged",{interimEvents:t,from:l,to:e});l=e}},1)})};c.VERSION=t;r("perSourceBehaviors",c);return c})})();(function(){if(s.getPlugin("bcAnalytics")){return}(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("global/window"),require("global/document"),require("video.js"),require("@brightcove/loscore")):typeof i==="function"&&i.amd?i(["global/window","global/document","video.js","@brightcove/loscore"],t):(e=e||self,e.videojsBcAnalytics=t(e.window,e.document,e.videojs,e.videojs.bc_))})(this,function(e,t,i,r){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;t=t&&t.hasOwnProperty("default")?t["default"]:t;i=i&&i.hasOwnProperty("default")?i["default"]:i;r=r&&r.hasOwnProperty("default")?r["default"]:r;var n=function(e,t,i){if(i===void 0){i={}}t.forEach(function(t){if(e[t]!==undefined){i[t]=e[t]}});return i};var a=function e(t,n){if(n===void 0){n=[]}var a={};Object.keys(t).forEach(function(s){var o=t[s];n.push(s);if(r.isObj(o)){a=i.mergeOptions(a,e(o,n))}else{a[n.join(".")]=o}n.pop()});return a};var s=function e(t){return t.charAt(0).toUpperCase()+t.slice(1)};var o=function e(t,i){return t+"x"+i};var l={memory:["jsHeapSizeLimit","usedJSHeapSize","totalJSHeapSize"],navigation:["redirectCount","type","directedMigration"],timing:["loadEventEnd","loadEventStart","domComplete","domContentLoadedEventEnd","domContentLoadedEventStart","domInteractive","domLoading","responseEnd","responseStart","requestStart","secureConnectionStart","connectEnd","connectStart","domainLookupEnd","domainLookupStart","fetchStart","redirectEnd","redirectStart","unloadEventEnd","unloadEventStart","navigationStart"]};var u={bitrate:"bitrates",event:"events"};var c=function(){function t(){this.data_={bitrates:{bitrates:[],playlists:[],rendered:[],throughput:[]},events:[],mr:0,performance:{},content:{},player:{dimensions:[],pixelratio:[],screendimensions:[]},frames:{}}}var c=t.prototype;c.keys=function e(){return Object.keys(this.data_)};c.append=function e(t){t=u.hasOwnProperty(t)?u[t]:t;if(!this.data_.hasOwnProperty(t)){throw new Error('"'+t+'" is not a known QosBuffer key')}for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++){r[n-1]=arguments[n]}this["append"+s(t)+"_"].apply(this,r)};c.flush=function e(){var t=this;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++){a[o]=arguments[o]}if(!a.length){a=this.keys()}for(var l=0;l<a.length;l++){if(!this.data_.hasOwnProperty(a[l])){throw new Error('"'+a[l]+'" is not a known QosBuffer key')}}var u=a.map(function(e){return t["flush"+s(e)+"_"]()});var c=i.mergeOptions.apply(i,u);var d=r.qs().stringify(c).length;if(d>3e3&&c["qos.bitrates"]){c["qos.bitrates"]=JSON.stringify({bitrates:[],playlists:[],rendered:[],throughput:[]})}return c};c.appendBitrates_=function e(t){var i=this;if(typeof t.playlists!=="undefined"){this.data_.bitrates.playlists.push([Date.now(),t.bitrates,t.playlists]);delete t.bitrates;delete t.playlists}Object.keys(t).forEach(function(e){i.data_.bitrates[e].push([Date.now(),t[e]])})};c.appendMr_=function e(t){this.data_.mr=t?1:null};c.appendPerformance_=function t(i){var a=this;var s=e.performance;if(r.isNil(s)){return}Object.keys(l).forEach(function(e){if(!r.isNil(s[e])){a.data_.performance[e]=n(s[e],l[e])}});if(r.isFn(s.measure)){["bcParse","bcInit"].forEach(function(e){s.getEntriesByName(e,"measure").forEach(function(t){a.data_.performance[e]=t.duration})})}if(this.data_.performance.navigation){this.data_.performance.navigation.directedMigration=i?r.qs().parse(i).directedMigration==="true":false}};c.appendFrames_=function e(t){this.data_.frames={dropped:t.droppedVideoFrames,corrupted:t.corruptedVideoFrames,total:t.totalVideoFrames}};c.appendPlayer_=function t(i,r){if(r===void 0){r=Date.now()}this.data_.player.dimensions.push([r,o(i.width,i.height),o(i.computedWidth,i.computedHeight)]);this.data_.player.pixelratio.push([r,e.devicePixelRatio]);this.data_.player.screendimensions.push([r,o(e.screen.width,e.screen.height)])};c.appendEvents_=function e(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}this.data_.events.push({type:i.join("."),time:Date.now()})};c.appendContent_=function e(t){this.data_.content={sourceMimeType:t.sourceMimeType}};c.flushBitrates_=function e(){var t=this.data_.bitrates;var i={};if(t.bitrates.length||t.playlists.length||t.rendered.length||t.throughput.length){i["qos.bitrates"]=JSON.stringify(t)}t.bitrates.length=0;t.playlists.length=0;t.rendered.length=0;t.throughput.length=0;return i};c.flushEvents_=function e(){var t=this.data_.events;var i={};t.forEach(function(e){var t=e.time,r=e.type;var n="qos.events."+r;if(Array.isArray(i[n])){i[n].push(t)}else if(i.hasOwnProperty(n)){i[n]=[i[n],t]}else{i[n]=t}});Object.keys(i).forEach(function(e){if(Array.isArray(i[e])){i[e]=JSON.stringify(i[e])}});t.length=0;return i};c.flushMr_=function e(){return{"qos.mr":this.data_.mr}};c.flushFrames_=function e(){var t=a(this.data_.frames,["qos","frames"]);this.data_.frames={};return t};c.flushPerformance_=function e(){return a(this.data_.performance,["qos","performance"])};c.flushPlayer_=function e(){var t=this.data_.player;var i={};Object.keys(t).forEach(function(e){var r=t[e];if(r.length){i["qos.player."+e]=JSON.stringify(r);r.length=0}});return i};c.flushContent_=function e(){return a(this.data_.content,["qos","content"])};return t}();var d=["ad-playback","ads-ready?","postroll?","preroll?"];var h=function e(t){return t.usingPlugin("ads")?t.ads.state:undefined};var f=function e(t){return t.usingPlugin("ads")&&!!t.adonly};var p=function e(t){return d.indexOf(t)>-1};var m=function e(t){return t.usingPlugin("ads")&&r.isFn(t.ads.inAdBreak)};var v=function e(t){if(!t.usingPlugin("ads")){return false}if(f(t)){return true}if(m(t)){return t.ads.isInAdMode()}return p(t.ads.state)};var g=function e(t){if(!t.usingPlugin("ads")){return false}return t.ads.isContentResuming()};var y=function e(t,i){if(m(i)&&t&&t.type==="loadstart"){return true}return!v(i)};var _=function e(t){var i={};if(t.ima3){var a=t.ima3.currentAdEventInfo;i.plugin="ima3";if(r.isFn(t.ima3)){return i}i.pluginVersion=t.ima3.VERSION||t.ima3.version;i.adTech=t.ima3.adTech;i.requestMode=t.ima3.settings.requestMode;i.timeout=t.ima3.settings.timeout;if(a){n(a,["adType","adPodLength","adPodId","creativeFormat","creativeLength","creativeId","creativeIndex","advertiserName","wrapperCreativeIds","dealId","adId","adTitle","adSystem","creativeAdId"],i);var s=a.creativeIndex;if(s&&s.length){i.firstPlayedAdIndex=s[0]}i.startedInAdPod=a.started;i.completedInAdPod=a.completed}}else if(t.FreeWheelPlugin){i.plugin="freewheel";if(r.isFn(t.FreeWheelPlugin)){return i}i.pluginVersion=t.FreeWheelPlugin.VERSION||t.FreeWheelPlugin.getVersion()}return i};var b=function e(t){t.adBreakIndex=null;t.hasAdBreakStarted=false;t["ads-request"]=null;t["ads-response-received"]=null;t["ads-loading"]=[];t["ads-ad-started"]=[];t["ads-ad-ended"]=[]};var M=function e(){var t={};b(t);return t};var T=function e(t,i,r){var n=t.currentAdSequence_;var a=["ads-loading","ads-ad-started","ads-ad-ended"];if(i==="ads-request"){b(n)}else if(i==="adstart"||i==="ads-loading"){if(!n.hasAdBreakStarted){if(n.adBreakIndex===null){n.adBreakIndex=0}else{n.adBreakIndex++}n.hasAdBreakStarted=true;a.forEach(function(e){n[e].push([])})}}else if(i==="adend"){n.hasAdBreakStarted=false}if(a.indexOf(i)>-1){n[i][n.adBreakIndex].push(r)}else if(i==="ads-request"||i==="ads-response-received"){n[i]=r}};var A="sendBeacon"in e.navigator;var w=e.Set;var E="lbu";var x=4e3;var S=new w;["account","domain","event","player"].forEach(function(e){return S.add(e)});var D=new w;["account","catalog_url","destination","domain","dropped_frames","error_code","event","feature","file_size_bytes","forward_buffer_seconds","load_time_ms","measured_bps","platform","platform_version","player","player_height","player_name","player_width","range","rebuffering_count","rebuffering_seconds","rendition_height","rendition_indicated_bps","rendition_mime_type","rendition_url","rendition_width","response_time_ms","session","start_time_ms","source","time","video","video_duration","video_name","video_seconds_viewed"].forEach(function(e){return D.add(e)});var I=function e(t,i){return Math.floor(t)+".."+(Math.floor(i)-1)};var j=function e(t){var i=2166136261;var r=i;for(var n=0;n<t.length;++n){r^=t.charCodeAt(n);r*=16777619}return r>>>0};var L=function e(t,i,r,n){var a="players.brightcove.com/"+t+"/"+i+"_"+r;if(n){a+="/"+n}return a};var N=function e(t,i){var n=r.qs();Object.keys(i).forEach(function(e){if(r.isNil(i[e])){delete i[e]}});var a=t+"?"+n.stringify(i);if(a.length<=x){return a}Object.keys(i).forEach(function(e){if(!D.has(e)){delete i[e]}});i.usage=E;return t+"?"+n.stringify(i)};var C=function e(t,i,r,n,a){var s=i-t;if(a!==undefined&&a<i){s-=a-t}else if(r!==undefined&&n!==undefined){if(r<t){r=t}if(n>i){n=i}s-=n-r}return s};var O=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++){n[a-1]=arguments[a]}var s=i.mergeOptions.apply(i,[t.params||{}].concat(n));delete t.params;return s};var k=function e(t,i){var n=t.mediainfo;var a=n&&n.duration||t.duration();if(n){if(i.video===undefined){i.video=n.id}if(i.video_name===undefined){i.video_name=n.name}}if(r.isNum(a)&&i.video_duration===undefined){i.video_duration=Math.floor(a);if(i.video_duration<1||i.video_duration===Infinity){i.video_duration=null}}return i};var P=function e(t,i){var r=t.preload();if(typeof r!=="string"){r=t.el().getAttribute("preload")}if(typeof r==="string"&&r.length===0){r="auto"}if(r){i.preload=r}};var R=function(){function a(e,t,i,r){if(r===void 0){r={}}this.baseUrl_=i;this.logger_=r.logger;this.history_=t;this.currentAdSequence_=M();this.player_=e;this.metrics_=[];this.playerId=r.playerId;this.embedId=r.embedId;this.applicationId=r.applicationId;this.eventCount_=0;this.streamCount_=-1;this.hashUser_=true;this.user(r.user||null);this.device(r.device||null);this.corpCommsApp(r.corpCommsApp||null);this.defaultParams_={domain:"videocloud",platform:"video-js",session:""};for(var n=0;n<3;n++){this.defaultParams_.session+=(Math.random()*4294967295>>>0).toString(16)}this.qos=new c(this);this.resetTimesOf()}var s=a.prototype;s.logger=function e(){if(this.logger_);};s.metrics=function e(){return this.metrics_.map(i.mergeOptions)};s.resetTimesOf=function e(){this.timeOfImpression=null;this.timeOfView=null};s.defaultParams=function e(t){if(t){t=r.isFn(t)?t():t;this.defaultParams_=i.mergeOptions(this.defaultParams_,t)}return this.defaultParams_};s.getSession=function e(){return this.defaultParams_.session};s.user=function e(t){if(t===null||r.isNonEmptyStr(t)||r.isNum(t)){this.user_=t;this.hashUser_=true}return this.user_};s.setUser=function e(t){if(t===null||r.isNonEmptyStr(t)){this.user_=t;this.hashUser_=false}};s.getUser=function e(){return this.user_};s.corpCommsApp=function e(t){if(t===null||r.isNonEmptyStr(t)||r.isNum(t)){this.corpCommsApp_=t}return this.corpCommsApp_};s.device=function e(t){if(t===null||r.isNonEmptyStr(t)||r.isNum(t)){this.device_=t}return this.device_};s.send=function n(a,s){var o;if(a===void 0){a={}}if(s===void 0){s={}}if(this.user()){if(this.hashUser_){a.user=j(this.user())}else{a.user=this.user()}}if(this.corpCommsApp()){a.application=this.corpCommsApp();a.user=this.user()||this.device()}if(r.isNil(a.time)){a.time=Date.now()}s.qos=Array.isArray(s.qos)?s.qos:[];s.qos.push("mr");a=i.mergeOptions(this.defaultParams_,a,(o=this.qos).flush.apply(o,s.qos));a.seq=""+this.eventCount_;this.eventCount_++;if("streamCount"in s){a.seq+="_"+s.streamCount}if(typeof this.player_.getAccountId==="function"){var l=this.player_.getAccountId();a.account=l;a.player=L(l,this.playerId,this.embedId,this.applicationId)}S.forEach(function(e){if(r.isNil(a[e])){throw new Error('the "'+e+'" param is required')}});var u=N(this.baseUrl_,a);if(s.useSendBeaconOnly){if(A){e.navigator.sendBeacon(u)}else{return null}}else{var c=t.createElement("img");c.src=u}this.metrics_.push(a);this.player_.trigger({params:a,type:"analytics_request"});this.player_.trigger({params:a,type:"analytics_request_"+a.event});return{params:a,url:u}};s.sendCatalog_=function e(t,i){if(i===void 0){i={}}var r=i,n=r.error,a=r.xhr;if(n&&a){n.status=a.status}if(n){t.error=JSON.stringify(n)}return this.send(t,i)};s.sendVideoImpression=function e(t){if(t===void 0){t={}}var n=O(t,{event:"video_impression"});var a=_(this.player_);if(Object.keys(a).length>0){n.web_ad_info=JSON.stringify(a)}var s=r.isNonEmptyStr(this.player_.currentSrc());if(!s||this.timeOfImpression){return null}if(i.bc_.isNonEmptyStr(this.player_.currentType())){this.qos.append("content",{sourceMimeType:this.player_.currentType()});t.qos=t.qos||["content"]}this.streamCount_++;t.streamCount=this.streamCount_;k(this.player_,n);n.autoplay=this.player_.autoplay();P(this.player_,n);var o=this.send(n,t);if(o){this.timeOfImpression=Number(o.params.time)}return o};s.sendVideoView=function e(t){if(t===void 0){t={}}var i=O(t,{event:"video_view"});var n=r.isNonEmptyStr(this.player_.currentSrc());if(!n||this.timeOfView||!this.timeOfImpression){return null}var a=this.history_;var s=a.first("canplay");var o=a.first("loadstart");var l=a.first("play");if(s){i.load_time_ms=s-this.timeOfImpression}i.start_time_ms=C(l||o,i.time,a.first("adstart",true),a.first("adend",true),a.first("adtimeout",true));k(this.player_,i);if(this.player_.usingPlugin("pluginDev")){i.feature="iris"}t.streamCount=this.streamCount_;var u=this.send(i,t);if(u){this.timeOfView=Number(u.params.time)}return u};s.sendVideoEngagement=function e(t,i,n){if(n===void 0){n={}}var a=O(n,{event:"video_engagement"});var s=i.buffered,o=i.duration,l=i.playbackEndTime,u=i.height,c=i.mediainfo,d=i.playbackRate,h=i.rebufferingCount,f=i.rendition,p=i.playbackStartTime,m=i.rangeStart,v=i.rangeEnd,g=i.stats,y=i.width;var _=l-p;n.qos=n.qos||["bitrates","events","player","frames"];t.length=t.end-t.start;a.player_height=u;a.player_width=y;a.video_duration=o;if(c){a.video=c.id;a.video_name=c.name}if(f){a.rendition_url=f.url;a.rendition_indicated_bps=f.indicatedBPS;a.rendition_mime_type=f.mimeType;a.rendition_height=f.height;a.rendition_width=f.width}if(g){if(!r.isNil(g.mediaRequests)){a.media_requests=g.mediaRequests}if(!r.isNil(g.mediaTransferDuration)){a.media_transfer_duration=g.mediaTransferDuration}if(!r.isNil(g.mediaBytesTransferred)){a.media_bytes_transferred=g.mediaBytesTransferred}if(!r.isNil(g.bandwidth)){a.measured_bps=g.bandwidth}if(!r.isNil(g.mediaSecondsLoaded)){a.media_seconds_loaded=g.mediaSecondsLoaded}}var b=_/d*1e3;var M=t.end-t.start;var T=100;var A=Math.floor((M-b)/T)*T/1e3;if(h>0){a.rebuffering_count=h}if(A>0){a.rebuffering_seconds=A}if(s){var w=0;for(var E=0;E<s.length;E++){var x=s.start(E);var S=s.end(E);if(l>=x&&l<=S){w=S-l;break}}a.forward_buffer_seconds=w}if(_<1&&!a.rebuffering_seconds){return null}var D=this.history_.filter(function(e){return e.name==="licenserequestattempted"&&e.time>=t.start&&e.time<t.end});if(D.length){a.license_request_attempts=D.length}k(this.player_,a);n.streamCount=this.streamCount_;if(a.video_duration===Infinity){a.video_seconds_viewed=Math.round(_);delete a.video_duration}else if(_>=1){a["qos.derived_range"]=I(p,l);a.range=m+".."+v}return this.send(a,n)};s.sendVideoComplete=function e(t){if(t===void 0){t={}}var i=O(t,{event:"video_complete"});k(this.player_,i);t.streamCount=this.streamCount_;return this.send(i,t)};s.sendError=function e(t){if(t===void 0){t={}}var i=this.player_.error();if(!i){return null}var n=O(t,{event:"error"});var a=r.isFn(this.player_.errors)&&r.isFn(this.player_.errors.getAll)&&this.player_.errors.getAll()||{unknown:{type:"MEDIA_ERR_UNKNOWN"}};if(i&&a.hasOwnProperty(String(i.code))){n.error_code=a[String(i.code)].type}else if(i.type!==undefined){n.error_code=i.type}else{n.error_code=a.unknown.type}k(this.player_,n);t.streamCount=this.streamCount_;return this.send(n,t)};s.sendCatalogRequest=function e(t,i){if(i===void 0){i={}}var r=O(i,{event:"catalog_request",url:t});return this.sendCatalog_(r,i)};s.sendCatalogRequestError=function e(t,i){if(i===void 0){i={}}var r=O(i,{event:"catalog_request_error",url:t});if(i.error){i.error=n(i.error,["code","message","type"])}return this.sendCatalog_(r,i)};s.sendCatalogResponse=function e(t,i){if(i===void 0){i={}}var r=O(i,{event:"catalog_response",url:t});r.time=Date.now();r.response_time_ms=r.time-this.history_.last("catalog_request");return this.sendCatalog_(r,i)};s.sendAdEnd=function e(t){if(t===void 0){t={}}var i=_(this.player_);var r=this.currentAdSequence_["ads-ad-started"];var n=this.currentAdSequence_.adBreakIndex;if(i.plugin!==undefined){if(i.adType==="preroll"&&r.length>0&&r[0].length>0){var a=this.history_.first("play",true);i.prerollDelay=r[0][0]-a;i.firstPlayInSession=a}i.adsRequest=this.currentAdSequence_["ads-request"];i.adsResponseReceived=this.currentAdSequence_["ads-response-received"];i.adsLoading=this.currentAdSequence_["ads-loading"][n];i.adsAdStarted=this.currentAdSequence_["ads-ad-started"][n];i.adsAdEnded=this.currentAdSequence_["ads-ad-ended"][n]}else{i.plugin="unknown"}var s={event:"ad_end",web_ad_info:JSON.stringify(i)};t.streamCount=this.streamCount_;return this.send(k(this.player_,O(t,s)),t)};s.sendAdHardTimeout=function e(t){if(t===void 0){t={}}t.streamCount=this.streamCount_;return this.send(k(this.player_,O(t,{event:"ad_hard_timeout"})),t)};s.sendAdStart=function e(t){if(t===void 0){t={}}t.streamCount=this.streamCount_;return this.send(k(this.player_,O(t,{event:"ad_start"})),t)};s.sendAdTimeout=function e(t){if(t===void 0){t={}}t.streamCount=this.streamCount_;return this.send(k(this.player_,O(t,{event:"ad_timeout"})),t)};s.sendPlayRequest=function e(t){if(t===void 0){t={}}t.streamCount=this.streamCount_;return this.send(k(this.player_,O(t,{event:"play_request"})),t)};s.sendPlayerInit=function e(t){if(t===void 0){t={}}return this.send(O(t,{event:"player_init"}),t)};s.sendPlayerLoad=function e(t){if(t===void 0){t={}}return this.send(O(t,{event:"player_load"}),t)};return a}();var z=function(e){var t=e.bcAnalyticsLogger&&e.bcAnalyticsLogger();var i=function e(){return t&&t.add.apply(t,arguments)};return i};function U(e,t){e.prototype=Object.create(t.prototype);e.prototype.constructor=e;e.__proto__=t}var B=function e(t){return typeof t==="number"&&!isNaN(t)&&t>=0&&t<Infinity};var F=function e(t){return t.map(function(e){return Math.floor(e)}).reduce(function(e,t){var i=e[e.length-1];if(t!==i){e.push(t)}return e},[])};var V=function e(t){return t.reduce(function(e,t){var i=e[e.length-1];if(i){if(i.end+1===t){i.end=t}else{e.push({start:t,end:t})}}else{e.push({start:t,end:t})}return e},[])};var G=function e(t){return t.map(function(e){var t=e.start,i=e.end;var r=i-t;if(r>0){return{start:t,end:i-1,remainder:i}}return{start:t,end:i,remainder:i}})};var H=function e(t){var i=[];var r=t.shift()||{},n=r.start,a=r.end,s=r.remainder;while(B(n)&&B(a)&&B(s)&&n===a&&n===s){var o=t.shift()||{};n=o.start;a=o.end;s=o.remainder}if(t.length===0){i.push(s)}for(var l=0;l<t.length;l++){var u=t[l],c=u.start,d=u.end,h=u.remainder;for(var f=c;f<=(h||d);f++){i.push(f)}}return{start:n,end:a,remainders:i,ranges:t.length}};var Q=function e(t){return H(G(V(F(t))))};var Y=1;function W(){return Y++}var q=[];var X=function e(t,i,r,n,a){if(a===void 0){a=true}var s=[].concat(r).sort();if(i!=="removeEventListener"){t.off(s,n)}else{s.forEach(function(e){t.removeEventListener(e,n)})}if(!a){return}var o=q.length;var l=function e(){var i=q[o];if(i.context===t&&(i.fn.guid===n.guid||i.fn===n)&&s.every(function(e,t){return i.events[t]})){q.splice(o,1);return"break"}};while(o--){var u=l();if(u==="break")break}};var Z=function e(){var t=q.length;while(t--){var i=q.shift(),r=i.context,n=i.mode,a=i.events,s=i.fn;var o="off";if(n==="addEventListener"){o="removeEventListener"}X(r,o,a,s,false)}};var K=function e(t,i,r,n){var a=[].concat(r).sort();var s={events:a,fn:n,mode:i,context:t};if(i==="one"||i==="onePerSrc"){s.fn=function(){var e="off";if(s.mode==="addEventListener"){e="removeEventListener"}X(s.context,e,s.events,s.fn);for(var t=arguments.length,i=new Array(t),r=0;r<t;r++){i[r]=arguments[r]}return n.apply(this,i)};if(!n.guid){n.guid=W()}s.fn.guid=n.guid}q.push(s);if(i==="addEventListener"){s.events.forEach(function(e){s.context.addEventListener(e,s.fn)})}else{s.context[s.mode](s.events,s.fn)}};var J=function e(){var t=q.slice(0);Z();t.forEach(function(e){var t=e.context,i=e.mode,r=e.events,n=e.fn;K(t,i,r,n)})};var $=1e4;var ee=function e(t){return Boolean(t.onceux&&t.onceux.currentTime&&t.onceux.timeline)};var te=function(e){U(t,e);function t(t,i){var r;r=e.call(this)||this;r.player_=t;r.logger_=i;r.stateBySrc_={};r.lastStateRecord_=0;r.disposed_=false;return r}var r=t.prototype;r.logger=function e(){};r.stateBySrc=function e(t){if(t===void 0){t=this.player_.currentSrc()}if(!this.stateBySrc_.hasOwnProperty(t)){this.stateBySrc_[t]={buffered:null,duration:0,end:0,height:0,mediainfo:null,playbackRate:1,rebufferingCount:0,src:t,start:0,width:0,playbackStartTime:0,playbackEndTime:0,stats:null,rendition:null,videoPlaybackQuality:null,times:[]}}var i=this.player_.tech_&&this.player_.tech_.vhs;this.stateBySrc_[t].stats=i&&i.stats||null;return this.stateBySrc_[t]};r.clearStateBySrc=function e(t){if(t===void 0){t=this.player_.currentSrc()}delete this.stateBySrc_[t]};r.recordState=function e(){var t=this.player_;var i=this.stateBySrc();i.mediainfo=t.mediainfo;i.playbackEndTime=t.currentTime();i.times.push(i.playbackEndTime);if(ee(t)){i.duration=t.onceux.timeline.contentDuration}else{i.duration=t.duration()}i.buffered=t.buffered();i.playbackRate=t.playbackRate()};r.isTracking=function e(){return!!this.timerId_};r.start=function e(t){var i=this;if(t===void 0){t={}}if(this.disposed_){return}var r=t,n=r.reason,a=r.src;if(!a){a=this.player_.currentSrc()}var s=this.stateBySrc(a);s.playbackStartTime=s.playbackEndTime=this.player_.currentTime();if(ee(this.player_)){s.duration=this.player_.onceux.timeline.contentDuration}else{s.duration=this.player_.duration()}s.rebufferingCount=0;this.player_.clearTimeout(this.timerId_);this.timerCreatedAt_=Date.now();this.timerId_=this.player_.setTimeout(function(){return i.stop({src:a,reason:"engagement timer fired"})},$);return this};r.prepareState_=function e(t){var r=this.player_;var n=this.stateBySrc(t);n.height=Math.round(r.currentHeight());n.width=Math.round(r.currentWidth());var a=r.tech_&&r.tech_.vhs;if(a&&a.playlists&&a.playlists.media()){var s=a.playlists.media();var o=n.rendition={url:s.resolvedUri,mimeType:r.currentType()};if(s.attributes){o.indicatedBPS=s.attributes.BANDWIDTH;if(s.attributes.RESOLUTION){o.height=s.attributes.RESOLUTION.height;o.width=s.attributes.RESOLUTION.width}}}n.videoPlaybackQuality=r.getVideoPlaybackQuality();if(n.mediainfo){var l={};Object.keys(n.mediainfo).forEach(function(e){if(!/_/.test(e)){l[e]=n.mediainfo[e]}});n.mediainfo=l}n.times.push(r.currentTime());var u=Q(n.times),c=u.start,d=u.end,h=u.remainders,f=u.ranges;n.times=h;return i.mergeOptions({rangeExtras:f,rangeStart:c,rangeEnd:d},n)};r.stop=function e(t){var i=this;if(t===void 0){t={}}if(!t.src){t.src=this.player_.currentSrc()}if(this.isTracking()){this.player_.clearTimeout(this.timerId_);this.timerId_=null;var r=this.stateBySrc(t.src);var n=(r.duration-r.playbackEndTime)*1e3;if(!this.player_.ended()&&n<1500){this.timerId_=true;K(this.player_,"one","ended",function(){i.recordState();i.stop({reason:"content ended after we delayed the engager"})});return this}t.state=this.prepareState_(t.src);t.period=t.period||{};t.period.start=t.period.start||this.timerCreatedAt_;t.period.end=t.period.end||Date.now();this.trigger({type:"engagement",engagement:t})}return this};r.dispose=function e(){this.disposed_=true;this.stop({ignoreAdState:true,reason:"player disposed"});this.off();return this};return t}(i.EventTarget);var ie=["progress","seeking","suspend","timeupdate"];var re=["seek","stable","unstable"];var ne=["adend","adscanceled","adserror","adskip","adsready","adstart","adtimeout","contentplayback","contentupdate","nopostroll","nopreroll","readyforpreroll"];var ae=[].concat(i.getTech("Html5").Events);var se=ae.filter(function(e){return ie.indexOf(e)===-1});var oe=["ads-request","ads-response-received","adstart","ads-loading","ads-ad-started","ads-ad-ended","adend"];var le=["NETWORK_EMPTY","NETWORK_IDLE","NETWORK_LOADING","NETWORK_NO_SOURCE"];var ue=["HAVE_NOTHING","HAVE_METADATA","HAVE_CURRENT_DATA","HAVE_FUTURE_DATA","HAVE_ENOUGH_DATA"];var ce=function(){function e(e){this.logger_=e;this.events_=[]}var t=e.prototype;t.add=function e(t,r,n){if(r===void 0){r=Date.now()}var a=i.mergeOptions(n,{name:t,time:r});this.events_.push(a);return r};t.record=function e(t,i){var r=Date.now();this.add(t,r,{adState:h(i),isInAdState:v(i),networkState:le[i.networkState()],readyState:ue[i.readyState()]});return r};t.reset=function e(){this.events_.length=0};t.filter=function e(t){if(!r.isFn(t)){return this.events_.filter(function(e){return e.name===t})}return this.events_.filter(t)};t.map=function e(t){return this.events_.map(t)};t.names=function e(){return this.map(function(e){return e.name})};t.first=function e(t,i){for(var r=0;r<this.events_.length;r++){var n=this.events_[r];if(!i&&n.isInAdState){continue}if(n.name===t){return n.time}}};t.last=function e(t,i){var r=this.events_.length;while(r--){var n=this.events_[r];if(!i&&n.isInAdState){continue}if(n.name===t){return n.time}}};return e}();var de=function(){function e(){this.log_={}}var t=e.prototype;t.put=function e(t){this.log_[t]=true};t.peek=function e(){return Object.keys(this.log_)};t.flush=function e(){var t=Object.keys(this.log_);this.log_={};return t};return e}();var he="3.13.0";var fe={production:"https://metrics.brightcove.com/v2/tracker",qa:"https://metrics.juju.qa.brightcove.com/v2/tracker",staging:"https://metrics.juju.staging.brightcove.com/v2/tracker"};var pe=function e(t,i,n){Object.keys(n).forEach(function(e){i[e]=String(i[e]||"");if(e==="accountId"&&!r.isNonEmptyStr(i[e])){i[e]=String(i.account||"")}if(!r.isNonEmptyStr(i[e])){i[e]=t.getAttribute("data-"+n[e])||""}});return i};var me=function t(i,n){var a=pe(i.el(),n,{accountId:"account",applicationId:"application-id",embedId:"embed",playerId:"player",playerName:"name",usage:"usage"}),s=a.accountId,o=a.applicationId,l=a.embedId,u=a.playerId;if(!r.isNonEmptyStr(n.player)){if(e.location.hostname==="players.api.brightcove.com"){n.player="players.api.brightcove.com/"+u+"_"+l;return}n.player=L(s,u,l);if(o){n.player+="/"+o}}if(o){if(r.isNonEmptyStr(n.playerName)){n.playerName+=" - "+o}else{n.playerName=o}}};var ve=function e(t){return{computedHeight:t.currentHeight(),computedWidth:t.currentWidth(),height:t.height(),width:t.width()}};var ge=function t(r){if(typeof r==="boolean"){i.log.warn("The __iframe__ option should only be used in tests!");return r}try{return e.parent!==e.self}catch(e){return true}};var ye=function n(a){var s=this;if(a===void 0){a={}}var o=false;var l=false;var u={};a=i.mergeOptions(a);a.env=fe.hasOwnProperty(a.env)?a.env:"production";me(this,a);var c=z(this);var d=new te(this,c);var p=new ce(c);var _=new de;var b=r.isNonEmptyStr(a.usage)?a.usage.split(","):[];b.forEach(function(e){_.put(e)});var M=new R(this,p,r.isNonEmptyStr(a.analyticsUrl)?a.analyticsUrl:fe[a.env],{logger:c,user:a.user,corpCommsApp:a.corpCommsApp,device:a.device,playerId:a.playerId,embedId:a.embedId,applicationId:a.applicationId});M.defaultParams(function(){var i={account:a.accountId||null,destination:e.location.href,platform_version:a.platformVersion,player:a.player,player_name:a.playerName,source:t.referrer};if(ge(a.__iframe__)){i.destination=t.referrer;if(r.isNonEmptyStr(a.referrer)){i.source=a.referrer}else{try{i.source=e.parent.document.referrer}catch(e){i.source=null}}}return i});K(this,"on","pluginsetup:ads",J);this.bcAnalytics={client:M,engager:d,history:p,settings:a,VERSION:he};K(this,"on","usage",function(e){if(!e.name){return i.log.warn("Ignored usage event without a `name` parameter")}_.put(e.name)});var A=function e(){_.put("unload");d.stop({fromUnload:true,ignoreAdState:true,reason:"unload called"})};K(e,"addEventListener","unload",A);var w=function e(t){if(!y(t,s)){return}var i=p.first("loadstart",m(s));var r=p.first("play");var n=p.last("playing");if((r||n)&&!d.isTracking()&&!s.paused()){d.start({period:{start:r||n},reason:"workflow detected that it is playing"})}if(M.timeOfImpression&&M.timeOfView){return}u.workflow=u.workflow||s.setTimeout(function(){u.workflow=null;i=p.first("loadstart",m(s));r=p.first("play");n=p.last("playing");if((i||r)&&!M.timeOfImpression){M.sendVideoImpression({params:{time:Math.min(i||Infinity,r||Infinity)}})}if(i&&n&&!M.timeOfView){M.sendVideoView({params:{time:n}})}},1)};d.on("engagement",function(t){var i=t.engagement,r=i.fromUnload,n=i.ignoreAdState,a=i.period,o=i.state;var l=v(s);var u={useSendBeaconOnly:r,params:{time:a.end}};if(o.rangeExtras>=2){_.put("disco-engmnt")}var c=_.peek();if(c&&c.length){u.params.usage=c.map(e.encodeURIComponent).sort().join(",")}if(!l||n){M.qos.append("frames",o.videoPlaybackQuality);if(M.sendVideoEngagement(a,o,u)&&!s.paused()){if(l){return}_.flush();d.start({reason:"sent engagement and still playing"})}}});K(this,"on","dispose",function(){Z();_.put("disposed");d.dispose()});K(this,"on",se.concat(ne,re).concat("sourceunstable"),function(e){p.record(e.type,s)});K(this,"on",se.concat("ads-ad-started"),function(e){M.qos.append("event",v(s)?"ad":"content",e.type)});K(this,"on",["loadedmetadata","resize"],function(){M.qos.append("player",ve(s))});K(this,"on","fullscreenchange",function(){var e=Date.now();u.fullscreen=s.setTimeout(function(){u.fullscreen=null;M.qos.append("player",ve(s),e)},500)});K(this,"on","mediachange",function(){if(s.tech_.vhs){var e=s.tech_.vhs.playlists.media();M.qos.append("bitrate",{bitrates:s.tech_.vhs.bandwidth,playlists:e&&e.attributes&&e.attributes.BANDWIDTH})}});K(this,"on","ratechange",function(){var e=s.playbackRate().toFixed(2);_.put("pr:"+e)});K(this,"on","ready",function(){K(s.tech_,"on","usage",function(e){if(!e.name){return i.log.warn("Ignored usage event without a `name` parameter")}_.put(e.name)});K(s.tech_,"on","bandwidthupdate",function(){M.qos.append("bitrate",{bitrates:s.tech_.vhs.bandwidth,throughput:Math.round(s.tech_.vhs.throughput)})});K(s.tech_,"on","liveresync",function(){s.trigger({type:"usage",name:"hls-live-resync"})});K(s.tech_,"on","videounderflow",function(){s.trigger({type:"usage",name:"hls-video-underflow"})});K(s.tech_,"on","licenserequestattempted",function(){p.add("licenserequestattempted")});K(s,"on","loadedmetadata",function(){var e=s.textTracks();for(var t=0;t<e.length;t++){if(e[t].label==="segment-metadata"){(function(){var i=e[t];var r=void 0;K(i,"addEventListener","cuechange",function(){var e=i.activeCues[0];if(e){var t=s.tech_.vhs.playlists.master.playlists[e.value.playlist];if(r!==t.uri){if(t.attributes&&t.attributes.BANDWIDTH){M.qos.append("bitrate",{rendered:t.attributes.BANDWIDTH})}if(r!==undefined){d.stop({reason:"Rendition on screen changed"})}}r=t.uri}})})()}}})});K(this,"on","waiting",function(e){if(!l&&!v(s)){d.stateBySrc().rebufferingCount++}});K(this,"on","sourcechanged",function(e,t){var i=t.interimEvents;var r=i[0].event;var n=function e(){if(!l&&!v(s)){d.recordState()}};if(t.from){d.stop({reason:"changing sources",period:{end:i[0].time},ignoreAdState:true,src:t.from});d.clearStateBySrc(t.from)}o=false;l=false;M.resetTimesOf();p.reset();i.forEach(function(e){return p.add(e.event.type,e.time)});w();K(s,"onPerSrc","timeupdate",n);K(s,"onePerSrc","sourceunstable",function(){if(h(s)==="content-resuming"){return}var e=s.currentSrc();d.stop({ignoreAdState:true,reason:"sourceunstable",src:e});if(!v(s)){X(s,"off","timeupdate",n)}});K(s,"onPerSrc",["loadstart","play","playing"],w);K(s,"onPerSrc",["pause","ratechange"],function(e){if(!l&&!v(s)&&!s.ended()){d.stop({reason:'saw "'+e.type+'"'});if(s.paused()){K(s,"onePerSrc","playing",function(){d.start({reason:"playback began after a pause"})})}else if(e.type==="ratechange"){u.ratechange=s.setTimeout(function(){u.ratechange=null;d.start({reason:"the playback rate changed"})},1)}}});K(s,"onPerSrc","unstable",function(){if(!l&&!v(s)){l=true;d.stop({reason:"seeking"})}});K(s,"onPerSrc","seek",function(){if(l&&!v(s)){l=false;d.start({reason:"stopped seeking"})}});K(s,"onePerSrc","adstart",function(){if(!f(s)){M.sendVideoImpression({params:{time:p.last("adstart",true)-100}})}});K(s,"onPerSrc","adstart",function(){o=s.ended();d.stop({ignoreAdState:true,period:{end:p.last("adstart",true)},reason:"saw adstart"})});K(s,"onePerSrc","adend",function(){if(!s.paused()&&!s.ended()){w()}});K(s,"onPerSrc","adend",function(){if(!o){d.start({reason:'saw "adend"'})}});K(s,"onePerSrc","ended",function(){d.stop({reason:"end of content"});M.sendVideoComplete()})});K(this,"on","catalog_request",function(e){p.record(e.type,s);M.sendCatalogRequest(e.url)});K(this,"on","catalog_request_error",function(e){p.record(e.type,s);M.sendCatalogRequestError(e.url,{error:e.error,xhr:e.response})});K(this,"on","catalog_response",function(e){p.record(e.type,s);M.sendCatalogResponse(e.url,{xhr:e.response})});K(this,"on","play",function(e){if(g(s)){return}var t={params:{time:Date.now()}};if(s.perSourceBehaviors.isSrcStable()){M.sendPlayRequest(t)}else{K(s,"one","sourcechanged",function(){M.sendPlayRequest(t)})}});K(this,"on","error",function(){if(!v(s)){M.sendError()}});K(this,"on","adstart",function(e){M.sendAdStart();u.perSrcDisable=s.setTimeout(function(){u.perSrcDisable=null;s.perSourceBehaviors.disable()},1)});K(this,"on","adend",function(e){M.sendAdEnd();if(u.perSrcDisable){s.clearTimeout(u.perSrcDisable)}else{s.perSourceBehaviors.enable()}});K(this,"on","adtimeout",function(){M.sendAdTimeout()});K(this,"on","ad-hard-timeout",function(){M.sendAdHardTimeout()});K(this,"on",oe,function(e){T(M,e.type,Date.now())});M.qos.append("mr",a.mr);M.sendPlayerInit();M.sendError();K(this,"on","ready",function(){M.defaultParams({feature:f(s)?"adonly":null});M.qos.append("performance",(e.location.href||"").split("?")[1]);M.qos.append("player",ve(s));if("hidden"in t&&"visibilityState"in t){if(t.hidden){s.trigger({type:"usage",name:"document-hidden"})}var i=function e(){s.trigger({type:"usage",name:"document-"+t.visibilityState})};K(t,"addEventListener","visibilitychange",i)}if(t.querySelector(".bc-iframe")){s.trigger({type:"usage",name:"iframe-embed"})}else{s.trigger({type:"usage",name:"inpage-embed"})}M.sendPlayerLoad({qos:M.qos.keys(),params:{usage:_.flush()}})})};ye.VERSION=he;if(i.registerPlugin){i.registerPlugin("bcAnalytics",ye)}else{i.plugin("bcAnalytics",ye)}return ye})})();(function(){if(s.getPlugin("errors")){return}(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("video.js"),require("global/document")):typeof i==="function"&&i.amd?i(["video.js","global/document"],t):(e=e||self,e.videojsErrors=t(e.videojs,e.document))})(this,function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;t=t&&t.hasOwnProperty("default")?t["default"]:t;var i="4.3.2";var r=e.getComponent("Flash");var n=!e.browser.IS_IPHONE;var a=e.registerPlugin||e.plugin;var s={header:"",code:"",message:"",timeout:45*1e3,dismiss:n,errors:{1:{type:"MEDIA_ERR_ABORTED",headline:"The video download was cancelled"},2:{type:"MEDIA_ERR_NETWORK",headline:"The video connection was lost, please confirm you are "+"connected to the internet"},3:{type:"MEDIA_ERR_DECODE",headline:"The video is bad or in a format that cannot be played on your browser"},4:{type:"MEDIA_ERR_SRC_NOT_SUPPORTED",headline:"This video is either unavailable or not supported in this browser"},5:{type:"MEDIA_ERR_ENCRYPTED",headline:"The video you are trying to watch is encrypted and we do not know how "+"to decrypt it"},unknown:{type:"MEDIA_ERR_UNKNOWN",headline:"An unanticipated problem was encountered, check back soon and try again"},"-1":{type:"PLAYER_ERR_NO_SRC",headline:"No video has been loaded"},"-2":{type:"PLAYER_ERR_TIMEOUT",headline:"Could not download the video"},PLAYER_ERR_DOMAIN_RESTRICTED:{headline:"This video is restricted from playing on your current domain"},PLAYER_ERR_IP_RESTRICTED:{headline:"This video is restricted at your current IP address"},PLAYER_ERR_GEO_RESTRICTED:{headline:"This video is restricted from playing in your current geographic region"},FLASHLS_ERR_CROSS_DOMAIN:{headline:"The video could not be loaded: crossdomain access denied."}}};var o=function n(a,o){var l;var u;var c;var d=[];var h=function t(i){o.errors=e.mergeOptions(o.errors,i);Object.keys(o.errors).forEach(function(e){var t=o.errors[e];if(!t.type){t.type=e}})};h();var f=function e(){a.clearTimeout(u);if(c){c=false;a.removeClass("vjs-waiting")}u=a.setTimeout(function(){if(a.error()||a.paused()||a.ended()){return}c=true;a.addClass("vjs-waiting")},1e3);a.clearTimeout(l);l=a.setTimeout(function(){if(a.error()||a.paused()||a.ended()){return}a.error({code:-2,type:"PLAYER_ERR_TIMEOUT"})},o.timeout);if(a.error()&&a.error().code===-2){a.error(null)}};var p=function e(){var t;while(d.length){t=d.shift();a.off(t[0],t[1])}a.clearTimeout(l);a.clearTimeout(u)};var m=function e(t,i){var r=function e(){if(!a.error()){var t=a.$(".vjs-tech");if(t&&t.type==="application/x-shockwave-flash"&&!t.vjs_getProperty){a.error({code:-2,type:"PLAYER_ERR_TIMEOUT"});return}if(a.paused()){return f()}if(a.ended()){return f()}}i.call(this)};a.on(t,r);d.push([t,r])};var v=function e(){var t=0;p();f();m(["timeupdate","adtimeupdate"],function(){var e=a.currentTime();if(e!==t){t=e;f()}})};var g=function e(){if(!a.currentSrc()){a.error({code:-1,type:"PLAYER_ERR_NO_SRC"})}};var y=function i(){var n="";var s=a.error();var l=t.createElement("div");var u="";if(!s){return}s=e.mergeOptions(s,o.errors[s.code||s.type||0]);if(s.message){n='<div class="vjs-errors-details">'+a.localize("Technical details")+'\n        : <div class="vjs-errors-message">'+a.localize(s.message)+"</div>\n        </div>"}if(s.code===4&&r&&!r.isSupported()){var c=a.localize("If you are using an older browser please try upgrading or installing Flash.");n+='<span class="vjs-errors-flashmessage">'+c+"</span>"}var d=a.getChild("errorDisplay");l.className="vjs-errors-dialog";l.id="vjs-errors-dialog";u='<div class="vjs-errors-content-container">\n      <h2 class="vjs-errors-headline">'+this.localize(s.headline)+'</h2>\n        <div class="vjs-errors-code"><b>'+this.localize("Error Code")+":</b> "+(s.type||s.code)+"</div>\n        "+n+"\n      </div>";var h=d.closeable(!("dismiss"in s)||s.dismiss);if(h){u+='<div class="vjs-errors-ok-button-container">\n          <button class="vjs-errors-ok-button">'+this.localize("OK")+"</button>\n        </div>";l.innerHTML=u;d.fillWith(l);d.contentEl().firstChild.appendChild(d.getChild("closeButton").el());var f=d.el().querySelector(".vjs-errors-ok-button");a.on(f,"click",function(){d.close()})}else{l.innerHTML=u;d.fillWith(l)}if(a.currentWidth()<=600||a.currentHeight()<=250){d.addClass("vjs-xs")}d.one("modalclose",function(){return a.error(null)})};var _=function e(){p();a.removeClass("vjs-errors");a.off("play",v);a.off("play",g);a.off("dispose",e);a.off(["aderror","error"],y)};var b=function t(i){_();n(a,e.mergeOptions(s,i))};b.extend=function(e){return h(e)};b.getAll=function(){return e.mergeOptions(o.errors)};b.timeout=function(e){if(typeof e==="undefined"){return o.timeout}if(e!==o.timeout){o.timeout=e;if(!a.paused()){v()}}};b.disableProgress=function(){};a.on("play",v);a.on("play",g);a.on("dispose",_);a.on(["aderror","contenterror","error"],y);a.ready(function(){a.addClass("vjs-errors")});if(!a.paused()){v()}b.VERSION=i;a.errors=b};var l=function t(i){o(this,e.mergeOptions(s,i))};["extend","getAll"].forEach(function(t){l[t]=function(){e.log.warn("The errors."+t+"() method is not available until the plugin has been initialized!")}});l.VERSION=i;a("errors",l);return l});s.addLanguage("en",{"No video has been loaded":"No video has been loaded","Could not download the video":"Could not download the video","The video connection was lost, please confirm you are connected to the internet":"The video connection was lost, please confirm you are connected to the internet","The video is bad or in a format that cannot be played on your browser":"The video is bad or in a format that cannot be played on your browser","This video is either unavailable or not supported in this browser":"This video is either unavailable or not supported in this browser","Error Code":"Error Code","Technical details":"Technical details","The video download was cancelled":"The video download was cancelled","The video you are trying to watch is encrypted and we do not know how to decrypt it":"The video you are trying to watch is encrypted and we do not know how to decrypt it","An unanticipated problem was encountered, check back soon and try again":"An unanticipated problem was encountered, check back soon and try again","This video is restricted from playing on your current domain":"This video is restricted from playing on your current domain","This video is restricted at your current IP address":"This video is restricted at your current IP address","This video is restricted from playing in your current geographic region":"This video is restricted from playing in your current geographic region","If you are using an older browser please try upgrading or installing Flash.":"If you are using an older browser please try upgrading or installing Flash.",OK:"OK"});s.addLanguage("es",{"No video has been loaded":"No hay ning\xfan v\xeddeo cargado.","Could not download the video":"No se ha podido descargar el v\xeddeo.","The video connection was lost, please confirm you are connected to the internet":"Se ha perdido la conexi\xf3n al v\xeddeo. Compruebe si su equipo est\xe1 conectado a internet.","The video is bad or in a format that cannot be played on your browser":"El v\xeddeo est\xe1 da\xf1ado o tiene un formato no reproducible en su navegador.","This video is either unavailable or not supported in this browser":"Este v\xeddeo no est\xe1 disponible o es incompatible con este navegador.","Error Code":"C\xf3digo de error","Technical details":"Detalles t\xe9cnicos","The video download was cancelled":"La descarga ha sido cancelada","The video you are trying to watch is encrypted and we do not know how to decrypt it":"El v\xeddeo que est\xe1 tratando de visualizar est\xe1 encriptado y no es posible desencriptarlo","An unanticipated problem was encountered, check back soon and try again":"Ha surgido un problema imprevisto. Vuelva a intentarlo m\xe1s tarde.","This video is restricted from playing on your current domain":"Este v\xeddeo tiene restricciones y no puede reproducirse en su dominio actual.","This video is restricted at your current IP address":"Este v\xeddeo tiene restricciones y no puede reproducirse en su direcci\xf3n IP actual.","This video is restricted from playing in your current geographic region":"Este v\xeddeo tiene restricciones y no puede reproducirse en su regi\xf3n geogr\xe1fica actual.","If you are using an older browser please try upgrading or installing Flash.":"Si est\xe1 utilizando un navegador antiguo, intente actualizar o instalar Flash."});s.addLanguage("zh-CN",{"No video has been loaded":"\u672a\u52a0\u8f7d\u89c6\u9891","Could not download the video":"\u65e0\u6cd5\u4e0b\u8f7d\u89c6\u9891","The video connection was lost, please confirm you are connected to the internet":"\u89c6\u9891\u8fde\u63a5\u4e22\u5931\uff0c\u8bf7\u786e\u8ba4\u5df2\u8fde\u63a5\u81f3\u4e92\u8054\u7f51","The video is bad or in a format that cannot be played on your browser":"\u89c6\u9891\u5df2\u635f\u574f\uff0c\u6216\u4f7f\u7528\u65e0\u6cd5\u5728\u6d4f\u89c8\u5668\u4e2d\u64ad\u653e\u7684\u683c\u5f0f","This video is either unavailable or not supported in this browser":"\u6b64\u89c6\u9891\u4e0d\u53ef\u7528\u6216\u4e0d\u53d7\u6b64\u6d4f\u89c8\u5668\u652f\u6301","Error Code":"\u9519\u8bef\u4ee3\u7801","Technical details":"\u6280\u672f\u7ec6\u8282","The video download was cancelled":"\u89c6\u9891\u4e0b\u8f7d\u5df2\u53d6\u6d88","The video you are trying to watch is encrypted and we do not know how to decrypt it":"\u60a8\u5c1d\u8bd5\u89c2\u770b\u7684\u89c6\u9891\u5df2\u52a0\u5bc6\uff0c\u800c\u4e14\u89e3\u5bc6\u65b9\u6cd5\u672a\u77e5","An unanticipated problem was encountered, check back soon and try again":"\u53d1\u751f\u610f\u5916\u95ee\u9898\uff0c\u7a0d\u540e\u8bf7\u68c0\u67e5\u5e76\u91cd\u8bd5","This video is restricted from playing on your current domain":"\u6b64\u89c6\u9891\u53d7\u5230\u9650\u5236\uff0c\u65e0\u6cd5\u5728\u5f53\u524d\u57df\u4e0a\u64ad\u653e","This video is restricted at your current IP address":"\u6b64\u89c6\u9891\u53d7\u5230\u9650\u5236\uff0c\u65e0\u6cd5\u5728\u5f53\u524d IP \u5730\u5740\u64ad\u653e","This video is restricted from playing in your current geographic region":"\u6b64\u89c6\u9891\u53d7\u5230\u9650\u5236\uff0c\u65e0\u6cd5\u5728\u5f53\u524d\u5730\u7406\u533a\u57df\u64ad\u653e","If you are using an older browser please try upgrading or installing Flash.":"\u5982\u679c\u60a8\u4f7f\u7528\u7684\u662f\u65e7\u7248\u6d4f\u89c8\u5668\uff0c\u8bf7\u5c1d\u8bd5\u5347\u7ea7\u6216\u5b89\u88c5 Flash\u3002",OK:"\u786e\u5b9a"});s.addLanguage("ja",{"No video has been loaded":"\u52d5\u753b\u3092\u30ed\u30fc\u30c9\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f","Could not download the video":"\u52d5\u753b\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f","The video connection was lost, please confirm you are connected to the internet":"\u52d5\u753b\u306e\u63a5\u7d9a\u304c\u5931\u308f\u308c\u307e\u3057\u305f\u3002\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3057\u3066\u3044\u308b\u3053\u3068\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044","The video is bad or in a format that cannot be played on your browser":"\u52d5\u753b\u306b\u306a\u3093\u3089\u304b\u306e\u554f\u984c\u304c\u3042\u308b\u304b\u3001\u3054\u4f7f\u7528\u306e\u30d6\u30e9\u30a6\u30b6\u3067\u518d\u751f\u3067\u304d\u306a\u3044\u52d5\u753b\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u3059\u3002","This video is either unavailable or not supported in this browser":"\u8a72\u5f53\u306e\u52d5\u753b\u306f\u73fe\u5728\u6709\u52b9\u3067\u306f\u306a\u3044\u3001\u53c8\u306f\u3001\u3054\u4f7f\u7528\u306e\u30d6\u30e9\u30a6\u30b6\u3067\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u304a\u308a\u307e\u305b\u3093","Error Code":"\u30a8\u30e9\u30fc\u30b3\u30fc\u30c9","Technical details":"\u30c6\u30af\u30cb\u30ab\u30eb\u30c7\u30a3\u30c6\u30fc\u30eb","The video download was cancelled":"\u52d5\u753b\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u4e2d\u6b62\u3055\u308c\u307e\u3057\u305f","The video you are trying to watch is encrypted and we do not know how to decrypt it":"\u6697\u53f7\u5316\u3055\u308c\u305f\u8a72\u5f53\u306e\u52d5\u753b\u306e\u5fa9\u53f7\u5316\u65b9\u6cd5\u304c\u4e0d\u660e\u3067\u3059\u3002","An unanticipated problem was encountered, check back soon and try again":"\u4e88\u671f\u3057\u306a\u3044\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5c11\u3057\u7d4c\u3063\u3066\u304b\u3089\u78ba\u8a8d\u3057\u518d\u5ea6\u304a\u8a66\u3057\u4e0b\u3055\u3044\u3002","This video is restricted from playing on your current domain":"\u3053\u306e\u52d5\u753b\u306f\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u8a72\u5f53\u306e\u30c9\u30e1\u30a4\u30f3\u3067\u306f\u518d\u751f\u3067\u304d\u307e\u305b\u3093\u3002","This video is restricted at your current IP address":"\u3053\u306e\u52d5\u753b\u306f\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u3054\u4f7f\u7528\u306e\u74b0\u5883\u306e IP \u30a2\u30c9\u30ec\u30b9\u3067\u306f\u518d\u751f\u3067\u304d\u307e\u305b\u3093\u3002","This video is restricted from playing in your current geographic region":"\u3053\u306e\u52d5\u753b\u306f\u5236\u9650\u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u8a72\u5f53\u306e\u5730\u57df\u304b\u3089\u306f\u518d\u751f\u3067\u304d\u307e\u305b\u3093\u3002","If you are using an older browser please try upgrading or installing Flash.":"\u53e4\u3044\u30d6\u30e9\u30a6\u30b6\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306f\u3001\u30a2\u30c3\u30d7\u30b0\u30ec\u30fc\u30c9\u3059\u308b\u304b\u3001Flash \u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u307f\u3066\u304f\u3060\u3055\u3044\u3002",OK:"OK"});s.addLanguage("ko",{"No video has been loaded":"\ube44\ub514\uc624\uac00 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.","Could not download the video":"\ube44\ub514\uc624\ub97c \ub2e4\uc6b4\ub85c\ub4dc\ud558\uc9c0 \ubabb \ud588\uc2b5\ub2c8\ub2e4.","The video connection was lost, please confirm you are connected to the internet":"\ube44\ub514\uc624 \uc5f0\uacb0\uc774 \ub04a\uacbc\uc2b5\ub2c8\ub2e4. \uc778\ud130\ub137 \uc5f0\uacb0 \uc0c1\ud0dc\ub97c \ud655\uc778\ud558\uc2ed\uc2dc\uc624.","The video is bad or in a format that cannot be played on your browser":"\ube44\ub514\uc624 \uc0c1\ud0dc\uac00 \ubd88\ub7c9\uc774\uac70\ub098 \ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc7ac\uc0dd\ud560 \uc218 \uc5c6\ub294 \ud615\uc2dd\uc785\ub2c8\ub2e4.","This video is either unavailable or not supported in this browser":"\ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc774 \ube44\ub514\uc624\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uac70\ub098 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.","Error Code":"\uc624\ub958 \ucf54\ub4dc","Technical details":"\uae30\uc220 \uc138\ubd80\uc0ac\ud56d","The video download was cancelled":"\ube44\ub514\uc624 \ub2e4\uc6b4\ub85c\ub4dc\uac00 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4","The video you are trying to watch is encrypted and we do not know how to decrypt it":"\uc7ac\uc0dd\ud558\ub824\ub294 \ube44\ub514\uc624\uac00 \uc554\ud638\ud654 \ub418\uc5c8\uc9c0\ub9cc, \uc5b4\ub5bb\uac8c \ubcf5\ud638\ud654 \ud558\ub294\uc9c0 \uc54c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.","An unanticipated problem was encountered, check back soon and try again":"\uc608\uc0c1\uce58 \ubabb\ud55c \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ud655\uc778 \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud558\uc2ed\uc2dc\uc624.","This video is restricted from playing on your current domain":"\ud604\uc7ac \ub3c4\uba54\uc778\uc5d0\uc11c \uc7ac\uc0dd\uc774 \uc81c\ud55c\ub41c \ube44\ub514\uc624\uc785\ub2c8\ub2e4.","This video is restricted at your current IP address":"\ud604\uc7ac IP \uc8fc\uc18c\uc5d0\uc11c \uc81c\ud55c\ub41c \ube44\ub514\uc624\uc785\ub2c8\ub2e4.","This video is restricted from playing in your current geographic region":"\ud604 \uc18c\uc7ac\uc9c0\uc5d0\uc11c \uc7ac\uc0dd\uc774 \uc81c\ud55c\ub41c \ube44\ub514\uc624\uc785\ub2c8\ub2e4.","If you are using an older browser please try upgrading or installing Flash.":"\uc61b \ube0c\ub77c\uc6b0\uc800\ub97c \uc0ac\uc6a9\ud558\uace0 \uacc4\uc2dc\ub2e4\uba74 Flash\ub97c \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uc2dc\uac70\ub098 \uc124\uce58\ud558\uc2ed\uc2dc\uc624.",OK:"OK"});s.addLanguage("fr",{"No video has been loaded":"Aucune vid\xe9o n'a \xe9t\xe9 charg\xe9e.","Could not download the video":"Impossible de t\xe9l\xe9charger la vid\xe9o.","The video connection was lost, please confirm you are connected to the internet":"La connexion \xe0 la vid\xe9o a \xe9t\xe9 perdue, v\xe9rifiez que vous \xeates bien connect\xe9 \xe0 Internet.","The video is bad or in a format that cannot be played on your browser":"La vid\xe9o est de mauvaise qualit\xe9 ou dans un format incompatible avec votre navigateur.","This video is either unavailable or not supported in this browser":"Cette vid\xe9o est indisponible ou non prise en charge par ce navigateur.","Error Code":"Code d'erreur","Technical details":"D\xe9tails techniques","An unanticipated problem was encountered, check back soon and try again":"Un probl\xe8me inattendu s\u2019est produit\xa0; veuillez r\xe9essayer ult\xe9rieurement.","This video is restricted from playing on your current domain":"La lecture de cette vid\xe9o est restreinte sur votre domaine actuel.","This video is restricted at your current IP address":"Cette vid\xe9o est restreinte sur votre adresse IP actuelle.","This video is restricted from playing in your current geographic region":"La lecture de cette vid\xe9o est restreinte dans votre r\xe9gion g\xe9ographique.","If you are using an older browser please try upgrading or installing Flash.":"Si vous utilisez un navigateur plus ancien, essayez de le mettre \xe0 jour ou d\u2019installer Flash."})})();(function(){if(s.getPlugin("catalog")){return}(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("video.js"),require("global/window"),require("global/document"),require("@brightcove/loscore")):typeof i==="function"&&i.amd?i(["video.js","global/window","global/document","@brightcove/loscore"],t):(e=e||self,e.videojsBcCatalog=t(e.videojs,e.window,e.document,e.videojs.bc_))})(this,function(e,t,i,r){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e;t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t;i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i["default"]:i;r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r["default"]:r;var n="3.38.3";var a="video";var s="playlist";var o="search";var l="lazySequence";var u="related";var c=[{attr:"data-video-id",query:"videoId",config:"videoId",type:a},{attr:"data-playlist-id",query:"playlistId",config:"playlistId",type:s},{attr:"data-catalog-search",query:"catalogSearch",config:"search",type:o},{attr:"data-catalog-sequence",query:"catalogSequence",config:"sequence",type:l}];var d=function e(t,i,r){for(var n=0;n<c.length;n++){var a=c[n];var o=a[t];if(i[o]){var l={id:i[o],type:a.type};if(l.type===s){l.playlistVideoId=r}return l}}};var h=function t(i,n,a){var s=n.options_;var u=Boolean(n.el().ownerDocument.querySelector(".bc-iframe"));var h=r.qs();a=a?h.parse(a):h.search;c.concat({query:"playlistVideoId"}).forEach(function(e){var t=e.query;if(Array.isArray(a[t])){a[t]=a[t].pop()}});if(c.filter(function(e){return!!i[e.config]}).length>1||c.filter(function(e){return!!s[e.attr]}).length>1){n.error({headline:"Bad Request: Multiple catalog media queries provided. Please only provide one",type:"PLAYER_ERR_CONFLICTING_DATA",code:-3,message:"Too many catalog media parameters were provided in this player. "+"Please use only one of the following: videoId, playlistId, catalogSequence, or catalogSearch."});return}var f=u&&d("query",a,a.playlistVideoId)||d("attr",s,s["data-playlist-video-id"]||a.playlistVideoId)||d("config",i,a.playlistVideoId||i.playlistVideoId);if(!f){return}if(typeof f.id==="string"&&(f.type===o||f.type===l)){var p=f.id;try{f.id=JSON.parse(p)}catch(t){if(f.type===l){e.log.error("sequence must be valid JSON or an object",t);return}}if(!r.isObj(f.id)&&!Array.isArray(f.id)){f.id=p}}["adConfigId","deliveryConfigId"].forEach(function(e){var t=i[e];if(!r.isNonEmptyStr(t)){return}if(r.isObj(f.id)){f.id[e]=t}else if(Array.isArray(f.id)){f.id.forEach(function(i){i[e]=t})}else{f[e]=i[e]}});return f};var f={VIDEO_CLOUD_ERR_ACCOUNT_NOT_FOUND:{headline:"The Video Cloud account was not found."},VIDEO_CLOUD_ERR_RESOURCE_NOT_FOUND:{headline:"The Video Cloud resource was not found."},VIDEO_CLOUD_ERR_VIDEO_NOT_FOUND:{headline:"The Video Cloud video was not found."},VIDEO_CLOUD_ERR_NOT_PLAYABLE:{headline:"The Video Cloud video is not playable."},VIDEO_CLOUD_ERR_AD_CONFIG_ID_NOT_FOUND:{headline:"The Video Cloud SSAI ad config id was not found."},VIDEO_CLOUD_ERR_TOKEN_REQUIRED:{headline:"A JWT is required, but was not provided."},VIDEO_CLOUD_ERR_TOKEN_INVALID:{headline:"The JWT provided did not pass validation."},VIDEO_CLOUD_ERR_SERVER:{headline:"There was a server error that prevented playback."}};var p=function e(t){var i=function e(){return t.errors.extend(f)};var n=r.isFn(t.usingPlugin)?t.usingPlugin("errors"):r.isFn(t.errors)&&r.isFn(t.errors.extend);if(!n){t.on("pluginsetup:errors",i);t.on("dispose",function(){t.off("pluginsetup:errors",i)});return}i()};var m={400:{AD_CONFIG_NOT_FOUND:"VIDEO_CLOUD_ERR_AD_CONFIG_ID_NOT_FOUND"},401:{TOKEN_REQUIRED:"VIDEO_CLOUD_ERR_TOKEN_REQUIRED",TOKEN_VALIDATION:"VIDEO_CLOUD_ERR_TOKEN_INVALID"},403:{ACCESS_DENIED:{DOMAIN:"PLAYER_ERR_DOMAIN_RESTRICTED",CLIENT_IP:"PLAYER_ERR_IP_RESTRICTED",CLIENT_GEO:"PLAYER_ERR_GEO_RESTRICTED",OFFERS:"PLAYER_ERR_OFFER_RESTRICTED",TAGS:"PLAYER_ERR_TAG_RESTRICTED"},VIDEO_NOT_PLAYABLE:"VIDEO_CLOUD_ERR_NOT_PLAYABLE",PLAYLIST_NOT_PLAYABLE:"VIDEO_CLOUD_ERR_NOT_PLAYABLE"},404:{ACCOUNT_NOT_FOUND:"VIDEO_CLOUD_ERR_ACCOUNT_NOT_FOUND",RESOURCE_NOT_FOUND:"VIDEO_CLOUD_ERR_RESOURCE_NOT_FOUND",VIDEO_NOT_FOUND:"VIDEO_CLOUD_ERR_VIDEO_NOT_FOUND",PLAYLIST_NOT_FOUND:"VIDEO_CLOUD_ERR_RESOURCE_NOT_FOUND"},500:{SERVER_ERROR:"VIDEO_CLOUD_ERR_SERVER"},502:{SERVER_ERROR:"VIDEO_CLOUD_ERR_SERVER",VIDEO_RETRIEVE_FAILURE:"VIDEO_CLOUD_ERR_SERVER",VIDEO_URLS_RETRIEVE_FAILURE:"VIDEO_CLOUD_ERR_SERVER",PLAYLIST_RETRIEVE_FAILURE:"VIDEO_CLOUD_ERR_SERVER",ACCOUNT_RETRIEVE_FAILURE:"VIDEO_CLOUD_ERR_SERVER",PLAYBACK_RIGHT_RETRIEVE_FAILURE:"VIDEO_CLOUD_ERR_SERVER",LICENSE_RETRIEVE_FAILURE:"VIDEO_CLOUD_ERR_SERVER",OFFERS_RETRIEVE_FAILURE:"VIDEO_CLOUD_ERR_SERVER",RIGHTS_RETRIEVE_FAILURE:"VIDEO_CLOUD_ERR_SERVER"},503:{SERVICE_UNAVAILABLE:"VIDEO_CLOUD_ERR_SERVER"},504:{SERVER_TIMEOUT:"VIDEO_CLOUD_ERR_SERVER"}};var v=function e(t,i){var n=i.shift();if(r.isNonEmptyStr(t[n])){return t[n]}if(!n||!t[n]){return"unknown"}return e(t[n],i)};var g=function e(t,i){i=Array.isArray(i)?i[0]:i||{};return{code:v(m,[t,i.error_code,i.error_subcode])}};var y=function t(i,r,n){if(n.embedHasPoster){i.poster=r.options_.poster}if(n.embedHasSources){i.sources=r.options_.sources}if(n.embedHasTracks){i.textTracks=r.options_.tracks}if(i.textTracks&&i.textTracks.length>0&&e.browser.IS_ANY_SAFARI){r.$(".vjs-tech").setAttribute("crossorigin","anonymous")}return i};var _=function e(t,i){return function(e,r){if(e){e.data=r;t.catalog.error=e;t.error(g(e.status,r));return t.trigger("bc-catalog-error")}t.ready(function(){return t.catalog.load(i(r))})}};var b=function t(i,r,n){if(i===a){return _(r,function(e){return y(e,r,n)})}return _(r,function(t){var a=y({},r,n);if(Array.isArray(t.videos)){var o=t.videos[0]||{};t.videos[0]=e.mergeOptions(o,a,{rawItem:o})}else{t.videos=[a]}if(n.playlistVideoId&&i===s){for(var l=0;l<t.length;l++){if(t[l].id===n.playlistVideoId||"ref:"+t[l].referenceId===n.playlistVideoId){t.startingIndex=l;break}}}return t})};var M=function e(){return Number.MAX_SAFE_INTEGER||Math.pow(2,53)-2};var T=function e(t,i){var r=t.cuePoints;var n=r[i];var a;for(i++;i<r.length;i++){if(r[i].time>n.time){a=r[i];break}}var s=isFinite(t.duration)?t.duration:M();n.startTime=n.time;if(a&&a.time<s){n.endTime=a.time}else{n.endTime=s}return n};var A=function e(t){var i=t.remoteTextTracks();if(i){var r=i.length;while(r--){t.removeRemoteTextTrack(i[r])}}var n=t.textTracks();if(n){var a=n.length;while(a--){var s=n[a];if(s.kind==="metadata"&&s.cues){var o=s.cues.length;while(o--){s.removeCue(s.cues[o])}}s.mode="disabled"}}};var w=function e(i,r){A(i);if(!r.cuePoints){return}var n=i.mediaCuePointsTrack();var a=t.VTTCue||t.vttjs&&t.vttjs.VTTCue||t.TextTrackCue;for(var s=0;s<r.cuePoints.length;s++){var o=r.cuePoints[s];var l=new a(o.startTime,o.endTime,o.type);l.originalCuePoint=o;n.addCue(l)}n.mode="hidden"};var E=function e(t,i,r){var n=0;for(;n<t.length;n++){if(i(t[n])){return t[n]}}return r};function x(e){var t=x.windowLocationProtocol();var i=function e(i){return i.src&&i.src.indexOf(t)===0};if(e&&e.length&&e.length>0){return E(e,i,e[0]).src}}x.windowLocationProtocol=function(){return t.location.protocol};var S=function e(t,i){return"https://"+t+".api."+(i?i+".":"")+"brightcove.com/playback/v1/"};var D={production:{papi:S("edge"),epa:S("edge-auth")},qa:{papi:S("edge","qa"),epa:S("edge-auth","qa")},staging:{papi:S("edge","staging"),epa:S("edge-auth","staging")}};var I=function e(i){return t.encodeURIComponent(i)};var j=function e(t){return typeof t==="string"&&/^BCpk/.test(t)};var L=function e(t){var i={ad_config_id:"adConfigId",config_id:"deliveryConfigId"};var n=["ad_config_id","config_id","tveToken"];if(t.type!==a){n.push("limit");n.push("offset")}if(t.type===o){n.push("q");n.push("sort")}var s={};n.forEach(function(e){var r=i[e]||e;if(t[r]){s[e]=t[r]}});var l=r.qs().stringify(s);return l?"?"+l:""};var N=function e(t,i){var n=i.env,a=i.type;if(!n){n="production"}var l;if(r.isNonEmptyStr(i.baseUrl)){l=i.baseUrl}else if(j(i.policyKey)){l=D[n].papi}else{l=D[n].epa}if(l.slice(-1)==="/"){l=l.slice(0,-1)}var c;c=l+"/accounts/"+I(t)+"/"+(a===s?"playlists":"videos");if(a!==o){c+="/"+I(i.id)}if(a===u){c+="/related"}c+=L(i);return c};var C=function t(i,n,l,c){if(c===void 0){c=function e(){}}var d=l.deliveryConfigId,h=l.adConfigId,f=l.id,p=l.bcovAuthToken,m=l.policyKey,v=l.q,g=l.type;if(!n||!g){return c(new Error("accountId and type are required"))}if(g===o&&!v){return c(new Error("q is required when performing a search"))}else if(g!==o&&!f){return c(new Error("id is required when getting a video or playlist"))}var y=N(n,l);var _=function e(t,l){i.trigger(r.assign({type:"catalog_"+t,accountId:n,deliveryConfigId:d,adConfigId:h,playlistId:g===s?f:undefined,related:g===u?f:undefined,search:g===o?v:undefined,url:y,videoId:g===a?f:undefined},l))};var b=function e(t,i,r){return _("request_error",{error:t,response:i,body:r})};_("request");var M={};if(j(m)){M.Accept="application/json;pk="+m}else if(p){M.Authorization="Bearer "+p}var T=e.xhr({headers:M,json:true,url:y},function(e,t,i){if(e){b(e,T,i);return c(e,i)}if(T.status>=400){b(new Error("Request Failed"),T,i);return c(T,i)}_("response",{response:T});c(null,i)});var A=T.onabort.bind(T);T.onabort=function(){var e=new Error("Request Aborted");A();b(e,T,null);return c(e,null)};return T};var O=function e(){var i=t.GestureEvent;return!!(i&&t.WebKitMediaKeys&&t.WebKitMediaKeys.isTypeSupported("com.apple.fps.1_0","video/mp4"))};var k=function i(){return t.navigator.requestMediaKeySystemAccess&&!e.browser.IS_IOS&&(e.browser.IS_FIREFOX||e.browser.IS_CHROME)};var P=function e(t){var i=t.tech(true).vhs;return i&&i.canChangeType&&i.canChangeType()};var R=function e(){return t.MediaSource&&t.MediaSource.isTypeSupported&&t.MediaSource.isTypeSupported('video/mp4; codecs="hvc1.1.6.L60.90"')};var z=function e(t){return t==="application/vnd.apple.mpegurl"||t==="application/x-mpegURL"};var U=function t(i){var r=e.parseUrl(i);return r.hostname.indexOf("boltdns.net")!==-1&&r.pathname.indexOf("/aes128/")!==-1};var B=function e(t){return t.isSecureContext||!/^http:/.test(t.location.href)};var F={isSafariWithFairplaySupport:O,isBrowserWithWidevineSupport:k,isHlsType:z,isCodecSwitchingSupported:P,isHEVCSupported:R,isBoltEncryptedHls:U,preferHttps:B};var V="https://fps.brightcove.com/v1/application_certificate";var G="com.apple.fps.1_0";var H=function e(i){return t.btoa(String.fromCharCode.apply(null,i))};var Q=function e(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};var Y=function e(t){var i=t.source,r=t.publisherId,n=t.applicationId;var a=i.key_systems[G].certificate_url;if(a){return a}if(n&&r){return V+"/"+r+"/"+n}return null};var W=function t(i,r){var n=Y({source:i.source,publisherId:i.publisherId,applicationId:i.applicationId});e.xhr({uri:n,responseType:"arraybuffer"},function(e,t,i){if(e){r(e);return}r(null,new Uint8Array(i))})};var q=function e(t,i){return Q(i).split("//")[1]};var X=function t(i){return function(t,r,n,a){var s={"Content-Type":"application/json",Accept:"application/octet-stream"};if(t.emeHeaders&&t.emeHeaders["BCOV-Auth"]){s["BCOV-Auth"]=t.emeHeaders["BCOV-Auth"]}e.xhr({uri:i,method:"POST",responseType:"arraybuffer",json:{publisher_id:t.publisherId,application_id:t.applicationId,key_id:r.split("/")[3],server_playback_context:H(n)},headers:s},function(e,t,i){if(e){a(e);return}if(t.statusCode>=400&&t.statusCode<=599){a({});return}a(null,i)})}};var Z={getCertificateUri:Y,getCertificate:W,getContentId:q,createGetLicenseFunc:X,base64EncodeUint8Array:H,FAIRPLAY_KEY_SYSTEM:G};var K=function e(t){if(t===void 0){t=[]}return t.filter(function(e){return e.keySystems&&e.keySystems[Z.FAIRPLAY_KEY_SYSTEM]})};var J=function e(t,i,r){var n=K(i);if(!n.length||!t.eme){r();return}var a=t.eme.options||{};var s=0;var o=[];var l={};var u=function e(t){var i=n[t];var u=Z.getCertificateUri({source:i,publisherId:a.publisherId,applicationId:a.applicationId});if(!u){return"continue"}if(l[u]){l[u].push(i);return"continue"}s++;l[u]=[i];i.keySystems[Z.FAIRPLAY_KEY_SYSTEM].getCertificate({source:i,publisherId:a.publisherId,applicationId:a.applicationId},function(e,t){if(e){o.push({message:"Unable to resolve FairPlay certificate",error:e})}else{var i=l[u];for(var n=0;n<i.length;n++){var a=i[n];a.keySystems[Z.FAIRPLAY_KEY_SYSTEM].getCertificate=function(e,i){i(null,t)}}}s--;if(!s){if(o.length){r(o);return}r()}})};for(var c=0;c<n.length;c++){var d=u(c);if(d==="continue")continue}};var $=function e(t){if(!F.isHlsType(t.type)||!t.key_systems||!t.key_systems[Z.FAIRPLAY_KEY_SYSTEM]){return null}var i=t.key_systems[Z.FAIRPLAY_KEY_SYSTEM];var r=i.key_request_url;var n={};n[Z.FAIRPLAY_KEY_SYSTEM]={getCertificate:Z.getCertificate,getLicense:Z.createGetLicenseFunc(r),getContentId:Z.getContentId};return n};var ee=function e(t){return $(t)};var te={getKeySystemOptions:ee,getFairPlaySources:K,resolveFairPlayCertificates:J};var ie=function e(t,i){i=i||t&&t.mediainfo||{};return t&&t.hasPlugin&&t.hasPlugin("vr")&&i&&i.projection};var re=50*1024*1024;var ne=3*1024*1024;var ae=.5*1024*1024;var se={http:{nativeHls:{http:{"application/vnd.apple.mpegurl":1,"video/mp4":5,"application/dash+xml":3},https:{"application/vnd.apple.mpegurl":2,"video/mp4":6,"application/dash+xml":4}},noNativeHls:{http:{"application/vnd.apple.mpegurl":1,"video/mp4":5,"application/dash+xml":3},https:{"application/vnd.apple.mpegurl":2,"video/mp4":6,"application/dash+xml":4}},preferMp4:{http:{"application/vnd.apple.mpegurl":3,"video/mp4":1,"application/dash+xml":5},https:{"application/vnd.apple.mpegurl":4,"video/mp4":2,"application/dash+xml":6}}},https:{nativeHls:{http:{"application/vnd.apple.mpegurl":2,"video/mp4":6,"application/dash+xml":5},https:{"application/vnd.apple.mpegurl":1,"video/mp4":4,"application/dash+xml":3}},noNativeHls:{http:{"application/vnd.apple.mpegurl":5,"video/mp4":4,"application/dash+xml":6},https:{"application/vnd.apple.mpegurl":1,"video/mp4":3,"application/dash+xml":2}},preferMp4:{http:{"application/vnd.apple.mpegurl":5,"video/mp4":4,"application/dash+xml":6},https:{"application/vnd.apple.mpegurl":2,"video/mp4":1,"application/dash+xml":3}}},codecs:{switching:{hevc:{combined:1,hevc:2,avc:3},nohevc:{combined:5,hevc:6,avc:4}},noswitching:{hevc:{combined:3,hevc:5,avc:2},nohevc:{combined:4,hevc:6,avc:1}}}};var oe={1:3,2:3.2,3:4.2,4:5,5:6,6:7,7:8};var le=function e(t,i){return i.type==="application/vnd.apple.mpegurl"&&i.key_systems&&F.isSafariWithFairplaySupport()&&t.eme&&t.eme.options};var ue=function e(t,i){return i.type==="application/vnd.apple.mpegurl"&&i.key_systems&&F.isBrowserWithWidevineSupport()&&t.eme&&t.eme.options};var ce=function t(i,r,n,a){if(!r.src){return 9999}if(r.type==="application/vnd.apple.mpegurl"&&r.key_systems&&(r.key_systems["com.apple.fps.1_0"]&&!le(n,r)||r.key_systems["com.widevine.alpha"]&&!ue(n,r))){return 9999}if(r.profiles&&r.profiles.match(/hbbtv/i)){return 9999}if(e.browser.IS_IOS&&r.type==="application/vnd.apple.mpegurl"&&oe[r.ext_x_version]>parseFloat(e.browser.IOS_VERSION)){return 9999}i=i[/^[^:]*/.exec(r.src)];if(!i){return 9999}var s=i[r.type]||9999;var o=r.codecs&&r.codecs.indexOf("avc1")!==-1;var l=r.codecs&&r.codecs.indexOf("hvc1")!==-1;var u=o&&l;var c;if(u){c=a.combined}else if(l){c=a.hevc}else{c=a.avc}return s+c};var de=function t(i,r,n,a,s){var o=he.preferHttps()?se.https:se.http;var l;if(ie(i,r)){l=re}else if(e.browser.IS_IOS||e.browser.IS_ANDROID){l=ae}else{l=ne}if(he.preferMp4(i,r)){o=o.preferMp4}else if(he.supportsNativeHls()){o=o.nativeHls}else{o=o.noNativeHls}var u=ce(o,a,i,n)-ce(o,s,i,n);if(u){return u}if(a.type==="video/mp4"&&s.type==="video/mp4"){if(a.avg_bitrate&&s.avg_bitrate){return Math.abs(a.avg_bitrate-l)-Math.abs(s.avg_bitrate-l)}if(a.avg_bitrate||s.avg_bitrate){u=a.avg_bitrate?-1:1}}if(a.type==="application/vnd.apple.mpegurl"&&s.type==="application/vnd.apple.mpegurl"){if(a.ext_x_version&&s.ext_x_version){return s.ext_x_version-a.ext_x_version}if(a.ext_x_version||s.ext_x_version){u=a.ext_x_version?-1:1}}return u};function he(t,i,n){if(n===void 0){n={}}var a=i.sources||[];var s=[];var o=n,l=o.bcovAuthToken;if(l&&!r.isNonEmptyStr(l)){e.log.error("The bcovAuthToken catalog property must be a string");l=null}for(var u=0;u<a.length;u++){var c=a[u];if(l&&c.key_systems){c.emeHeaders={"BCOV-Auth":l}}if(c.src&&c.container==="MP4"){c.type="video/mp4"}else if(c.src&&(c.container==="M2TS"||F.isHlsType(c.type))){c.type="application/vnd.apple.mpegurl";if(le(t,c)){c.keySystems=te.getKeySystemOptions(c)}if(F.isBoltEncryptedHls(c.src)&&l){if(c.vmap&&t.hasPlugin("ssai")){c.bcovAuthToken=l}else{var d=e.parseUrl(c.src);var h="bcov_auth="+l;if(!d.search){h="?"+h}else if(!(d.search[d.search.length-1]==="&")){h="&"+h}c.src+=h}}}s.push(c)}var f=he.supportsSwitchingCodecs(t)?"switching":"noswitching";var p=he.supportsHEVC()?"hevc":"nohevc";var m=se.codecs[f][p];return s.sort(de.bind(null,t,i,m))}he.supportsNativeHls=function(){var t=i.createElement("video");var r=e.options.hls&&e.options.hls.overrideNative;if(t&&t.canPlayType){return!r&&/probably|maybe/i.test(t.canPlayType("application/vnd.apple.mpegurl"))}return false};he.preferHttps=function(){return F.preferHttps(t)};he.supportsHEVC=function(){return F.isHEVCSupported()};he.supportsSwitchingCodecs=function(e){return F.isCodecSwitchingSupported(e)};he.preferMp4=function(t,i){return e.browser.IS_ANDROID&&e.browser.ANDROID_VERSION<5||ie(t,i)};var fe=function(){function e(){this.defaults_={}}var t=e.prototype;t.normalize=function e(t,i,n){var a=r.assign({},this.defaults_);if(t&&!r.isObj(t)){a.id=t}else{r.assign(a,t);if(r.isObj(t.id)){r.assign(a,t.id);if(!t.id.hasOwnProperty("id")){delete a.id}}}if(typeof i==="string"){a.type=i}if(a.type===o){if(!a.q){a.q=a.id}delete a.id}if(typeof t.deliveryConfigId==="string"){a.deliveryConfigId=t.deliveryConfigId}if(typeof n==="string"){a.adConfigId=n}if((a.type===s||a.type===o)&&a.limit===undefined){a.limit="100"}return a};t.setDefaults=function e(t){if(t===null){this.defaults_={}}else{r.assign(this.defaults_,t)}};t.getDefault=function e(t){return r.isObj(this.defaults_)&&this.defaults_[t]||undefined};t.getDefaults=function e(){return r.isObj(this.defaults_)&&r.assign({},this.defaults_)||{}};return e}();var pe=/([A-Za-z0-9])_([A-Za-z0-9])/g;var me=function e(t){return t.replace(pe,function(e,t,i){return t+i.toUpperCase()})};var ve=function t(i){var r=e.mergeOptions(i);Object.keys(r).filter(function(e){return e.match(pe)}).forEach(function(e){r[me(e)]=r[e]});return r};var ge=function e(t,r){if(!r){return}t.mediainfo=ve(r);var n=Boolean(t.el().ownerDocument.querySelector(".bc-iframe"));var a=t.mediainfo.name;if(n&&a){i.title=a}};var ye=function e(t,i){if(!i){return}t.playlistinfo=ve(i);delete t.playlistinfo.videos};var _e=function e(t,i){return(t.type==="application/vnd.apple.mpegurl"||t.type==="application/dash+xml")&&i.toLowerCase()==="html5"};function be(i){var n=this;var u=function e(t){if(t&&t.accountId){n.trigger({type:"usage",name:"catalog-get-account-id"});return t.accountId}if(typeof n.getAccountId==="function"){return n.getAccountId()}return i.accountId||n.options_["data-account"]};var c=new fe;var d={};var f;var m={policyKey:n.options_["data-policy-key"],bcovAuthToken:n.options_["data-bcov-auth-token"]};var v=Object.keys(m).reduce(function(e,t){if(m[t]){e[t]=m[t]}return e},{});["baseUrl","bcovAuthToken","env","policyKey"].forEach(function(e){if(i.hasOwnProperty(e)){v[e]=i[e]}});c.setDefaults(v);p(n);n.on("loadstart",function(){if(!r.isFn(n.playlist)||!n.playlist()||!n.playlist().length){return}ge(n,n.playlist()[n.playlist.indexOf(n.currentSrc())])});n.on("dispose",function(){return A(n)});var y=function t(i,r){var a=te.getFairPlaySources(i);if(!a.length){r();return}te.resolveFairPlayCertificates(n,a,function(t){if(t){e.log("Unable to resolve FairPlay certificates",t)}r()})};var _=function t(i){if(!n.hasPlugin||!n.hasPlugin("ssai")||!i){return i}return i.map(function(t){if(t.vmap){t.type=e.getPlugin("ssai").MIME_TYPE;t.originalHlsSource=t.src;t.src=t.vmap}return t})};var M=function t(i){if(!i.variants){return i}var r=i.name,n=i.description,a=i.longDescription,s=i.customFields;var o=null;var l={name:r,description:n,longDescription:a,language:o};l.customFields=e.mergeOptions(s);var u=i.variants.map(ve);i.variants=[].concat(u,[l]);return i};var E=function e(t){if(!t){return}if(Array.isArray(t)){f=t.map(function(e){return M(ve(e))})}else{f=M(ve(t))}};var S=function t(i,r){if(!i||!i.variants){return e.mergeOptions(i)}var n;for(var a=0;a<i.variants.length;a++){if(i.variants[a].language===null){n=i.variants[a]}if(i.variants[a].language===r){n=i.variants[a];break}}return e.mergeOptions(i,n)};var D=function e(i){var r=function e(){var r=false;ge(n,i);E(i);if(ie(n)){var a=n.el().querySelector("video");a.setAttribute("crossorigin","anonymous")}n.el().setAttribute("data-video-id",i.id);if(t.bc&&!t.bc.disposedAfterPreroll_){n.poster(i.poster)}if(i.sources){for(var s=0;s<i.sources.length;s++){if(i.sources[s].vmap!==undefined){r=true;break}}}if(r&&n.onceux!==undefined){n.onceux.loadSourcesFromCatalog(i.sources)}else{if(r){i.sources=_(i.sources)}n.src(i.sources)}w(n,i);if(i.textTracks){var o=new RegExp("^"+t.location.protocol);var l=new RegExp("^https:");var u=null;var c=null;for(var d=0;d<i.textTracks.length;d++){var h=i.textTracks[d];if(h.label==="thumbnails"){if(n.usingPlugin("thumbnails")&&h.width<=480){if(o.test(h.src)){u=h}else if(l.test(h.src)){c=h}}}else{n.addRemoteTextTrack(h)}}var f=u||c;if(f){n.addRemoteTextTrack({src:f.src,label:"thumbnails",kind:"metadata",mode:"hidden"},false)}}};y(i.sources,r)};var I=function e(t){var i=function e(){n.on("beforeplaylistitem",function(e,t){return w(n,t)});for(var i=0;i<t.length;i++){t[i].sources=_(t[i].sources)}var r=t.startingIndex||0;E(t);ge(n,t[r]);ye(n,n.catalog.data);if(ie(n)){var a=n.el().querySelector("video");a.setAttribute("crossorigin","anonymous")}n.playlist(t,r)};var r=t.filter(function(e){return e.sources}).reduce(function(e,t){return e.concat(t.sources)},[]);y(r,i)};var j=function e(t,r){var a;var s=ve(t);if(s.sources){s.rawSources_=s.sources;s.sources=(i.getSources||he)(n,s,r);a=n.selectSource(s.sources)}if(s.posterSources){s.poster=x(s.posterSources)}if(s.thumbnailSources){s.thumbnail=x(s.thumbnailSources)}if(s.textTracks){var o=a&&_e(a.source,a.tech);s.textTracks=s.textTracks.filter(function(e){return!(o&&e.in_band_metadata_track_dispatch_type!==undefined)}).map(function(e){if(e.sources){e.src=x(e.sources)}return e})}if(s.duration){s.duration=s.duration*.001}if(s.cuePoints){for(var l=0;l<s.cuePoints.length;l++){T(s,l)}}return s};n.catalog={transformCatalogError:g,transformVideoResponse:j,mediaCuePointsTrack:function t(){if(!n.catalog.mediaCuePointsTrack.hasWarned_){e.log.warn("player.catalog.mediaCuePointsTrack() is deprecated, please use player.mediaCuePointsTrack() instead!");n.catalog.mediaCuePointsTrack.hasWarned_=true}return n.mediaCuePointsTrack()},get:function t(i,s){i=c.normalize(i);if(n.catalog.tveToken){i.tveToken=n.catalog.tveToken}d=i;n.catalog.loading++;var l;var h=new r.Promise(function(t,r){l=C(n,u(i),i,function(s,l){n.catalog.loading--;if(i.type===o&&l&&(!l.videos||!l.videos.length)){s=new Error("No videos returned from search")}if(s){s.data=l;n.catalog.error=s;return r(s)}if(!l){return t(null)}n.catalog.data=e.mergeOptions({},l);if(i.adConfigId){n.catalog.data.adConfigId=i.adConfigId}var u={};if(i.bcovAuthToken){u.bcovAuthToken=i.bcovAuthToken}if(i.type===a){n.catalog.sources=l.sources;n.catalog.poster=l.poster;return t(j(l,u))}var c=l.videos.filter(function(e){return!e.hasOwnProperty("errors")}).map(function(e){return j(e,u)});if(c.length){return t(c)}return r(new Error("No videos returned from playlist"))})});if(!r.isFn(s)){return h}h.then(function(e){s(null,e)}).catch(function(e){s(e,e.data)});return l},getVideo:function e(t,i,r){if(i===void 0){i=function e(){}}return this.get(c.normalize(t,a,r),i)},getSequence:function t(i,r,a){var s=this;if(r===void 0){r=function e(){}}if(!Array.isArray(i)){i=[i]}i=i.filter(function(t){if(!/^(search|video|playlist)$/i.test(t.type)){e.log.error("invalid sequence type, please use search, video, or playlist. for:",t);return false}return true});if(!i.length){r(new Error("No valid sequences"),null);return}var o=i.length;var l=new Array(i.length);return i.map(function(t,u){return s.get(c.normalize(t,t.type,a),function(a,s){o--;if(a){e.log.error("failed to request sequence",t);e.log.error("with error",a)}else if(s){if(!Array.isArray(s)){s=[s]}l[u]=s}if(o===0){n.catalog.data=l;var c=l.reduce(function(e,t){return t&&e.concat(t)},[]);if(!c.length){r(new Error("No data was loaded for the sequence "+JSON.stringify(i),null))}else{r(null,c)}}},a)})},getLazySequence:function e(t,i,r){var a=this;if(i===void 0){i=function e(){}}if(!Array.isArray(t)){t=[t]}var s=function e(i){return a.getSequence(t.shift(),function(r,n){if((r||!n)&&t&&t.length){return e(i)}i(r,n)},r)};var o=function e(){if(!t.length){n.off("playlistitem",e);return}var i=n.playlist;var r=i.currentIndex&&i.currentIndex()||i.currentItem&&i.currentItem()||0;var a=i.lastIndex&&i.lastIndex()||i().length-1||0;if(r!==a){return}s(function(e,t){if(e||!t){return}n.playlist(n.playlist().concat(t),r)})};n.on("playlistitem",o);return s(i)},getSearch:function e(t,i,r){if(i===void 0){i=function e(){}}return this.get(c.normalize(t,o,r),i)},getPlaylist:function e(t,i,r){if(i===void 0){i=function e(){}}return this.get(c.normalize(t,s,r),i)},load:function e(t){if(Array.isArray(t)){I(t)}else{D(t)}},autoFindAndLoadMedia:function e(t){var i=h(t,n);if(!i){return}t.playlistVideoId=i.playlistVideoId;var r=b(i.type,n,t);if(i.type===l){this.getLazySequence(i.id,r)}else{this.get(c.normalize(i),r)}return i},setBcovAuthToken:function t(i){if(i!==null&&!r.isNonEmptyStr(i)){e.log.warn("Authorization Token must be a valid string or null");return}c.setDefaults({bcovAuthToken:i})},setPolicyKey:function t(i){if(i!==null&&!r.isNonEmptyStr(i)){e.log.warn("Policy key must be a valid string or null");return}c.setDefaults({policyKey:i})},getCatalogParamDefault_:function e(t){if(t==="accountId"){return u()}return c.getDefault(t)},getLastParams:function t(){return e.mergeOptions(d)},getLastData:function t(){return e.mergeOptions(n.catalog.data)},getMetadata:function e(t){var i=t?t:{},r=i.type,a=i.lang;var o=n.usingPlugin("playlist")?n.playlist():[];if(r===s&&o.length){return f.map(function(e){return S(e,a)})}if(o.length){var l=n.playlist.indexOf(n.currentSrc());return S(f[l],a)}return S(f,a)},loading:0}}e.registerPlugin("catalog",be);be.VERSION=n;return be})})();(function(){if(s.getPlugin("playlist")){return}(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t(require("video.js")):typeof i==="function"&&i.amd?i(["video.js"],t):(e=e||self,e.videojsPlaylist=t(e.videojs))})(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var t=function e(t){return typeof t==="number"&&!isNaN(t)&&t>=0&&t<Infinity};var i=function e(t){var i=t.playlist.autoadvance_;if(i.timeout){t.clearTimeout(i.timeout)}if(i.trigger){t.off("ended",i.trigger)}i.timeout=null;i.trigger=null};var r=function e(r,n){i(r);if(!t(n)){r.playlist.autoadvance_.delay=null;return}r.playlist.autoadvance_.delay=n;r.playlist.autoadvance_.trigger=function(){var t=function t(){return e(r,n)};r.one("play",t);r.playlist.autoadvance_.timeout=r.setTimeout(function(){i(r);r.off("play",t);r.playlist.next()},n*1e3)};r.one("ended",r.playlist.autoadvance_.trigger)};var n=function e(t){var i=t.remoteTextTracks();var r=i&&i.length||0;while(r--){t.removeRemoteTextTrack(i[r])}};var a=function e(t,i){var a=!t.paused()||t.ended();t.trigger("beforeplaylistitem",i.originalValue||i);if(i.playlistItemId_){t.playlist.currentPlaylistItemId_=i.playlistItemId_}t.poster(i.poster||"");t.src(i.sources);n(t);t.ready(function(){(i.textTracks||[]).forEach(t.addRemoteTextTrack.bind(t));t.trigger("playlistitem",i.originalValue||i);if(a){var e=t.play();if(typeof e!=="undefined"&&typeof e.then==="function"){e.then(null,function(e){})}}r(t,t.playlist.autoadvance_.delay)});return t};var s=function e(t){return!!t&&typeof t==="object"};var o=function e(t){var i=[];var r;t.forEach(function(e){if(!s(e)){r=Object(e);r.originalValue=e}else{r=e}i.push(r)});return i};var l=function e(t){var i=1;t.forEach(function(e){e.playlistItemId_=i++})};var u=function e(t,i){for(var r=0;r<t.length;r++){if(t[r].playlistItemId_===i){return r}}return-1};var c=function e(t,i){var r=t;var n=i;if(typeof t==="object"){r=t.src}if(typeof i==="object"){n=i.src}if(/^\/\//.test(r)){n=n.slice(n.indexOf("//"))}if(/^\/\//.test(n)){r=r.slice(r.indexOf("//"))}return r===n};var d=function e(t,i){for(var r=0;r<t.length;r++){var n=t[r].sources;if(Array.isArray(n)){for(var a=0;a<n.length;a++){var s=n[a];if(s&&c(s,i)){return r}}}}return-1};var h=function e(t){var i=-1;var r=t.length-1;while(++i<t.length){var n=i+Math.floor(Math.random()*(r-i+1));var a=t[n];t[n]=t[i];t[i]=a}return t};function f(t,n,c){if(c===void 0){c=0}var f=null;var p=false;var m=t.playlist=function(e,i){if(i===void 0){i=0}if(p){throw new Error("do not call playlist() during a playlist change")}if(Array.isArray(e)){var r=Array.isArray(f)?f.slice():null;var n=e.slice();f=n.slice();if(f.filter(function(e){return s(e)}).length!==f.length){f=o(f)}l(f);p=true;t.trigger({type:"duringplaylistchange",nextIndex:i,nextPlaylist:n,previousIndex:m.currentIndex_,previousPlaylist:r||[]});p=false;if(i!==-1){m.currentItem(i)}if(r){t.setTimeout(function(){t.trigger("playlistchange")},0)}}return f.map(function(e){return e.originalValue||e}).slice()};t.on("loadstart",function(){if(m.currentItem()===-1){i(t)}});m.currentIndex_=-1;m.player_=t;m.autoadvance_={};m.repeat_=false;m.currentPlaylistItemId_=null;m.currentItem=function(e){if(p){return m.currentIndex_}if(typeof e==="number"&&m.currentIndex_!==e&&e>=0&&e<f.length){m.currentIndex_=e;a(m.player_,f[m.currentIndex_]);return m.currentIndex_}var t=m.player_.currentSrc()||"";if(m.currentPlaylistItemId_){var i=u(f,m.currentPlaylistItemId_);var r=f[i];if(r&&Array.isArray(r.sources)&&d([r],t)>-1){m.currentIndex_=i;return m.currentIndex_}m.currentPlaylistItemId_=null}m.currentIndex_=m.indexOf(t);return m.currentIndex_};m.contains=function(e){return m.indexOf(e)!==-1};m.indexOf=function(e){if(typeof e==="string"){return d(f,e)}var t=Array.isArray(e)?e:e.sources;for(var i=0;i<t.length;i++){var r=t[i];if(typeof r==="string"){return d(f,r)}else if(r.src){return d(f,r.src)}}return-1};m.currentIndex=function(){return m.currentItem()};m.lastIndex=function(){return f.length-1};m.nextIndex=function(){var e=m.currentItem();if(e===-1){return-1}var t=m.lastIndex();if(m.repeat_&&e===t){return 0}return Math.min(e+1,t)};m.previousIndex=function(){var e=m.currentItem();if(e===-1){return-1}if(m.repeat_&&e===0){return m.lastIndex()}return Math.max(e-1,0)};m.first=function(){if(p){return}var e=m.currentItem(0);if(f.length){return f[e].originalValue||f[e]}m.currentIndex_=-1};m.last=function(){if(p){return}var e=m.currentItem(m.lastIndex());if(f.length){return f[e].originalValue||f[e]}m.currentIndex_=-1};m.next=function(){if(p){return}var e=m.nextIndex();if(e!==m.currentIndex_){var t=m.currentItem(e);return f[t].originalValue||f[t]}};m.previous=function(){if(p){return}var e=m.previousIndex();if(e!==m.currentIndex_){var t=m.currentItem(e);return f[t].originalValue||f[t]}};m.autoadvance=function(e){r(m.player_,e)};m.repeat=function(t){if(t===undefined){return m.repeat_}if(typeof t!=="boolean"){e.log.error("videojs-playlist: Invalid value for repeat",t);return}m.repeat_=!!t;return m.repeat_};m.sort=function(e){if(!f.length){return}f.sort(e);if(p){return}t.trigger("playlistsorted")};m.reverse=function(){if(!f.length){return}f.reverse();if(p){return}t.trigger("playlistsorted")};m.shuffle=function(e){var i=e===void 0?{}:e,r=i.rest;var n=0;var a=f;if(r){n=m.currentIndex_+1;a=f.slice(n)}if(a.length<=1){return}h(a);if(r){var s;(s=f).splice.apply(s,[n,a.length].concat(a))}if(p){return}t.trigger("playlistsorted")};if(Array.isArray(n)){m(n.slice(),c)}else{f=[]}return m}var p="4.3.1";var m=e.registerPlugin||e.plugin;var v=function e(t,i){f(this,t,i)};m("playlist",v);v.VERSION=p;return v})})();(function(){if(s.getPlugin("qualityMenu")){return}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/document")):"function"==typeof i&&i.amd?i(["video.js","global/document"],t):(e=e||self).videojsQualityMenu=t(e.videojs,e.document)}(this,function(e,t){"use strict";function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var r=function i(r){var n=this;if(e.browser.IS_IE8)for(var a in n=t.createElement("custom"),i.prototype)"constructor"!==a&&(n[a]=i.prototype[a]);return n.id=r.id,n.label=n.id,n.width=r.width,n.height=r.height,n.bitrate=r.bandwidth,n.enabled_=r.enabled,Object.defineProperty(n,"enabled",{get:function(){return n.enabled_()},set:function(e){n.enabled_(e)}}),n},n=function(n){var a,s;function o(){var r,a=i(i(r=n.call(this)||this));if(e.browser.IS_IE8)for(var s in a=t.createElement("custom"),o.prototype)"constructor"!==s&&(a[s]=o.prototype[s]);return a.levels_=[],a.selectedIndex_=-1,Object.defineProperty(a,"selectedIndex",{get:function(){return a.selectedIndex_}}),Object.defineProperty(a,"length",{get:function(){return a.levels_.length}}),a||i(r)}s=n,(a=o).prototype=Object.create(s.prototype),a.prototype.constructor=a,a.__proto__=s;var l=o.prototype;return l.addQualityLevel=function(e){var t=this.getQualityLevelById(e.id);if(t)return t;var i=this.levels_.length;return t=new r(e),""+i in this||Object.defineProperty(this,i,{get:function(){return this.levels_[i]}}),this.levels_.push(t),this.trigger({qualityLevel:t,type:"addqualitylevel"}),t},l.removeQualityLevel=function(e){for(var t=null,i=0,r=this.length;i<r;i++)if(this[i]===e){t=this.levels_.splice(i,1)[0],this.selectedIndex_===i?this.selectedIndex_=-1:this.selectedIndex_>i&&this.selectedIndex_--;break}return t&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),t},l.getQualityLevelById=function(e){for(var t=0,i=this.length;t<i;t++){var r=this[t];if(r.id===e)return r}return null},l.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},o}(e.EventTarget);for(var a in n.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},n.prototype.allowedEvents_)n.prototype["on"+a]=null;var s=e.registerPlugin||e.plugin,o=function(t){return i=this,e.mergeOptions({},t),r=i.qualityLevels,a=new n,i.on("dispose",function e(){a.dispose(),i.qualityLevels=r,i.off("dispose",e)}),i.qualityLevels=function(){return a},i.qualityLevels.VERSION="2.0.9",a;var i,r,a};s("qualityLevels",o),o.VERSION="2.0.9";var l=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var u=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},c=e.getComponent("MenuItem"),d=e.dom||e,h=function(e){function t(t,i){var r;void 0===i&&(i={});var n=i.selected;i.selected=i.active,r=e.call(this,t,i)||this;var a=t.qualityLevels();return r.levels_=i.levels,r.selected_=n,r.handleQualityChange=r.handleQualityChange.bind(l(r)),r.controlText(i.controlText),r.on(a,"change",r.handleQualityChange),r.on("dispose",function(){r.off(a,"change",r.handleQualityChange)}),r}u(t,e);var i=t.prototype;return i.createEl=function(t,i,r){var n=e.prototype.createEl.call(this,t,i,r),a=d.createEl("span",{className:"vjs-quality-menu-item-sub-label",innerHTML:this.localize(this.options_.subLabel||"")});return this.subLabel_=a,n&&n.appendChild(a),n},i.handleClick=function(){this.updateSiblings_();for(var e=this.player().qualityLevels(),t=e.selectedIndex,i=0,r=e.length;i<r;i++)i!==t&&(e[i].enabled=!1);for(var n=0,a=this.levels_.length;n<a;n++)e[this.levels_[n]].enabled=!0;-1!==t&&-1===this.levels_.indexOf(t)&&(e[t].enabled=!1)},i.handleQualityChange=function(){var e=this.player().qualityLevels(),t=this.levels_.indexOf(e.selectedIndex)>-1;this.selected(t)},i.selected=function(e){if(this.selectable)if(this.selected_){this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(this.localize("{1}, selected",this.localize(this.options_.controlText)));var t=this.player().controlBar.getChild("QualityMenuButton");e?t.removeClass("vjs-quality-menu-button-waiting"):t.addClass("vjs-quality-menu-button-waiting")}else this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(this.options_.controlText)},i.updateSiblings_=function(){for(var e=this.player().qualityLevels(),t=this.player().controlBar.getChild("QualityMenuButton").items,i=0,r=t.length;i<r;i++){var n=t[i],a=n.levels_.indexOf(e.selectedIndex)>-1;n.selected_=n===this,n.selected(a)}},t}(c),f=e.getComponent("MenuButton"),p=function(e){for(var t=0,i=e.length;t<i;t++)if(!e[t].height)return!1;return!0},m=function(e){return e>=2160?"4K":e>=720?"HD":""},v=function(e){function t(t,i){var r;return void 0===i&&(i={}),(r=e.call(this,t,i)||this).el_.setAttribute("aria-label",r.localize("Quality Levels")),r.controlText("Quality Levels"),r.qualityLevels_=t.qualityLevels(),r.update=r.update.bind(l(r)),r.handleQualityChange_=r.handleQualityChange_.bind(l(r)),r.changeHandler_=function(){for(var e=r.options_.defaultResolution,t=0;t<r.items.length;t++)-1!==r.items[t].options_.label.indexOf(e)&&r.items[t].handleClick()},r.on(r.qualityLevels_,"addqualitylevel",r.update),r.on(r.qualityLevels_,"removequalitylevel",r.update),r.on(r.qualityLevels_,"change",r.handleQualityChange_),r.one(r.qualityLevels_,"change",r.changeHandler_),r.update(),r.on("dispose",function(){r.off(r.qualityLevels_,"addqualitylevel",r.update),r.off(r.qualityLevels_,"removequalitylevel",r.update),r.off(r.qualityLevels_,"change",r.handleQualityChange_),r.off(r.qualityLevels_,"change",r.changeHandler_)}),r}u(t,e);var i=t.prototype;return i.buildWrapperCSSClass=function(){return"vjs-quality-menu-wrapper "+e.prototype.buildWrapperCSSClass.call(this)},i.buildCSSClass=function(){return"vjs-quality-menu-button "+e.prototype.buildCSSClass.call(this)},i.createItems=function(){var e,t=this,i=[];if(!this.qualityLevels_||!this.qualityLevels_.length)return i;if(this.options_.useResolutionLabels&&p(this.qualityLevels_)?(e=this.groupByResolution_(),this.addClass("vjs-quality-menu-button-use-resolution")):(e=this.groupByBitrate_(),this.removeClass("vjs-quality-menu-button-use-resolution")),e.length<=1)return[];e.forEach(function(e){e.levels.length&&(e.selectable=!0,i.push(new h(t.player(),e)))});var r=new h(this.player(),{levels:Array.prototype.map.call(this.qualityLevels_,function(e,t){return t}),label:"Auto",controlText:"Auto",active:!0,selected:!0,selectable:!0});return this.autoMenuItem_=r,i.push(r),i},i.groupByResolution_=function(){for(var e={},t=[],i=0,r=this.qualityLevels_.length;i<r;i++){var n=this.qualityLevels_[i],a=this.qualityLevels_.selectedIndex===i,s=n.height,o=void 0;if(this.options_.resolutionLabelBitrates)o=s+"p @ "+Math.round(n.bitrate/1e3)+" kbps";else o=s+"p";if(!e[o]){var l=m(s);e[o]={levels:[],label:o,controlText:o,subLabel:l},t.push({label:o,lines:s})}a&&(e[o].active=!0),e[o].levels.push(i)}t.sort(function(e,t){return t.lines-e.lines});var u=[];return t.forEach(function(t){u.push(e[t.label])}),u},i.groupByBitrate_=function(){for(var e=[{levels:[],label:"HD",controlText:"High Definition"},{levels:[],label:"SD",controlText:"Standard Definition"}],t=0,i=this.qualityLevels_.length;t<i;t++){var r=this.qualityLevels_[t],n=this.qualityLevels_.selectedIndex===t,a=void 0;a=r.bitrate<this.options_.sdBitrateLimit?e[1]:e[0],n&&(a.active=!0),a.levels.push(t)}return e[0].levels.length&&e[1].levels.length?e:[]},i.handleQualityChange_=function(){var e=this.qualityLevels_[this.qualityLevels_.selectedIndex],t=this.options_.useResolutionLabels&&p(this.qualityLevels_),i="";e&&(t?i=m(e.height):e.bitrate>=this.options_.sdBitrateLimit&&(i="HD")),"HD"===i?(this.addClass("vjs-quality-menu-button-HD-flag"),this.removeClass("vjs-quality-menu-button-4K-flag")):"4K"===i?(this.removeClass("vjs-quality-menu-button-HD-flag"),this.addClass("vjs-quality-menu-button-4K-flag")):(this.removeClass("vjs-quality-menu-button-HD-flag"),this.removeClass("vjs-quality-menu-button-4K-flag")),this.autoMenuItem_&&(this.autoMenuItem_.manuallySelected_&&e?this.autoMenuItem_.subLabel_.innerHTML=this.localize(i):this.autoMenuItem_.subLabel_.innerHTML="")},t}(f);e.registerComponent("QualityMenuButton",v);var g=e.registerPlugin||e.plugin,y={sdBitrateLimit:2e6,useResolutionLabels:!0,resolutionLabelBitrates:!1,defaultResolution:"none"},_=function(e,t){e.addClass("vjs-quality-menu");var i=e.getChild("controlBar"),r=i.addChild("QualityMenuButton",t,i.children_.length-2);return function(){e.removeClass("vjs-quality-menu"),i.removeChild(r),r.dispose()}},b=function(t){!function(e,t){if(void 0!==e.qualityLevels){e.qualityLevels();var i=function(){};e.ready(function(){i=_(e,t),e.on("loadstart",function(){i(),i=_(e,t)})}),e.qualityMenu=function(){},e.qualityMenu.VERSION="1.4.0"}}(this,e.mergeOptions(y,t))};return g("qualityMenu",b),b.VERSION="1.4.0",b});s.addLanguage("ar",{Auto:"\u062a\u0644\u0642\u0627\u0626\u064a","Standard Definition":"\u0648\u0636\u0648\u062d \u0639\u0627\u062f\u064a","High Definition":"\u0639\u0627\u0644\u064a \u0627\u0644\u0648\u0636\u0648\u062d",SD:"SD",HD:"HD","4K":"4K","Quality Levels":"\u0645\u0633\u062a\u0648\u064a\u0627\u062a \u0627\u0644\u062c\u0648\u062f\u0629","{1}, selected":"{1}\u060c \u062a\u0645 \u0627\u0644\u0627\u062e\u062a\u064a\u0627\u0631"});s.addLanguage("de",{Auto:"Autom.","Standard Definition":"Standarddefinition","High Definition":"High-Definition",SD:"SD",HD:"HD","4K":"4K","Quality Levels":"Qualit\xe4tsstufen","{1}, selected":"{1}, ausgew\xe4hlt"});s.addLanguage("es",{Auto:"Autom\xe1tica","Standard Definition":"Definici\xf3n est\xe1ndar","High Definition":"Alta definici\xf3n",SD:"SD",HD:"HD","4K":"4K","Quality Levels":"Niveles de calidad","{1}, selected":"{1}, seleccionados"});s.addLanguage("fr",{Auto:"Automatique","Standard Definition":"d\xe9finition standard","High Definition":"haute d\xe9finition",SD:"SD",HD:"HD","4K":"4K","Quality Levels":"Niveaux de qualit\xe9","{1}, selected":"{1}, s\xe9lectionn\xe9"});s.addLanguage("ja",{Auto:"\u81ea\u52d5","Standard Definition":"\u6a19\u6e96\u753b\u8cea","High Definition":"\u9ad8\u753b\u8cea",SD:"SD",HD:"HD","4K":"4K","Quality Levels":"\u54c1\u8cea\u30ec\u30d9\u30eb","{1}, selected":"{1}\u3001\u9078\u629e\u6e08\u307f"});s.addLanguage("ko",{Auto:"Auto","Standard Definition":"Standard Definition","High Definition":"High Definition",SD:"SD",HD:"HD","4K":"4K","Quality Levels":"\ud488\uc9c8 \uc218\uc900","{1}, selected":"{1}, \uc120\ud0dd\ub428"});s.addLanguage("zh-Hans",{Auto:"\u81ea\u52a8","Standard Definition":"\u6807\u51c6\u6e05\u6670\u5ea6","High Definition":"\u9ad8\u6e05\u6670\u5ea6",SD:"SD",HD:"HD","4K":"4K","Quality Levels":"\u8d28\u91cf\u7b49\u7ea7","{1}, selected":"\u5df2\u9009\u62e9 {1}"});s.addLanguage("zh-Hant",{Auto:"\u81ea\u52d5","Standard Definition":"\u6a19\u6e96\u89e3\u6790\u5ea6","High Definition":"\u9ad8\u89e3\u6790\u5ea6",SD:"SD",HD:"HD","4K":"4K","Quality Levels":"\u54c1\u8cea\u5c64\u7d1a","{1}, selected":"\u5df2\u9078\u53d6 {1}"})})();(function(){if(s.getPlugin("vr")){return}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("global/window"),require("global/document"),require("video.js")):"function"==typeof i&&i.amd?i(["global/window","global/document","video.js"],t):(e=e||self).videojsVr=t(e.window,e.document,e.videojs)}(this,function(i,r,n){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i,r=r&&r.hasOwnProperty("default")?r.default:r,n=n&&n.hasOwnProperty("default")?n.default:n;var a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var s=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof e?e:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var l,u=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(i,r){i.exports=function(){var i,r="undefined"!=typeof e?e:void 0!==o?o:"undefined"!=typeof self?self:{},n=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},a=function(e,t){for(var i=0,r=e.length;i<r;i++)t[i]=e[i]},s=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},l=(i=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(i,n){i.exports=function(){var i,n,a,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(e,t,i){return e+(t-e)*i},u=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),c=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),d=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}()),h=(n=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),a=n?parseInt(n[1],10):null,function(){return a}),f=function(){var e=!1;if(65===h()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var i=t[1].split("."),r=o(i,4),n=(r[0],r[1],r[2]),a=r[3];e=3325===parseInt(n,10)&&parseInt(a,10)<148}}return function(){return e}}(),p=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}(),m=function(){var t=90==e.orientation||-90==e.orientation;return p()?!t:t},v=function(){return Math.max(e.screen.width,e.screen.height)*e.devicePixelRatio},g=function(){return Math.min(e.screen.width,e.screen.height)*e.devicePixelRatio},y=function(){if(t.exitFullscreen)t.exitFullscreen();else if(t.webkitExitFullscreen)t.webkitExitFullscreen();else if(t.mozCancelFullScreen)t.mozCancelFullScreen();else{if(!t.msExitFullscreen)return!1;t.msExitFullscreen()}return!0},_=function(e,t,i,r){var n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t),e.compileShader(n);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,i),e.compileShader(a);var s=e.createProgram();for(var o in e.attachShader(s,n),e.attachShader(s,a),r)e.bindAttribLocation(s,r[o],o);return e.linkProgram(s),e.deleteShader(n),e.deleteShader(a),s},b=function(e,t){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n="",a=0;a<r;a++)i[n=e.getActiveUniform(t,a).name.replace("[0]","")]=e.getUniformLocation(t,n);return i},M=function(){var t,i=!1;return t=navigator.userAgent||navigator.vendor||e.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(i=!0),i},T=function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},A=function(t){if(u()){var i=t.style.width,r=t.style.height;t.style.width=parseInt(i)+1+"px",t.style.height=parseInt(r)+"px",setTimeout(function(){t.style.width=i,t.style.height=r},100)}e.canvas=t},w=function(){var e=Math.PI/180,t=.25*Math.PI,i=new Float32Array([0,0,0,1]),r=new Float32Array([0,0,0]);function n(n,a,s,o,l,u){!function(i,r,n,a){var s=Math.tan(r?r.upDegrees*e:t),o=Math.tan(r?r.downDegrees*e:t),l=Math.tan(r?r.leftDegrees*e:t),u=Math.tan(r?r.rightDegrees*e:t),c=2/(l+u),d=2/(s+o);i[0]=c,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=d,i[6]=0,i[7]=0,i[8]=-(l-u)*c*.5,i[9]=(s-o)*d*.5,i[10]=a/(n-a),i[11]=-1,i[12]=0,i[13]=0,i[14]=a*n/(n-a),i[15]=0}(n,o||null,u.depthNear,u.depthFar);var c,d,h,f,p,m,v,g,y,_,b,M,T,A,w,E,x,S,D,I=s.orientation||i,j=s.position||r;c=a,h=j,f=(d=I)[0],p=d[1],m=d[2],v=d[3],b=f*(g=f+f),M=f*(y=p+p),T=f*(_=m+m),A=p*y,w=p*_,E=m*_,x=v*g,S=v*y,D=v*_,c[0]=1-(A+E),c[1]=M+D,c[2]=T-S,c[3]=0,c[4]=M-D,c[5]=1-(b+E),c[6]=w+x,c[7]=0,c[8]=T+S,c[9]=w-x,c[10]=1-(b+A),c[11]=0,c[12]=h[0],c[13]=h[1],c[14]=h[2],c[15]=1,l&&function(e,t,i){var r,n,a,s,o,l,u,c,d,h,f,p,m=i[0],v=i[1],g=i[2];t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(r=t[0],n=t[1],a=t[2],s=t[3],o=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],e[0]=r,e[1]=n,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=h,e[10]=f,e[11]=p,e[12]=r*m+o*v+d*g+t[12],e[13]=n*m+l*v+h*g+t[13],e[14]=a*m+u*v+f*g+t[14],e[15]=s*m+c*v+p*g+t[15])}(a,a,l),function(e,t){var i=t[0],r=t[1],n=t[2],a=t[3],s=t[4],o=t[5],l=t[6],u=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],m=t[13],v=t[14],g=t[15],y=i*o-r*s,_=i*l-n*s,b=i*u-a*s,M=r*l-n*o,T=r*u-a*o,A=n*u-a*l,w=c*m-d*p,E=c*v-h*p,x=c*g-f*p,S=d*v-h*m,D=d*g-f*m,I=h*g-f*v,j=y*I-_*D+b*S+M*x-T*E+A*w;j&&(j=1/j,e[0]=(o*I-l*D+u*S)*j,e[1]=(n*D-r*I-a*S)*j,e[2]=(m*A-v*T+g*M)*j,e[3]=(h*T-d*A-f*M)*j,e[4]=(l*x-s*I-u*E)*j,e[5]=(i*I-n*x+a*E)*j,e[6]=(v*b-p*A-g*_)*j,e[7]=(c*A-h*b+f*_)*j,e[8]=(s*D-o*x+u*w)*j,e[9]=(r*x-i*D-a*w)*j,e[10]=(p*T-m*b+g*y)*j,e[11]=(d*b-c*T-f*y)*j,e[12]=(o*E-s*S-l*w)*j,e[13]=(i*S-r*E+n*w)*j,e[14]=(m*_-p*M-v*y)*j,e[15]=(c*M-d*_+h*y)*j)}(a,a)}return function(e,t,i){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,n(e.leftProjectionMatrix,e.leftViewMatrix,t,i._getFieldOfView("left"),i._getEyeOffset("left"),i),n(e.rightProjectionMatrix,e.rightViewMatrix,t,i._getFieldOfView("right"),i._getEyeOffset("right"),i),0))}}(),E=function(e){var t,i=e.indexOf("://");t=-1!==i?i+3:0;var r=e.indexOf("/",t);return-1===r&&(r=e.length),e.substring(0,r)},x=(i={},function(e,t){void 0===i[e]&&(console.warn("webvr-polyfill: "+t),i[e]=!0)}),S=function(e,t){x(e,e+" has been deprecated. This may not work on native WebVR displays. "+(t?"Please use "+t+" instead.":""))},D=function(e,t,i){if(t){for(var r=[],n=null,a=0;a<t.length;++a)switch(s=t[a]){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:if((l=t[++a])<e.TEXTURE0||l>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}n||(n=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(l),r.push(e.getParameter(s),null);break;case e.ACTIVE_TEXTURE:n=e.getParameter(e.ACTIVE_TEXTURE),r.push(null);break;default:r.push(e.getParameter(s))}for(i(e),a=0;a<t.length;++a){var s=t[a],o=r[a];switch(s){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,o);break;case e.COLOR_CLEAR_VALUE:e.clearColor(o[0],o[1],o[2],o[3]);break;case e.COLOR_WRITEMASK:e.colorMask(o[0],o[1],o[2],o[3]);break;case e.CURRENT_PROGRAM:e.useProgram(o);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,o);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,o);break;case e.TEXTURE_BINDING_2D:if((l=t[++a])<e.TEXTURE0||l>e.TEXTURE31)break;e.activeTexture(l),e.bindTexture(e.TEXTURE_2D,o);break;case e.TEXTURE_BINDING_CUBE_MAP:var l;if((l=t[++a])<e.TEXTURE0||l>e.TEXTURE31)break;e.activeTexture(l),e.bindTexture(e.TEXTURE_CUBE_MAP,o);break;case e.VIEWPORT:e.viewport(o[0],o[1],o[2],o[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:o?e.enable(s):e.disable(s);break;default:console.log("No GL restore behavior for 0x"+s.toString(16))}n&&e.activeTexture(n)}}else i(e)},I=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),j=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function L(e,t,i,r){this.gl=e,this.cardboardUI=t,this.bufferScale=i,this.dirtySubmitFrameBindings=r,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,u()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=_(e,I,j,this.attribs),this.uniforms=b(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}L.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},L.prototype.onResize=function(){var e=this.gl,t=this,i=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];D(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},L.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,i=this.gl;u()||(t.width=v()*this.bufferScale,t.height=g()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(i){e.bufferWidth=i,e.realCanvasWidth.set.call(t,i),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(i){e.bufferHeight=i,e.realCanvasHeight.set.call(t,i),e.onResize()}})),this.lastBoundFramebuffer=i.getParameter(i.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(i.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){e.lastBoundFramebuffer=r||e.framebuffer,e.realBindFramebuffer.call(i,t,e.lastBoundFramebuffer)},this.cullFace=i.getParameter(i.CULL_FACE),this.depthTest=i.getParameter(i.DEPTH_TEST),this.blend=i.getParameter(i.BLEND),this.scissorTest=i.getParameter(i.SCISSOR_TEST),this.stencilTest=i.getParameter(i.STENCIL_TEST),i.enable=function(t){switch(t){case i.CULL_FACE:e.cullFace=!0;break;case i.DEPTH_TEST:e.depthTest=!0;break;case i.BLEND:e.blend=!0;break;case i.SCISSOR_TEST:e.scissorTest=!0;break;case i.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(i,t)},i.disable=function(t){switch(t){case i.CULL_FACE:e.cullFace=!1;break;case i.DEPTH_TEST:e.depthTest=!1;break;case i.BLEND:e.blend=!1;break;case i.SCISSOR_TEST:e.scissorTest=!1;break;case i.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(i,t)},this.colorMask=i.getParameter(i.COLOR_WRITEMASK),i.colorMask=function(t,r,n,a){e.colorMask[0]=t,e.colorMask[1]=r,e.colorMask[2]=n,e.colorMask[3]=a,e.realColorMask.call(i,t,r,n,a)},this.clearColor=i.getParameter(i.COLOR_CLEAR_VALUE),i.clearColor=function(t,r,n,a){e.clearColor[0]=t,e.clearColor[1]=r,e.clearColor[2]=n,e.clearColor[3]=a,e.realClearColor.call(i,t,r,n,a)},this.viewport=i.getParameter(i.VIEWPORT),i.viewport=function(t,r,n,a){e.viewport[0]=t,e.viewport[1]=r,e.viewport[2]=n,e.viewport[3]=a,e.realViewport.call(i,t,r,n,a)},this.isPatched=!0,A(t)}},L.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;u()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){A(t)},1)}},L.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},L.prototype.submitFrame=function(){var e=this.gl,t=this,i=[];if(this.dirtySubmitFrameBindings||i.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),D(e,i,function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||u())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)}),u()){var r=e.canvas;r.width==t.bufferWidth&&r.height==t.bufferHeight||(t.bufferWidth=r.width,t.bufferHeight=r.height,t.onResize())}},L.prototype.updateDeviceInfo=function(e){var t=this.gl,i=this,r=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];D(t,r,function(t){var r=i.computeMeshVertices_(i.meshWidth,i.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!i.indexCount){var n=i.computeMeshIndices_(i.meshWidth,i.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),i.indexCount=n.length}})},L.prototype.computeMeshVertices_=function(e,t,i){for(var r=new Float32Array(2*e*t*5),n=i.getLeftEyeVisibleTanAngles(),a=i.getLeftEyeNoLensTanAngles(),s=i.getLeftEyeVisibleScreenRect(a),o=0,u=0;u<2;u++){for(var c=0;c<t;c++)for(var d=0;d<e;d++,o++){var h=d/(e-1),f=c/(t-1),p=h,m=f,v=l(n[0],n[2],h),g=l(n[3],n[1],f),y=Math.sqrt(v*v+g*g),_=i.distortion.distortInverse(y),b=g*_/y;h=(v*_/y-a[0])/(a[2]-a[0]),f=(b-a[3])/(a[1]-a[3]),h=2*(s.x+h*s.width-.5),f=2*(s.y+f*s.height-.5),r[5*o+0]=h,r[5*o+1]=f,r[5*o+2]=p,r[5*o+3]=m,r[5*o+4]=u}var M=n[2]-n[0];n[0]=-(M+n[0]),n[2]=M-n[2],M=a[2]-a[0],a[0]=-(M+a[0]),a[2]=M-a[2],s.x=1-(s.x+s.width)}return r},L.prototype.computeMeshIndices_=function(e,t){for(var i=new Uint16Array(2*(e-1)*(t-1)*6),r=e/2,n=t/2,a=0,s=0,o=0;o<2;o++)for(var l=0;l<t;l++)for(var u=0;u<e;u++,a++)0!=u&&0!=l&&(u<=r==l<=n?(i[s++]=a,i[s++]=a-e-1,i[s++]=a-e,i[s++]=a-e-1,i[s++]=a,i[s++]=a-1):(i[s++]=a-1,i[s++]=a-e,i[s++]=a,i[s++]=a-e,i[s++]=a-1,i[s++]=a-e-1));return i},L.prototype.getOwnPropertyDescriptor_=function(e,t){var i=Object.getOwnPropertyDescriptor(e,t);return void 0!==i.get&&void 0!==i.set||(i.configurable=!0,i.enumerable=!0,i.get=function(){return this.getAttribute(t)},i.set=function(e){this.setAttribute(t,e)}),i};var N=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),C=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),O=Math.PI/180;function k(e){this.gl=e,this.attribs={position:0},this.program=_(e,N,C,this.attribs),this.uniforms=b(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function P(e){this.coefficients=e}k.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},k.prototype.listen=function(e,t){var i=this.gl.canvas;this.listener=function(r){var n=i.clientWidth/2;r.clientX>n-42&&r.clientX<n+42&&r.clientY>i.clientHeight-42?e(r):r.clientX<42&&r.clientY<42&&t(r)},i.addEventListener("click",this.listener,!1)},k.prototype.onResize=function(){var t=this.gl,i=this,r=[t.ARRAY_BUFFER_BINDING];D(t,r,function(t){var r=[],n=t.drawingBufferWidth/2,a=Math.max(screen.width,screen.height)*e.devicePixelRatio,s=t.drawingBufferWidth/a*e.devicePixelRatio,o=4*s/2,l=42*s,u=28*s/2,c=14*s;function d(e,t){var i=(90-e)*O,a=Math.cos(i),s=Math.sin(i);r.push(.3125*a*u+n,.3125*s*u+u),r.push(t*a*u+n,t*s*u+u)}r.push(n-o,l),r.push(n-o,t.drawingBufferHeight),r.push(n+o,l),r.push(n+o,t.drawingBufferHeight),i.gearOffset=r.length/2;for(var h=0;h<=6;h++){var f=60*h;d(f,1),d(f+12,1),d(f+20,.75),d(f+40,.75),d(f+48,1)}function p(e,i){r.push(c+e,t.drawingBufferHeight-c-i)}i.gearVertexCount=r.length/2-i.gearOffset,i.arrowOffset=r.length/2;var m=o/Math.sin(45*O);p(0,u),p(u,0),p(u+m,m),p(m,u+m),p(m,u-m),p(0,u),p(u,2*u),p(u+m,2*u-m),p(m,u-m),p(0,u),p(m,u-o),p(28*s,u-o),p(m,u+o),p(28*s,u+o),i.arrowVertexCount=r.length/2-i.arrowOffset,t.bindBuffer(t.ARRAY_BUFFER,i.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW)})},k.prototype.render=function(){var e=this.gl,t=this,i=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];D(e,i,function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()})},k.prototype.renderNoState=function(){var e,t,i,r,n,a,s,o,l,u,c=this.gl;c.useProgram(this.program),c.bindBuffer(c.ARRAY_BUFFER,this.vertexBuffer),c.enableVertexAttribArray(this.attribs.position),c.vertexAttribPointer(this.attribs.position,2,c.FLOAT,!1,8,0),c.uniform4f(this.uniforms.color,1,1,1,1),e=this.projMat,t=0,i=c.drawingBufferWidth,r=0,n=c.drawingBufferHeight,o=1/(t-i),l=1/(r-n),u=1/((a=.1)-(s=1024)),e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*o,e[13]=(n+r)*l,e[14]=(s+a)*u,e[15]=1,c.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),c.drawArrays(c.TRIANGLE_STRIP,0,4),c.drawArrays(c.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),c.drawArrays(c.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},P.prototype.distortInverse=function(e){for(var t=0,i=1,r=e-this.distort(t);Math.abs(i-t)>1e-4;){var n=e-this.distort(i),a=i-n*((i-t)/(n-r));t=i,i=a,r=n}return i},P.prototype.distort=function(e){for(var t=e*e,i=0,r=0;r<this.coefficients.length;r++)i=t*(i+this.coefficients[r]);return(i+1)*e};var R=Math.PI/180,z=180/Math.PI,U=function(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0};U.prototype={constructor:U,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*r-s*i,u=o*i+s*t-n*r,c=o*r+n*i-a*t,d=-n*t-a*i-s*r;return this.x=l*o+d*-n+u*-s-c*-a,this.y=u*o+d*-a+c*-n-l*-s,this.z=c*o+d*-s+l*-a-u*-n,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-n*s,this.y=n*a-i*o,this.z=i*s-r*a,this}};var B,F,V=function(e,t,i,r){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==r?r:1};function G(e){this.width=e.width||v(),this.height=e.height||g(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}V.prototype={constructor:V,set:function(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,i){var r=Math.cos(e/2),n=Math.cos(t/2),a=Math.cos(i/2),s=Math.sin(e/2),o=Math.sin(t/2),l=Math.sin(i/2);return this.x=s*n*a+r*o*l,this.y=r*o*a-s*n*l,this.z=r*n*l+s*o*a,this.w=r*n*a-s*o*l,this},setFromEulerYXZ:function(e,t,i){var r=Math.cos(e/2),n=Math.cos(t/2),a=Math.cos(i/2),s=Math.sin(e/2),o=Math.sin(t/2),l=Math.sin(i/2);return this.x=s*n*a+r*o*l,this.y=r*o*a-s*n*l,this.z=r*n*l-s*o*a,this.w=r*n*a+s*o*l,this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(i),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var i=e.x,r=e.y,n=e.z,a=e.w,s=t.x,o=t.y,l=t.z,u=t.w;return this.x=i*u+a*s+r*l-n*o,this.y=r*u+a*o+n*s-i*l,this.z=n*u+a*l+i*o-r*s,this.w=a*u-i*s-r*o-n*l,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this.x,r=this.y,n=this.z,a=this.w,s=a*e.w+i*e.x+r*e.y+n*e.z;if(s<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,s=-s):this.copy(e),s>=1)return this.w=a,this.x=i,this.y=r,this.z=n,this;var o=Math.acos(s),l=Math.sqrt(1-s*s);if(Math.abs(l)<.001)return this.w=.5*(a+this.w),this.x=.5*(i+this.x),this.y=.5*(r+this.y),this.z=.5*(n+this.z),this;var u=Math.sin((1-t)*o)/l,c=Math.sin(t*o)/l;return this.w=a*u+this.w*c,this.x=i*u+this.x*c,this.y=r*u+this.y*c,this.z=n*u+this.z*c,this},setFromUnitVectors:function(e,t){return void 0===B&&(B=new U),(F=e.dot(t)+1)<1e-6?(F=0,Math.abs(e.x)>Math.abs(e.z)?B.set(-e.y,e.x,0):B.set(0,-e.z,e.y)):B.crossVectors(e,t),this.x=B.x,this.y=B.y,this.z=B.z,this.w=F,this.normalize(),this}};var H=new G({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),Q=new G({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),Y={CardboardV1:new q({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new q({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function W(e,t){this.viewer=Y.CardboardV2,this.updateDeviceParams(e),this.distortion=new P(this.viewer.distortionCoefficients);for(var i=0;i<t.length;i++){var r=t[i];Y[r.id]=new q(r)}}function q(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}W.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},W.prototype.getDevice=function(){return this.device},W.prototype.setViewer=function(e){this.viewer=e,this.distortion=new P(this.viewer.distortionCoefficients)},W.prototype.determineDevice_=function(e){if(!e)return u()?(console.warn("Using fallback iOS device measurements."),Q):(console.warn("Using fallback Android device measurements."),H);var t=.0254/e.xdpi,i=.0254/e.ydpi;return new G({widthMeters:t*v(),heightMeters:i*g(),bevelMeters:.001*e.bevelMm})},W.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,i=this.distortion,r=e.screenLensDistance,n=(t.widthMeters-e.interLensDistance)/2,a=e.interLensDistance/2,s=e.baselineLensDistance-t.bevelMeters,o=t.heightMeters-s,l=z*Math.atan(i.distort(n/r)),u=z*Math.atan(i.distort(a/r)),c=z*Math.atan(i.distort(s/r)),d=z*Math.atan(i.distort(o/r));return{leftDegrees:Math.min(l,e.fov),rightDegrees:Math.min(u,e.fov),downDegrees:Math.min(c,e.fov),upDegrees:Math.min(d,e.fov)}},W.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,r=Math.tan(-R*e.fov),n=Math.tan(R*e.fov),a=Math.tan(R*e.fov),s=Math.tan(-R*e.fov),o=t.widthMeters/4,l=t.heightMeters/2,u=e.baselineLensDistance-t.bevelMeters-l,c=e.interLensDistance/2-o,d=-u,h=e.screenLensDistance,f=i.distort((c-o)/h),p=i.distort((d+l)/h),m=i.distort((c+o)/h),v=i.distort((d-l)/h),g=new Float32Array(4);return g[0]=Math.max(r,f),g[1]=Math.min(n,p),g[2]=Math.min(a,m),g[3]=Math.max(s,v),g},W.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,i=this.distortion,r=new Float32Array(4),n=i.distortInverse(Math.tan(-R*e.fov)),a=i.distortInverse(Math.tan(R*e.fov)),s=i.distortInverse(Math.tan(R*e.fov)),o=i.distortInverse(Math.tan(-R*e.fov)),l=t.widthMeters/4,u=t.heightMeters/2,c=e.baselineLensDistance-t.bevelMeters-u,d=e.interLensDistance/2-l,h=-c,f=e.screenLensDistance,p=(d-l)/f,m=(h+u)/f,v=(d+l)/f,g=(h-u)/f;return r[0]=Math.max(n,p),r[1]=Math.min(a,m),r[2]=Math.min(s,v),r[3]=Math.max(o,g),r},W.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,i=this.device,r=t.screenLensDistance,n=(i.widthMeters-t.interLensDistance)/2,a=t.baselineLensDistance-i.bevelMeters,s=(e[0]*r+n)/i.widthMeters,o=(e[1]*r+a)/i.heightMeters,l=(e[2]*r+n)/i.widthMeters,u=(e[3]*r+a)/i.heightMeters;return{x:s,y:u,width:l-s,height:o-u}},W.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},W.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},W.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:z*Math.atan(e.outerDist),rightDegrees:z*Math.atan(e.innerDist),downDegrees:z*Math.atan(e.bottomDist),upDegrees:z*Math.atan(e.topDist)}},W.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,i=this.device,r=t.screenLensDistance,n=i.widthMeters/r,a=i.heightMeters/r,s=i.width/n,o=i.height/a,l=Math.round((e.eyePosX-e.outerDist)*s),u=Math.round((e.eyePosY-e.bottomDist)*o);return{x:l,y:u,width:Math.round((e.eyePosX+e.innerDist)*s)-l,height:Math.round((e.eyePosY+e.topDist)*o)-u}},W.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,i=this.distortion,r=e.screenLensDistance,n=e.interLensDistance/2/r,a=t.widthMeters/r,s=t.heightMeters/r,o=a/2-n,l=(e.baselineLensDistance-t.bevelMeters)/r,u=e.fov,c=i.distortInverse(Math.tan(R*u)),d=Math.min(o,c),h=Math.min(n,c),f=Math.min(l,c);return{outerDist:d,innerDist:h,topDist:Math.min(s-l,c),bottomDist:f,eyePosX:o,eyePosY:l}},W.Viewers=Y;var X={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function Z(e,t){if(this.dpdb=X,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var i=new XMLHttpRequest,r=this;i.open("GET",e,!0),i.addEventListener("load",function(){r.loading=!1,i.status>=200&&i.status<=299?(r.dpdb=JSON.parse(i.response),r.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),i.send()}}function K(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function J(e,t){this.set(e,t)}function $(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new J,this.currentGyroMeasurement=new J,this.previousGyroMeasurement=new J,u()?this.filterQ=new V(-1,0,0,1):this.filterQ=new V(1,0,0,1),this.previousFilterQ=new V,this.previousFilterQ.copy(this.filterQ),this.accelQ=new V,this.isOrientationInitialized=!1,this.estimatedGravity=new U,this.measuredGravity=new U,this.gyroIntegralQ=new V}function ee(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new V,this.previousTimestampS=null,this.deltaQ=new V,this.outQ=new V}function te(t,i,r,n){this.yawOnly=r,this.accelerometer=new U,this.gyroscope=new U,this.filter=new $(t,n),this.posePredictor=new ee(i,n),this.isFirefoxAndroid=d(),this.isIOS=u();var a=h();this.isDeviceMotionInRadians=!this.isIOS&&a&&a<66,this.isWithoutDeviceMotion=f(),this.filterToWorldQ=new V,u()?this.filterToWorldQ.setFromAxisAngle(new U(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new U(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new V,this.worldToScreenQ=new V,this.originalPoseAdjustQ=new V,this.originalPoseAdjustQ.setFromAxisAngle(new U(0,0,1),-e.orientation*Math.PI/180),this.setScreenTransform_(),m()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new V,this.orientationOut_=new Float32Array(4),this.start()}Z.prototype.getDeviceParams=function(){return this.deviceParams},Z.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Z.prototype.calcDeviceParams_=function(){var t=this.dpdb;if(!t)return console.error("DPDB not available."),null;if(1!=t.format)return console.error("DPDB has unexpected format version."),null;if(!t.devices||!t.devices.length)return console.error("DPDB does not have a devices section."),null;var i=navigator.userAgent||navigator.vendor||e.opera,r=v(),n=g();if(!t.devices)return console.error("DPDB has no devices section."),null;for(var a=0;a<t.devices.length;a++){var s=t.devices[a];if(s.rules)if("ios"==s.type||"android"==s.type){if(u()==("ios"==s.type)){for(var o=!1,l=0;l<s.rules.length;l++){var c=s.rules[l];if(this.matchRule_(c,i,r,n)){o=!0;break}}if(o)return new K({xdpi:s.dpi[0]||s.dpi,ydpi:s.dpi[1]||s.dpi,bevelMm:s.bw})}}else console.warn("Device["+a+"] has invalid type.");else console.warn("Device["+a+"] has no rules section.")}return console.warn("No DPDB device match."),null},Z.prototype.matchRule_=function(e,t,i,r){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var n=e.res[0],a=e.res[1];if(Math.min(i,r)!=Math.min(n,a)||Math.max(i,r)!=Math.max(n,a))return!1}return!0},J.prototype.set=function(e,t){this.sample=e,this.timestampS=t},J.prototype.copy=function(e){this.set(e.sample,e.timestampS)},$.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},$.prototype.addGyroMeasurement=function(e,t){this.currentGyroMeasurement.set(e,t);var i,r=t-this.previousGyroMeasurement.timestampS;i=r,isNaN(i)||i<=.001||i>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},$.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var i=new V;i.copy(this.filterQ),i.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(i),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r,n=new V;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",z*((r=n).w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(r.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var a=new V;a.copy(this.filterQ),a.multiply(n),this.filterQ.slerp(a,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},$.prototype.getOrientation=function(){return this.filterQ},$.prototype.accelToQuaternion_=function(e){var t=new U;t.copy(e),t.normalize();var i=new V;return i.setFromUnitVectors(new U(0,0,-1),t),i.inverse(),i},$.prototype.gyroToQuaternionDelta_=function(e,t){var i=new V,r=new U;return r.copy(e),r.normalize(),i.setFromAxisAngle(r,e.length()*t),i},ee.prototype.getPrediction=function(e,t,i){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=i,e;var r=new U;r.copy(t),r.normalize();var n=t.length();if(n<20*R)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(z*n).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var a=n*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(r,a),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=i,this.outQ},te.prototype.getPosition=function(){return null},te.prototype.getOrientation=function(){var t=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(r=(new V).setFromAxisAngle(new U(0,0,-1),0),n=new V,-90===e.orientation?n.setFromAxisAngle(new U(0,1,0),Math.PI/-2):n.setFromAxisAngle(new U(0,1,0),Math.PI/2),r.multiply(n)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((i=new V).setFromAxisAngle(new U(1,0,0),-Math.PI/2),i),t=this._deviceOrientationQ,(a=new V).copy(t),a.multiply(this.deviceOrientationFilterToWorldQ),a.multiply(this.resetQ),a.multiply(this.worldToScreenQ),a.multiplyQuaternions(this.deviceOrientationFixQ,a),this.yawOnly&&(a.x=0,a.z=0,a.normalize()),this.orientationOut_[0]=a.x,this.orientationOut_[1]=a.y,this.orientationOut_[2]=a.z,this.orientationOut_[3]=a.w,this.orientationOut_;var i,r,n,a,s=this.filter.getOrientation();return t=this.posePredictor.getPrediction(s,this.gyroscope,this.previousTimestampS),(a=new V).copy(this.filterToWorldQ),a.multiply(this.resetQ),a.multiply(t),a.multiply(this.worldToScreenQ),this.yawOnly&&(a.x=0,a.z=0,a.normalize()),this.orientationOut_[0]=a.x,this.orientationOut_[1]=a.y,this.orientationOut_[2]=a.z,this.orientationOut_[3]=a.w,this.orientationOut_},te.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),m()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},te.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new V;var t=e.alpha,i=e.beta,r=e.gamma;t=(t||0)*Math.PI/180,i=(i||0)*Math.PI/180,r=(r||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(i,t,-r)},te.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},te.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,i=e.rotationRate,r=e.timeStamp/1e3,n=r-this.previousTimestampS;return n<0?(x("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=r)):n<=.001||n>1?(x("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=r)):(this.accelerometer.set(-t.x,-t.y,-t.z),p()?this.gyroscope.set(-i.beta,i.alpha,i.gamma):this.gyroscope.set(i.alpha,i.beta,i.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,r),this.filter.addGyroMeasurement(this.gyroscope,r),void(this.previousTimestampS=r))},te.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},te.prototype.onMessage_=function(e){var t=e.data;t&&t.type&&"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)},te.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),e.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new U(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new U(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},te.prototype.start=function(){var i,r,n;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),u()&&(i=e.self!==e.top,r=E(t.referrer),n=E(e.location.href),i&&r!==n)&&e.addEventListener("message",this.onMessageCallback_),e.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?e.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):e.addEventListener("devicemotion",this.onDeviceMotionCallback_)},te.prototype.stop=function(){e.removeEventListener("devicemotion",this.onDeviceMotionCallback_),e.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),e.removeEventListener("orientationchange",this.onOrientationChangeCallback_),e.removeEventListener("message",this.onMessageCallback_)};var ie=new U(1,0,0),re=new U(0,0,1),ne={};screen.orientation?ne=screen.orientation:screen.msOrientation?ne=screen.msOrientation:Object.defineProperty(ne,"angle",{get:function(){return e.orientation||0}});var ae=new V;ae.setFromAxisAngle(ie,-Math.PI/2),ae.multiply((new V).setFromAxisAngle(re,Math.PI/2));var se=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new V,this._worldToScreenQ=new V,this._outQ=new V,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onOrientationChange(),this.init()}return s(t,[{key:"init",value:function(){var t=null;try{(t=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this._onSensorError)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start()),e.addEventListener("orientationchange",this._onOrientationChange)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new te(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(ae),t.multiply(this._sensorQ),t.multiply(this._worldToScreenQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}},{key:"_onOrientationChange",value:function(){var e=-ne.angle*Math.PI/180;this._worldToScreenQ.setFromAxisAngle(re,e)}}]),t}();function oe(){this.loadIcon_();var e=t.createElement("div");(s=e.style).position="fixed",s.top=0,s.right=0,s.bottom=0,s.left=0,s.backgroundColor="gray",s.fontFamily="sans-serif",s.zIndex=1e6;var i=t.createElement("img");i.src=this.icon,(s=i.style).marginLeft="25%",s.marginTop="25%",s.width="50%",e.appendChild(i);var r=t.createElement("div");(s=r.style).textAlign="center",s.fontSize="16px",s.lineHeight="24px",s.margin="24px 25%",s.width="50%",r.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(r);var n=t.createElement("div");(s=n.style).backgroundColor="#CFD8DC",s.position="fixed",s.bottom=0,s.width="100%",s.height="48px",s.padding="14px 24px",s.boxSizing="border-box",s.color="#656A6B",e.appendChild(n);var a=t.createElement("div");a.style.float="left",a.innerHTML="No Cardboard viewer?";var s,o=t.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="_blank",(s=o.style).float="right",s.fontWeight=600,s.textTransform="uppercase",s.borderLeft="1px solid gray",s.paddingLeft="24px",s.textDecoration="none",s.color="#656A6B",n.appendChild(a),n.appendChild(o),this.overlay=e,this.text=r,this.hide()}function le(e){try{this.selectedKey=localStorage.getItem("WEBVR_CARDBOARD_VIEWER")}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=e||"CardboardV1"),this.dialog=this.createDialog_(W.Viewers),this.root=null,this.onChangeCallbacks_=[]}oe.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):t.body.appendChild(this.overlay),this.overlay.style.display="block";var i=this.overlay.querySelector("img").style;m()?(i.width="20%",i.marginLeft="40%",i.marginTop="3%"):(i.width="50%",i.marginLeft="25%",i.marginTop="25%")},oe.prototype.hide=function(){this.overlay.style.display="none"},oe.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},oe.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},oe.prototype.update=function(){this.disableShowTemporarily(),!m()&&M()?this.show():this.hide()},oe.prototype.loadIcon_=function(){this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"},le.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},le.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},le.prototype.getCurrentViewer=function(){return W.Viewers[this.selectedKey]},le.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},le.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},le.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},le.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&W.Viewers[this.selectedKey]){this.fireOnChange_(W.Viewers[this.selectedKey]);try{localStorage.setItem("WEBVR_CARDBOARD_VIEWER",this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},le.prototype.createDialog_=function(e){var i=t.createElement("div");i.classList.add("webvr-polyfill-viewer-selector"),i.style.display="none";var r=t.createElement("div");(a=r.style).position="fixed",a.left=0,a.top=0,a.width="100%",a.height="100%",a.background="rgba(0, 0, 0, 0.3)",r.addEventListener("click",this.hide.bind(this));var n=t.createElement("div"),a=n.style;for(var s in a.boxSizing="border-box",a.position="fixed",a.top="24px",a.left="50%",a.marginLeft="-140px",a.width="280px",a.padding="24px",a.overflow="hidden",a.background="#fafafa",a.fontFamily="'Roboto', sans-serif",a.boxShadow="0px 5px 20px #666",n.appendChild(this.createH1_("Select your viewer")),e)n.appendChild(this.createChoice_(s,e[s].label));return n.appendChild(this.createButton_("Save",this.onSave_.bind(this))),i.appendChild(r),i.appendChild(n),i},le.prototype.createH1_=function(e){var i=t.createElement("h1"),r=i.style;return r.color="black",r.fontSize="20px",r.fontWeight="bold",r.marginTop=0,r.marginBottom="24px",i.innerHTML=e,i},le.prototype.createChoice_=function(e,i){var r=t.createElement("div");r.style.marginTop="8px",r.style.color="black";var n=t.createElement("input");n.style.fontSize="30px",n.setAttribute("id",e),n.setAttribute("type","radio"),n.setAttribute("value",e),n.setAttribute("name","field");var a=t.createElement("label");return a.style.marginLeft="4px",a.setAttribute("for",e),a.innerHTML=i,r.appendChild(n),r.appendChild(a),r},le.prototype.createButton_=function(e,i){var r=t.createElement("button");r.innerHTML=e;var n=r.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",r.addEventListener("click",i),r},"undefined"!=typeof e?e:void 0!==r||"undefined"!=typeof self&&self;var ue,ce=(ue=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(i,r){!function(e,t){i.exports=t()}(0,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(i,r,n){var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=n(1),o="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!e.MSStream,l=function(){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o?this.noSleepTimer=null:(this.noSleepVideo=t.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",s),this.noSleepVideo.addEventListener("timeupdate",function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return a(i,[{key:"enable",value:function(){o?(this.disable(),this.noSleepTimer=e.setInterval(function(){e.location.href="/",e.setTimeout(e.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){o?this.noSleepTimer&&(e.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),i}();i.exports=l},function(e,t,i){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}))&&ue.__esModule?ue.default:ue,de=1e3,he=[0,0,.5,1],fe=[.5,0,.5,1],pe=e.requestAnimationFrame,me=e.cancelAnimationFrame;function ve(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return S("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function ge(e){var t=!("wakelock"in(e=e||{}))||e.wakelock;this.isPolyfilled=!0,this.displayId=de++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return S("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new ve({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&M()&&(this.wakelock_=new ce)}ge.prototype.getFrameData=function(e){return w(e,this._getPose(),this)},ge.prototype.getPose=function(){return S("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},ge.prototype.resetPose=function(){return S("VRDisplay.prototype.resetPose"),this._resetPose()},ge.prototype.getImmediatePose=function(){return S("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},ge.prototype.requestAnimationFrame=function(e){return pe(e)},ge.prototype.cancelAnimationFrame=function(e){return me(e)},ge.prototype.wrapForFullscreen=function(e){if(u())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=t.createElement("div");var i=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",i.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||t.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},ge.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},ge.prototype.requestPresent=function(e){var i=this.isPresenting,r=this;return e instanceof Array||(S("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise(function(n,a){if(r.capabilities.canPresent)if(0==e.length||e.length>r.capabilities.maxLayers)a(new Error("Invalid number of layers."));else{var s=e[0];if(s.source){var o=s.leftBounds||he,l=s.rightBounds||fe;if(i){var d=r.layer_;d.source!==s.source&&(d.source=s.source);for(var h=0;h<4;h++)d.leftBounds[h]=o[h],d.rightBounds[h]=l[h];return r.wrapForFullscreen(r.layer_.source),r.updatePresent_(),void n()}if(r.layer_={predistorted:s.predistorted,source:s.source,leftBounds:o.slice(0),rightBounds:l.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var f=r.wrapForFullscreen(r.layer_.source);r.addFullscreenListeners_(f,function(){var e=t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement;r.isPresenting=f===e,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(e){console.error("screen.orientation.lock() failed due to",e.message)}),r.waitingForPresent_=!1,r.beginPresent_(),n()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.disableWakeLock(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()},function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.disableWakeLock(),r.waitingForPresent_=!1,r.isPresenting=!1,a(new Error("Unable to present.")))}),function(e){if(c())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}(f)?(r.enableWakeLock(),r.waitingForPresent_=!0):(u()||c())&&(r.enableWakeLock(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),n())}r.waitingForPresent_||u()||(y(),a(new Error("Unable to present.")))}else n()}else a(new Error("VRDisplay is not capable of presenting."))})},ge.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(i,r){e?(!y()&&u()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),c()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),i()):r(new Error("Was not presenting to VRDisplay."))})},ge.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},ge.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});e.dispatchEvent(t)},ge.prototype.fireVRDisplayConnect_=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});e.dispatchEvent(t)},ge.prototype.addFullscreenListeners_=function(e,i,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=i,this.fullscreenErrorHandler_=r,i&&(t.fullscreenEnabled?e.addEventListener("fullscreenchange",i,!1):t.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",i,!1):t.mozFullScreenEnabled?t.addEventListener("mozfullscreenchange",i,!1):t.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",i,!1)),r&&(t.fullscreenEnabled?e.addEventListener("fullscreenerror",r,!1):t.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",r,!1):t.mozFullScreenEnabled?t.addEventListener("mozfullscreenerror",r,!1):t.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",r,!1))},ge.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var i=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",i,!1),e.removeEventListener("webkitfullscreenchange",i,!1),t.removeEventListener("mozfullscreenchange",i,!1),e.removeEventListener("msfullscreenchange",i,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",r,!1),e.removeEventListener("webkitfullscreenerror",r,!1),t.removeEventListener("mozfullscreenerror",r,!1),e.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},ge.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},ge.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},ge.prototype.beginPresent_=function(){},ge.prototype.endPresent_=function(){},ge.prototype.submitFrame=function(e){},ge.prototype.getEyeParameters=function(e){return null};var ye={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},_e="left",be="right";function Me(t){var i=T({},ye);t=T(i,t||{}),ge.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new ve({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new se(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Z(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new W(this.dpdb_.getDeviceParams(),t.ADDITIONAL_VIEWERS),this.viewerSelector_=new le(t.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new oe),u()&&e.addEventListener("resize",this.onResize_.bind(this))}return Me.prototype=Object.create(ge.prototype),Me.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Me.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Me.prototype._getFieldOfView=function(e){var t;if(e==_e)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if(e!=be)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},Me.prototype._getEyeOffset=function(e){var t;if(e==_e)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(e!=be)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},Me.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),i=this._getFieldOfView(e),r={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(r,"fieldOfView",{enumerable:!0,get:function(){return S("VRFieldOfView","VRFrameData's projection matrices"),i}}),r},Me.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Me.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Me.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=v()*this.bufferScale_,t.canvas.height=g()*this.bufferScale_,this.cardboardUI_=new k(t)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new k(t)),this.distorter_=new L(t,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(m()&&M()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),e.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),e.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Me.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),e.removeEventListener("orientationchange",this.orientationHandler),e.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Me.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Me.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},Me.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Me.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),A(t.canvas)}},Me.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Me.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});e.dispatchEvent(t)},Me.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},Me.VRDisplay=ge,Me}()}))&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,u={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function c(t){this.config=s(s({},u),t),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=e.VRFrameData,this.native.VRDisplay=e.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&n())&&(this.enable(),this.getVRDisplays().then(function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()}))}c.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(n()){var e=new l({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(e)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},c.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var t=this.native.VRFrameData,i=new this.native.VRFrameData,r=this.native.VRDisplay.prototype.getFrameData;e.VRDisplay.prototype.getFrameData=function(e){e instanceof t?r.call(this,e):(r.call(this,i),e.pose=i.pose,a(i.leftProjectionMatrix,e.leftProjectionMatrix),a(i.rightProjectionMatrix,e.rightProjectionMatrix),a(i.leftViewMatrix,e.leftViewMatrix),a(i.rightViewMatrix,e.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),e.VRDisplay=l.VRDisplay,e.VRFrameData=l.VRFrameData},c.prototype.getVRDisplays=function(){var e,t=this,i=this.config;if(!this.hasNative)return Promise.resolve(this.getPolyfillDisplays());var r,n=this.native.getVRDisplays.call(navigator),a=new Promise(function(t){e=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),t([])},i.GET_VR_DISPLAYS_TIMEOUT)});return(r=[n,a],Promise.race?Promise.race(r):new Promise(function(e,t){for(var i=0;i<r.length;i++)r[i].then(e,t)})).then(function(i){return clearTimeout(e),i.length>0?i:t.getPolyfillDisplays()})},c.version="0.10.6",c.VRFrameData=l.VRFrameData,c.VRDisplay=l.VRDisplay;var d=Object.freeze({default:c}),h=d&&c||d;return void 0!==r&&r.window&&(r.document||(r.document=r.window.document),r.navigator||(r.navigator=r.window.navigator)),h}()}),c=(l=u)&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l;function d(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var r=arguments[i];if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}),Object.assign(d.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var i=this._listeners[e];if(void 0!==i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=t.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,e)}}}});var h,f,p,m,v,g,y,_,b=0,M=1,T=2,A={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]).toUpperCase()}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,r,n){return r+(e-t)*(n-r)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*A.DEG2RAD},radToDeg:function(e){return e*A.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function w(e,t){this.x=e||0,this.y=t||0}function E(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function x(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==r?r:1}function S(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function D(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(w.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(w.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(h=new w,f=new w,function(e,t){return h.set(e,e),f.set(t,t),this.clamp(h,f)}),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return t*t+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=this.x-e.x,a=this.y-e.y;return this.x=n*i-a*r+e.x,this.y=n*r+a*i+e.y,this}}),Object.assign(E.prototype,{isMatrix4:!0,set:function(e,t,i,r,n,a,s,o,l,u,c,d,h,f,p,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=n,v[5]=a,v[9]=s,v[13]=o,v[2]=l,v[6]=u,v[10]=c,v[14]=d,v[3]=h,v[7]=f,v[11]=p,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new E).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this},copyPosition:function(e){var t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this},extractBasis:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:(y=new S,function(e){var t=this.elements,i=e.elements,r=1/y.setFromMatrixColumn(e,0).length(),n=1/y.setFromMatrixColumn(e,1).length(),a=1/y.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*n,t[5]=i[5]*n,t[6]=i[6]*n,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,r=e.y,n=e.z,a=Math.cos(i),s=Math.sin(i),o=Math.cos(r),l=Math.sin(r),u=Math.cos(n),c=Math.sin(n);if("XYZ"===e.order){var d=a*u,h=a*c,f=s*u,p=s*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=h+f*l,t[5]=d-p*l,t[9]=-s*o,t[2]=p-d*l,t[6]=f+h*l,t[10]=a*o}else if("YXZ"===e.order){var m=o*u,v=o*c,g=l*u,y=l*c;t[0]=m+y*s,t[4]=g*s-v,t[8]=a*l,t[1]=a*c,t[5]=a*u,t[9]=-s,t[2]=v*s-g,t[6]=y+m*s,t[10]=a*o}else if("ZXY"===e.order){m=o*u,v=o*c,g=l*u,y=l*c;t[0]=m-y*s,t[4]=-a*c,t[8]=g+v*s,t[1]=v+g*s,t[5]=a*u,t[9]=y-m*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){d=a*u,h=a*c,f=s*u,p=s*c;t[0]=o*u,t[4]=f*l-h,t[8]=d*l+p,t[1]=o*c,t[5]=p*l+d,t[9]=h*l-f,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){var _=a*o,b=a*l,M=s*o,T=s*l;t[0]=o*u,t[4]=T-_*c,t[8]=M*c+b,t[1]=c,t[5]=a*u,t[9]=-s*u,t[2]=-l*u,t[6]=b*c+M,t[10]=_-T*c}else if("XZY"===e.order){_=a*o,b=a*l,M=s*o,T=s*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=_*c+T,t[5]=a*u,t[9]=b*c-M,t[2]=M*c-b,t[6]=s*u,t[10]=T*c+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(v=new S(0,0,0),g=new S(1,1,1),function(e){return this.compose(v,e,g)}),lookAt:function(){var e=new S,t=new S,i=new S;return function(r,n,a){var s=this.elements;return i.subVectors(r,n),0===i.lengthSq()&&(i.z=1),i.normalize(),e.crossVectors(a,i),0===e.lengthSq()&&(1===Math.abs(a.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),e.crossVectors(a,i)),e.normalize(),t.crossVectors(i,e),s[0]=e.x,s[4]=t.x,s[8]=i.x,s[1]=e.y,s[5]=t.y,s[9]=i.y,s[2]=e.z,s[6]=t.z,s[10]=i.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,a=i[0],s=i[4],o=i[8],l=i[12],u=i[1],c=i[5],d=i[9],h=i[13],f=i[2],p=i[6],m=i[10],v=i[14],g=i[3],y=i[7],_=i[11],b=i[15],M=r[0],T=r[4],A=r[8],w=r[12],E=r[1],x=r[5],S=r[9],D=r[13],I=r[2],j=r[6],L=r[10],N=r[14],C=r[3],O=r[7],k=r[11],P=r[15];return n[0]=a*M+s*E+o*I+l*C,n[4]=a*T+s*x+o*j+l*O,n[8]=a*A+s*S+o*L+l*k,n[12]=a*w+s*D+o*N+l*P,n[1]=u*M+c*E+d*I+h*C,n[5]=u*T+c*x+d*j+h*O,n[9]=u*A+c*S+d*L+h*k,n[13]=u*w+c*D+d*N+h*P,n[2]=f*M+p*E+m*I+v*C,n[6]=f*T+p*x+m*j+v*O,n[10]=f*A+p*S+m*L+v*k,n[14]=f*w+p*D+m*N+v*P,n[3]=g*M+y*E+_*I+b*C,n[7]=g*T+y*x+_*j+b*O,n[11]=g*A+y*S+_*L+b*k,n[15]=g*w+y*D+_*N+b*P,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new S;return function(t){for(var i=0,r=t.count;i<r;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix4(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],i=e[4],r=e[8],n=e[12],a=e[1],s=e[5],o=e[9],l=e[13],u=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+n*o*c-r*l*c-n*s*d+i*l*d+r*s*h-i*o*h)+e[7]*(+t*o*h-t*l*d+n*a*d-r*a*h+r*l*u-n*o*u)+e[11]*(+t*l*c-t*s*h-n*a*c+i*a*h+n*s*u-i*l*u)+e[15]*(-r*s*u-t*o*c+t*s*d+r*a*c-i*a*d+i*o*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,r=e.elements,n=r[0],a=r[1],s=r[2],o=r[3],l=r[4],u=r[5],c=r[6],d=r[7],h=r[8],f=r[9],p=r[10],m=r[11],v=r[12],g=r[13],y=r[14],_=r[15],b=f*y*d-g*p*d+g*c*m-u*y*m-f*c*_+u*p*_,M=v*p*d-h*y*d-v*c*m+l*y*m+h*c*_-l*p*_,T=h*g*d-v*f*d+v*u*m-l*g*m-h*u*_+l*f*_,A=v*f*c-h*g*c-v*u*p+l*g*p+h*u*y-l*f*y,w=n*b+a*M+s*T+o*A;if(0===w){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var x=1/w;return i[0]=b*x,i[1]=(g*p*o-f*y*o-g*s*m+a*y*m+f*s*_-a*p*_)*x,i[2]=(u*y*o-g*c*o+g*s*d-a*y*d-u*s*_+a*c*_)*x,i[3]=(f*c*o-u*p*o-f*s*d+a*p*d+u*s*m-a*c*m)*x,i[4]=M*x,i[5]=(h*y*o-v*p*o+v*s*m-n*y*m-h*s*_+n*p*_)*x,i[6]=(v*c*o-l*y*o-v*s*d+n*y*d+l*s*_-n*c*_)*x,i[7]=(l*p*o-h*c*o+h*s*d-n*p*d-l*s*m+n*c*m)*x,i[8]=T*x,i[9]=(v*f*o-h*g*o-v*a*m+n*g*m+h*a*_-n*f*_)*x,i[10]=(l*g*o-v*u*o+v*a*d-n*g*d-l*a*_+n*u*_)*x,i[11]=(h*u*o-l*f*o-h*a*d+n*f*d+l*a*m-n*u*m)*x,i[12]=A*x,i[13]=(h*g*s-v*f*s+v*a*p-n*g*p-h*a*y+n*f*y)*x,i[14]=(v*u*s-l*g*s-v*a*c+n*g*c+l*a*y-n*u*y)*x,i[15]=(l*f*s-h*u*s+h*a*c-n*f*c-l*a*p+n*u*p)*x,this},scale:function(e){var t=this.elements,i=e.x,r=e.y,n=e.z;return t[0]*=i,t[4]*=r,t[8]*=n,t[1]*=i,t[5]*=r,t[9]*=n,t[2]*=i,t[6]*=r,t[10]*=n,t[3]*=i,t[7]*=r,t[11]*=n,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t),r=Math.sin(t),n=1-i,a=e.x,s=e.y,o=e.z,l=n*a,u=n*s;return this.set(l*a+i,l*s-r*o,l*o+r*s,0,l*s+r*o,u*s+i,u*o-r*a,0,l*o-r*s,u*o+r*a,n*o*o+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,i){var r=this.elements,n=t._x,a=t._y,s=t._z,o=t._w,l=n+n,u=a+a,c=s+s,d=n*l,h=n*u,f=n*c,p=a*u,m=a*c,v=s*c,g=o*l,y=o*u,_=o*c,b=i.x,M=i.y,T=i.z;return r[0]=(1-(p+v))*b,r[1]=(h+_)*b,r[2]=(f-y)*b,r[3]=0,r[4]=(h-_)*M,r[5]=(1-(d+v))*M,r[6]=(m+g)*M,r[7]=0,r[8]=(f+y)*T,r[9]=(m-g)*T,r[10]=(1-(d+p))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:(p=new S,m=new E,function(e,t,i){var r=this.elements,n=p.set(r[0],r[1],r[2]).length(),a=p.set(r[4],r[5],r[6]).length(),s=p.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),e.x=r[12],e.y=r[13],e.z=r[14],m.copy(this);var o=1/n,l=1/a,u=1/s;return m.elements[0]*=o,m.elements[1]*=o,m.elements[2]*=o,m.elements[4]*=l,m.elements[5]*=l,m.elements[6]*=l,m.elements[8]*=u,m.elements[9]*=u,m.elements[10]*=u,t.setFromRotationMatrix(m),i.x=n,i.y=a,i.z=s,this}),makePerspective:function(e,t,i,r,n,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,o=2*n/(t-e),l=2*n/(i-r),u=(t+e)/(t-e),c=(i+r)/(i-r),d=-(a+n)/(a-n),h=-2*a*n/(a-n);return s[0]=o,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=h,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(e,t,i,r,n,a){var s=this.elements,o=1/(t-e),l=1/(i-r),u=1/(a-n),c=(t+e)*o,d=(i+r)*l,h=(a+n)*u;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=-2*u,s[14]=-h,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(e){for(var t=this.elements,i=e.elements,r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<16;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}),Object.assign(x,{slerp:function(e,t,i,r){return i.copy(e).slerp(t,r)},slerpFlat:function(e,t,i,r,n,a,s){var o=i[r+0],l=i[r+1],u=i[r+2],c=i[r+3],d=n[a+0],h=n[a+1],f=n[a+2],p=n[a+3];if(c!==p||o!==d||l!==h||u!==f){var m=1-s,v=o*d+l*h+u*f+c*p,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,v*g);m=Math.sin(m*b)/_,s=Math.sin(s*b)/_}var M=s*g;if(o=o*m+d*M,l=l*m+h*M,u=u*m+f*M,c=c*m+p*M,m===1-s){var T=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=T,l*=T,u*=T,c*=T}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.defineProperties(x.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(x.prototype,{set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,r=e._y,n=e._z,a=e.order,s=Math.cos,o=Math.sin,l=s(i/2),u=s(r/2),c=s(n/2),d=o(i/2),h=o(r/2),f=o(n/2);return"XYZ"===a?(this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f):"YXZ"===a?(this._x=d*u*c+l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f):"ZXY"===a?(this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c-d*h*f):"ZYX"===a?(this._x=d*u*c-l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c+d*h*f):"YZX"===a?(this._x=d*u*c+l*h*f,this._y=l*h*c+d*u*f,this._z=l*u*f-d*h*c,this._w=l*u*c-d*h*f):"XZY"===a&&(this._x=d*u*c-l*h*f,this._y=l*h*c-d*u*f,this._z=l*u*f+d*h*c,this._w=l*u*c+d*h*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,i=e.elements,r=i[0],n=i[4],a=i[8],s=i[1],o=i[5],l=i[9],u=i[2],c=i[6],d=i[10],h=r+o+d;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(c-l)*t,this._y=(a-u)*t,this._z=(s-n)*t):r>o&&r>d?(t=2*Math.sqrt(1+r-o-d),this._w=(c-l)/t,this._x=.25*t,this._y=(n+s)/t,this._z=(a+u)/t):o>d?(t=2*Math.sqrt(1+o-r-d),this._w=(a-u)/t,this._x=(n+s)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+d-r-o),this._w=(s-n)/t,this._x=(a+u)/t,this._y=(l+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new S;return function(i,r){return void 0===t&&(t=new S),(e=i.dot(r)+1)<1e-6?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,r=e._y,n=e._z,a=e._w,s=t._x,o=t._y,l=t._z,u=t._w;return this._x=i*u+a*s+r*l-n*o,this._y=r*u+a*o+n*s-i*l,this._z=n*u+a*l+i*o-r*s,this._w=a*u-i*s-r*o-n*l,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,r=this._y,n=this._z,a=this._w,s=a*e._w+i*e._x+r*e._y+n*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=i,this._y=r,this._z=n,this;var o=Math.sqrt(1-s*s);if(Math.abs(o)<.001)return this._w=.5*(a+this._w),this._x=.5*(i+this._x),this._y=.5*(r+this._y),this._z=.5*(n+this._z),this;var l=Math.atan2(o,s),u=Math.sin((1-t)*l)/o,c=Math.sin(t*l)/o;return this._w=a*u+this._w*c,this._x=i*u+this._x*c,this._y=r*u+this._y*c,this._z=n*u+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(S.prototype,{isVector3:!0,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(_=new x,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_.setFromEuler(e))}),applyAxisAngle:function(){var e=new x;return function(t,i){return this.applyQuaternion(e.setFromAxisAngle(t,i))}}(),applyMatrix3:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*r,this.y=n[1]*t+n[4]*i+n[7]*r,this.z=n[2]*t+n[5]*i+n[8]*r,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements,a=1/(n[3]*t+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*r+n[12])*a,this.y=(n[1]*t+n[5]*i+n[9]*r+n[13])*a,this.z=(n[2]*t+n[6]*i+n[10]*r+n[14])*a,this},applyQuaternion:function(e){var t=this.x,i=this.y,r=this.z,n=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*r-s*i,u=o*i+s*t-n*r,c=o*r+n*i-a*t,d=-n*t-a*i-s*r;return this.x=l*o+d*-n+u*-s-c*-a,this.y=u*o+d*-a+c*-n-l*-s,this.z=c*o+d*-s+l*-a-u*-n,this},project:function(){var e=new E;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new E;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,r=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*r,this.y=n[1]*t+n[5]*i+n[9]*r,this.z=n[2]*t+n[6]*i+n[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new S,t=new S;return function(i,r){return e.set(i,i,i),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var i=e.x,r=e.y,n=e.z,a=t.x,s=t.y,o=t.z;return this.x=r*o-n*s,this.y=n*a-i*o,this.z=i*s-r*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new S;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new S;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(A.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(D.prototype,{isMatrix3:!0,set:function(e,t,i,r,n,a,s,o,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=s,u[3]=t,u[4]=n,u[5]=o,u[6]=i,u[7]=a,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new S;return function(t){for(var i=0,r=t.count;i<r;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix3(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,r=t.elements,n=this.elements,a=i[0],s=i[3],o=i[6],l=i[1],u=i[4],c=i[7],d=i[2],h=i[5],f=i[8],p=r[0],m=r[3],v=r[6],g=r[1],y=r[4],_=r[7],b=r[2],M=r[5],T=r[8];return n[0]=a*p+s*g+o*b,n[3]=a*m+s*y+o*M,n[6]=a*v+s*_+o*T,n[1]=l*p+u*g+c*b,n[4]=l*m+u*y+c*M,n[7]=l*v+u*_+c*T,n[2]=d*p+h*g+f*b,n[5]=d*m+h*y+f*M,n[8]=d*v+h*_+f*T,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],r=e[2],n=e[3],a=e[4],s=e[5],o=e[6],l=e[7],u=e[8];return t*a*u-t*s*l-i*n*u+i*s*o+r*n*l-r*a*o},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=e.elements,r=this.elements,n=i[0],a=i[1],s=i[2],o=i[3],l=i[4],u=i[5],c=i[6],d=i[7],h=i[8],f=h*l-u*d,p=u*c-h*o,m=d*o-l*c,v=n*f+a*p+s*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=f*y,r[1]=(s*d-h*a)*y,r[2]=(u*a-s*l)*y,r[3]=p*y,r[4]=(h*n-s*c)*y,r[5]=(s*o-u*n)*y,r[6]=m*y,r[7]=(a*c-d*n)*y,r[8]=(l*n-a*o)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,i,r,n,a,s){var o=Math.cos(n),l=Math.sin(n);this.set(i*o,i*l,-i*(o*a+l*s)+a+e,-r*l,r*o,-r*(-l*a+o*s)+s+t,0,0,1)},scale:function(e,t){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this},rotate:function(e){var t=Math.cos(e),i=Math.sin(e),r=this.elements,n=r[0],a=r[3],s=r[6],o=r[1],l=r[4],u=r[7];return r[0]=t*n+i*o,r[3]=t*a+i*l,r[6]=t*s+i*u,r[1]=-i*n+t*o,r[4]=-i*a+t*l,r[7]=-i*s+t*u,this},translate:function(e,t){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this},equals:function(e){for(var t=this.elements,i=e.elements,r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;i<9;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}});var I,j,L,N,C,O=0;function k(e,t,i,r,n,a,s,o,l,u){Object.defineProperty(this,"id",{value:O++}),this.uuid=A.generateUUID(),this.name="",this.image=void 0!==e?e:k.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:k.DEFAULT_MAPPING,this.wrapS=void 0!==i?i:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==n?n:1006,this.minFilter=void 0!==a?a:1008,this.anisotropy=void 0!==l?l:1,this.format=void 0!==s?s:1023,this.type=void 0!==o?o:1009,this.offset=new w(0,0),this.repeat=new w(1,1),this.center=new w(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new D,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==u?u:3e3,this.version=0,this.onUpdate=null}function P(e,t,i,r){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==r?r:1}function R(e,t,i){this.width=e,this.height=t,this.scissor=new P(0,0,e,t),this.scissorTest=!1,this.viewport=new P(0,0,e,t),void 0===(i=i||{}).minFilter&&(i.minFilter=1006),this.texture=new k(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.generateMipmaps=void 0===i.generateMipmaps||i.generateMipmaps,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0===i.stencilBuffer||i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function z(e,t,i){R.call(this,e,t,i),this.activeCubeFace=0,this.activeMipMapLevel=0}function U(e,t,i,r,n,a,s,o,l,u,c,d){k.call(this,null,a,s,o,l,u,r,n,c,d),this.image={data:e,width:t,height:i},this.magFilter=void 0!==l?l:1003,this.minFilter=void 0!==u?u:1003,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function B(e,t){this.min=void 0!==e?e:new S(1/0,1/0,1/0),this.max=void 0!==t?t:new S(-1/0,-1/0,-1/0)}function F(e,t){this.center=void 0!==e?e:new S,this.radius=void 0!==t?t:0}function V(e,t){this.normal=void 0!==e?e:new S(1,0,0),this.constant=void 0!==t?t:0}function G(e,t,i,r,n,a){this.planes=[void 0!==e?e:new V,void 0!==t?t:new V,void 0!==i?i:new V,void 0!==r?r:new V,void 0!==n?n:new V,void 0!==a?a:new V]}k.DEFAULT_IMAGE=void 0,k.DEFAULT_MAPPING=300,k.prototype=Object.assign(Object.create(d.prototype),{constructor:k,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var i=void 0===e||"string"==typeof e;if(!i&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=A.generateUUID()),i||void 0!==e.images[n.uuid]||(e.images[n.uuid]={uuid:n.uuid,url:function(e){var i;if(e instanceof HTMLCanvasElement)i=e;else{(i=t.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,i.height=e.height;var r=i.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height)}return i.width>2048||i.height>2048?i.toDataURL("image/jpeg",.6):i.toDataURL("image/png")}(n)}),r.image=n.uuid}return i||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(k.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(P.prototype,{isVector4:!0,set:function(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,r=this.z,n=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*n,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*n,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*n,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*n,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,i,r,n,a=e.elements,s=a[0],o=a[4],l=a[8],u=a[1],c=a[5],d=a[9],h=a[2],f=a[6],p=a[10];if(Math.abs(o-u)<.01&&Math.abs(l-h)<.01&&Math.abs(d-f)<.01){if(Math.abs(o+u)<.1&&Math.abs(l+h)<.1&&Math.abs(d+f)<.1&&Math.abs(s+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(s+1)/2,v=(c+1)/2,g=(p+1)/2,y=(o+u)/4,_=(l+h)/4,b=(d+f)/4;return m>v&&m>g?m<.01?(i=0,r=.707106781,n=.707106781):(r=y/(i=Math.sqrt(m)),n=_/i):v>g?v<.01?(i=.707106781,r=0,n=.707106781):(i=y/(r=Math.sqrt(v)),n=b/r):g<.01?(i=.707106781,r=.707106781,n=0):(i=_/(n=Math.sqrt(g)),r=b/n),this.set(i,r,n,t),this}var M=Math.sqrt((f-d)*(f-d)+(l-h)*(l-h)+(u-o)*(u-o));return Math.abs(M)<.001&&(M=1),this.x=(f-d)/M,this.y=(l-h)/M,this.z=(u-o)/M,this.w=Math.acos((s+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(i,r){return void 0===e&&(e=new P,t=new P),e.set(i,i,i,i),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),R.prototype=Object.assign(Object.create(d.prototype),{constructor:R,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),z.prototype=Object.create(R.prototype),z.prototype.constructor=z,z.prototype.isWebGLRenderTargetCube=!0,U.prototype=Object.create(k.prototype),U.prototype.constructor=U,U.prototype.isDataTexture=!0,Object.assign(B.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,i=1/0,r=1/0,n=-1/0,a=-1/0,s=-1/0,o=0,l=e.length;o<l;o+=3){var u=e[o],c=e[o+1],d=e[o+2];u<t&&(t=u),c<i&&(i=c),d<r&&(r=d),u>n&&(n=u),c>a&&(a=c),d>s&&(s=d)}return this.min.set(t,i,r),this.max.set(n,a,s),this},setFromBufferAttribute:function(e){for(var t=1/0,i=1/0,r=1/0,n=-1/0,a=-1/0,s=-1/0,o=0,l=e.count;o<l;o++){var u=e.getX(o),c=e.getY(o),d=e.getZ(o);u<t&&(t=u),c<i&&(i=c),d<r&&(r=d),u>n&&(n=u),c>a&&(a=c),d>s&&(s=d)}return this.min.set(t,i,r),this.max.set(n,a,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new S;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new S),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new S),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,i,r=new S;function n(n){var a=n.geometry;if(void 0!==a)if(a.isGeometry){var s=a.vertices;for(t=0,i=s.length;t<i;t++)r.copy(s[t]),r.applyMatrix4(n.matrixWorld),e.expandByPoint(r)}else if(a.isBufferGeometry){var o=a.attributes.position;if(void 0!==o)for(t=0,i=o.count;t<i;t++)r.fromBufferAttribute(o,t).applyMatrix4(n.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(n),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new S),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(I=new S,function(e){return this.clampPoint(e.center,I),I.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=e.constant&&i>=e.constant},intersectsTriangle:function(){var e=new S,t=new S,i=new S,r=new S,n=new S,a=new S,s=new S,o=new S,l=new S,u=new S;function c(r){var n,a;for(n=0,a=r.length-3;n<=a;n+=3){s.fromArray(r,n);var o=l.x*Math.abs(s.x)+l.y*Math.abs(s.y)+l.z*Math.abs(s.z),u=e.dot(s),c=t.dot(s),d=i.dot(s);if(Math.max(-Math.max(u,c,d),Math.min(u,c,d))>o)return!1}return!0}return function(s){if(this.isEmpty())return!1;this.getCenter(o),l.subVectors(this.max,o),e.subVectors(s.a,o),t.subVectors(s.b,o),i.subVectors(s.c,o),r.subVectors(t,e),n.subVectors(i,t),a.subVectors(e,i);var d=[0,-r.z,r.y,0,-n.z,n.y,0,-a.z,a.y,r.z,0,-r.x,n.z,0,-n.x,a.z,0,-a.x,-r.y,r.x,0,-n.y,n.x,0,-a.y,a.x,0];return!!c(d)&&(!!c(d=[1,0,0,0,1,0,0,0,1])&&(u.crossVectors(r,n),c(d=[u.x,u.y,u.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new S),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new S;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new S;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new F),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){if(this.isEmpty())return this;var t=e.elements,i=t[0]*this.min.x,r=t[1]*this.min.x,n=t[2]*this.min.x,a=t[0]*this.max.x,s=t[1]*this.max.x,o=t[2]*this.max.x,l=t[4]*this.min.y,u=t[5]*this.min.y,c=t[6]*this.min.y,d=t[4]*this.max.y,h=t[5]*this.max.y,f=t[6]*this.max.y,p=t[8]*this.min.z,m=t[9]*this.min.z,v=t[10]*this.min.z,g=t[8]*this.max.z,y=t[9]*this.max.z,_=t[10]*this.max.z;return this.min.x=Math.min(i,a)+Math.min(l,d)+Math.min(p,g)+t[12],this.min.y=Math.min(r,s)+Math.min(u,h)+Math.min(m,y)+t[13],this.min.z=Math.min(n,o)+Math.min(c,f)+Math.min(v,_)+t[14],this.max.x=Math.max(i,a)+Math.max(l,d)+Math.max(p,g)+t[12],this.max.y=Math.max(r,s)+Math.max(u,h)+Math.max(m,y)+t[13],this.max.z=Math.max(n,o)+Math.max(c,f)+Math.max(v,_)+t[14],this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(F.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(j=new B,function(e,t){var i=this.center;void 0!==t?i.copy(t):j.setFromPoints(e).getCenter(i);for(var r=0,n=0,a=e.length;n<a;n++)r=Math.max(r,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new S),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new B),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(V.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new S,t=new S;return function(i,r,n){var a=e.subVectors(n,r).cross(t.subVectors(i,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new S),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new S;return function(t,i){void 0===i&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new S);var r=t.delta(e),n=this.normal.dot(r);if(0===n)return 0===this.distanceToPoint(t.start)?i.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/n;return a<0||a>1?void 0:i.copy(r).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new S),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new S,t=new D;return function(i,r){var n=r||t.getNormalMatrix(i),a=this.coplanarPoint(e).applyMatrix4(i),s=this.normal.applyMatrix3(n).normalize();return this.constant=-a.dot(s),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(G.prototype,{set:function(e,t,i,r,n,a){var s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(r),s[4].copy(n),s[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,i=0;i<6;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements,r=i[0],n=i[1],a=i[2],s=i[3],o=i[4],l=i[5],u=i[6],c=i[7],d=i[8],h=i[9],f=i[10],p=i[11],m=i[12],v=i[13],g=i[14],y=i[15];return t[0].setComponents(s-r,c-o,p-d,y-m).normalize(),t[1].setComponents(s+r,c+o,p+d,y+m).normalize(),t[2].setComponents(s+n,c+l,p+h,y+v).normalize(),t[3].setComponents(s-n,c-l,p-h,y-v).normalize(),t[4].setComponents(s-a,c-u,p-f,y-g).normalize(),t[5].setComponents(s+a,c+u,p+f,y+g).normalize(),this},intersectsObject:(C=new F,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),C.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(C)}),intersectsSprite:function(){var e=new F;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,i=e.center,r=-e.radius,n=0;n<6;n++){if(t[n].distanceToPoint(i)<r)return!1}return!0},intersectsBox:(L=new S,N=new S,function(e){for(var t=this.planes,i=0;i<6;i++){var r=t[i];L.x=r.normal.x>0?e.min.x:e.max.x,N.x=r.normal.x>0?e.max.x:e.min.x,L.y=r.normal.y>0?e.min.y:e.max.y,N.y=r.normal.y>0?e.max.y:e.min.y,L.z=r.normal.z>0?e.min.z:e.max.z,N.z=r.normal.z>0?e.max.z:e.min.z;var n=r.distanceToPoint(L),a=r.distanceToPoint(N);if(n<0&&a<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}});var H,Q={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},Y={merge:function(e){for(var t={},i=0;i<e.length;i++){var r=this.clone(e[i]);for(var n in r)t[n]=r[n]}return t},clone:function(e){var t={};for(var i in e)for(var r in t[i]={},e[i]){var n=e[i][r];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?t[i][r]=n.clone():Array.isArray(n)?t[i][r]=n.slice():t[i][r]=n}return t}},W={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function q(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}Object.assign(q.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(){function e(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}return function(t,i,r){if(t=A.euclideanModulo(t,1),i=A.clamp(i,0,1),r=A.clamp(r,0,1),0===i)this.r=this.g=this.b=r;else{var n=r<=.5?r*(1+i):r+i-r*i,a=2*r-n;this.r=e(a,n,t+1/3),this.g=e(a,n,t),this.b=e(a,n,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,n=i[1],a=i[2];switch(n){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var s=parseFloat(r[1])/360,o=parseInt(r[2],10)/100,l=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(s,o,l)}}}else if(i=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,c=(u=i[1]).length;if(3===c)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=W[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,i,r=this.r,n=this.g,a=this.b,s=Math.max(r,n,a),o=Math.min(r,n,a),l=(o+s)/2;if(o===s)t=0,i=0;else{var u=s-o;switch(i=l<=.5?u/(s+o):u/(2-s-o),s){case r:t=(n-a)/u+(n<a?6:0);break;case n:t=(a-r)/u+2;break;case a:t=(r-n)/u+4}t/=6}return e.h=t,e.s=i,e.l=l,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(H={},function(e,t,i){return this.getHSL(H),H.h+=e,H.s+=t,H.l+=i,this.setHSL(H.h,H.s,H.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var X,Z={common:{diffuse:{value:new q(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new D},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new w(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new q(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new q(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new D}}},K={basic:{uniforms:Y.merge([Z.common,Z.specularmap,Z.envmap,Z.aomap,Z.lightmap,Z.fog]),vertexShader:Q.meshbasic_vert,fragmentShader:Q.meshbasic_frag},lambert:{uniforms:Y.merge([Z.common,Z.specularmap,Z.envmap,Z.aomap,Z.lightmap,Z.emissivemap,Z.fog,Z.lights,{emissive:{value:new q(0)}}]),vertexShader:Q.meshlambert_vert,fragmentShader:Q.meshlambert_frag},phong:{uniforms:Y.merge([Z.common,Z.specularmap,Z.envmap,Z.aomap,Z.lightmap,Z.emissivemap,Z.bumpmap,Z.normalmap,Z.displacementmap,Z.gradientmap,Z.fog,Z.lights,{emissive:{value:new q(0)},specular:{value:new q(1118481)},shininess:{value:30}}]),vertexShader:Q.meshphong_vert,fragmentShader:Q.meshphong_frag},standard:{uniforms:Y.merge([Z.common,Z.envmap,Z.aomap,Z.lightmap,Z.emissivemap,Z.bumpmap,Z.normalmap,Z.displacementmap,Z.roughnessmap,Z.metalnessmap,Z.fog,Z.lights,{emissive:{value:new q(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Q.meshphysical_vert,fragmentShader:Q.meshphysical_frag},points:{uniforms:Y.merge([Z.points,Z.fog]),vertexShader:Q.points_vert,fragmentShader:Q.points_frag},dashed:{uniforms:Y.merge([Z.common,Z.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Q.linedashed_vert,fragmentShader:Q.linedashed_frag},depth:{uniforms:Y.merge([Z.common,Z.displacementmap]),vertexShader:Q.depth_vert,fragmentShader:Q.depth_frag},normal:{uniforms:Y.merge([Z.common,Z.bumpmap,Z.normalmap,Z.displacementmap,{opacity:{value:1}}]),vertexShader:Q.normal_vert,fragmentShader:Q.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Q.cube_vert,fragmentShader:Q.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Q.equirect_vert,fragmentShader:Q.equirect_frag},distanceRGBA:{uniforms:Y.merge([Z.common,Z.displacementmap,{referencePosition:{value:new S},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Q.distanceRGBA_vert,fragmentShader:Q.distanceRGBA_frag},shadow:{uniforms:Y.merge([Z.lights,Z.fog,{color:{value:new q(0)},opacity:{value:1}}]),vertexShader:Q.shadow_vert,fragmentShader:Q.shadow_frag}};function J(){var e=null,t=!1,i=null;function r(n,a){!1!==t&&(i(n,a),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==i&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function $(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);var r=t.get(i);r&&(e.deleteBuffer(r.buffer),t.delete(i))},update:function(i,r){i.isInterleavedBufferAttribute&&(i=i.data);var n=t.get(i);void 0===n?t.set(i,function(t,i){var r=t.array,n=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,a=e.createBuffer();e.bindBuffer(i,a),e.bufferData(i,r,n),t.onUploadCallback();var s=e.FLOAT;return r instanceof Float32Array?s=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?s=e.UNSIGNED_SHORT:r instanceof Int16Array?s=e.SHORT:r instanceof Uint32Array?s=e.UNSIGNED_INT:r instanceof Int32Array?s=e.INT:r instanceof Int8Array?s=e.BYTE:r instanceof Uint8Array&&(s=e.UNSIGNED_BYTE),{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(i,r)):n.version<i.version&&(!function(t,i,r){var n=i.array,a=i.updateRange;e.bindBuffer(r,t),!1===i.dynamic?e.bufferData(r,n,e.STATIC_DRAW):-1===a.count?e.bufferSubData(r,0,n):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,a.offset*n.BYTES_PER_ELEMENT,n.subarray(a.offset,a.offset+a.count)),a.count=-1)}(n.buffer,i,r),n.version=i.version)}}}function ee(e,t,i,r){this._x=e||0,this._y=t||0,this._z=i||0,this._order=r||ee.DefaultOrder}function te(){this.mask=1}K.physical={uniforms:Y.merge([K.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Q.meshphysical_vert,fragmentShader:Q.meshphysical_frag},ee.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ee.DefaultOrder="XYZ",Object.defineProperties(ee.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(ee.prototype,{isEuler:!0,set:function(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var r=A.clamp,n=e.elements,a=n[0],s=n[4],o=n[8],l=n[1],u=n[5],c=n[9],d=n[2],h=n[6],f=n[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-s,a)):(this._x=Math.atan2(h,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(h,f),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-s,u))):"YZX"===t?(this._z=Math.asin(r(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(o,f))):"XZY"===t?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,a)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new E;return function(t,i,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,i,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(X=new x,function(e){return X.setFromEuler(this),this.setFromQuaternion(X,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new S(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(te.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var ie,re,ne,ae,se=0;function oe(){Object.defineProperty(this,"id",{value:se++}),this.uuid=A.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=oe.DefaultUp.clone();var e=new S,t=new ee,i=new x,r=new S(1,1,1);t.onChange(function(){i.setFromEuler(t,!1)}),i.onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new E},normalMatrix:{value:new D}}),this.matrix=new E,this.matrixWorld=new E,this.matrixAutoUpdate=oe.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new te,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function le(){oe.call(this),this.type="Camera",this.matrixWorldInverse=new E,this.projectionMatrix=new E}function ue(e,t,i,r,n,a){le.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=void 0!==n?n:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function ce(e,t,i,r,n,a){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new S,this.vertexNormals=Array.isArray(r)?r:[],this.color=n&&n.isColor?n:new q,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0!==a?a:0}oe.DefaultUp=new S(0,1,0),oe.DefaultMatrixAutoUpdate=!0,oe.prototype=Object.assign(Object.create(d.prototype),{constructor:oe,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(ae=new x,function(e,t){return ae.setFromAxisAngle(e,t),this.quaternion.multiply(ae),this}),rotateOnWorldAxis:function(){var e=new x;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new S(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new S(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new S(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new S;return function(t,i){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translateX:function(){var e=new S(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new S(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new S(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(ne=new E,function(e){return e.applyMatrix4(ne.getInverse(this.matrixWorld))}),lookAt:function(){var e=new E,t=new S;return function(i,r,n){i.isVector3?t.copy(i):t.set(i,r,n),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var i=this.children.indexOf(e);return-1!==i&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(i,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,r=this.children.length;i<r;i++){var n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new S),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(ie=new S,re=new S,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new x),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ie,e,re),e}),getWorldScale:function(){var e=new S,t=new x;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new S),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new x;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new S),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,r=t.length;i<r;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function n(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),void 0!==this.geometry){r.geometry=n(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var o=0,l=s.length;o<l;o++){var u=s[o];n(e.shapes,u)}else n(e.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(o=0,l=this.material.length;o<l;o++)c.push(n(e.materials,this.material[o]));r.material=c}else r.material=n(e.materials,this.material);if(this.children.length>0){r.children=[];for(o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(t){var d=m(e.geometries),h=m(e.materials),f=m(e.textures),p=m(e.images);s=m(e.shapes);d.length>0&&(i.geometries=d),h.length>0&&(i.materials=h),f.length>0&&(i.textures=f),p.length>0&&(i.images=p),s.length>0&&(i.shapes=s)}return i.object=r,i;function m(e){var t=[];for(var i in e){var r=e[i];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var i=0;i<e.children.length;i++){var r=e.children[i];this.add(r.clone())}return this}}),le.prototype=Object.assign(Object.create(oe.prototype),{constructor:le,isCamera:!0,copy:function(e,t){return oe.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new x;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new S),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){oe.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ue.prototype=Object.assign(Object.create(le.prototype),{constructor:ue,isOrthographicCamera:!0,copy:function(e,t){return le.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,r,n,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2,n=i-e,a=i+e,s=r+t,o=r-t;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),u=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;a=(n+=c*(this.view.offsetX/l))+c*(this.view.width/l),o=(s-=d*(this.view.offsetY/u))-d*(this.view.height/u)}this.projectionMatrix.makeOrthographic(n,a,s,o,this.near,this.far)},toJSON:function(e){var t=oe.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(ce.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var de,he,fe=0;function pe(){Object.defineProperty(this,"id",{value:fe+=2}),this.uuid=A.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function me(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ve(e,t,i){me.call(this,new Int8Array(e),t,i)}function ge(e,t,i){me.call(this,new Uint8Array(e),t,i)}function ye(e,t,i){me.call(this,new Uint8ClampedArray(e),t,i)}function _e(e,t,i){me.call(this,new Int16Array(e),t,i)}function be(e,t,i){me.call(this,new Uint16Array(e),t,i)}function Me(e,t,i){me.call(this,new Int32Array(e),t,i)}function Te(e,t,i){me.call(this,new Uint32Array(e),t,i)}function Ae(e,t,i){me.call(this,new Float32Array(e),t,i)}function we(e,t,i){me.call(this,new Float64Array(e),t,i)}function Ee(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function xe(e){if(0===e.length)return-1/0;for(var t=e[0],i=1,r=e.length;i<r;++i)e[i]>t&&(t=e[i]);return t}pe.prototype=Object.assign(Object.create(d.prototype),{constructor:pe,isGeometry:!0,applyMatrix:function(e){for(var t=(new D).getNormalMatrix(e),i=0,r=this.vertices.length;i<r;i++){this.vertices[i].applyMatrix4(e)}for(i=0,r=this.faces.length;i<r;i++){var n=this.faces[i];n.normal.applyMatrix3(t).normalize();for(var a=0,s=n.vertexNormals.length;a<s;a++)n.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new E;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new E;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new E;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new E;return function(t,i,r){return e.makeTranslation(t,i,r),this.applyMatrix(e),this}}(),scale:function(){var e=new E;return function(t,i,r){return e.makeScale(t,i,r),this.applyMatrix(e),this}}(),lookAt:(he=new oe,function(e){he.lookAt(e),he.updateMatrix(),this.applyMatrix(he.matrix)}),fromBufferGeometry:function(e){var t=this,i=null!==e.index?e.index.array:void 0,r=e.attributes,n=r.position.array,a=void 0!==r.normal?r.normal.array:void 0,s=void 0!==r.color?r.color.array:void 0,o=void 0!==r.uv?r.uv.array:void 0,l=void 0!==r.uv2?r.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=[],c=[],d=[],h=0,f=0;h<n.length;h+=3,f+=2)t.vertices.push(new S(n[h],n[h+1],n[h+2])),void 0!==a&&u.push(new S(a[h],a[h+1],a[h+2])),void 0!==s&&t.colors.push(new q(s[h],s[h+1],s[h+2])),void 0!==o&&c.push(new w(o[f],o[f+1])),void 0!==l&&d.push(new w(l[f],l[f+1]));function p(e,i,r,n){var h=new ce(e,i,r,void 0!==a?[u[e].clone(),u[i].clone(),u[r].clone()]:[],void 0!==s?[t.colors[e].clone(),t.colors[i].clone(),t.colors[r].clone()]:[],n);t.faces.push(h),void 0!==o&&t.faceVertexUvs[0].push([c[e].clone(),c[i].clone(),c[r].clone()]),void 0!==l&&t.faceVertexUvs[1].push([d[e].clone(),d[i].clone(),d[r].clone()])}var m=e.groups;if(m.length>0)for(h=0;h<m.length;h++)for(var v=m[h],g=v.start,y=(f=g,g+v.count);f<y;f+=3)void 0!==i?p(i[f],i[f+1],i[f+2],v.materialIndex):p(f,f+1,f+2,v.materialIndex);else if(void 0!==i)for(h=0;h<i.length;h+=3)p(i[h],i[h+1],i[h+2]);else for(h=0;h<n.length/3;h+=3)p(h,h+1,h+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(de=new S,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(de).negate(),this.translate(de.x,de.y,de.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,i=0===t?1:1/t,r=new E;return r.set(i,0,0,-i*e.x,0,i,0,-i*e.y,0,0,i,-i*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new S,t=new S,i=0,r=this.faces.length;i<r;i++){var n=this.faces[i],a=this.vertices[n.a],s=this.vertices[n.b],o=this.vertices[n.c];e.subVectors(o,s),t.subVectors(a,s),e.cross(t),e.normalize(),n.normal.copy(e)}},computeVertexNormals:function(e){var t,i,r,n,a,s;for(void 0===e&&(e=!0),s=new Array(this.vertices.length),t=0,i=this.vertices.length;t<i;t++)s[t]=new S;if(e){var o,l,u,c=new S,d=new S;for(r=0,n=this.faces.length;r<n;r++)a=this.faces[r],o=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],c.subVectors(u,l),d.subVectors(o,l),c.cross(d),s[a.a].add(c),s[a.b].add(c),s[a.c].add(c)}else for(this.computeFaceNormals(),r=0,n=this.faces.length;r<n;r++)s[(a=this.faces[r]).a].add(a.normal),s[a.b].add(a.normal),s[a.c].add(a.normal);for(t=0,i=this.vertices.length;t<i;t++)s[t].normalize();for(r=0,n=this.faces.length;r<n;r++){var h=(a=this.faces[r]).vertexNormals;3===h.length?(h[0].copy(s[a.a]),h[1].copy(s[a.b]),h[2].copy(s[a.c])):(h[0]=s[a.a].clone(),h[1]=s[a.b].clone(),h[2]=s[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,i;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(i=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(i.normal),r[1].copy(i.normal),r[2].copy(i.normal)):(r[0]=i.normal.clone(),r[1]=i.normal.clone(),r[2]=i.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i,r,n;for(i=0,r=this.faces.length;i<r;i++)for((n=this.faces[i]).__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),e=0,t=n.vertexNormals.length;e<t;e++)n.__originalVertexNormals[e]?n.__originalVertexNormals[e].copy(n.vertexNormals[e]):n.__originalVertexNormals[e]=n.vertexNormals[e].clone();var a=new pe;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var s=this.morphNormals[e].faceNormals,o=this.morphNormals[e].vertexNormals;for(i=0,r=this.faces.length;i<r;i++)l=new S,u={a:new S,b:new S,c:new S},s.push(l),o.push(u)}var l,u,c=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),i=0,r=this.faces.length;i<r;i++)n=this.faces[i],l=c.faceNormals[i],u=c.vertexNormals[i],l.copy(n.normal),u.a.copy(n.vertexNormals[0]),u.b.copy(n.vertexNormals[1]),u.c.copy(n.vertexNormals[2])}for(i=0,r=this.faces.length;i<r;i++)(n=this.faces[i]).normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new B),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new F),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e&&e.isGeometry){var r,n=this.vertices.length,a=this.vertices,s=e.vertices,o=this.faces,l=e.faces,u=this.faceVertexUvs[0],c=e.faceVertexUvs[0],d=this.colors,h=e.colors;void 0===i&&(i=0),void 0!==t&&(r=(new D).getNormalMatrix(t));for(var f=0,p=s.length;f<p;f++){var m=s[f].clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(f=0,p=h.length;f<p;f++)d.push(h[f].clone());for(f=0,p=l.length;f<p;f++){var v,g,y,_=l[f],b=_.vertexNormals,M=_.vertexColors;(v=new ce(_.a+n,_.b+n,_.c+n)).normal.copy(_.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var T=0,A=b.length;T<A;T++)g=b[T].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);v.color.copy(_.color);for(T=0,A=M.length;T<A;T++)y=M[T],v.vertexColors.push(y.clone());v.materialIndex=_.materialIndex+i,o.push(v)}for(f=0,p=c.length;f<p;f++){var w=c[f],E=[];if(void 0!==w){for(T=0,A=w.length;T<A;T++)E.push(w[T].clone());u.push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,i,r,n,a,s,o,l={},u=[],c=[],d=Math.pow(10,4);for(i=0,r=this.vertices.length;i<r;i++)e=this.vertices[i],void 0===l[t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d)]?(l[t]=i,u.push(this.vertices[i]),c[i]=u.length-1):c[i]=c[l[t]];var h=[];for(i=0,r=this.faces.length;i<r;i++){(n=this.faces[i]).a=c[n.a],n.b=c[n.b],n.c=c[n.c],a=[n.a,n.b,n.c];for(var f=0;f<3;f++)if(a[f]===a[(f+1)%3]){h.push(i);break}}for(i=h.length-1;i>=0;i--){var p=h[i];for(this.faces.splice(p,1),s=0,o=this.faceVertexUvs.length;s<o;s++)this.faceVertexUvs[s].splice(p,1)}var m=this.vertices.length-u.length;return this.vertices=u,m},setFromPoints:function(e){this.vertices=[];for(var t=0,i=e.length;t<i;t++){var r=e[t];this.vertices.push(new S(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,i=0;i<t;i++)e[i]._id=i;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,n,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===t&&(r=[]),s&&s.length===t&&(n=[]);for(i=0;i<t;i++){var o=e[i]._id;r&&r.push(a[o]),n&&n.push(s[o])}r&&(this.faceVertexUvs[0]=r),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e}for(var r=[],n=0;n<this.vertices.length;n++){var a=this.vertices[n];r.push(a.x,a.y,a.z)}var s=[],o=[],l={},u=[],c={},d=[],h={};for(n=0;n<this.faces.length;n++){var f=this.faces[n],p=void 0!==this.faceVertexUvs[0][n],m=f.normal.length()>0,v=f.vertexNormals.length>0,g=1!==f.color.r||1!==f.color.g||1!==f.color.b,y=f.vertexColors.length>0,_=0;if(_=A(_,0,0),_=A(_,1,!0),_=A(_,2,!1),_=A(_,3,p),_=A(_,4,m),_=A(_,5,v),_=A(_,6,g),_=A(_,7,y),s.push(_),s.push(f.a,f.b,f.c),s.push(f.materialIndex),p){var b=this.faceVertexUvs[0][n];s.push(x(b[0]),x(b[1]),x(b[2]))}if(m&&s.push(w(f.normal)),v){var M=f.vertexNormals;s.push(w(M[0]),w(M[1]),w(M[2]))}if(g&&s.push(E(f.color)),y){var T=f.vertexColors;s.push(E(T[0]),E(T[1]),E(T[2]))}}function A(e,t,i){return i?e|1<<t:e&~(1<<t)}function w(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==l[t]?l[t]:(l[t]=o.length/3,o.push(e.x,e.y,e.z),l[t])}function E(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=u.length,u.push(e.getHex()),c[t])}function x(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]?h[t]:(h[t]=d.length/2,d.push(e.x,e.y),h[t])}return e.data={},e.data.vertices=r,e.data.normals=o,u.length>0&&(e.data.colors=u),d.length>0&&(e.data.uvs=[d]),e.data.faces=s,e},clone:function(){return(new pe).copy(this)},copy:function(e){var t,i,r,n,a,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var o=e.vertices;for(t=0,i=o.length;t<i;t++)this.vertices.push(o[t].clone());var l=e.colors;for(t=0,i=l.length;t<i;t++)this.colors.push(l[t].clone());var u=e.faces;for(t=0,i=u.length;t<i;t++)this.faces.push(u[t].clone());for(t=0,i=e.faceVertexUvs.length;t<i;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,n=c.length;r<n;r++){var d=c[r],h=[];for(a=0,s=d.length;a<s;a++){var f=d[a];h.push(f.clone())}this.faceVertexUvs[t].push(h)}}var p=e.morphTargets;for(t=0,i=p.length;t<i;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],r=0,n=p[t].vertices.length;r<n;r++)m.vertices.push(p[t].vertices[r].clone());if(void 0!==p[t].normals)for(m.normals=[],r=0,n=p[t].normals.length;r<n;r++)m.normals.push(p[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,i=v.length;t<i;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,n=v[t].vertexNormals.length;r<n;r++){var y=v[t].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),g.vertexNormals.push(_)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,n=v[t].faceNormals.length;r<n;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var b=e.skinWeights;for(t=0,i=b.length;t<i;t++)this.skinWeights.push(b[t].clone());var M=e.skinIndices;for(t=0,i=M.length;t<i;t++)this.skinIndices.push(M[t].clone());var T=e.lineDistances;for(t=0,i=T.length;t<i;t++)this.lineDistances.push(T[t]);var A=e.boundingBox;null!==A&&(this.boundingBox=A.clone());var w=e.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(me.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(me.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var r=0,n=this.itemSize;r<n;r++)this.array[e+r]=t.array[i+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new q),t[i++]=a.r,t[i++]=a.g,t[i++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new w),t[i++]=a.x,t[i++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new S),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,r=0,n=e.length;r<n;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new P),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z,t[i++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this},setXYZW:function(e,t,i,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=n,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),ve.prototype=Object.create(me.prototype),ve.prototype.constructor=ve,ge.prototype=Object.create(me.prototype),ge.prototype.constructor=ge,ye.prototype=Object.create(me.prototype),ye.prototype.constructor=ye,_e.prototype=Object.create(me.prototype),_e.prototype.constructor=_e,be.prototype=Object.create(me.prototype),be.prototype.constructor=be,Me.prototype=Object.create(me.prototype),Me.prototype.constructor=Me,Te.prototype=Object.create(me.prototype),Te.prototype.constructor=Te,Ae.prototype=Object.create(me.prototype),Ae.prototype.constructor=Ae,we.prototype=Object.create(me.prototype),we.prototype.constructor=we,Object.assign(Ee.prototype,{computeGroups:function(e){for(var t,i=[],r=void 0,n=e.faces,a=0;a<n.length;a++){var s=n[a];s.materialIndex!==r&&(r=s.materialIndex,void 0!==t&&(t.count=3*a-t.start,i.push(t)),t={start:3*a,materialIndex:r})}void 0!==t&&(t.count=3*a-t.start,i.push(t)),this.groups=i},fromGeometry:function(e){var t,i=e.faces,r=e.vertices,n=e.faceVertexUvs,a=n[0]&&n[0].length>0,s=n[1]&&n[1].length>0,o=e.morphTargets,l=o.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]=[];this.morphTargets.position=t}var c,d=e.morphNormals,h=d.length;if(h>0){c=[];for(u=0;u<h;u++)c[u]=[];this.morphTargets.normal=c}var f=e.skinIndices,p=e.skinWeights,m=f.length===r.length,v=p.length===r.length;0===i.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<i.length;u++){var g=i[u];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=g.normal;this.normals.push(_,_,_)}var b,M=g.vertexColors;if(3===M.length)this.colors.push(M[0],M[1],M[2]);else{var T=g.color;this.colors.push(T,T,T)}if(!0===a)void 0!==(b=n[0][u])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new w,new w,new w));if(!0===s)void 0!==(b=n[1][u])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new w,new w,new w));for(var A=0;A<l;A++){var E=o[A].vertices;t[A].push(E[g.a],E[g.b],E[g.c])}for(A=0;A<h;A++){var x=d[A].vertexNormals[u];c[A].push(x.a,x.b,x.c)}m&&this.skinIndices.push(f[g.a],f[g.b],f[g.c]),v&&this.skinWeights.push(p[g.a],p[g.b],p[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Se=1;function De(){Object.defineProperty(this,"id",{value:Se+=2}),this.uuid=A.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Ie(e,t,i,r,n,a){pe.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a},this.fromBufferGeometry(new je(e,t,i,r,n,a)),this.mergeVertices()}function je(e,t,i,r,n,a){De.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:n,depthSegments:a};var s=this;e=e||1,t=t||1,i=i||1,r=Math.floor(r)||1,n=Math.floor(n)||1,a=Math.floor(a)||1;var o=[],l=[],u=[],c=[],d=0,h=0;function f(e,t,i,r,n,a,f,p,m,v,g){var y,_,b=a/m,M=f/v,T=a/2,A=f/2,w=p/2,E=m+1,x=v+1,D=0,I=0,j=new S;for(_=0;_<x;_++){var L=_*M-A;for(y=0;y<E;y++){var N=y*b-T;j[e]=N*r,j[t]=L*n,j[i]=w,l.push(j.x,j.y,j.z),j[e]=0,j[t]=0,j[i]=p>0?1:-1,u.push(j.x,j.y,j.z),c.push(y/m),c.push(1-_/v),D+=1}}for(_=0;_<v;_++)for(y=0;y<m;y++){var C=d+y+E*_,O=d+y+E*(_+1),k=d+(y+1)+E*(_+1),P=d+(y+1)+E*_;o.push(C,O,P),o.push(O,k,P),I+=6}s.addGroup(h,I,g),h+=I,d+=D}f("z","y","x",-1,-1,i,t,e,a,n,0),f("z","y","x",1,-1,i,t,-e,a,n,1),f("x","z","y",1,1,e,i,t,r,a,2),f("x","z","y",1,-1,e,i,-t,r,a,3),f("x","y","z",1,-1,e,t,i,r,n,4),f("x","y","z",-1,-1,e,t,-i,r,n,5),this.setIndex(o),this.addAttribute("position",new Ae(l,3)),this.addAttribute("normal",new Ae(u,3)),this.addAttribute("uv",new Ae(c,2))}function Le(e,t,i,r){pe.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r},this.fromBufferGeometry(new Ne(e,t,i,r)),this.mergeVertices()}function Ne(e,t,i,r){De.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};var n,a,s=(e=e||1)/2,o=(t=t||1)/2,l=Math.floor(i)||1,u=Math.floor(r)||1,c=l+1,d=u+1,h=e/l,f=t/u,p=[],m=[],v=[],g=[];for(a=0;a<d;a++){var y=a*f-o;for(n=0;n<c;n++){var _=n*h-s;m.push(_,-y,0),v.push(0,0,1),g.push(n/l),g.push(1-a/u)}}for(a=0;a<u;a++)for(n=0;n<l;n++){var b=n+c*a,M=n+c*(a+1),T=n+1+c*(a+1),A=n+1+c*a;p.push(b,M,A),p.push(M,T,A)}this.setIndex(p),this.addAttribute("position",new Ae(m,3)),this.addAttribute("normal",new Ae(v,3)),this.addAttribute("uv",new Ae(g,2))}De.prototype=Object.assign(Object.create(d.prototype),{constructor:De,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(xe(e)>65535?Te:be)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new me(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var i=this.attributes.normal;void 0!==i&&((new D).getNormalMatrix(e).applyToBufferAttribute(i),i.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new E;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new E;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new E;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new E;return function(t,i,r){return e.makeTranslation(t,i,r),this.applyMatrix(e),this}}(),scale:function(){var e=new E;return function(t,i,r){return e.makeScale(t,i,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new oe;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new S;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var i=new Ae(3*t.vertices.length,3),r=new Ae(3*t.colors.length,3);if(this.addAttribute("position",i.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new Ae(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],i=0,r=e.length;i<r;i++){var n=e[i];t.push(n.x,n.y,n.z||0)}return this.addAttribute("position",new Ae(t,3)),this},updateFromObject:function(e){var t,i=e.geometry;if(e.isMesh){var r=i.__directGeometry;if(!0===i.elementsNeedUpdate&&(r=void 0,i.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(i);r.verticesNeedUpdate=i.verticesNeedUpdate,r.normalsNeedUpdate=i.normalsNeedUpdate,r.colorsNeedUpdate=i.colorsNeedUpdate,r.uvsNeedUpdate=i.uvsNeedUpdate,r.groupsNeedUpdate=i.groupsNeedUpdate,i.verticesNeedUpdate=!1,i.normalsNeedUpdate=!1,i.colorsNeedUpdate=!1,i.uvsNeedUpdate=!1,i.groupsNeedUpdate=!1,i=r}return!0===i.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(i.vertices),t.needsUpdate=!0),i.verticesNeedUpdate=!1),!0===i.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(i.normals),t.needsUpdate=!0),i.normalsNeedUpdate=!1),!0===i.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(i.colors),t.needsUpdate=!0),i.colorsNeedUpdate=!1),i.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(i.uvs),t.needsUpdate=!0),i.uvsNeedUpdate=!1),i.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(i.lineDistances),t.needsUpdate=!0),i.lineDistancesNeedUpdate=!1),i.groupsNeedUpdate&&(i.computeGroups(e.geometry),this.groups=i.groups,i.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Ee).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new me(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var i=new Float32Array(3*e.normals.length);this.addAttribute("normal",new me(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new me(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var n=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new me(n,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new me(a,2).copyVector2sArray(e.uvs2))}for(var s in this.groups=e.groups,e.morphTargets){for(var o=[],l=e.morphTargets[s],u=0,c=l.length;u<c;u++){var d=l[u],h=new Ae(3*d.length,3);o.push(h.copyVector3sArray(d))}this.morphAttributes[s]=o}if(e.skinIndices.length>0){var f=new Ae(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new Ae(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new B);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new B,t=new S;return function(){null===this.boundingSphere&&(this.boundingSphere=new F);var i=this.attributes.position;if(i){var r=this.boundingSphere.center;e.setFromBufferAttribute(i),e.getCenter(r);for(var n=0,a=0,s=i.count;a<s;a++)t.x=i.getX(a),t.y=i.getY(a),t.z=i.getZ(a),n=Math.max(n,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,i=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new me(new Float32Array(r.length),3));else for(var n=t.normal.array,a=0,s=n.length;a<s;a++)n[a]=0;var o,l,u,c=t.normal.array,d=new S,h=new S,f=new S,p=new S,m=new S;if(e){var v=e.array;0===i.length&&this.addGroup(0,v.length);for(var g=0,y=i.length;g<y;++g){var _=i[g],b=_.start;for(a=b,s=b+_.count;a<s;a+=3)o=3*v[a+0],l=3*v[a+1],u=3*v[a+2],d.fromArray(r,o),h.fromArray(r,l),f.fromArray(r,u),p.subVectors(f,h),m.subVectors(d,h),p.cross(m),c[o]+=p.x,c[o+1]+=p.y,c[o+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z}}else for(a=0,s=r.length;a<s;a+=9)d.fromArray(r,a),h.fromArray(r,a+3),f.fromArray(r,a+6),p.subVectors(f,h),m.subVectors(d,h),p.cross(m),c[a]=p.x,c[a+1]=p.y,c[a+2]=p.z,c[a+3]=p.x,c[a+4]=p.y,c[a+5]=p.z,c[a+6]=p.x,c[a+7]=p.y,c[a+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i=this.attributes;for(var r in i)if(void 0!==e.attributes[r])for(var n=i[r].array,a=e.attributes[r],s=a.array,o=0,l=a.itemSize*t;o<s.length;o++,l++)n[l]=s[o];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new S;return function(){for(var t=this.attributes.normal,i=0,r=t.count;i<r;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.normalize(),t.setXYZ(i,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new De,t=this.index.array,i=this.attributes;for(var r in i){for(var n=i[r],a=n.array,s=n.itemSize,o=new a.constructor(t.length*s),l=0,u=0,c=0,d=t.length;c<d;c++){l=t[c]*s;for(var h=0;h<s;h++)o[u++]=a[l++]}e.addAttribute(r,new me(o,s))}var f=this.groups;for(c=0,d=f.length;c<d;c++){var p=f[c];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var n=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:n}}var a=this.attributes;for(var i in a){var s=a[i];n=Array.prototype.slice.call(s.array);e.data.attributes[i]={itemSize:s.itemSize,type:s.array.constructor.name,array:n,normalized:s.normalized}}var o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return(new De).copy(this)},copy:function(e){var t,i,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone());var a=e.attributes;for(t in a){var s=a[t];this.addAttribute(t,s.clone())}var o=e.morphAttributes;for(t in o){var l=[],u=o[t];for(i=0,r=u.length;i<r;i++)l.push(u[i].clone());this.morphAttributes[t]=l}var c=e.groups;for(i=0,r=c.length;i<r;i++){var d=c[i];this.addGroup(d.start,d.count,d.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ie.prototype=Object.create(pe.prototype),Ie.prototype.constructor=Ie,je.prototype=Object.create(De.prototype),je.prototype.constructor=je,Le.prototype=Object.create(pe.prototype),Le.prototype.constructor=Le,Ne.prototype=Object.create(De.prototype),Ne.prototype.constructor=Ne;var Ce,Oe,ke,Pe,Re,ze,Ue,Be=0;function Fe(){Object.defineProperty(this,"id",{value:Be++}),this.uuid=A.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Ve(e){Fe.call(this),this.type="MeshBasicMaterial",this.color=new q(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ge(e){Fe.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function He(e,t){this.origin=void 0!==e?e:new S,this.direction=void 0!==t?t:new S}function Qe(e,t){this.start=void 0!==e?e:new S,this.end=void 0!==t?t:new S}function Ye(e,t,i){this.a=void 0!==e?e:new S,this.b=void 0!==t?t:new S,this.c=void 0!==i?i:new S}function We(e,t){oe.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new De,this.material=void 0!==t?t:new Ve({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function qe(e,t,i,r){var n,a,s,o=new q(0),l=0;function u(e,i){t.buffers.color.setClear(e.r,e.g,e.b,i,r)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),u(o,l=void 0!==t?t:1)},getClearAlpha:function(){return l},setClearAlpha:function(e){u(o,l=e)},render:function(t,r,c,d){var h=r.background;null===h?u(o,l):h&&h.isColor&&(u(h,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),h&&h.isCubeTexture?(void 0===s&&((s=new We(new je(1,1,1),new Ge({uniforms:K.cube.uniforms,vertexShader:K.cube.vertexShader,fragmentShader:K.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},i.update(s)),s.material.uniforms.tCube.value=h,t.push(s,s.geometry,s.material,0,null)):h&&h.isTexture&&(void 0===n&&(n=new ue(-1,1,1,-1,0,1),a=new We(new Ne(2,2),new Ve({depthTest:!1,depthWrite:!1,fog:!1})),i.update(a)),a.material.map=h,e.renderBufferDirect(n,null,a.geometry,a.material,a,null))}}}function Xe(e,t,i){var r;this.setMode=function(e){r=e},this.render=function(t,n){e.drawArrays(r,t,n),i.update(n,r)},this.renderInstances=function(e,n,a){var s=t.get("ANGLE_instanced_arrays");null!==s?(s.drawArraysInstancedANGLE(r,n,a,e.maxInstancedCount),i.update(a,r,e.maxInstancedCount)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function Ze(e,t,i){var r;function n(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a=void 0!==i.precision?i.precision:"highp",s=n(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var o=!0===i.logarithmicDepthBuffer,l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),h=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),v=u>0,g=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var i=t.get("EXT_texture_filter_anisotropic");return r=null!==i?e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:a,logarithmicDepthBuffer:o,maxTextures:l,maxVertexTextures:u,maxTextureSize:c,maxCubemapSize:d,maxAttributes:h,maxVertexUniforms:f,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:v,floatFragmentTextures:g,floatVertexTextures:v&&g}}function Ke(){var e=this,t=null,i=0,r=!1,n=!1,a=new V,s=new D,o={value:null,needsUpdate:!1};function l(){o.value!==t&&(o.value=t,o.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(t,i,r,n){var l=null!==t?t.length:0,u=null;if(0!==l){if(u=o.value,!0!==n||null===u){var c=r+4*l,d=i.matrixWorldInverse;s.getNormalMatrix(d),(null===u||u.length<c)&&(u=new Float32Array(c));for(var h=0,f=r;h!==l;++h,f+=4)a.copy(t[h]).applyMatrix4(d,s),a.normal.toArray(u,f),u[f+3]=a.constant}o.value=u,o.needsUpdate=!0}return e.numPlanes=l,u}this.uniform=o,this.numPlanes=0,this.numIntersection=0,this.init=function(e,n,a){var s=0!==e.length||n||0!==i||r;return r=n,t=u(e,a,0),i=e.length,s},this.beginShadows=function(){n=!0,u(null)},this.endShadows=function(){n=!1,l()},this.setState=function(e,a,s,c,d,h){if(!r||null===e||0===e.length||n&&!s)n?u(null):l();else{var f=n?0:i,p=4*f,m=d.clippingState||null;o.value=m,m=u(e,c,p,h);for(var v=0;v!==p;++v)m[v]=t[v];d.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function Je(e){var t={};return{get:function(i){if(void 0!==t[i])return t[i];var r;switch(i){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(i)}return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),t[i]=r,r}}}function $e(e,t,i){var r={},n={};function a(e){var s=e.target,o=r[s.id];for(var l in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[l]);s.removeEventListener("dispose",a),delete r[s.id];var u=n[s.id];u&&(t.remove(u),delete n[s.id]),(u=n[o.id])&&(t.remove(u),delete n[o.id]),i.memory.geometries--}return{get:function(e,t){var n=r[t.id];return n||(t.addEventListener("dispose",a),t.isBufferGeometry?n=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new De).setFromObject(e)),n=t._bufferGeometry),r[t.id]=n,i.memory.geometries++,n)},update:function(i){var r=i.index,n=i.attributes;for(var a in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),n)t.update(n[a],e.ARRAY_BUFFER);var s=i.morphAttributes;for(var a in s)for(var o=s[a],l=0,u=o.length;l<u;l++)t.update(o[l],e.ARRAY_BUFFER)},getWireframeAttribute:function(i){var r=n[i.id];if(r)return r;var a,s=[],o=i.index,l=i.attributes;if(null!==o)for(var u=0,c=(a=o.array).length;u<c;u+=3){var d=a[u+0],h=a[u+1],f=a[u+2];s.push(d,h,h,f,f,d)}else for(u=0,c=(a=l.position.array).length/3-1;u<c;u+=3){d=u+0,h=u+1,f=u+2;s.push(d,h,h,f,f,d)}return r=new(xe(s)>65535?Te:be)(s,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),n[i.id]=r,r}}}function et(e,t,i){var r,n,a;this.setMode=function(e){r=e},this.setIndex=function(e){n=e.type,a=e.bytesPerElement},this.render=function(t,s){e.drawElements(r,s,n,t*a),i.update(s,r)},this.renderInstances=function(e,s,o){var l=t.get("ANGLE_instanced_arrays");null!==l?(l.drawElementsInstancedANGLE(r,o,n,s*a,e.maxInstancedCount),i.update(o,r,e.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function tt(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,r,n){switch(n=n||1,t.calls++,r){case e.TRIANGLES:t.triangles+=n*(i/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=n*(i-2);break;case e.LINES:t.lines+=n*(i/2);break;case e.LINE_STRIP:t.lines+=n*(i-1);break;case e.LINE_LOOP:t.lines+=n*i;break;case e.POINTS:t.points+=n*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function it(e,t){return Math.abs(t[1])-Math.abs(e[1])}function rt(e){var t={},i=new Float32Array(8);return{update:function(r,n,a,s){var o=r.morphTargetInfluences,l=o.length,u=t[n.id];if(void 0===u){u=[];for(var c=0;c<l;c++)u[c]=[c,0];t[n.id]=u}var d=a.morphTargets&&n.morphAttributes.position,h=a.morphNormals&&n.morphAttributes.normal;for(c=0;c<l;c++){0!==(f=u[c])[1]&&(d&&n.removeAttribute("morphTarget"+c),h&&n.removeAttribute("morphNormal"+c))}for(c=0;c<l;c++){(f=u[c])[0]=c,f[1]=o[c]}for(u.sort(it),c=0;c<8;c++){var f;if(f=u[c]){var p=f[0],m=f[1];if(m){d&&n.addAttribute("morphTarget"+c,d[p]),h&&n.addAttribute("morphNormal"+c,h[p]),i[c]=m;continue}}i[c]=0}s.getUniforms().setValue(e,"morphTargetInfluences",i)}}}function nt(e,t){var i={};return{update:function(r){var n=t.render.frame,a=r.geometry,s=e.get(r,a);return i[s.id]!==n&&(a.isGeometry&&s.updateFromObject(r),e.update(s),i[s.id]=n),s},dispose:function(){i={}}}}function at(e,t,i,r,n,a,s,o,l,u){e=void 0!==e?e:[],t=void 0!==t?t:301,k.call(this,e,t,i,r,n,a,s,o,l,u),this.flipY=!1}Fe.prototype=Object.assign(Object.create(d.prototype),{constructor:Fe,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0!==i)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]="overdraw"===t?Number(i):i:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var i in e){var r=e[i];delete r.metadata,t.push(r)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),0!==this.side&&(i.side=this.side),0!==this.vertexColors&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),t){var n=r(e.textures),a=r(e.images);n.length>0&&(i.textures=n),a.length>0&&(i.images=a)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(null!==t){var r=t.length;i=new Array(r);for(var n=0;n!==r;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ve.prototype=Object.create(Fe.prototype),Ve.prototype.constructor=Ve,Ve.prototype.isMeshBasicMaterial=!0,Ve.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Ge.prototype=Object.create(Fe.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isShaderMaterial=!0,Ge.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Y.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Ge.prototype.toJSON=function(e){var t=Fe.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(He.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new S),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new S;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new S),t.subVectors(e,this.origin);var i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new S;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Oe=new S,ke=new S,Pe=new S,function(e,t,i,r){Oe.copy(e).add(t).multiplyScalar(.5),ke.copy(t).sub(e).normalize(),Pe.copy(this.origin).sub(Oe);var n,a,s,o,l=.5*e.distanceTo(t),u=-this.direction.dot(ke),c=Pe.dot(this.direction),d=-Pe.dot(ke),h=Pe.lengthSq(),f=Math.abs(1-u*u);if(f>0)if(a=u*c-d,o=l*f,(n=u*d-c)>=0)if(a>=-o)if(a<=o){var p=1/f;s=(n*=p)*(n+u*(a*=p)+2*c)+a*(u*n+a+2*d)+h}else a=l,s=-(n=Math.max(0,-(u*a+c)))*n+a*(a+2*d)+h;else a=-l,s=-(n=Math.max(0,-(u*a+c)))*n+a*(a+2*d)+h;else a<=-o?s=-(n=Math.max(0,-(-u*l+c)))*n+(a=n>0?-l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h:a<=o?(n=0,s=(a=Math.min(Math.max(-l,-d),l))*(a+2*d)+h):s=-(n=Math.max(0,-(u*l+c)))*n+(a=n>0?l:Math.min(Math.max(-l,-d),l))*(a+2*d)+h;else a=u>0?-l:l,s=-(n=Math.max(0,-(u*a+c)))*n+a*(a+2*d)+h;return i&&i.copy(this.direction).multiplyScalar(n).add(this.origin),r&&r.copy(ke).multiplyScalar(a).add(Oe),s}),intersectSphere:function(){var e=new S;return function(t,i){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),n=e.dot(e)-r*r,a=t.radius*t.radius;if(n>a)return null;var s=Math.sqrt(a-n),o=r-s,l=r+s;return o<0&&l<0?null:o<0?this.at(l,i):this.at(o,i)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null},intersectPlane:function(e,t){var i=this.distanceToPlane(e);return null===i?null:this.at(i,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var i,r,n,a,s,o,l=1/this.direction.x,u=1/this.direction.y,c=1/this.direction.z,d=this.origin;return l>=0?(i=(e.min.x-d.x)*l,r=(e.max.x-d.x)*l):(i=(e.max.x-d.x)*l,r=(e.min.x-d.x)*l),u>=0?(n=(e.min.y-d.y)*u,a=(e.max.y-d.y)*u):(n=(e.max.y-d.y)*u,a=(e.min.y-d.y)*u),i>a||n>r?null:((n>i||i!=i)&&(i=n),(a<r||r!=r)&&(r=a),c>=0?(s=(e.min.z-d.z)*c,o=(e.max.z-d.z)*c):(s=(e.max.z-d.z)*c,o=(e.min.z-d.z)*c),i>o||s>r?null:((s>i||i!=i)&&(i=s),(o<r||r!=r)&&(r=o),r<0?null:this.at(i>=0?i:r,t)))},intersectsBox:(Ce=new S,function(e){return null!==this.intersectBox(e,Ce)}),intersectTriangle:function(){var e=new S,t=new S,i=new S,r=new S;return function(n,a,s,o,l){t.subVectors(a,n),i.subVectors(s,n),r.crossVectors(t,i);var u,c=this.direction.dot(r);if(c>0){if(o)return null;u=1}else{if(!(c<0))return null;u=-1,c=-c}e.subVectors(this.origin,n);var d=u*this.direction.dot(i.crossVectors(e,i));if(d<0)return null;var h=u*this.direction.dot(t.cross(e));if(h<0)return null;if(d+h>c)return null;var f=-u*e.dot(r);return f<0?null:this.at(f/c,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Qe.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new S),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new S),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new S),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Re=new S,ze=new S,function(e,t){Re.subVectors(e,this.start),ze.subVectors(this.end,this.start);var i=ze.dot(ze),r=ze.dot(Re)/i;return t&&(r=A.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,i){var r=this.closestPointToPointParameter(e,t);return void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new S),this.delta(i).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(Ye,{getNormal:(Ue=new S,function(e,t,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new S),r.subVectors(i,t),Ue.subVectors(e,t),r.cross(Ue);var n=r.lengthSq();return n>0?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}),getBarycoord:function(){var e=new S,t=new S,i=new S;return function(r,n,a,s,o){e.subVectors(s,n),t.subVectors(a,n),i.subVectors(r,n);var l=e.dot(e),u=e.dot(t),c=e.dot(i),d=t.dot(t),h=t.dot(i),f=l*d-u*u;if(void 0===o&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),o=new S),0===f)return o.set(-2,-1,-1);var p=1/f,m=(d*c-u*h)*p,v=(l*h-u*c)*p;return o.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new S;return function(t,i,r,n){return Ye.getBarycoord(t,i,r,n,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(Ye.prototype,{set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new S,t=new S;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new S),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Ye.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new S),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Ye.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Ye.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new V,t=[new Qe,new Qe,new Qe],i=new S,r=new S;return function(n,a){void 0===a&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),a=new S);var s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(n,i),!0===this.containsPoint(i))a.copy(i);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var o=0;o<t.length;o++){t[o].closestPointToPoint(i,!0,r);var l=i.distanceToSquared(r);l<s&&(s=l,a.copy(r))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),We.prototype=Object.assign(Object.create(oe.prototype),{constructor:We,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return oe.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,i,r=this.geometry;if(r.isBufferGeometry){var n=r.morphAttributes,a=Object.keys(n);if(a.length>0){var s=n[a[0]];if(void 0!==s)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)i=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}}else{var o=r.morphTargets;if(void 0!==o&&o.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)i=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[i]=e}},raycast:function(){var e=new E,t=new He,i=new F,r=new S,n=new S,a=new S,s=new S,o=new S,l=new S,u=new w,c=new w,d=new w,h=new S,f=new S,p=new S;function m(e,t,i,r,n,a,s){return Ye.getBarycoord(e,t,i,r,h),n.multiplyScalar(h.x),a.multiplyScalar(h.y),s.multiplyScalar(h.z),n.add(a).add(s),n.clone()}function v(e,t,i,r,n,a,s,o){if(null===(1===t.side?r.intersectTriangle(s,a,n,!0,o):r.intersectTriangle(n,a,s,2!==t.side,o)))return null;p.copy(o),p.applyMatrix4(e.matrixWorld);var l=i.ray.origin.distanceTo(p);return l<i.near||l>i.far?null:{distance:l,point:p.clone(),object:e}}function g(e,t,i,s,o,l,h,p){r.fromBufferAttribute(s,l),n.fromBufferAttribute(s,h),a.fromBufferAttribute(s,p);var g=v(e,e.material,t,i,r,n,a,f);if(g){o&&(u.fromBufferAttribute(o,l),c.fromBufferAttribute(o,h),d.fromBufferAttribute(o,p),g.uv=m(f,r,n,a,u,c,d));var y=new ce(l,h,p);Ye.getNormal(r,n,a,y.normal),g.face=y}return g}return function(h,p){var y,_=this.geometry,b=this.material,M=this.matrixWorld;if(void 0!==b&&(null===_.boundingSphere&&_.computeBoundingSphere(),i.copy(_.boundingSphere),i.applyMatrix4(M),!1!==h.ray.intersectsSphere(i)&&(e.getInverse(M),t.copy(h.ray).applyMatrix4(e),null===_.boundingBox||!1!==t.intersectsBox(_.boundingBox))))if(_.isBufferGeometry){var T,A,w,E,x,S=_.index,D=_.attributes.position,I=_.attributes.uv;if(null!==S)for(E=0,x=S.count;E<x;E+=3)T=S.getX(E),A=S.getX(E+1),w=S.getX(E+2),(y=g(this,h,t,D,I,T,A,w))&&(y.faceIndex=Math.floor(E/3),p.push(y));else if(void 0!==D)for(E=0,x=D.count;E<x;E+=3)(y=g(this,h,t,D,I,T=E,A=E+1,w=E+2))&&(y.faceIndex=Math.floor(E/3),p.push(y))}else if(_.isGeometry){var j,L,N,C,O=Array.isArray(b),k=_.vertices,P=_.faces,R=_.faceVertexUvs[0];R.length>0&&(C=R);for(var z=0,U=P.length;z<U;z++){var B=P[z],F=O?b[B.materialIndex]:b;if(void 0!==F){if(j=k[B.a],L=k[B.b],N=k[B.c],!0===F.morphTargets){var V=_.morphTargets,G=this.morphTargetInfluences;r.set(0,0,0),n.set(0,0,0),a.set(0,0,0);for(var H=0,Q=V.length;H<Q;H++){var Y=G[H];if(0!==Y){var W=V[H].vertices;r.addScaledVector(s.subVectors(W[B.a],j),Y),n.addScaledVector(o.subVectors(W[B.b],L),Y),a.addScaledVector(l.subVectors(W[B.c],N),Y)}}r.add(j),n.add(L),a.add(N),j=r,L=n,N=a}if(y=v(this,F,h,t,j,L,N,f)){if(C&&C[z]){var q=C[z];u.copy(q[0]),c.copy(q[1]),d.copy(q[2]),y.uv=m(f,j,L,N,u,c,d)}y.face=B,y.faceIndex=z,p.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),at.prototype=Object.create(k.prototype),at.prototype.constructor=at,at.prototype.isCubeTexture=!0,Object.defineProperty(at.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var st=new k,ot=new at;function lt(){this.seq=[],this.map={}}var ut=[],ct=[],dt=new Float32Array(16),ht=new Float32Array(9),ft=new Float32Array(4);function pt(e,t,i){var r=e[0];if(r<=0||r>0)return e;var n=t*i,a=ut[n];if(void 0===a&&(a=new Float32Array(n),ut[n]=a),0!==t){r.toArray(a,0);for(var s=1,o=0;s!==t;++s)o+=i,e[s].toArray(a,o)}return a}function mt(e,t){if(e.length!==t.length)return!1;for(var i=0,r=e.length;i<r;i++)if(e[i]!==t[i])return!1;return!0}function vt(e,t){for(var i=0,r=t.length;i<r;i++)e[i]=t[i]}function gt(e,t){var i=ct[t];void 0===i&&(i=new Int32Array(t),ct[t]=i);for(var r=0;r!==t;++r)i[r]=e.allocTextureUnit();return i}function yt(e,t){var i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function _t(e,t){var i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function bt(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(mt(i,t))return;e.uniform2fv(this.addr,t),vt(i,t)}}function Mt(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(mt(i,t))return;e.uniform3fv(this.addr,t),vt(i,t)}}function Tt(e,t){var i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(mt(i,t))return;e.uniform4fv(this.addr,t),vt(i,t)}}function At(e,t){var i=this.cache,r=t.elements;if(void 0===r){if(mt(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),vt(i,t)}else{if(mt(i,r))return;ft.set(r),e.uniformMatrix2fv(this.addr,!1,ft),vt(i,r)}}function wt(e,t){var i=this.cache,r=t.elements;if(void 0===r){if(mt(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),vt(i,t)}else{if(mt(i,r))return;ht.set(r),e.uniformMatrix3fv(this.addr,!1,ht),vt(i,r)}}function Et(e,t){var i=this.cache,r=t.elements;if(void 0===r){if(mt(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),vt(i,t)}else{if(mt(i,r))return;dt.set(r),e.uniformMatrix4fv(this.addr,!1,dt),vt(i,r)}}function xt(e,t,i){var r=this.cache,n=i.allocTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTexture2D(t||st,n)}function St(e,t,i){var r=this.cache,n=i.allocTextureUnit();r[0]!==n&&(e.uniform1i(this.addr,n),r[0]=n),i.setTextureCube(t||ot,n)}function Dt(e,t){var i=this.cache;mt(i,t)||(e.uniform2iv(this.addr,t),vt(i,t))}function It(e,t){var i=this.cache;mt(i,t)||(e.uniform3iv(this.addr,t),vt(i,t))}function jt(e,t){var i=this.cache;mt(i,t)||(e.uniform4iv(this.addr,t),vt(i,t))}function Lt(e,t){var i=this.cache;mt(i,t)||(e.uniform1fv(this.addr,t),vt(i,t))}function Nt(e,t){var i=this.cache;mt(i,t)||(e.uniform1iv(this.addr,t),vt(i,t))}function Ct(e,t){var i=this.cache,r=pt(t,this.size,2);mt(i,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function Ot(e,t){var i=this.cache,r=pt(t,this.size,3);mt(i,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function kt(e,t){var i=this.cache,r=pt(t,this.size,4);mt(i,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function Pt(e,t){var i=this.cache,r=pt(t,this.size,4);mt(i,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function Rt(e,t){var i=this.cache,r=pt(t,this.size,9);mt(i,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function zt(e,t){var i=this.cache,r=pt(t,this.size,16);mt(i,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function Ut(e,t,i){var r=this.cache,n=t.length,a=gt(i,n);!1===mt(r,a)&&(e.uniform1iv(this.addr,a),vt(r,a));for(var s=0;s!==n;++s)i.setTexture2D(t[s]||st,a[s])}function Bt(e,t,i){var r=this.cache,n=t.length,a=gt(i,n);!1===mt(r,a)&&(e.uniform1iv(this.addr,a),vt(r,a));for(var s=0;s!==n;++s)i.setTextureCube(t[s]||ot,a[s])}function Ft(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return yt;case 35664:return bt;case 35665:return Mt;case 35666:return Tt;case 35674:return At;case 35675:return wt;case 35676:return Et;case 35678:case 36198:return xt;case 35680:return St;case 5124:case 35670:return _t;case 35667:case 35671:return Dt;case 35668:case 35672:return It;case 35669:case 35673:return jt}}(t.type)}function Vt(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Lt;case 35664:return Ct;case 35665:return Ot;case 35666:return kt;case 35674:return Pt;case 35675:return Rt;case 35676:return zt;case 35678:return Ut;case 35680:return Bt;case 5124:case 35670:return Nt;case 35667:case 35671:return Dt;case 35668:case 35672:return It;case 35669:case 35673:return jt}}(t.type)}function Gt(e){this.id=e,lt.call(this)}Vt.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),vt(t,e)},Gt.prototype.setValue=function(e,t){for(var i=this.seq,r=0,n=i.length;r!==n;++r){var a=i[r];a.setValue(e,t[a.id])}};var Ht=/([\w\d_]+)(\])?(\[|\.)?/g;function Qt(e,t){e.seq.push(t),e.map[t.id]=t}function Yt(e,t,i){var r=e.name,n=r.length;for(Ht.lastIndex=0;;){var a=Ht.exec(r),s=Ht.lastIndex,o=a[1],l="]"===a[2],u=a[3];if(l&&(o|=0),void 0===u||"["===u&&s+2===n){Qt(i,void 0===u?new Ft(o,e,t):new Vt(o,e,t));break}var c=i.map[o];void 0===c&&Qt(i,c=new Gt(o)),i=c}}function Wt(e,t,i){lt.call(this),this.renderer=i;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;++n){var a=e.getActiveUniform(t,n);Yt(a,e.getUniformLocation(t,a.name),this)}}function qt(e,t,i){var r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),i=0;i<t.length;i++)t[i]=i+1+": "+t[i];return t.join("\n")}(i)),r}Wt.prototype.setValue=function(e,t,i){var r=this.map[t];void 0!==r&&r.setValue(e,i,this.renderer)},Wt.prototype.setOptional=function(e,t,i){var r=t[i];void 0!==r&&this.setValue(e,i,r)},Wt.upload=function(e,t,i,r){for(var n=0,a=t.length;n!==a;++n){var s=t[n],o=i[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,r)}},Wt.seqWithValue=function(e,t){for(var i=[],r=0,n=e.length;r!==n;++r){var a=e[r];a.id in t&&i.push(a)}return i};var Xt=0;function Zt(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Kt(e,t){var i=Zt(t);return"vec4 "+e+"( vec4 value ) { return "+i[0]+"ToLinear"+i[1]+"; }"}function Jt(e,t){var i;switch(t){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="Uncharted2";break;case 4:i="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function $t(e){return""!==e}function ei(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function ti(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function ii(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var i=Q[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return ii(i)})}function ri(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,i,r){for(var n="",a=parseInt(t);a<parseInt(i);a++)n+=r.replace(/\[ i \]/g,"[ "+a+" ]");return n})}function ni(e,t,i,r,n,a){var s=e.context,o=r.defines,l=n.vertexShader,u=n.fragmentShader,c="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?c="SHADOWMAP_TYPE_PCF":2===a.shadowMapType&&(c="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(r.envMap.mapping){case 301:case 302:d="ENVMAP_TYPE_CUBE";break;case 306:case 307:d="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:d="ENVMAP_TYPE_EQUIREC";break;case 305:d="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case 302:case 304:h="ENVMAP_MODE_REFRACTION"}switch(r.combine){case 0:f="ENVMAP_BLENDING_MULTIPLY";break;case 1:f="ENVMAP_BLENDING_MIX";break;case 2:f="ENVMAP_BLENDING_ADD"}}var p,m,v,g,y,_=e.gammaFactor>0?e.gammaFactor:1,b=function(e,t,i){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter($t).join("\n")}(r.extensions,a,t),M=function(e){var t=[];for(var i in e){var r=e[i];!1!==r&&t.push("#define "+i+" "+r)}return t.join("\n")}(o),T=s.createProgram();r.isRawShaderMaterial?((p=[M].filter($t).join("\n")).length>0&&(p+="\n"),(m=[b,M].filter($t).join("\n")).length>0&&(m+="\n")):(p=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+n.name,M,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($t).join("\n"),m=[b,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+n.name,M,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+_,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+h:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?Q.tonemapping_pars_fragment:"",0!==a.toneMapping?Jt("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?Q.encodings_pars_fragment:"",a.mapEncoding?Kt("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?Kt("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Kt("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(v="linearToOutputTexel",g=a.outputEncoding,y=Zt(g),"vec4 "+v+"( vec4 value ) { return LinearTo"+y[0]+y[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter($t).join("\n")),l=ti(l=ei(l=ii(l),a),a),u=ti(u=ei(u=ii(u),a),a);var A=p+(l=ri(l)),w=m+(u=ri(u)),E=qt(s,s.VERTEX_SHADER,A),x=qt(s,s.FRAGMENT_SHADER,w);s.attachShader(T,E),s.attachShader(T,x),void 0!==r.index0AttributeName?s.bindAttribLocation(T,0,r.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(T,0,"position"),s.linkProgram(T);var S,D,I=s.getProgramInfoLog(T).trim(),j=s.getShaderInfoLog(E).trim(),L=s.getShaderInfoLog(x).trim(),N=!0,C=!0;return!1===s.getProgramParameter(T,s.LINK_STATUS)?(N=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"gl.VALIDATE_STATUS",s.getProgramParameter(T,s.VALIDATE_STATUS),"gl.getProgramInfoLog",I,j,L)):""!==I?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",I):""!==j&&""!==L||(C=!1),C&&(this.diagnostics={runnable:N,material:r,programLog:I,vertexShader:{log:j,prefix:p},fragmentShader:{log:L,prefix:m}}),s.deleteShader(E),s.deleteShader(x),this.getUniforms=function(){return void 0===S&&(S=new Wt(s,T,e)),S},this.getAttributes=function(){return void 0===D&&(D=function(e,t){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var a=e.getActiveAttrib(t,n).name;i[a]=e.getAttribLocation(t,a)}return i}(s,T)),D},this.destroy=function(){s.deleteProgram(T),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=n.name,this.id=Xt++,this.code=i,this.usedTimes=1,this.program=T,this.vertexShader=E,this.fragmentShader=x,this}function ai(e,t,i){var r=[],n={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function s(e,t){var i;return e?e.isTexture?i=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=e.texture.encoding):i=3e3,3e3===i&&t&&(i=3007),i}this.getParameters=function(t,r,a,o,l,u,c){var d=n[t.type],h=c.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(i.floatVertexTextures)return 1024;var r=i.maxVertexUniforms,n=Math.floor((r-20)/4),a=Math.min(n,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(c):0,f=i.precision;null!==t.precision&&(f=i.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",f,"instead.");var p=e.getRenderTarget();return{shaderID:d,precision:f,supportsVertexTextures:i.vertexTextures,outputEncoding:s(p?p.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:s(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:s(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:s(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!o,useFog:t.fog,fogExp:o&&o.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:t.skinning&&h>0,maxBones:h,useVertexTexture:i.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:l,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,i){var r=[];if(i.shaderID?r.push(i.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)r.push(n),r.push(t.defines[n]);for(var s=0;s<a.length;s++)r.push(i[a[s]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(i,n,a,s){for(var o,l=0,u=r.length;l<u;l++){var c=r[l];if(c.code===s){++(o=c).usedTimes;break}}return void 0===o&&(o=new ni(e,t,s,i,n,a),r.push(o)),o},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function si(){var e=new WeakMap;return{get:function(t){var i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,r){e.get(t)[i]=r},dispose:function(){e=new WeakMap}}}function oi(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function li(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ui(){var e=[],t=0,i=[],r=[];return{opaque:i,transparent:r,init:function(){t=0,i.length=0,r.length=0},push:function(n,a,s,o,l){var u=e[t];void 0===u?(u={id:n.id,object:n,geometry:a,material:s,program:s.program,renderOrder:n.renderOrder,z:o,group:l},e[t]=u):(u.id=n.id,u.object=n,u.geometry=a,u.material=s,u.program=s.program,u.renderOrder=n.renderOrder,u.z=o,u.group=l),(!0===s.transparent?r:i).push(u),t++},sort:function(){i.length>1&&i.sort(oi),r.length>1&&r.sort(li)}}}function ci(){var e={};return{get:function(t,i){var r=t.id+","+i.id,n=e[r];return void 0===n&&(n=new ui,e[r]=n),n},dispose:function(){e={}}}}function di(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var i;switch(t.type){case"DirectionalLight":i={direction:new S,color:new q,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new w};break;case"SpotLight":i={position:new S,direction:new S,color:new q,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new w};break;case"PointLight":i={position:new S,color:new q,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new w,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":i={direction:new S,skyColor:new q,groundColor:new q};break;case"RectAreaLight":i={color:new q,position:new S,halfWidth:new S,halfHeight:new S}}return e[t.id]=i,i}}}var hi,fi,pi,mi,vi,gi,yi,_i,bi=0;function Mi(){var e=new di,t={id:bi++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new S,r=new E,n=new E;return{setup:function(a,s,o){for(var l=0,u=0,c=0,d=0,h=0,f=0,p=0,m=0,v=o.matrixWorldInverse,g=0,y=a.length;g<y;g++){var _=a[g],b=_.color,M=_.intensity,T=_.distance,A=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)l+=b.r*M,u+=b.g*M,c+=b.b*M;else if(_.isDirectionalLight){if((E=e.get(_)).color.copy(_.color).multiplyScalar(_.intensity),E.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(v),E.shadow=_.castShadow,_.castShadow){var w=_.shadow;E.shadowBias=w.bias,E.shadowRadius=w.radius,E.shadowMapSize=w.mapSize}t.directionalShadowMap[d]=A,t.directionalShadowMatrix[d]=_.shadow.matrix,t.directional[d]=E,d++}else if(_.isSpotLight){if((E=e.get(_)).position.setFromMatrixPosition(_.matrixWorld),E.position.applyMatrix4(v),E.color.copy(b).multiplyScalar(M),E.distance=T,E.direction.setFromMatrixPosition(_.matrixWorld),i.setFromMatrixPosition(_.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(v),E.coneCos=Math.cos(_.angle),E.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),E.decay=0===_.distance?0:_.decay,E.shadow=_.castShadow,_.castShadow){w=_.shadow;E.shadowBias=w.bias,E.shadowRadius=w.radius,E.shadowMapSize=w.mapSize}t.spotShadowMap[f]=A,t.spotShadowMatrix[f]=_.shadow.matrix,t.spot[f]=E,f++}else if(_.isRectAreaLight){(E=e.get(_)).color.copy(b).multiplyScalar(M),E.position.setFromMatrixPosition(_.matrixWorld),E.position.applyMatrix4(v),n.identity(),r.copy(_.matrixWorld),r.premultiply(v),n.extractRotation(r),E.halfWidth.set(.5*_.width,0,0),E.halfHeight.set(0,.5*_.height,0),E.halfWidth.applyMatrix4(n),E.halfHeight.applyMatrix4(n),t.rectArea[p]=E,p++}else if(_.isPointLight){if((E=e.get(_)).position.setFromMatrixPosition(_.matrixWorld),E.position.applyMatrix4(v),E.color.copy(_.color).multiplyScalar(_.intensity),E.distance=_.distance,E.decay=0===_.distance?0:_.decay,E.shadow=_.castShadow,_.castShadow){w=_.shadow;E.shadowBias=w.bias,E.shadowRadius=w.radius,E.shadowMapSize=w.mapSize,E.shadowCameraNear=w.camera.near,E.shadowCameraFar=w.camera.far}t.pointShadowMap[h]=A,t.pointShadowMatrix[h]=_.shadow.matrix,t.point[h]=E,h++}else if(_.isHemisphereLight){var E;(E=e.get(_)).direction.setFromMatrixPosition(_.matrixWorld),E.direction.transformDirection(v),E.direction.normalize(),E.skyColor.copy(_.color).multiplyScalar(M),E.groundColor.copy(_.groundColor).multiplyScalar(M),t.hemi[m]=E,m++}}t.ambient[0]=l,t.ambient[1]=u,t.ambient[2]=c,t.directional.length=d,t.spot.length=f,t.rectArea.length=p,t.point.length=h,t.hemi.length=m,t.hash=t.id+","+d+","+h+","+f+","+p+","+m+","+s.length},state:t}}function Ti(){var e=new Mi,t=[],i=[],r=[];return{init:function(){t.length=0,i.length=0,r.length=0},state:{lightsArray:t,shadowsArray:i,spritesArray:r,lights:e},setupLights:function(r){e.setup(t,i,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){i.push(e)},pushSprite:function(e){r.push(e)}}}function Ai(){var e={};return{get:function(t,i){var r=t.id+","+i.id,n=e[r];return void 0===n&&(n=new Ti,e[r]=n),n},dispose:function(){e={}}}}function wi(e){Fe.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Ei(e){Fe.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new S,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function xi(e,t,i){for(var r=new G,n=new E,a=new w,s=new w(i,i),o=new S,l=new S,u=new Array(4),c=new Array(4),d={},h={0:1,1:0,2:2},f=[new S(1,0,0),new S(-1,0,0),new S(0,0,1),new S(0,0,-1),new S(0,1,0),new S(0,-1,0)],p=[new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,1,0),new S(0,0,1),new S(0,0,-1)],m=[new P,new P,new P,new P,new P,new P],v=0;4!==v;++v){var g=0!=(1&v),y=0!=(2&v),_=new wi({depthPacking:3201,morphTargets:g,skinning:y});u[v]=_;var b=new Ei({morphTargets:g,skinning:y});c[v]=b}var M=this;function T(t,i,r,n,a,s){var o=t.geometry,l=null,f=u,p=t.customDepthMaterial;if(r&&(f=c,p=t.customDistanceMaterial),p)l=p;else{var m=!1;i.morphTargets&&(o&&o.isBufferGeometry?m=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(m=o.morphTargets&&o.morphTargets.length>0)),t.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var v=0;m&&(v|=1),t.isSkinnedMesh&&i.skinning&&(v|=2),l=f[v]}if(e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var g=l.uuid,y=i.uuid,_=d[g];void 0===_&&(_={},d[g]=_);var b=_[y];void 0===b&&(b=l.clone(),_[y]=b),l=b}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=null!=i.shadowSide?i.shadowSide:h[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,r&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(n),l.nearDistance=a,l.farDistance=s),l}function A(i,n,a,s){if(!1!==i.visible){if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,i.matrixWorld);var o=t.update(i),u=i.material;if(Array.isArray(u))for(var c=o.groups,d=0,h=c.length;d<h;d++){var f=c[d],p=u[f.materialIndex];if(p&&p.visible){var m=T(i,p,s,l,a.near,a.far);e.renderBufferDirect(a,null,o,m,i,f)}}else if(u.visible){m=T(i,u,s,l,a.near,a.far);e.renderBufferDirect(a,null,o,m,i,null)}}for(var v=i.children,g=0,y=v.length;g<y;g++)A(v[g],n,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,i,u){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==t.length){var c,d=e.context,h=e.state;h.disable(d.BLEND),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var v=0,g=t.length;v<g;v++){var y=t[v],_=y.shadow,b=y&&y.isPointLight;if(void 0!==_){var T=_.camera;if(a.copy(_.mapSize),a.min(s),b){var w=a.x,E=a.y;m[0].set(2*w,E,w,E),m[1].set(0,E,w,E),m[2].set(3*w,E,w,E),m[3].set(w,E,w,E),m[4].set(3*w,0,w,E),m[5].set(w,0,w,E),a.x*=4,a.y*=2}if(null===_.map){var x={minFilter:1003,magFilter:1003,format:1023};_.map=new R(a.x,a.y,x),_.map.texture.name=y.name+".shadowMap",T.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(y);var S=_.map,D=_.matrix;l.setFromMatrixPosition(y.matrixWorld),T.position.copy(l),b?(c=6,D.makeTranslation(-l.x,-l.y,-l.z)):(c=1,o.setFromMatrixPosition(y.target.matrixWorld),T.lookAt(o),T.updateMatrixWorld(),D.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),D.multiply(T.projectionMatrix),D.multiply(T.matrixWorldInverse)),e.setRenderTarget(S),e.clear();for(var I=0;I<c;I++){if(b){o.copy(T.position),o.add(f[I]),T.up.copy(p[I]),T.lookAt(o),T.updateMatrixWorld();var j=m[I];h.viewport(j)}n.multiplyMatrices(T.projectionMatrix,T.matrixWorldInverse),r.setFromMatrix(n),A(i,u,T,b)}}else console.warn("THREE.WebGLShadowMap:",y,"has no shadow.")}M.needsUpdate=!1}}}function Si(e,t,i,r,n,a,s,o,l){k.call(this,e,t,i,r,n,a,s,o,l),this.needsUpdate=!0}function Di(e,i,r,n,a){var s,o,l,u,c,d,h=new S,f=new x,p=new S;function m(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),r=new Uint16Array([0,1,2,0,2,3]);s=i.createBuffer(),o=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,s),i.bufferData(i.ARRAY_BUFFER,e,i.STATIC_DRAW),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,o),i.bufferData(i.ELEMENT_ARRAY_BUFFER,r,i.STATIC_DRAW),l=function(){var e=i.createProgram(),t=i.createShader(i.VERTEX_SHADER),r=i.createShader(i.FRAGMENT_SHADER);return i.shaderSource(t,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),i.shaderSource(r,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),i.compileShader(t),i.compileShader(r),i.attachShader(e,t),i.attachShader(e,r),i.linkProgram(e),e}(),u={position:i.getAttribLocation(l,"position"),uv:i.getAttribLocation(l,"uv")},c={uvOffset:i.getUniformLocation(l,"uvOffset"),uvScale:i.getUniformLocation(l,"uvScale"),rotation:i.getUniformLocation(l,"rotation"),center:i.getUniformLocation(l,"center"),scale:i.getUniformLocation(l,"scale"),color:i.getUniformLocation(l,"color"),map:i.getUniformLocation(l,"map"),opacity:i.getUniformLocation(l,"opacity"),modelViewMatrix:i.getUniformLocation(l,"modelViewMatrix"),projectionMatrix:i.getUniformLocation(l,"projectionMatrix"),fogType:i.getUniformLocation(l,"fogType"),fogDensity:i.getUniformLocation(l,"fogDensity"),fogNear:i.getUniformLocation(l,"fogNear"),fogFar:i.getUniformLocation(l,"fogFar"),fogColor:i.getUniformLocation(l,"fogColor"),fogDepth:i.getUniformLocation(l,"fogDepth"),alphaTest:i.getUniformLocation(l,"alphaTest")};var n=t.createElementNS("http://www.w3.org/1999/xhtml","canvas");n.width=8,n.height=8;var h=n.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),d=new Si(n)}function v(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(t,a,g){if(0!==t.length){void 0===l&&m(),r.useProgram(l),r.initAttributes(),r.enableAttribute(u.position),r.enableAttribute(u.uv),r.disableUnusedAttributes(),r.disable(i.CULL_FACE),r.enable(i.BLEND),i.bindBuffer(i.ARRAY_BUFFER,s),i.vertexAttribPointer(u.position,2,i.FLOAT,!1,16,0),i.vertexAttribPointer(u.uv,2,i.FLOAT,!1,16,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,o),i.uniformMatrix4fv(c.projectionMatrix,!1,g.projectionMatrix.elements),r.activeTexture(i.TEXTURE0),i.uniform1i(c.map,0);var y=0,_=0,b=a.fog;b?(i.uniform3f(c.fogColor,b.color.r,b.color.g,b.color.b),b.isFog?(i.uniform1f(c.fogNear,b.near),i.uniform1f(c.fogFar,b.far),i.uniform1i(c.fogType,1),y=1,_=1):b.isFogExp2&&(i.uniform1f(c.fogDensity,b.density),i.uniform1i(c.fogType,2),y=2,_=2)):(i.uniform1i(c.fogType,0),y=0,_=0);for(var M=0,T=t.length;M<T;M++){(E=t[M]).modelViewMatrix.multiplyMatrices(g.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}t.sort(v);var A=[],w=[];for(M=0,T=t.length;M<T;M++){var E,x=(E=t[M]).material;if(!1!==x.visible){E.onBeforeRender(e,a,g,void 0,x,void 0),i.uniform1f(c.alphaTest,x.alphaTest),i.uniformMatrix4fv(c.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(h,f,p),A[0]=p.x,A[1]=p.y,w[0]=E.center.x-.5,w[1]=E.center.y-.5;var S=0;a.fog&&x.fog&&(S=_),y!==S&&(i.uniform1i(c.fogType,S),y=S),null!==x.map?(i.uniform2f(c.uvOffset,x.map.offset.x,x.map.offset.y),i.uniform2f(c.uvScale,x.map.repeat.x,x.map.repeat.y)):(i.uniform2f(c.uvOffset,0,0),i.uniform2f(c.uvScale,1,1)),i.uniform1f(c.opacity,x.opacity),i.uniform3f(c.color,x.color.r,x.color.g,x.color.b),i.uniform1f(c.rotation,x.rotation),i.uniform2fv(c.center,w),i.uniform2fv(c.scale,A),r.setBlending(x.blending,x.blendEquation,x.blendSrc,x.blendDst,x.blendEquationAlpha,x.blendSrcAlpha,x.blendDstAlpha,x.premultipliedAlpha),r.buffers.depth.setTest(x.depthTest),r.buffers.depth.setMask(x.depthWrite),r.buffers.color.setMask(x.colorWrite),n.setTexture2D(x.map||d,0),i.drawElements(i.TRIANGLES,6,i.UNSIGNED_SHORT,0),E.onAfterRender(e,a,g,void 0,x,void 0)}}r.enable(i.CULL_FACE),r.reset()}}}function Ii(e,t,i){var r=new function(){var t=!1,i=new P,r=null,n=new P(0,0,0,0);return{setMask:function(i){r===i||t||(e.colorMask(i,i,i,i),r=i)},setLocked:function(e){t=e},setClear:function(t,r,a,s,o){!0===o&&(t*=s,r*=s,a*=s),i.set(t,r,a,s),!1===n.equals(i)&&(e.clearColor(t,r,a,s),n.copy(i))},reset:function(){t=!1,r=null,n.set(-1,0,0,0)}}},n=new function(){var t=!1,i=null,r=null,n=null;return{setTest:function(t){t?z(e.DEPTH_TEST):U(e.DEPTH_TEST)},setMask:function(r){i===r||t||(e.depthMask(r),i=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){n!==t&&(e.clearDepth(t),n=t)},reset:function(){t=!1,i=null,r=null,n=null}}},a=new function(){var t=!1,i=null,r=null,n=null,a=null,s=null,o=null,l=null,u=null;return{setTest:function(t){t?z(e.STENCIL_TEST):U(e.STENCIL_TEST)},setMask:function(r){i===r||t||(e.stencilMask(r),i=r)},setFunc:function(t,i,s){r===t&&n===i&&a===s||(e.stencilFunc(t,i,s),r=t,n=i,a=s)},setOp:function(t,i,r){s===t&&o===i&&l===r||(e.stencilOp(t,i,r),s=t,o=i,l=r)},setLocked:function(e){t=e},setClear:function(t){u!==t&&(e.clearStencil(t),u=t)},reset:function(){t=!1,i=null,r=null,n=null,a=null,s=null,o=null,l=null,u=null}}},s=e.getParameter(e.MAX_VERTEX_ATTRIBS),o=new Uint8Array(s),l=new Uint8Array(s),u=new Uint8Array(s),c={},d=null,h=null,f=null,p=null,m=null,v=null,g=null,y=null,_=null,b=!1,M=null,T=null,A=null,w=null,E=null,x=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),S=!1,D=0,I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(D=parseFloat(/^WebGL\ ([0-9])/.exec(I)[1]),S=D>=1):-1!==I.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(I)[1]),S=D>=2);var j=null,L={},N=new P,C=new P;function O(t,i,r){var n=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<r;s++)e.texImage2D(i+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,n);return a}var k={};function R(i,r){(o[i]=1,0===l[i]&&(e.enableVertexAttribArray(i),l[i]=1),u[i]!==r)&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,r),u[i]=r)}function z(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function U(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}function B(t,r,n,a,s,o,l,u){if(0!==t?z(e.BLEND):U(e.BLEND),5!==t){if(t!==f||u!==b)switch(t){case 2:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case 3:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case 4:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}p=null,m=null,v=null,g=null,y=null,_=null}else s=s||r,o=o||n,l=l||a,r===p&&s===g||(e.blendEquationSeparate(i.convert(r),i.convert(s)),p=r,g=s),n===m&&a===v&&o===y&&l===_||(e.blendFuncSeparate(i.convert(n),i.convert(a),i.convert(o),i.convert(l)),m=n,v=a,y=o,_=l);f=t,b=u}function F(t){M!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),M=t)}function V(t){0!==t?(z(e.CULL_FACE),t!==T&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):U(e.CULL_FACE),T=t}function G(t,i,r){t?(z(e.POLYGON_OFFSET_FILL),w===i&&E===r||(e.polygonOffset(i,r),w=i,E=r)):U(e.POLYGON_OFFSET_FILL)}function H(t){void 0===t&&(t=e.TEXTURE0+x-1),j!==t&&(e.activeTexture(t),j=t)}return k[e.TEXTURE_2D]=O(e.TEXTURE_2D,e.TEXTURE_2D,1),k[e.TEXTURE_CUBE_MAP]=O(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r.setClear(0,0,0,1),n.setClear(1),a.setClear(0),z(e.DEPTH_TEST),n.setFunc(3),F(!1),V(1),z(e.CULL_FACE),z(e.BLEND),B(1),{buffers:{color:r,depth:n,stencil:a},initAttributes:function(){for(var e=0,t=o.length;e<t;e++)o[e]=0},enableAttribute:function(e){R(e,0)},enableAttributeAndDivisor:R,disableUnusedAttributes:function(){for(var t=0,i=l.length;t!==i;++t)l[t]!==o[t]&&(e.disableVertexAttribArray(t),l[t]=0)},enable:z,disable:U,getCompressedTextureFormats:function(){if(null===d&&(d=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var i=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<i.length;r++)d.push(i[r]);return d},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:B,setMaterial:function(t,i){2===t.side?U(e.CULL_FACE):z(e.CULL_FACE);var a=1===t.side;i&&(a=!a),F(a),!0===t.transparent?B(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):B(0),n.setFunc(t.depthFunc),n.setTest(t.depthTest),n.setMask(t.depthWrite),r.setMask(t.colorWrite),G(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:F,setCullFace:V,setLineWidth:function(t){t!==A&&(S&&e.lineWidth(t),A=t)},setPolygonOffset:G,setScissorTest:function(t){t?z(e.SCISSOR_TEST):U(e.SCISSOR_TEST)},activeTexture:H,bindTexture:function(t,i){null===j&&H();var r=L[j];void 0===r&&(r={type:void 0,texture:void 0},L[j]=r),r.type===t&&r.texture===i||(e.bindTexture(t,i||k[t]),r.type=t,r.texture=i)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===N.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),N.copy(t))},viewport:function(t){!1===C.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),C.copy(t))},reset:function(){for(var t=0;t<l.length;t++)1===l[t]&&(e.disableVertexAttribArray(t),l[t]=0);c={},d=null,j=null,L={},h=null,f=null,M=null,T=null,r.reset(),n.reset(),a.reset()}}}function ji(e,i,r,n,a,s,o){var l,u="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,c={};function d(e,i){if(e.width>i||e.height>i){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var r=i/Math.max(e.width,e.height),n=t.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=Math.floor(e.width*r),n.height=Math.floor(e.height*r),n.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+n.width+"x"+n.height,e),n}return e}function h(e){return A.isPowerOfTwo(e.width)&&A.isPowerOfTwo(e.height)}function f(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function p(t,i,r,a){e.generateMipmap(t),n.get(i).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function m(t){return 1003===t||1004===t||1005===t?e.NEAREST:e.LINEAR}function v(t){var i=t.target;i.removeEventListener("dispose",v),function(t){var i=n.get(t);if(t.image&&i.__image__webglTextureCube)e.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)return;e.deleteTexture(i.__webglTexture)}n.remove(t)}(i),i.isVideoTexture&&delete c[i.id],o.memory.textures--}function g(t){var i=t.target;i.removeEventListener("dispose",g),function(t){var i=n.get(t),r=n.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(i.__webglFramebuffer[a]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[a]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(t.texture),n.remove(t)}(i),o.memory.textures--}function y(i,m){var g=n.get(i);if(i.isVideoTexture&&function(e){var t=e.id,i=o.render.frame;c[t]!==i&&(c[t]=i,e.update())}(i),i.version>0&&g.__version!==i.version){var y=i.image;if(void 0===y)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",i);else{if(!1!==y.complete)return void function(i,n,c){void 0===i.__webglInit&&(i.__webglInit=!0,n.addEventListener("dispose",v),i.__webglTexture=e.createTexture(),o.memory.textures++);r.activeTexture(e.TEXTURE0+c),r.bindTexture(e.TEXTURE_2D,i.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,n.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,n.unpackAlignment);var m=d(n.image,a.maxTextureSize);(function(e){return 1001!==e.wrapS||1001!==e.wrapT||1003!==e.minFilter&&1006!==e.minFilter})(n)&&!1===h(m)&&(m=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===l&&(l=t.createElementNS("http://www.w3.org/1999/xhtml","canvas")),l.width=A.floorPowerOfTwo(e.width),l.height=A.floorPowerOfTwo(e.height),l.getContext("2d").drawImage(e,0,0,l.width,l.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+l.width+"x"+l.height,e),l):e}(m));var g=h(m),y=s.convert(n.format),b=s.convert(n.type);_(e.TEXTURE_2D,n,g);var M,T=n.mipmaps;if(n.isDepthTexture){var w=e.DEPTH_COMPONENT;if(1015===n.type){if(!u)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else u&&(w=e.DEPTH_COMPONENT16);1026===n.format&&w===e.DEPTH_COMPONENT&&1012!==n.type&&1014!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=1012,b=s.convert(n.type)),1027===n.format&&(w=e.DEPTH_STENCIL,1020!==n.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=1020,b=s.convert(n.type))),r.texImage2D(e.TEXTURE_2D,0,w,m.width,m.height,0,y,b,null)}else if(n.isDataTexture)if(T.length>0&&g){for(var E=0,x=T.length;E<x;E++)M=T[E],r.texImage2D(e.TEXTURE_2D,E,y,M.width,M.height,0,y,b,M.data);n.generateMipmaps=!1,i.__maxMipLevel=T.length-1}else r.texImage2D(e.TEXTURE_2D,0,y,m.width,m.height,0,y,b,m.data),i.__maxMipLevel=0;else if(n.isCompressedTexture){for(E=0,x=T.length;E<x;E++)M=T[E],1023!==n.format&&1022!==n.format?r.getCompressedTextureFormats().indexOf(y)>-1?r.compressedTexImage2D(e.TEXTURE_2D,E,y,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(e.TEXTURE_2D,E,y,M.width,M.height,0,y,b,M.data);i.__maxMipLevel=T.length-1}else if(T.length>0&&g){for(E=0,x=T.length;E<x;E++)M=T[E],r.texImage2D(e.TEXTURE_2D,E,y,y,b,M);n.generateMipmaps=!1,i.__maxMipLevel=T.length-1}else r.texImage2D(e.TEXTURE_2D,0,y,y,b,m),i.__maxMipLevel=0;f(n,g)&&p(e.TEXTURE_2D,n,m.width,m.height);i.__version=n.version,n.onUpdate&&n.onUpdate(n)}(g,i,m);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",i)}}r.activeTexture(e.TEXTURE0+m),r.bindTexture(e.TEXTURE_2D,g.__webglTexture)}function _(t,r,o){var l;if(o?(e.texParameteri(t,e.TEXTURE_WRAP_S,s.convert(r.wrapS)),e.texParameteri(t,e.TEXTURE_WRAP_T,s.convert(r.wrapT)),e.texParameteri(t,e.TEXTURE_MAG_FILTER,s.convert(r.magFilter)),e.texParameteri(t,e.TEXTURE_MIN_FILTER,s.convert(r.minFilter))):(e.texParameteri(t,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(t,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),1001===r.wrapS&&1001===r.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",r),e.texParameteri(t,e.TEXTURE_MAG_FILTER,m(r.magFilter)),e.texParameteri(t,e.TEXTURE_MIN_FILTER,m(r.minFilter)),1003!==r.minFilter&&1006!==r.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",r)),l=i.get("EXT_texture_filter_anisotropic")){if(1015===r.type&&null===i.get("OES_texture_float_linear"))return;if(1016===r.type&&null===i.get("OES_texture_half_float_linear"))return;(r.anisotropy>1||n.get(r).__currentAnisotropy)&&(e.texParameterf(t,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,a.getMaxAnisotropy())),n.get(r).__currentAnisotropy=r.anisotropy)}}function b(t,i,a,o){var l=s.convert(i.texture.format),u=s.convert(i.texture.type);r.texImage2D(o,0,l,i.width,i.height,0,l,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,o,n.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function M(t,i){e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer&&!i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):i.depthBuffer&&i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i.width,i.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function T(t){var i=n.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),y(i.depthTexture,0);var r=n.get(i.depthTexture).__webglTexture;if(1026===i.depthTexture.format)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(1027!==i.depthTexture.format)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}(i.__webglFramebuffer,t)}else if(r){i.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[a]),i.__webglDepthbuffer[a]=e.createRenderbuffer(),M(i.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),M(i.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=y,this.setTextureCube=function(t,i){var l=n.get(t);if(6===t.image.length)if(t.version>0&&l.__version!==t.version){l.__image__webglTextureCube||(t.addEventListener("dispose",v),l.__image__webglTextureCube=e.createTexture(),o.memory.textures++),r.activeTexture(e.TEXTURE0+i),r.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var u=t&&t.isCompressedTexture,c=t.image[0]&&t.image[0].isDataTexture,m=[],g=0;g<6;g++)m[g]=u||c?c?t.image[g].image:t.image[g]:d(t.image[g],a.maxCubemapSize);var y=m[0],b=h(y),M=s.convert(t.format),T=s.convert(t.type);_(e.TEXTURE_CUBE_MAP,t,b);for(g=0;g<6;g++)if(u)for(var A,w=m[g].mipmaps,E=0,x=w.length;E<x;E++)A=w[E],1023!==t.format&&1022!==t.format?r.getCompressedTextureFormats().indexOf(M)>-1?r.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,E,M,A.width,A.height,0,A.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,E,M,A.width,A.height,0,M,T,A.data);else c?r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,M,m[g].width,m[g].height,0,M,T,m[g].data):r.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,M,M,T,m[g]);l.__maxMipLevel=u?w.length-1:0,f(t,b)&&p(e.TEXTURE_CUBE_MAP,t,y.width,y.height),l.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(e.TEXTURE0+i),r.bindTexture(e.TEXTURE_CUBE_MAP,l.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){r.activeTexture(e.TEXTURE0+i),r.bindTexture(e.TEXTURE_CUBE_MAP,n.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=n.get(t),a=n.get(t.texture);t.addEventListener("dispose",g),a.__webglTexture=e.createTexture(),o.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,l=h(t);if(s){i.__webglFramebuffer=[];for(var u=0;u<6;u++)i.__webglFramebuffer[u]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){r.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),_(e.TEXTURE_CUBE_MAP,t.texture,l);for(u=0;u<6;u++)b(i.__webglFramebuffer[u],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+u);f(t.texture,l)&&p(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),r.bindTexture(e.TEXTURE_CUBE_MAP,null)}else r.bindTexture(e.TEXTURE_2D,a.__webglTexture),_(e.TEXTURE_2D,t.texture,l),b(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),f(t.texture,l)&&p(e.TEXTURE_2D,t.texture,t.width,t.height),r.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&T(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(f(i,h(t))){var a=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=n.get(i).__webglTexture;r.bindTexture(a,s),p(a,i,t.width,t.height),r.bindTexture(a,null)}}}function Li(e,t){return{convert:function(i){var r;if(1e3===i)return e.REPEAT;if(1001===i)return e.CLAMP_TO_EDGE;if(1002===i)return e.MIRRORED_REPEAT;if(1003===i)return e.NEAREST;if(1004===i)return e.NEAREST_MIPMAP_NEAREST;if(1005===i)return e.NEAREST_MIPMAP_LINEAR;if(1006===i)return e.LINEAR;if(1007===i)return e.LINEAR_MIPMAP_NEAREST;if(1008===i)return e.LINEAR_MIPMAP_LINEAR;if(1009===i)return e.UNSIGNED_BYTE;if(1017===i)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===i)return e.UNSIGNED_SHORT_5_5_5_1;if(1019===i)return e.UNSIGNED_SHORT_5_6_5;if(1010===i)return e.BYTE;if(1011===i)return e.SHORT;if(1012===i)return e.UNSIGNED_SHORT;if(1013===i)return e.INT;if(1014===i)return e.UNSIGNED_INT;if(1015===i)return e.FLOAT;if(1016===i&&null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES;if(1021===i)return e.ALPHA;if(1022===i)return e.RGB;if(1023===i)return e.RGBA;if(1024===i)return e.LUMINANCE;if(1025===i)return e.LUMINANCE_ALPHA;if(1026===i)return e.DEPTH_COMPONENT;if(1027===i)return e.DEPTH_STENCIL;if(100===i)return e.FUNC_ADD;if(101===i)return e.FUNC_SUBTRACT;if(102===i)return e.FUNC_REVERSE_SUBTRACT;if(200===i)return e.ZERO;if(201===i)return e.ONE;if(202===i)return e.SRC_COLOR;if(203===i)return e.ONE_MINUS_SRC_COLOR;if(204===i)return e.SRC_ALPHA;if(205===i)return e.ONE_MINUS_SRC_ALPHA;if(206===i)return e.DST_ALPHA;if(207===i)return e.ONE_MINUS_DST_ALPHA;if(208===i)return e.DST_COLOR;if(209===i)return e.ONE_MINUS_DST_COLOR;if(210===i)return e.SRC_ALPHA_SATURATE;if((33776===i||33777===i||33778===i||33779===i)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===i)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===i)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===i)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===i)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===i||35841===i||35842===i||35843===i)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===i)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===i)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===i)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===i)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===i&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((37808===i||37809===i||37810===i||37811===i||37812===i||37813===i||37814===i||37815===i||37816===i||37817===i||37818===i||37819===i||37820===i||37821===i)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return i;if((103===i||104===i)&&null!==(r=t.get("EXT_blend_minmax"))){if(103===i)return r.MIN_EXT;if(104===i)return r.MAX_EXT}return 1020===i&&null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:0}}}function Ni(e,t,i,r){le.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ci(e){Ni.call(this),this.cameras=e||[]}function Oi(t){var i=this,r=null,n=null,a=null,s=new E,o=new E;"undefined"!=typeof e&&"VRFrameData"in e&&(n=new e.VRFrameData,e.addEventListener("vrdisplaypresentchange",g,!1));var l=new E,u=new x,c=new S,d=new Ni;d.bounds=new P(0,0,.5,1),d.layers.enable(1);var h=new Ni;h.bounds=new P(.5,0,.5,1),h.layers.enable(2);var f,p,m=new Ci([d,h]);function v(){return null!==r&&!0===r.isPresenting}function g(){if(v()){var e=r.getEyeParameters("left"),n=e.renderWidth,a=e.renderHeight;p=t.getPixelRatio(),f=t.getSize(),t.setDrawingBufferSize(2*n,a,1),y.start()}else i.enabled&&(t.setDrawingBufferSize(f.width,f.height,p),y.stop())}m.layers.enable(1),m.layers.enable(2),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return r},this.setDevice=function(e){void 0!==e&&(r=e),y.setContext(e)},this.setPoseTarget=function(e){void 0!==e&&(a=e)},this.getCamera=function(e){if(null===r)return e;r.depthNear=e.near,r.depthFar=e.far,r.getFrameData(n);var t=r.stageParameters;t?s.fromArray(t.sittingToStandingTransform):s.makeTranslation(0,i.userHeight,0);var f=n.pose,p=null!==a?a:e;if(p.matrix.copy(s),p.matrix.decompose(p.position,p.quaternion,p.scale),null!==f.orientation&&(u.fromArray(f.orientation),p.quaternion.multiply(u)),null!==f.position&&(u.setFromRotationMatrix(s),c.fromArray(f.position),c.applyQuaternion(u),p.position.add(c)),p.updateMatrixWorld(),!1===r.isPresenting)return e;d.near=e.near,h.near=e.near,d.far=e.far,h.far=e.far,m.matrixWorld.copy(e.matrixWorld),m.matrixWorldInverse.copy(e.matrixWorldInverse),d.matrixWorldInverse.fromArray(n.leftViewMatrix),h.matrixWorldInverse.fromArray(n.rightViewMatrix),o.getInverse(s),d.matrixWorldInverse.multiply(o),h.matrixWorldInverse.multiply(o);var v=p.parent;null!==v&&(l.getInverse(v.matrixWorld),d.matrixWorldInverse.multiply(l),h.matrixWorldInverse.multiply(l)),d.matrixWorld.getInverse(d.matrixWorldInverse),h.matrixWorld.getInverse(h.matrixWorldInverse),d.projectionMatrix.fromArray(n.leftProjectionMatrix),h.projectionMatrix.fromArray(n.rightProjectionMatrix),m.projectionMatrix.copy(d.projectionMatrix);var g=r.getLayers();if(g.length){var y=g[0];null!==y.leftBounds&&4===y.leftBounds.length&&d.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&h.bounds.fromArray(y.rightBounds)}return m},this.getStandingMatrix=function(){return s},this.isPresenting=v;var y=new J;this.setAnimationLoop=function(e){y.setAnimationLoop(e)},this.submitFrame=function(){v()&&r.submitFrame()},this.dispose=function(){"undefined"!=typeof e&&e.removeEventListener("vrdisplaypresentchange",g)}}function ki(e){var t=e.context,i=null,r=null,n=null,a=null;function s(){return null!==r&&null!==n}var o=new Ni;o.layers.enable(1),o.viewport=new P;var l=new Ni;l.layers.enable(2),l.viewport=new P;var u=new Ci([o,l]);function c(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}u.layers.enable(1),u.layers.enable(2),this.enabled=!1,this.getDevice=function(){return i},this.setDevice=function(e){void 0!==e&&(i=e),t.setCompatibleXRDevice(e)},this.setSession=function(i,a){null!==(r=i)&&(r.addEventListener("end",function(){e.setFramebuffer(null),h.stop()}),r.baseLayer=new XRWebGLLayer(r,t),r.requestFrameOfReference(a.frameOfReferenceType).then(function(t){n=t,e.setFramebuffer(r.baseLayer.framebuffer),h.setContext(r),h.start()}))},this.getCamera=function(e){if(s()){var t=e.parent,i=u.cameras;c(u,t);for(var r=0;r<i.length;r++)c(i[r],t);e.matrixWorld.copy(u.matrixWorld);for(var n=e.children,a=(r=0,n.length);r<a;r++)n[r].updateMatrixWorld(!0);return u}return e},this.isPresenting=s;var d=null;var h=new J;h.setAnimationLoop(function(e,t){a=t.getDevicePose(n);for(var i=r.baseLayer,s=t.views,o=0;o<s.length;o++){var l=s[o],c=i.getViewport(l),h=a.getViewMatrix(l),f=u.cameras[o];f.matrix.fromArray(h).getInverse(f.matrix),f.projectionMatrix.fromArray(l.projectionMatrix),f.viewport.set(c.x,c.y,c.width,c.height),0===o&&(u.matrix.copy(f.matrix),u.projectionMatrix.copy(f.projectionMatrix))}d&&d()}),this.setAnimationLoop=function(e){d=e},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function Pi(i){console.log("THREE.WebGLRenderer","93");var r=void 0!==(i=i||{}).canvas?i.canvas:t.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==i.context?i.context:null,a=void 0!==i.alpha&&i.alpha,s=void 0===i.depth||i.depth,o=void 0===i.stencil||i.stencil,l=void 0!==i.antialias&&i.antialias,u=void 0===i.premultipliedAlpha||i.premultipliedAlpha,c=void 0!==i.preserveDrawingBuffer&&i.preserveDrawingBuffer,d=void 0!==i.powerPreference?i.powerPreference:"default",h=null,f=null;this.domElement=r,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,m,v,g,y,_,b,M,T,w,x,D,I,j,L,N,C,O,k,R=this,z=!1,B=null,F=null,V=null,H=-1,Q="",W=null,q=null,X=new P,ee=new P,te=null,ie=0,re=r.width,ne=r.height,ae=1,se=new P(0,0,re,ne),oe=new P(0,0,re,ne),le=!1,ue=new G,ce=new Ke,de=!1,he=!1,fe=new E,pe=new S;function me(){return null===F?ae:1}try{var ve={alpha:a,depth:s,stencil:o,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:c,powerPreference:d};if(r.addEventListener("webglcontextlost",be,!1),r.addEventListener("webglcontextrestored",Me,!1),null===(p=n||r.getContext("webgl",ve)||r.getContext("experimental-webgl",ve)))throw null!==r.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(i){console.error("THREE.WebGLRenderer: "+i.message)}function ge(){(m=new Je(p)).get("WEBGL_depth_texture"),m.get("OES_texture_float"),m.get("OES_texture_float_linear"),m.get("OES_texture_half_float"),m.get("OES_texture_half_float_linear"),m.get("OES_standard_derivatives"),m.get("OES_element_index_uint"),m.get("ANGLE_instanced_arrays"),k=new Li(p,m),v=new Ze(p,m,i),(g=new Ii(p,m,k)).scissor(ee.copy(oe).multiplyScalar(ae)),g.viewport(X.copy(se).multiplyScalar(ae)),y=new tt(p),_=new si,b=new ji(p,m,g,_,v,k,y),M=new $(p),T=new $e(p,M,y),w=new nt(T,y),L=new rt(p),x=new ai(R,m,v),D=new ci,I=new Ai,j=new qe(R,g,w,u),N=new Xe(p,m,y),C=new et(p,m,y),O=new Di(R,p,g,b,v),y.programs=x.programs,R.context=p,R.capabilities=v,R.extensions=m,R.properties=_,R.renderLists=D,R.state=g,R.info=y}ge();var ye="xr"in navigator?new ki(R):new Oi(R);this.vr=ye;var _e=new xi(R,w,v.maxTextureSize);function be(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),z=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),z=!1,ge()}function Te(e){var t=e.target;t.removeEventListener("dispose",Te),function(e){Ae(e),_.remove(e)}(t)}function Ae(e){var t=_.get(e).program;e.program=void 0,void 0!==t&&x.releaseProgram(t)}this.shadowMap=_e,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=m.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=m.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(e){void 0!==e&&(ae=e,this.setSize(re,ne,!1))},this.getSize=function(){return{width:re,height:ne}},this.setSize=function(e,t,i){ye.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(re=e,ne=t,r.width=e*ae,r.height=t*ae,!1!==i&&(r.style.width=e+"px",r.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:re*ae,height:ne*ae}},this.setDrawingBufferSize=function(e,t,i){re=e,ne=t,ae=i,r.width=e*i,r.height=t*i,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return X},this.setViewport=function(e,t,i,r){se.set(e,ne-t-r,i,r),g.viewport(X.copy(se).multiplyScalar(ae))},this.setScissor=function(e,t,i,r){oe.set(e,ne-t-r,i,r),g.scissor(ee.copy(oe).multiplyScalar(ae))},this.setScissorTest=function(e){g.setScissorTest(le=e)},this.getClearColor=function(){return j.getClearColor()},this.setClearColor=function(){j.setClearColor.apply(j,arguments)},this.getClearAlpha=function(){return j.getClearAlpha()},this.setClearAlpha=function(){j.setClearAlpha.apply(j,arguments)},this.clear=function(e,t,i){var r=0;(void 0===e||e)&&(r|=p.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=p.DEPTH_BUFFER_BIT),(void 0===i||i)&&(r|=p.STENCIL_BUFFER_BIT),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,i,r){this.setRenderTarget(e),this.clear(t,i,r)},this.dispose=function(){r.removeEventListener("webglcontextlost",be,!1),r.removeEventListener("webglcontextrestored",Me,!1),D.dispose(),I.dispose(),_.dispose(),w.dispose(),ye.dispose(),xe.stop()},this.renderBufferImmediate=function(e,t,i){g.initAttributes();var r=_.get(e);e.hasPositions&&!r.position&&(r.position=p.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=p.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=p.createBuffer()),e.hasColors&&!r.color&&(r.color=p.createBuffer());var n=t.getAttributes();if(e.hasPositions&&(p.bindBuffer(p.ARRAY_BUFFER,r.position),p.bufferData(p.ARRAY_BUFFER,e.positionArray,p.DYNAMIC_DRAW),g.enableAttribute(n.position),p.vertexAttribPointer(n.position,3,p.FLOAT,!1,0,0)),e.hasNormals){if(p.bindBuffer(p.ARRAY_BUFFER,r.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&!0===i.flatShading)for(var a=0,s=3*e.count;a<s;a+=9){var o=e.normalArray,l=(o[a+0]+o[a+3]+o[a+6])/3,u=(o[a+1]+o[a+4]+o[a+7])/3,c=(o[a+2]+o[a+5]+o[a+8])/3;o[a+0]=l,o[a+1]=u,o[a+2]=c,o[a+3]=l,o[a+4]=u,o[a+5]=c,o[a+6]=l,o[a+7]=u,o[a+8]=c}p.bufferData(p.ARRAY_BUFFER,e.normalArray,p.DYNAMIC_DRAW),g.enableAttribute(n.normal),p.vertexAttribPointer(n.normal,3,p.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(p.bindBuffer(p.ARRAY_BUFFER,r.uv),p.bufferData(p.ARRAY_BUFFER,e.uvArray,p.DYNAMIC_DRAW),g.enableAttribute(n.uv),p.vertexAttribPointer(n.uv,2,p.FLOAT,!1,0,0)),e.hasColors&&0!==i.vertexColors&&(p.bindBuffer(p.ARRAY_BUFFER,r.color),p.bufferData(p.ARRAY_BUFFER,e.colorArray,p.DYNAMIC_DRAW),g.enableAttribute(n.color),p.vertexAttribPointer(n.color,3,p.FLOAT,!1,0,0)),g.disableUnusedAttributes(),p.drawArrays(p.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,r,n,a){var s=n.isMesh&&n.matrixWorld.determinant()<0;g.setMaterial(r,s);var o=je(e,t,r,n),l=i.id+"_"+o.id+"_"+(!0===r.wireframe),u=!1;l!==Q&&(Q=l,u=!0),n.morphTargetInfluences&&(L.update(n,i,r,o),u=!0);var c,d=i.index,h=i.attributes.position,f=1;!0===r.wireframe&&(d=T.getWireframeAttribute(i),f=2);var v=N;null!==d&&(c=M.get(d),(v=C).setIndex(c)),u&&(!function(e,t,i){if(i&&i.isInstancedBufferGeometry&&null===m.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");g.initAttributes();var r=i.attributes,n=t.getAttributes(),a=e.defaultAttributeValues;for(var s in n){var o=n[s];if(o>=0){var l=r[s];if(void 0!==l){var u=l.normalized,c=l.itemSize,d=M.get(l);if(void 0===d)continue;var h=d.buffer,f=d.type,v=d.bytesPerElement;if(l.isInterleavedBufferAttribute){var y=l.data,_=y.stride,b=l.offset;y&&y.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(o,y.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=y.meshPerAttribute*y.count)):g.enableAttribute(o),p.bindBuffer(p.ARRAY_BUFFER,h),p.vertexAttribPointer(o,c,f,u,_*v,b*v)}else l.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(o,l.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=l.meshPerAttribute*l.count)):g.enableAttribute(o),p.bindBuffer(p.ARRAY_BUFFER,h),p.vertexAttribPointer(o,c,f,u,0,0)}else if(void 0!==a){var T=a[s];if(void 0!==T)switch(T.length){case 2:p.vertexAttrib2fv(o,T);break;case 3:p.vertexAttrib3fv(o,T);break;case 4:p.vertexAttrib4fv(o,T);break;default:p.vertexAttrib1fv(o,T)}}}}g.disableUnusedAttributes()}(r,o,i),null!==d&&p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,c.buffer));var y=1/0;null!==d?y=d.count:void 0!==h&&(y=h.count);var _=i.drawRange.start*f,b=i.drawRange.count*f,A=null!==a?a.start*f:0,w=null!==a?a.count*f:1/0,E=Math.max(_,A),x=Math.min(y,_+b,A+w)-1,S=Math.max(0,x-E+1);if(0!==S){if(n.isMesh)if(!0===r.wireframe)g.setLineWidth(r.wireframeLinewidth*me()),v.setMode(p.LINES);else switch(n.drawMode){case 0:v.setMode(p.TRIANGLES);break;case 1:v.setMode(p.TRIANGLE_STRIP);break;case 2:v.setMode(p.TRIANGLE_FAN)}else if(n.isLine){var D=r.linewidth;void 0===D&&(D=1),g.setLineWidth(D*me()),n.isLineSegments?v.setMode(p.LINES):n.isLineLoop?v.setMode(p.LINE_LOOP):v.setMode(p.LINE_STRIP)}else n.isPoints&&v.setMode(p.POINTS);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&v.renderInstances(i,E,S):v.render(E,S)}},this.compile=function(e,t){(f=I.get(e,t)).init(),e.traverse(function(e){e.isLight&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))}),f.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var i=0;i<t.material.length;i++)Ie(t.material[i],e.fog,t);else Ie(t.material,e.fog,t)})};var we=null;var Ee,xe=new J;function Se(e,t,i,r){for(var n=0,a=e.length;n<a;n++){var s=e[n],o=s.object,l=s.geometry,u=void 0===r?s.material:r,c=s.group;if(i.isArrayCamera){q=i;for(var d=i.cameras,h=0,f=d.length;h<f;h++){var p=d[h];if(o.layers.test(p.layers)){if("viewport"in p)g.viewport(X.copy(p.viewport));else{var m=p.bounds,v=m.x*re,y=m.y*ne,_=m.z*re,b=m.w*ne;g.viewport(X.set(v,y,_,b).multiplyScalar(ae))}De(o,t,p,l,u,c)}}}else q=null,De(o,t,i,l,u,c)}}function De(e,t,i,r,n,a){if(e.onBeforeRender(R,t,i,r,n,a),f=I.get(t,q||i),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var s=e.isMesh&&e.matrixWorld.determinant()<0;g.setMaterial(n,s);var o=je(i,t.fog,n,e);Q="",function(e,t,i){e.render(function(e){R.renderBufferImmediate(e,t,i)})}(e,o,n)}else R.renderBufferDirect(i,t.fog,r,n,e,a);e.onAfterRender(R,t,i,r,n,a),f=I.get(t,q||i)}function Ie(e,t,i){var r=_.get(e),n=f.state.lights,a=f.state.shadowsArray,s=x.getParameters(e,n.state,a,t,ce.numPlanes,ce.numIntersection,i),o=x.getProgramCode(e,s),l=r.program,u=!0;if(void 0===l)e.addEventListener("dispose",Te);else if(l.code!==o)Ae(e);else if(r.lightsHash!==n.state.hash)_.update(e,"lightsHash",n.state.hash),u=!1;else{if(void 0!==s.shaderID)return;u=!1}if(u){if(s.shaderID){var c=K[s.shaderID];r.shader={name:e.type,uniforms:Y.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,R),l=x.acquireProgram(e,r.shader,s,o),r.program=l,e.program=l}var d=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var h=0;h<R.maxMorphTargets;h++)d["morphTarget"+h]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(h=0;h<R.maxMorphNormals;h++)d["morphNormal"+h]>=0&&e.numSupportedMorphNormals++}var p=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ce.numPlanes,r.numIntersection=ce.numIntersection,p.clippingPlanes=ce.uniform),r.fog=t,r.lightsHash=n.state.hash,e.lights&&(p.ambientLightColor.value=n.state.ambient,p.directionalLights.value=n.state.directional,p.spotLights.value=n.state.spot,p.rectAreaLights.value=n.state.rectArea,p.pointLights.value=n.state.point,p.hemisphereLights.value=n.state.hemi,p.directionalShadowMap.value=n.state.directionalShadowMap,p.directionalShadowMatrix.value=n.state.directionalShadowMatrix,p.spotShadowMap.value=n.state.spotShadowMap,p.spotShadowMatrix.value=n.state.spotShadowMatrix,p.pointShadowMap.value=n.state.pointShadowMap,p.pointShadowMatrix.value=n.state.pointShadowMatrix);var m=r.program.getUniforms(),v=Wt.seqWithValue(m.seq,p);r.uniformsList=v}function je(e,t,i,r){ie=0;var n=_.get(i),a=f.state.lights;if(de&&(he||e!==W)){var s=e===W&&i.id===H;ce.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,n,s)}!1===i.needsUpdate&&(void 0===n.program?i.needsUpdate=!0:i.fog&&n.fog!==t?i.needsUpdate=!0:i.lights&&n.lightsHash!==a.state.hash?i.needsUpdate=!0:void 0===n.numClippingPlanes||n.numClippingPlanes===ce.numPlanes&&n.numIntersection===ce.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(Ie(i,t,r),i.needsUpdate=!1);var o,l,u=!1,c=!1,d=!1,h=n.program,m=h.getUniforms(),y=n.shader.uniforms;if(g.useProgram(h.program)&&(u=!0,c=!0,d=!0),i.id!==H&&(H=i.id,c=!0),u||e!==W){if(m.setValue(p,"projectionMatrix",e.projectionMatrix),v.logarithmicDepthBuffer&&m.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),W!==(q||e)&&(W=q||e,c=!0,d=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var b=m.map.cameraPosition;void 0!==b&&b.setValue(p,pe.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&m.setValue(p,"viewMatrix",e.matrixWorldInverse)}if(i.skinning){m.setOptional(p,r,"bindMatrix"),m.setOptional(p,r,"bindMatrixInverse");var M=r.skeleton;if(M){var T=M.bones;if(v.floatVertexTextures){if(void 0===M.boneTexture){var w=Math.sqrt(4*T.length);w=A.ceilPowerOfTwo(w),w=Math.max(w,4);var E=new Float32Array(w*w*4);E.set(M.boneMatrices);var x=new U(E,w,w,1023,1015);x.needsUpdate=!0,M.boneMatrices=E,M.boneTexture=x,M.boneTextureSize=w}m.setValue(p,"boneTexture",M.boneTexture),m.setValue(p,"boneTextureSize",M.boneTextureSize)}else m.setOptional(p,M,"boneMatrices")}}return c&&(m.setValue(p,"toneMappingExposure",R.toneMappingExposure),m.setValue(p,"toneMappingWhitePoint",R.toneMappingWhitePoint),i.lights&&(l=d,(o=y).ambientLightColor.needsUpdate=l,o.directionalLights.needsUpdate=l,o.pointLights.needsUpdate=l,o.spotLights.needsUpdate=l,o.rectAreaLights.needsUpdate=l,o.hemisphereLights.needsUpdate=l),t&&i.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(y,t),i.isMeshBasicMaterial?Le(y,i):i.isMeshLambertMaterial?(Le(y,i),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(y,i)):i.isMeshPhongMaterial?(Le(y,i),i.isMeshToonMaterial?function(e,t){Ne(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(y,i):Ne(y,i)):i.isMeshStandardMaterial?(Le(y,i),i.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,Ce(e,t)}(y,i):Ce(y,i)):i.isMeshDepthMaterial?(Le(y,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,i)):i.isMeshDistanceMaterial?(Le(y,i),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(y,i)):i.isMeshNormalMaterial?(Le(y,i),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(y,i)):i.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(y,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(y,i)):i.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*ae,e.scale.value=.5*ne,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(y,i):i.isShadowMaterial&&(y.color.value=i.color,y.opacity.value=i.opacity),void 0!==y.ltc_1&&(y.ltc_1.value=Z.LTC_1),void 0!==y.ltc_2&&(y.ltc_2.value=Z.LTC_2),Wt.upload(p,n.uniformsList,y,R)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Wt.upload(p,n.uniformsList,y,R),i.uniformsNeedUpdate=!1),m.setValue(p,"modelViewMatrix",r.modelViewMatrix),m.setValue(p,"normalMatrix",r.normalMatrix),m.setValue(p,"modelMatrix",r.matrixWorld),h}function Le(e,t){var i;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=_.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?i=t.map:t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function Ne(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Ce(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}xe.setAnimationLoop(function(){ye.isPresenting()||we&&we()}),xe.setContext(e),this.setAnimationLoop=function(e){we=e,ye.setAnimationLoop(e),xe.start()},this.render=function(e,t,i,r){if(t&&t.isCamera){if(!z){Q="",H=-1,W=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ye.enabled&&(t=ye.getCamera(t)),(f=I.get(e,t)).init(),e.onBeforeRender(R,e,t,i),fe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ue.setFromMatrix(fe),he=this.localClippingEnabled,de=ce.init(this.clippingPlanes,he,t),(h=D.get(e,t)).init(),function e(t,i,r){if(!1===t.visible)return;if(t.layers.test(i.layers))if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!ue.intersectsSprite(t)||f.pushSprite(t);else if(t.isImmediateRenderObject)r&&pe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(fe),h.push(t,null,t.material,pe.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ue.intersectsObject(t))){r&&pe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(fe);var n=w.update(t),a=t.material;if(Array.isArray(a))for(var s=n.groups,o=0,l=s.length;o<l;o++){var u=s[o],c=a[u.materialIndex];c&&c.visible&&h.push(t,n,c,pe.z,u)}else a.visible&&h.push(t,n,a,pe.z,null)}var d=t.children;for(o=0,l=d.length;o<l;o++)e(d[o],i,r)}(e,t,R.sortObjects),!0===R.sortObjects&&h.sort(),de&&ce.beginShadows();var n=f.state.shadowsArray;_e.render(n,e,t),f.setupLights(t),de&&ce.endShadows(),this.info.autoReset&&this.info.reset(),void 0===i&&(i=null),this.setRenderTarget(i),j.render(h,e,t,r);var a=h.opaque,s=h.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;a.length&&Se(a,e,t,o),s.length&&Se(s,e,t,o)}else a.length&&Se(a,e,t),s.length&&Se(s,e,t);var l=f.state.spritesArray;O.render(l,e,t),i&&b.updateRenderTargetMipmap(i),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),e.onAfterRender(R,e,t),ye.enabled&&ye.submitFrame(),h=null,f=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=ie;return e>=v.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+v.maxTextures),ie+=1,e},this.setTexture2D=(Ee=!1,function(e,t){e&&e.isWebGLRenderTarget&&(Ee||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Ee=!0),e=e.texture),b.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,i){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),b.setTexture2D(t,i)}}(),this.setTextureCube=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?b.setTextureCube(t,i):b.setTextureCubeDynamic(t,i)}}(),this.setFramebuffer=function(e){B=e},this.getRenderTarget=function(){return F},this.setRenderTarget=function(e){F=e,e&&void 0===_.get(e).__webglFramebuffer&&b.setupRenderTarget(e);var t=B,i=!1;if(e){var r=_.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],i=!0):t=r,X.copy(e.viewport),ee.copy(e.scissor),te=e.scissorTest}else X.copy(se).multiplyScalar(ae),ee.copy(oe).multiplyScalar(ae),te=le;if(V!==t&&(p.bindFramebuffer(p.FRAMEBUFFER,t),V=t),g.viewport(X),g.scissor(ee),g.setScissorTest(te),i){var n=_.get(e.texture);p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,n.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,i,r,n,a){if(e&&e.isWebGLRenderTarget){var s=_.get(e).__webglFramebuffer;if(s){var o=!1;s!==V&&(p.bindFramebuffer(p.FRAMEBUFFER,s),o=!0);try{var l=e.texture,u=l.format,c=l.type;if(1023!==u&&k.convert(u)!==p.getParameter(p.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(1009===c||k.convert(c)===p.getParameter(p.IMPLEMENTATION_COLOR_READ_TYPE)||1015===c&&(m.get("OES_texture_float")||m.get("WEBGL_color_buffer_float"))||1016===c&&m.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");p.checkFramebufferStatus(p.FRAMEBUFFER)===p.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&i>=0&&i<=e.height-n&&p.readPixels(t,i,r,n,k.convert(u),k.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&p.bindFramebuffer(p.FRAMEBUFFER,V)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,i){var r=t.image.width,n=t.image.height,a=k.convert(t.format);this.setTexture2D(t,0),p.copyTexImage2D(p.TEXTURE_2D,i||0,a,e.x,e.y,r,n,0)},this.copyTextureToTexture=function(e,t,i,r){var n=t.image.width,a=t.image.height,s=k.convert(i.format),o=k.convert(i.type);this.setTexture2D(i,0),t.isDataTexture?p.texSubImage2D(p.TEXTURE_2D,r||0,e.x,e.y,n,a,s,o,t.image.data):p.texSubImage2D(p.TEXTURE_2D,r||0,e.x,e.y,s,o,t.image)}}function Ri(e,t){this.name="",this.color=new q(e),this.density=void 0!==t?t:25e-5}function zi(e,t,i){this.name="",this.color=new q(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3}function Ui(){oe.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Bi(e){Fe.call(this),this.type="SpriteMaterial",this.color=new q(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Fi(e){oe.call(this),this.type="Sprite",this.material=void 0!==e?e:new Bi,this.center=new w(.5,.5)}function Vi(){oe.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Gi(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new E)}}function Hi(){oe.call(this),this.type="Bone"}function Qi(e,t){We.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new E,this.bindMatrixInverse=new E;var i=new Gi(this.initBones());this.bind(i,this.matrixWorld),this.normalizeSkinWeights()}function Yi(e){Fe.call(this),this.type="LineBasicMaterial",this.color=new q(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Wi(e,t,i){if(1===i)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new qi(e,t);oe.call(this),this.type="Line",this.geometry=void 0!==e?e:new De,this.material=void 0!==t?t:new Yi({color:16777215*Math.random()})}function qi(e,t){Wi.call(this,e,t),this.type="LineSegments"}function Xi(e,t){Wi.call(this,e,t),this.type="LineLoop"}function Zi(e){Fe.call(this),this.type="PointsMaterial",this.color=new q(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ki(e,t){oe.call(this),this.type="Points",this.geometry=void 0!==e?e:new De,this.material=void 0!==t?t:new Zi({color:16777215*Math.random()})}function Ji(){oe.call(this),this.type="Group"}function $i(e,t,i,r,n,a,s,o,l){k.call(this,e,t,i,r,n,a,s,o,l),this.generateMipmaps=!1}function er(e,t,i,r,n,a,s,o,l,u,c,d){k.call(this,null,a,s,o,l,u,r,n,c,d),this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function tr(e,t,i,r,n,a,s,o,l,u){if(1026!==(u=void 0!==u?u:1026)&&1027!==u)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===u&&(i=1012),void 0===i&&1027===u&&(i=1020),k.call(this,null,r,n,a,s,o,u,i,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1}function ir(e){De.call(this),this.type="WireframeGeometry";var t,i,r,n,a,s,o,l,u,c,d=[],h=[0,0],f={},p=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(i=0;i<3;i++)o=v[p[i]],l=v[p[(i+1)%3]],h[0]=Math.min(o,l),h[1]=Math.max(o,l),void 0===f[u=h[0]+","+h[1]]&&(f[u]={index1:h[0],index2:h[1]})}for(u in f)s=f[u],c=e.vertices[s.index1],d.push(c.x,c.y,c.z),c=e.vertices[s.index2],d.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var g,y,_,b,M,T,A;if(c=new S,null!==e.index){for(g=e.attributes.position,y=e.index,0===(_=e.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),n=0,a=_.length;n<a;++n)for(t=M=(b=_[n]).start,r=M+b.count;t<r;t+=3)for(i=0;i<3;i++)o=y.getX(t+i),l=y.getX(t+(i+1)%3),h[0]=Math.min(o,l),h[1]=Math.max(o,l),void 0===f[u=h[0]+","+h[1]]&&(f[u]={index1:h[0],index2:h[1]});for(u in f)s=f[u],c.fromBufferAttribute(g,s.index1),d.push(c.x,c.y,c.z),c.fromBufferAttribute(g,s.index2),d.push(c.x,c.y,c.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(i=0;i<3;i++)T=3*t+i,c.fromBufferAttribute(g,T),d.push(c.x,c.y,c.z),A=3*t+(i+1)%3,c.fromBufferAttribute(g,A),d.push(c.x,c.y,c.z)}this.addAttribute("position",new Ae(d,3))}function rr(e,t,i){pe.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new nr(e,t,i)),this.mergeVertices()}function nr(e,t,i){De.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};var r,n,a=[],s=[],o=[],l=[],u=new S,c=new S,d=new S,h=new S,f=new S;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var p=t+1;for(r=0;r<=i;r++){var m=r/i;for(n=0;n<=t;n++){var v=n/t;e(v,m,c),s.push(c.x,c.y,c.z),v-1e-5>=0?(e(v-1e-5,m,d),h.subVectors(c,d)):(e(v+1e-5,m,d),h.subVectors(d,c)),m-1e-5>=0?(e(v,m-1e-5,d),f.subVectors(c,d)):(e(v,m+1e-5,d),f.subVectors(d,c)),u.crossVectors(h,f).normalize(),o.push(u.x,u.y,u.z),l.push(v,m)}}for(r=0;r<i;r++)for(n=0;n<t;n++){var g=r*p+n,y=r*p+n+1,_=(r+1)*p+n+1,b=(r+1)*p+n;a.push(g,y,b),a.push(y,_,b)}this.setIndex(a),this.addAttribute("position",new Ae(s,3)),this.addAttribute("normal",new Ae(o,3)),this.addAttribute("uv",new Ae(l,2))}function ar(e,t,i,r){pe.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r},this.fromBufferGeometry(new sr(e,t,i,r)),this.mergeVertices()}function sr(e,t,i,r){De.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r},i=i||1;var n=[],a=[];function s(e,t,i,r){var n,a,s=Math.pow(2,r),l=[];for(n=0;n<=s;n++){l[n]=[];var u=e.clone().lerp(i,n/s),c=t.clone().lerp(i,n/s),d=s-n;for(a=0;a<=d;a++)l[n][a]=0===a&&n===s?u:u.clone().lerp(c,a/d)}for(n=0;n<s;n++)for(a=0;a<2*(s-n)-1;a++){var h=Math.floor(a/2);a%2==0?(o(l[n][h+1]),o(l[n+1][h]),o(l[n][h])):(o(l[n][h+1]),o(l[n+1][h+1]),o(l[n+1][h]))}}function o(e){n.push(e.x,e.y,e.z)}function l(t,i){var r=3*t;i.x=e[r+0],i.y=e[r+1],i.z=e[r+2]}function u(e,t,i,r){r<0&&1===e.x&&(a[t]=e.x-1),0===i.x&&0===i.z&&(a[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var i=new S,r=new S,n=new S,a=0;a<t.length;a+=3)l(t[a+0],i),l(t[a+1],r),l(t[a+2],n),s(i,r,n,e)}(r=r||0),function(e){for(var t=new S,i=0;i<n.length;i+=3)t.x=n[i+0],t.y=n[i+1],t.z=n[i+2],t.normalize().multiplyScalar(e),n[i+0]=t.x,n[i+1]=t.y,n[i+2]=t.z}(i),function(){for(var e=new S,t=0;t<n.length;t+=3){e.x=n[t+0],e.y=n[t+1],e.z=n[t+2];var i=c(e)/2/Math.PI+.5,r=d(e)/Math.PI+.5;a.push(i,1-r)}(function(){for(var e=new S,t=new S,i=new S,r=new S,s=new w,o=new w,l=new w,d=0,h=0;d<n.length;d+=9,h+=6){e.set(n[d+0],n[d+1],n[d+2]),t.set(n[d+3],n[d+4],n[d+5]),i.set(n[d+6],n[d+7],n[d+8]),s.set(a[h+0],a[h+1]),o.set(a[h+2],a[h+3]),l.set(a[h+4],a[h+5]),r.copy(e).add(t).add(i).divideScalar(3);var f=c(r);u(s,h+0,e,f),u(o,h+2,t,f),u(l,h+4,i,f)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],i=a[e+2],r=a[e+4],n=Math.max(t,i,r),s=Math.min(t,i,r);n>.9&&s<.1&&(t<.2&&(a[e+0]+=1),i<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new Ae(n,3)),this.addAttribute("normal",new Ae(n.slice(),3)),this.addAttribute("uv",new Ae(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function or(e,t){pe.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new lr(e,t)),this.mergeVertices()}function lr(e,t){sr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ur(e,t){pe.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new cr(e,t)),this.mergeVertices()}function cr(e,t){sr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function dr(e,t){pe.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new hr(e,t)),this.mergeVertices()}function hr(e,t){var i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1];sr.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function fr(e,t){pe.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new pr(e,t)),this.mergeVertices()}function pr(e,t){var i=(1+Math.sqrt(5))/2,r=1/i,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r];sr.call(this,n,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function mr(e,t,i,r,n,a){pe.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:n},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new vr(e,t,i,r,n);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function vr(e,t,i,r,n){De.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:n},t=t||64,i=i||1,r=r||8,n=n||!1;var a=e.computeFrenetFrames(t,n);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var s,o,l=new S,u=new S,c=new w,d=new S,h=[],f=[],p=[],m=[];function v(n){d=e.getPointAt(n/t,d);var s=a.normals[n],c=a.binormals[n];for(o=0;o<=r;o++){var p=o/r*Math.PI*2,m=Math.sin(p),v=-Math.cos(p);u.x=v*s.x+m*c.x,u.y=v*s.y+m*c.y,u.z=v*s.z+m*c.z,u.normalize(),f.push(u.x,u.y,u.z),l.x=d.x+i*u.x,l.y=d.y+i*u.y,l.z=d.z+i*u.z,h.push(l.x,l.y,l.z)}}!function(){for(s=0;s<t;s++)v(s);v(!1===n?t:0),function(){for(s=0;s<=t;s++)for(o=0;o<=r;o++)c.x=s/t,c.y=o/r,p.push(c.x,c.y)}(),function(){for(o=1;o<=t;o++)for(s=1;s<=r;s++){var e=(r+1)*(o-1)+(s-1),i=(r+1)*o+(s-1),n=(r+1)*o+s,a=(r+1)*(o-1)+s;m.push(e,i,a),m.push(i,n,a)}}()}(),this.setIndex(m),this.addAttribute("position",new Ae(h,3)),this.addAttribute("normal",new Ae(f,3)),this.addAttribute("uv",new Ae(p,2))}function gr(e,t,i,r,n,a,s){pe.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new yr(e,t,i,r,n,a)),this.mergeVertices()}function yr(e,t,i,r,n,a){De.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:n,q:a},e=e||1,t=t||.4,i=Math.floor(i)||64,r=Math.floor(r)||8,n=n||2,a=a||3;var s,o,l=[],u=[],c=[],d=[],h=new S,f=new S,p=new S,m=new S,v=new S,g=new S,y=new S;for(s=0;s<=i;++s){var _=s/i*n*Math.PI*2;for(D(_,n,a,e,p),D(_+.01,n,a,e,m),g.subVectors(m,p),y.addVectors(m,p),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),o=0;o<=r;++o){var b=o/r*Math.PI*2,M=-t*Math.cos(b),T=t*Math.sin(b);h.x=p.x+(M*y.x+T*v.x),h.y=p.y+(M*y.y+T*v.y),h.z=p.z+(M*y.z+T*v.z),u.push(h.x,h.y,h.z),f.subVectors(h,p).normalize(),c.push(f.x,f.y,f.z),d.push(s/i),d.push(o/r)}}for(o=1;o<=i;o++)for(s=1;s<=r;s++){var A=(r+1)*(o-1)+(s-1),w=(r+1)*o+(s-1),E=(r+1)*o+s,x=(r+1)*(o-1)+s;l.push(A,w,x),l.push(w,E,x)}function D(e,t,i,r,n){var a=Math.cos(e),s=Math.sin(e),o=i/t*e,l=Math.cos(o);n.x=r*(2+l)*.5*a,n.y=r*(2+l)*s*.5,n.z=r*Math.sin(o)*.5}this.setIndex(l),this.addAttribute("position",new Ae(u,3)),this.addAttribute("normal",new Ae(c,3)),this.addAttribute("uv",new Ae(d,2))}function _r(e,t,i,r,n){pe.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},this.fromBufferGeometry(new br(e,t,i,r,n)),this.mergeVertices()}function br(e,t,i,r,n){De.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:n},e=e||1,t=t||.4,i=Math.floor(i)||8,r=Math.floor(r)||6,n=n||2*Math.PI;var a,s,o=[],l=[],u=[],c=[],d=new S,h=new S,f=new S;for(a=0;a<=i;a++)for(s=0;s<=r;s++){var p=s/r*n,m=a/i*Math.PI*2;h.x=(e+t*Math.cos(m))*Math.cos(p),h.y=(e+t*Math.cos(m))*Math.sin(p),h.z=t*Math.sin(m),l.push(h.x,h.y,h.z),d.x=e*Math.cos(p),d.y=e*Math.sin(p),f.subVectors(h,d).normalize(),u.push(f.x,f.y,f.z),c.push(s/r),c.push(a/i)}for(a=1;a<=i;a++)for(s=1;s<=r;s++){var v=(r+1)*a+s-1,g=(r+1)*(a-1)+s-1,y=(r+1)*(a-1)+s,_=(r+1)*a+s;o.push(v,g,_),o.push(g,y,_)}this.setIndex(o),this.addAttribute("position",new Ae(l,3)),this.addAttribute("normal",new Ae(u,3)),this.addAttribute("uv",new Ae(c,2))}wi.prototype=Object.create(Fe.prototype),wi.prototype.constructor=wi,wi.prototype.isMeshDepthMaterial=!0,wi.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Ei.prototype=Object.create(Fe.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isMeshDistanceMaterial=!0,Ei.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Si.prototype=Object.create(k.prototype),Si.prototype.constructor=Si,Si.prototype.isCanvasTexture=!0,Ni.prototype=Object.assign(Object.create(le.prototype),{constructor:Ni,isPerspectiveCamera:!0,copy:function(e,t){return le.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*A.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*A.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*A.RAD2DEG*Math.atan(Math.tan(.5*A.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,r,n,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*A.DEG2RAD*this.fov)/this.zoom,i=2*t,r=this.aspect*i,n=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var s=a.fullWidth,o=a.fullHeight;n+=a.offsetX*r/s,t-=a.offsetY*i/o,r*=a.width/s,i*=a.height/o}var l=this.filmOffset;0!==l&&(n+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,t,t-i,e,this.far)},toJSON:function(e){var t=oe.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Ci.prototype=Object.assign(Object.create(Ni.prototype),{constructor:Ci,isArrayCamera:!0}),Ri.prototype.isFogExp2=!0,Ri.prototype.clone=function(){return new Ri(this.color,this.density)},Ri.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},zi.prototype.isFog=!0,zi.prototype.clone=function(){return new zi(this.color,this.near,this.far)},zi.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Ui.prototype=Object.assign(Object.create(oe.prototype),{constructor:Ui,copy:function(e,t){return oe.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=oe.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Bi.prototype=Object.create(Fe.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isSpriteMaterial=!0,Bi.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Fi.prototype=Object.assign(Object.create(oe.prototype),{constructor:Fi,isSprite:!0,raycast:(hi=new S,fi=new S,pi=new S,function(e,t){fi.setFromMatrixPosition(this.matrixWorld),e.ray.closestPointToPoint(fi,hi),pi.setFromMatrixScale(this.matrixWorld);var i=pi.x*pi.y/4;if(!(fi.distanceToSquared(hi)>i)){var r=e.ray.origin.distanceTo(hi);r<e.near||r>e.far||t.push({distance:r,point:hi.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return oe.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Vi.prototype=Object.assign(Object.create(oe.prototype),{constructor:Vi,copy:function(e){oe.prototype.copy.call(this,e,!1);for(var t=e.levels,i=0,r=t.length;i<r;i++){var n=t[i];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=this.levels,r=0;r<i.length&&!(t<i[r].distance);r++);i.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,i=1,r=t.length;i<r&&!(e<t[i].distance);i++);return t[i-1].object},raycast:(mi=new S,function(e,t){mi.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(mi);this.getObjectForDistance(i).raycast(e,t)}),update:function(){var e=new S,t=new S;return function(i){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var n=e.distanceTo(t);r[0].object.visible=!0;for(var a=1,s=r.length;a<s&&n>=r[a].distance;a++)r[a-1].object.visible=!1,r[a].object.visible=!0;for(;a<s;a++)r[a].object.visible=!1}}}(),toJSON:function(e){var t=oe.prototype.toJSON.call(this,e);t.object.levels=[];for(var i=this.levels,r=0,n=i.length;r<n;r++){var a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Object.assign(Gi.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var i=new E;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},pose:function(){var e,t,i;for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,i=this.bones.length;t<i;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(vi=new E,gi=new E,function(){for(var e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture,n=0,a=e.length;n<a;n++){var s=e[n]?e[n].matrixWorld:gi;vi.multiplyMatrices(s,t[n]),vi.toArray(i,16*n)}void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new Gi(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,i=this.bones.length;t<i;t++){var r=this.bones[t];if(r.name===e)return r}}}),Hi.prototype=Object.assign(Object.create(oe.prototype),{constructor:Hi,isBone:!0}),Qi.prototype=Object.assign(Object.create(We.prototype),{constructor:Qi,isSkinnedMesh:!0,initBones:function(){var e,t,i,r,n=[];if(this.geometry&&void 0!==this.geometry.bones){for(i=0,r=this.geometry.bones.length;i<r;i++)t=this.geometry.bones[i],e=new Hi,n.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(i=0,r=this.geometry.bones.length;i<r;i++)-1!==(t=this.geometry.bones[i]).parent&&null!==t.parent&&void 0!==n[t.parent]?n[t.parent].add(n[i]):this.add(n[i])}return this.updateMatrixWorld(!0),n},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var i=this.geometry.skinWeights[t];(e=1/i.manhattanLength())!==1/0?i.multiplyScalar(e):i.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new P,n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)r.x=n.getX(t),r.y=n.getY(t),r.z=n.getZ(t),r.w=n.getW(t),(e=1/r.manhattanLength())!==1/0?r.multiplyScalar(e):r.set(1,0,0,0),n.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){We.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Yi.prototype=Object.create(Fe.prototype),Yi.prototype.constructor=Yi,Yi.prototype.isLineBasicMaterial=!0,Yi.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Wi.prototype=Object.assign(Object.create(oe.prototype),{constructor:Wi,isLine:!0,computeLineDistances:(yi=new S,_i=new S,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,i=[0],r=1,n=t.count;r<n;r++)yi.fromBufferAttribute(t,r-1),_i.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=yi.distanceTo(_i);e.addAttribute("lineDistance",new Ae(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;for((i=e.lineDistances)[0]=0,r=1,n=a.length;r<n;r++)i[r]=i[r-1],i[r]+=a[r-1].distanceTo(a[r])}return this}),raycast:function(){var e=new E,t=new He,i=new F;return function(r,n){var a=r.linePrecision,s=a*a,o=this.geometry,l=this.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),i.copy(o.boundingSphere),i.applyMatrix4(l),!1!==r.ray.intersectsSphere(i)){e.getInverse(l),t.copy(r.ray).applyMatrix4(e);var u=new S,c=new S,d=new S,h=new S,f=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var p=o.index,m=o.attributes.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length-1;g<y;g+=f){var _=v[g],b=v[g+1];if(u.fromArray(m,3*_),c.fromArray(m,3*b),!(t.distanceSqToSegment(u,c,h,d)>s))h.applyMatrix4(this.matrixWorld),(A=r.ray.origin.distanceTo(h))<r.near||A>r.far||n.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}else for(g=0,y=m.length/3-1;g<y;g+=f){if(u.fromArray(m,3*g),c.fromArray(m,3*g+3),!(t.distanceSqToSegment(u,c,h,d)>s))h.applyMatrix4(this.matrixWorld),(A=r.ray.origin.distanceTo(h))<r.near||A>r.far||n.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}else if(o.isGeometry){var M=o.vertices,T=M.length;for(g=0;g<T-1;g+=f){var A;if(!(t.distanceSqToSegment(M[g],M[g+1],h,d)>s))h.applyMatrix4(this.matrixWorld),(A=r.ray.origin.distanceTo(h))<r.near||A>r.far||n.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:g,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),qi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:qi,isLineSegments:!0,computeLineDistances:function(){var e=new S,t=new S;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var r=i.attributes.position,n=[],a=0,s=r.count;a<s;a+=2)e.fromBufferAttribute(r,a),t.fromBufferAttribute(r,a+1),n[a]=0===a?0:n[a-1],n[a+1]=n[a]+e.distanceTo(t);i.addAttribute("lineDistance",new Ae(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry){var o=i.vertices;for(n=i.lineDistances,a=0,s=o.length;a<s;a+=2)e.copy(o[a]),t.copy(o[a+1]),n[a]=0===a?0:n[a-1],n[a+1]=n[a]+e.distanceTo(t)}return this}}()}),Xi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Xi,isLineLoop:!0}),Zi.prototype=Object.create(Fe.prototype),Zi.prototype.constructor=Zi,Zi.prototype.isPointsMaterial=!0,Zi.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},Ki.prototype=Object.assign(Object.create(oe.prototype),{constructor:Ki,isPoints:!0,raycast:function(){var e=new E,t=new He,i=new F;return function(r,n){var a=this,s=this.geometry,o=this.matrixWorld,l=r.params.Points.threshold;if(null===s.boundingSphere&&s.computeBoundingSphere(),i.copy(s.boundingSphere),i.applyMatrix4(o),i.radius+=l,!1!==r.ray.intersectsSphere(i)){e.getInverse(o),t.copy(r.ray).applyMatrix4(e);var u=l/((this.scale.x+this.scale.y+this.scale.z)/3),c=u*u,d=new S,h=new S;if(s.isBufferGeometry){var f=s.index,p=s.attributes.position.array;if(null!==f)for(var m=f.array,v=0,g=m.length;v<g;v++){var y=m[v];d.fromArray(p,3*y),M(d,y)}else{v=0;for(var _=p.length/3;v<_;v++)d.fromArray(p,3*v),M(d,v)}}else{var b=s.vertices;for(v=0,_=b.length;v<_;v++)M(b[v],v)}}function M(e,i){var s=t.distanceSqToPoint(e);if(s<c){t.closestPointToPoint(e,h),h.applyMatrix4(o);var l=r.ray.origin.distanceTo(h);if(l<r.near||l>r.far)return;n.push({distance:l,distanceToRay:Math.sqrt(s),point:h.clone(),index:i,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ji.prototype=Object.assign(Object.create(oe.prototype),{constructor:Ji,isGroup:!0}),$i.prototype=Object.assign(Object.create(k.prototype),{constructor:$i,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),er.prototype=Object.create(k.prototype),er.prototype.constructor=er,er.prototype.isCompressedTexture=!0,tr.prototype=Object.create(k.prototype),tr.prototype.constructor=tr,tr.prototype.isDepthTexture=!0,ir.prototype=Object.create(De.prototype),ir.prototype.constructor=ir,rr.prototype=Object.create(pe.prototype),rr.prototype.constructor=rr,nr.prototype=Object.create(De.prototype),nr.prototype.constructor=nr,ar.prototype=Object.create(pe.prototype),ar.prototype.constructor=ar,sr.prototype=Object.create(De.prototype),sr.prototype.constructor=sr,or.prototype=Object.create(pe.prototype),or.prototype.constructor=or,lr.prototype=Object.create(sr.prototype),lr.prototype.constructor=lr,ur.prototype=Object.create(pe.prototype),ur.prototype.constructor=ur,cr.prototype=Object.create(sr.prototype),cr.prototype.constructor=cr,dr.prototype=Object.create(pe.prototype),dr.prototype.constructor=dr,hr.prototype=Object.create(sr.prototype),hr.prototype.constructor=hr,fr.prototype=Object.create(pe.prototype),fr.prototype.constructor=fr,pr.prototype=Object.create(sr.prototype),pr.prototype.constructor=pr,mr.prototype=Object.create(pe.prototype),mr.prototype.constructor=mr,vr.prototype=Object.create(De.prototype),vr.prototype.constructor=vr,gr.prototype=Object.create(pe.prototype),gr.prototype.constructor=gr,yr.prototype=Object.create(De.prototype),yr.prototype.constructor=yr,_r.prototype=Object.create(pe.prototype),_r.prototype.constructor=_r,br.prototype=Object.create(De.prototype),br.prototype.constructor=br;var Mr=function(e,t,i){i=i||2;var r,n,a,s,o,l,u,c=t&&t.length,d=c?t[0]*i:e.length,h=Tr(e,0,d,i,!0),f=[];if(!h)return f;if(c&&(h=function(e,t,i,r){var n,a,s,o,l,u=[];for(n=0,a=t.length;n<a;n++)s=t[n]*r,o=n<a-1?t[n+1]*r:e.length,(l=Tr(e,s,o,r,!1))===l.next&&(l.steiner=!0),u.push(Nr(l));for(u.sort(Ir),n=0;n<u.length;n++)jr(u[n],i),i=Ar(i,i.next);return i}(e,t,h,i)),e.length>80*i){r=a=e[0],n=s=e[1];for(var p=i;p<d;p+=i)(o=e[p])<r&&(r=o),(l=e[p+1])<n&&(n=l),o>a&&(a=o),l>s&&(s=l);u=0!==(u=Math.max(a-r,s-n))?1/u:0}return wr(h,f,i,r,n,u),f};function Tr(e,t,i,r,n){var a,s;if(n===function(e,t,i,r){for(var n=0,a=t,s=i-r;a<i;a+=r)n+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return n}(e,t,i,r)>0)for(a=t;a<i;a+=r)s=Br(a,e[a],e[a+1],s);else for(a=i-r;a>=t;a-=r)s=Br(a,e[a],e[a+1],s);return s&&Pr(s,s.next)&&(Fr(s),s=s.next),s}function Ar(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!Pr(r,r.next)&&0!==kr(r.prev,r,r.next))r=r.next;else{if(Fr(r),(r=t=r.prev)===r.next)break;i=!0}}while(i||r!==t);return t}function wr(e,t,i,r,n,a,s){if(e){!s&&a&&function(e,t,i,r){var n=e;do{null===n.z&&(n.z=Lr(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,i,r,n,a,s,o,l,u=1;do{for(i=e,e=null,a=null,s=0;i;){for(s++,r=i,o=0,t=0;t<u&&(o++,r=r.nextZ);t++);for(l=u;o>0||l>0&&r;)0!==o&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,o--):(n=r,r=r.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;i=r}a.nextZ=null,u*=2}while(s>1)}(n)}(e,r,n,a);for(var o,l,u=e;e.prev!==e.next;)if(o=e.prev,l=e.next,a?xr(e,r,n,a):Er(e))t.push(o.i/i),t.push(e.i/i),t.push(l.i/i),Fr(e),e=l.next,u=l.next;else if((e=l)===u){s?1===s?wr(e=Sr(e,t,i),t,i,r,n,a,2):2===s&&Dr(e,t,i,r,n,a):wr(Ar(e),t,i,r,n,a,1);break}}}function Er(e){var t=e.prev,i=e,r=e.next;if(kr(t,i,r)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(Cr(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&kr(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function xr(e,t,i,r){var n=e.prev,a=e,s=e.next;if(kr(n,a,s)>=0)return!1;for(var o=n.x<a.x?n.x<s.x?n.x:s.x:a.x<s.x?a.x:s.x,l=n.y<a.y?n.y<s.y?n.y:s.y:a.y<s.y?a.y:s.y,u=n.x>a.x?n.x>s.x?n.x:s.x:a.x>s.x?a.x:s.x,c=n.y>a.y?n.y>s.y?n.y:s.y:a.y>s.y?a.y:s.y,d=Lr(o,l,t,i,r),h=Lr(u,c,t,i,r),f=e.nextZ;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&Cr(n.x,n.y,a.x,a.y,s.x,s.y,f.x,f.y)&&kr(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&Cr(n.x,n.y,a.x,a.y,s.x,s.y,f.x,f.y)&&kr(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function Sr(e,t,i){var r=e;do{var n=r.prev,a=r.next.next;!Pr(n,a)&&Rr(n,r,r.next,a)&&zr(n,a)&&zr(a,n)&&(t.push(n.i/i),t.push(r.i/i),t.push(a.i/i),Fr(r),Fr(r.next),r=e=a),r=r.next}while(r!==e);return r}function Dr(e,t,i,r,n,a){var s=e;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&Or(s,o)){var l=Ur(s,o);return s=Ar(s,s.next),l=Ar(l,l.next),wr(s,t,i,r,n,a),void wr(l,t,i,r,n,a)}o=o.next}s=s.next}while(s!==e)}function Ir(e,t){return e.x-t.x}function jr(e,t){if(t=function(e,t){var i,r=t,n=e.x,a=e.y,s=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var o=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=n&&o>s){if(s=o,o===n){if(a===r.y)return r;if(a===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===s)return i.prev;var l,u=i,c=i.x,d=i.y,h=1/0;r=i.next;for(;r!==u;)n>=r.x&&r.x>=c&&n!==r.x&&Cr(a<d?n:s,a,c,d,a<d?s:n,a,r.x,r.y)&&((l=Math.abs(a-r.y)/(n-r.x))<h||l===h&&r.x>i.x)&&zr(r,e)&&(i=r,h=l),r=r.next;return i}(e,t)){var i=Ur(t,e);Ar(i,i.next)}}function Lr(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Nr(e){var t=e,i=e;do{t.x<i.x&&(i=t),t=t.next}while(t!==e);return i}function Cr(e,t,i,r,n,a,s,o){return(n-s)*(t-o)-(e-s)*(a-o)>=0&&(e-s)*(r-o)-(i-s)*(t-o)>=0&&(i-s)*(a-o)-(n-s)*(r-o)>=0}function Or(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Rr(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&zr(e,t)&&zr(t,e)&&function(e,t){var i=e,r=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)}function kr(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Pr(e,t){return e.x===t.x&&e.y===t.y}function Rr(e,t,i,r){return!!(Pr(e,t)&&Pr(i,r)||Pr(e,r)&&Pr(i,t))||kr(e,t,i)>0!=kr(e,t,r)>0&&kr(i,r,e)>0!=kr(i,r,t)>0}function zr(e,t){return kr(e.prev,e,e.next)<0?kr(e,t,e.next)>=0&&kr(e,e.prev,t)>=0:kr(e,t,e.prev)<0||kr(e,e.next,t)<0}function Ur(e,t){var i=new Vr(e.i,e.x,e.y),r=new Vr(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function Br(e,t,i,r){var n=new Vr(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function Fr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Vr(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Gr={area:function(e){for(var t=e.length,i=0,r=t-1,n=0;n<t;r=n++)i+=e[r].x*e[n].y-e[n].x*e[r].y;return.5*i},isClockWise:function(e){return Gr.area(e)<0},triangulateShape:function(e,t){var i=[],r=[],n=[];Hr(e),Qr(i,e);var a=e.length;t.forEach(Hr);for(var s=0;s<t.length;s++)r.push(a),a+=t[s].length,Qr(i,t[s]);var o=Mr(i,r);for(s=0;s<o.length;s+=3)n.push(o.slice(s,s+3));return n}};function Hr(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Qr(e,t){for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}function Yr(e,t){pe.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Wr(e,t)),this.mergeVertices()}function Wr(e,t){De.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var i=this,r=[],n=[],a=0,s=e.length;a<s;a++){o(e[a])}function o(e){var a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:100,u=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:c-2,h=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,p=void 0!==t.UVGenerator?t.UVGenerator:qr;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=t.amount);var m,v,g,y,_,b,M,T,A=!1;f&&(m=f.getSpacedPoints(o),A=!0,u=!1,v=f.computeFrenetFrames(o,!1),g=new S,y=new S,_=new S),u||(h=0,c=0,d=0);var E=e.extractPoints(s),x=E.shape,D=E.holes;if(!Gr.isClockWise(x))for(x=x.reverse(),M=0,T=D.length;M<T;M++)b=D[M],Gr.isClockWise(b)&&(D[M]=b.reverse());var I=Gr.triangulateShape(x,D),j=x;for(M=0,T=D.length;M<T;M++)b=D[M],x=x.concat(b);function L(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}var N,C,O,k,P,R,z=x.length,U=I.length;function B(e,t,i){var r,n,a,s=e.x-t.x,o=e.y-t.y,l=i.x-e.x,u=i.y-e.y,c=s*s+o*o,d=s*u-o*l;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(l*l+u*u),p=t.x-o/h,m=t.y+s/h,v=((i.x-u/f-p)*u-(i.y+l/f-m)*l)/(s*u-o*l),g=(r=p+s*v-e.x)*r+(n=m+o*v-e.y)*n;if(g<=2)return new w(r,n);a=Math.sqrt(g/2)}else{var y=!1;s>Number.EPSILON?l>Number.EPSILON&&(y=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(y=!0):Math.sign(o)===Math.sign(u)&&(y=!0),y?(r=-o,n=s,a=Math.sqrt(c)):(r=s,n=o,a=Math.sqrt(c/2))}return new w(r/a,n/a)}for(var F=[],V=0,G=j.length,H=G-1,Q=V+1;V<G;V++,H++,Q++)H===G&&(H=0),Q===G&&(Q=0),F[V]=B(j[V],j[H],j[Q]);var Y,W,q=[],X=F.concat();for(M=0,T=D.length;M<T;M++){for(b=D[M],Y=[],V=0,H=(G=b.length)-1,Q=V+1;V<G;V++,H++,Q++)H===G&&(H=0),Q===G&&(Q=0),Y[V]=B(b[V],b[H],b[Q]);q.push(Y),X=X.concat(Y)}for(N=0;N<h;N++){for(O=N/h,k=c*Math.cos(O*Math.PI/2),C=d*Math.sin(O*Math.PI/2),V=0,G=j.length;V<G;V++)K((P=L(j[V],F[V],C)).x,P.y,-k);for(M=0,T=D.length;M<T;M++)for(b=D[M],Y=q[M],V=0,G=b.length;V<G;V++)K((P=L(b[V],Y[V],C)).x,P.y,-k)}for(C=d,V=0;V<z;V++)P=u?L(x[V],X[V],C):x[V],A?(y.copy(v.normals[0]).multiplyScalar(P.x),g.copy(v.binormals[0]).multiplyScalar(P.y),_.copy(m[0]).add(y).add(g),K(_.x,_.y,_.z)):K(P.x,P.y,0);for(W=1;W<=o;W++)for(V=0;V<z;V++)P=u?L(x[V],X[V],C):x[V],A?(y.copy(v.normals[W]).multiplyScalar(P.x),g.copy(v.binormals[W]).multiplyScalar(P.y),_.copy(m[W]).add(y).add(g),K(_.x,_.y,_.z)):K(P.x,P.y,l/o*W);for(N=h-1;N>=0;N--){for(O=N/h,k=c*Math.cos(O*Math.PI/2),C=d*Math.sin(O*Math.PI/2),V=0,G=j.length;V<G;V++)K((P=L(j[V],F[V],C)).x,P.y,l+k);for(M=0,T=D.length;M<T;M++)for(b=D[M],Y=q[M],V=0,G=b.length;V<G;V++)P=L(b[V],Y[V],C),A?K(P.x,P.y+m[o-1].y,m[o-1].x+k):K(P.x,P.y,l+k)}function Z(e,t){var i,r;for(V=e.length;--V>=0;){i=V,(r=V-1)<0&&(r=e.length-1);var n=0,a=o+2*h;for(n=0;n<a;n++){var s=z*n,l=z*(n+1);$(t+i+s,t+r+s,t+r+l,t+i+l)}}}function K(e,t,i){a.push(e),a.push(t),a.push(i)}function J(e,t,n){ee(e),ee(t),ee(n);var a=r.length/3,s=p.generateTopUV(i,r,a-3,a-2,a-1);te(s[0]),te(s[1]),te(s[2])}function $(e,t,n,a){ee(e),ee(t),ee(a),ee(t),ee(n),ee(a);var s=r.length/3,o=p.generateSideWallUV(i,r,s-6,s-3,s-2,s-1);te(o[0]),te(o[1]),te(o[3]),te(o[1]),te(o[2]),te(o[3])}function ee(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function te(e){n.push(e.x),n.push(e.y)}!function(){var e=r.length/3;if(u){var t=0,n=z*t;for(V=0;V<U;V++)J((R=I[V])[2]+n,R[1]+n,R[0]+n);for(n=z*(t=o+2*h),V=0;V<U;V++)J((R=I[V])[0]+n,R[1]+n,R[2]+n)}else{for(V=0;V<U;V++)J((R=I[V])[2],R[1],R[0]);for(V=0;V<U;V++)J((R=I[V])[0]+z*o,R[1]+z*o,R[2]+z*o)}i.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(Z(j,t),t+=j.length,M=0,T=D.length;M<T;M++)Z(b=D[M],t),t+=b.length;i.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new Ae(r,3)),this.addAttribute("uv",new Ae(n,2)),this.computeVertexNormals()}Yr.prototype=Object.create(pe.prototype),Yr.prototype.constructor=Yr,Yr.prototype.toJSON=function(){var e=pe.prototype.toJSON.call(this);return Xr(this.parameters.shapes,this.parameters.options,e)},Wr.prototype=Object.create(De.prototype),Wr.prototype.constructor=Wr,Wr.prototype.toJSON=function(){var e=De.prototype.toJSON.call(this);return Xr(this.parameters.shapes,this.parameters.options,e)};var qr={generateTopUV:function(e,t,i,r,n){var a=t[3*i],s=t[3*i+1],o=t[3*r],l=t[3*r+1],u=t[3*n],c=t[3*n+1];return[new w(a,s),new w(o,l),new w(u,c)]},generateSideWallUV:function(e,t,i,r,n,a){var s=t[3*i],o=t[3*i+1],l=t[3*i+2],u=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*n],f=t[3*n+1],p=t[3*n+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(o-c)<.01?[new w(s,1-l),new w(u,1-d),new w(h,1-p),new w(m,1-g)]:[new w(o,1-l),new w(c,1-d),new w(f,1-p),new w(v,1-g)]}};function Xr(e,t,i){if(i.shapes=[],Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var a=e[r];i.shapes.push(a.uuid)}else i.shapes.push(e.uuid);return void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON()),i}function Zr(e,t){pe.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Kr(e,t)),this.mergeVertices()}function Kr(e,t){var i=(t=t||{}).font;if(!i||!i.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new pe;var r=i.generateShapes(e,t.size,t.curveSegments);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Wr.call(this,r,t),this.type="TextBufferGeometry"}function Jr(e,t,i,r,n,a,s){pe.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new $r(e,t,i,r,n,a,s)),this.mergeVertices()}function $r(e,t,i,r,n,a,s){De.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:n,thetaStart:a,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var o,l,u=(a=void 0!==a?a:0)+(s=void 0!==s?s:Math.PI),c=0,d=[],h=new S,f=new S,p=[],m=[],v=[],g=[];for(l=0;l<=i;l++){var y=[],_=l/i;for(o=0;o<=t;o++){var b=o/t;h.x=-e*Math.cos(r+b*n)*Math.sin(a+_*s),h.y=e*Math.cos(a+_*s),h.z=e*Math.sin(r+b*n)*Math.sin(a+_*s),m.push(h.x,h.y,h.z),f.set(h.x,h.y,h.z).normalize(),v.push(f.x,f.y,f.z),g.push(b,1-_),y.push(c++)}d.push(y)}for(l=0;l<i;l++)for(o=0;o<t;o++){var M=d[l][o+1],T=d[l][o],A=d[l+1][o],w=d[l+1][o+1];(0!==l||a>0)&&p.push(M,T,w),(l!==i-1||u<Math.PI)&&p.push(T,A,w)}this.setIndex(p),this.addAttribute("position",new Ae(m,3)),this.addAttribute("normal",new Ae(v,3)),this.addAttribute("uv",new Ae(g,2))}function en(e,t,i,r,n,a){pe.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a},this.fromBufferGeometry(new tn(e,t,i,r,n,a)),this.mergeVertices()}function tn(e,t,i,r,n,a){De.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:n,thetaLength:a},e=e||.5,t=t||1,n=void 0!==n?n:0,a=void 0!==a?a:2*Math.PI,i=void 0!==i?Math.max(3,i):8;var s,o,l,u=[],c=[],d=[],h=[],f=e,p=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new S,v=new w;for(o=0;o<=r;o++){for(l=0;l<=i;l++)s=n+l/i*a,m.x=f*Math.cos(s),m.y=f*Math.sin(s),c.push(m.x,m.y,m.z),d.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,h.push(v.x,v.y);f+=p}for(o=0;o<r;o++){var g=o*(i+1);for(l=0;l<i;l++){var y=s=l+g,_=s+i+1,b=s+i+2,M=s+1;u.push(y,_,M),u.push(_,b,M)}}this.setIndex(u),this.addAttribute("position",new Ae(c,3)),this.addAttribute("normal",new Ae(d,3)),this.addAttribute("uv",new Ae(h,2))}function rn(e,t,i,r){pe.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},this.fromBufferGeometry(new nn(e,t,i,r)),this.mergeVertices()}function nn(e,t,i,r){De.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t)||12,i=i||0,r=r||2*Math.PI,r=A.clamp(r,0,2*Math.PI);var n,a,s,o=[],l=[],u=[],c=1/t,d=new S,h=new w;for(a=0;a<=t;a++){var f=i+a*c*r,p=Math.sin(f),m=Math.cos(f);for(s=0;s<=e.length-1;s++)d.x=e[s].x*p,d.y=e[s].y,d.z=e[s].x*m,l.push(d.x,d.y,d.z),h.x=a/t,h.y=s/(e.length-1),u.push(h.x,h.y)}for(a=0;a<t;a++)for(s=0;s<e.length-1;s++){var v=n=s+a*e.length,g=n+e.length,y=n+e.length+1,_=n+1;o.push(v,g,_),o.push(g,y,_)}if(this.setIndex(o),this.addAttribute("position",new Ae(l,3)),this.addAttribute("uv",new Ae(u,2)),this.computeVertexNormals(),r===2*Math.PI){var b=this.attributes.normal.array,M=new S,T=new S,E=new S;for(n=t*e.length*3,a=0,s=0;a<e.length;a++,s+=3)M.x=b[s+0],M.y=b[s+1],M.z=b[s+2],T.x=b[n+s+0],T.y=b[n+s+1],T.z=b[n+s+2],E.addVectors(M,T).normalize(),b[s+0]=b[n+s+0]=E.x,b[s+1]=b[n+s+1]=E.y,b[s+2]=b[n+s+2]=E.z}}function an(e,t){pe.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new sn(e,t)),this.mergeVertices()}function sn(e,t){De.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var i=[],r=[],n=[],a=[],s=0,o=0;if(!1===Array.isArray(e))u(e);else for(var l=0;l<e.length;l++)u(e[l]),this.addGroup(s,o,l),s+=o,o=0;function u(e){var s,l,u,c=r.length/3,d=e.extractPoints(t),h=d.shape,f=d.holes;if(!1===Gr.isClockWise(h))for(h=h.reverse(),s=0,l=f.length;s<l;s++)u=f[s],!0===Gr.isClockWise(u)&&(f[s]=u.reverse());var p=Gr.triangulateShape(h,f);for(s=0,l=f.length;s<l;s++)u=f[s],h=h.concat(u);for(s=0,l=h.length;s<l;s++){var m=h[s];r.push(m.x,m.y,0),n.push(0,0,1),a.push(m.x,m.y)}for(s=0,l=p.length;s<l;s++){var v=p[s],g=v[0]+c,y=v[1]+c,_=v[2]+c;i.push(g,y,_),o+=3}}this.setIndex(i),this.addAttribute("position",new Ae(r,3)),this.addAttribute("normal",new Ae(n,3)),this.addAttribute("uv",new Ae(a,2))}function on(e,t){if(t.shapes=[],Array.isArray(e))for(var i=0,r=e.length;i<r;i++){var n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}function ln(e,t){De.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var i,r,n,a,s=[],o=Math.cos(A.DEG2RAD*t),l=[0,0],u={},c=["a","b","c"];e.isBufferGeometry?(a=new pe).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var d=a.vertices,h=a.faces,f=0,p=h.length;f<p;f++)for(var m=h[f],v=0;v<3;v++)i=m[c[v]],r=m[c[(v+1)%3]],l[0]=Math.min(i,r),l[1]=Math.max(i,r),void 0===u[n=l[0]+","+l[1]]?u[n]={index1:l[0],index2:l[1],face1:f,face2:void 0}:u[n].face2=f;for(n in u){var g=u[n];if(void 0===g.face2||h[g.face1].normal.dot(h[g.face2].normal)<=o){var y=d[g.index1];s.push(y.x,y.y,y.z),y=d[g.index2],s.push(y.x,y.y,y.z)}}this.addAttribute("position",new Ae(s,3))}function un(e,t,i,r,n,a,s,o){pe.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:s,thetaLength:o},this.fromBufferGeometry(new cn(e,t,i,r,n,a,s,o)),this.mergeVertices()}function cn(e,t,i,r,n,a,s,o){De.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:n,openEnded:a,thetaStart:s,thetaLength:o};var l=this;e=void 0!==e?e:1,t=void 0!==t?t:1,i=i||1,r=Math.floor(r)||8,n=Math.floor(n)||1,a=void 0!==a&&a,s=void 0!==s?s:0,o=void 0!==o?o:2*Math.PI;var u=[],c=[],d=[],h=[],f=0,p=[],m=i/2,v=0;function g(i){var n,a,p,g=new w,y=new S,_=0,b=!0===i?e:t,M=!0===i?1:-1;for(a=f,n=1;n<=r;n++)c.push(0,m*M,0),d.push(0,M,0),h.push(.5,.5),f++;for(p=f,n=0;n<=r;n++){var T=n/r*o+s,A=Math.cos(T),E=Math.sin(T);y.x=b*E,y.y=m*M,y.z=b*A,c.push(y.x,y.y,y.z),d.push(0,M,0),g.x=.5*A+.5,g.y=.5*E*M+.5,h.push(g.x,g.y),f++}for(n=0;n<r;n++){var x=a+n,D=p+n;!0===i?u.push(D,D+1,x):u.push(D+1,D,x),_+=3}l.addGroup(v,_,!0===i?1:2),v+=_}!function(){var a,g,y=new S,_=new S,b=0,M=(t-e)/i;for(g=0;g<=n;g++){var T=[],A=g/n,w=A*(t-e)+e;for(a=0;a<=r;a++){var E=a/r,x=E*o+s,D=Math.sin(x),I=Math.cos(x);_.x=w*D,_.y=-A*i+m,_.z=w*I,c.push(_.x,_.y,_.z),y.set(D,M,I).normalize(),d.push(y.x,y.y,y.z),h.push(E,1-A),T.push(f++)}p.push(T)}for(a=0;a<r;a++)for(g=0;g<n;g++){var j=p[g][a],L=p[g+1][a],N=p[g+1][a+1],C=p[g][a+1];u.push(j,L,C),u.push(L,N,C),b+=6}l.addGroup(v,b,0),v+=b}(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(u),this.addAttribute("position",new Ae(c,3)),this.addAttribute("normal",new Ae(d,3)),this.addAttribute("uv",new Ae(h,2))}function dn(e,t,i,r,n,a,s){un.call(this,0,e,t,i,r,n,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:s}}function hn(e,t,i,r,n,a,s){cn.call(this,0,e,t,i,r,n,a,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:n,thetaStart:a,thetaLength:s}}function fn(e,t,i,r){pe.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},this.fromBufferGeometry(new pn(e,t,i,r)),this.mergeVertices()}function pn(e,t,i,r){De.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var n,a,s=[],o=[],l=[],u=[],c=new S,d=new w;for(o.push(0,0,0),l.push(0,0,1),u.push(.5,.5),a=0,n=3;a<=t;a++,n+=3){var h=i+a/t*r;c.x=e*Math.cos(h),c.y=e*Math.sin(h),o.push(c.x,c.y,c.z),l.push(0,0,1),d.x=(o[n]/e+1)/2,d.y=(o[n+1]/e+1)/2,u.push(d.x,d.y)}for(n=1;n<=t;n++)s.push(n,n+1,0);this.setIndex(s),this.addAttribute("position",new Ae(o,3)),this.addAttribute("normal",new Ae(l,3)),this.addAttribute("uv",new Ae(u,2))}Zr.prototype=Object.create(pe.prototype),Zr.prototype.constructor=Zr,Kr.prototype=Object.create(Wr.prototype),Kr.prototype.constructor=Kr,Jr.prototype=Object.create(pe.prototype),Jr.prototype.constructor=Jr,$r.prototype=Object.create(De.prototype),$r.prototype.constructor=$r,en.prototype=Object.create(pe.prototype),en.prototype.constructor=en,tn.prototype=Object.create(De.prototype),tn.prototype.constructor=tn,rn.prototype=Object.create(pe.prototype),rn.prototype.constructor=rn,nn.prototype=Object.create(De.prototype),nn.prototype.constructor=nn,an.prototype=Object.create(pe.prototype),an.prototype.constructor=an,an.prototype.toJSON=function(){var e=pe.prototype.toJSON.call(this);return on(this.parameters.shapes,e)},sn.prototype=Object.create(De.prototype),sn.prototype.constructor=sn,sn.prototype.toJSON=function(){var e=De.prototype.toJSON.call(this);return on(this.parameters.shapes,e)},ln.prototype=Object.create(De.prototype),ln.prototype.constructor=ln,un.prototype=Object.create(pe.prototype),un.prototype.constructor=un,cn.prototype=Object.create(De.prototype),cn.prototype.constructor=cn,dn.prototype=Object.create(un.prototype),dn.prototype.constructor=dn,hn.prototype=Object.create(cn.prototype),hn.prototype.constructor=hn,fn.prototype=Object.create(pe.prototype),fn.prototype.constructor=fn,pn.prototype=Object.create(De.prototype),pn.prototype.constructor=pn;var mn=Object.freeze({WireframeGeometry:ir,ParametricGeometry:rr,ParametricBufferGeometry:nr,TetrahedronGeometry:or,TetrahedronBufferGeometry:lr,OctahedronGeometry:ur,OctahedronBufferGeometry:cr,IcosahedronGeometry:dr,IcosahedronBufferGeometry:hr,DodecahedronGeometry:fr,DodecahedronBufferGeometry:pr,PolyhedronGeometry:ar,PolyhedronBufferGeometry:sr,TubeGeometry:mr,TubeBufferGeometry:vr,TorusKnotGeometry:gr,TorusKnotBufferGeometry:yr,TorusGeometry:_r,TorusBufferGeometry:br,TextGeometry:Zr,TextBufferGeometry:Kr,SphereGeometry:Jr,SphereBufferGeometry:$r,RingGeometry:en,RingBufferGeometry:tn,PlaneGeometry:Le,PlaneBufferGeometry:Ne,LatheGeometry:rn,LatheBufferGeometry:nn,ShapeGeometry:an,ShapeBufferGeometry:sn,ExtrudeGeometry:Yr,ExtrudeBufferGeometry:Wr,EdgesGeometry:ln,ConeGeometry:dn,ConeBufferGeometry:hn,CylinderGeometry:un,CylinderBufferGeometry:cn,CircleGeometry:fn,CircleBufferGeometry:pn,BoxGeometry:Ie,BoxBufferGeometry:je});function vn(e){Fe.call(this),this.type="ShadowMaterial",this.color=new q(0),this.transparent=!0,this.setValues(e)}function gn(e){Ge.call(this,e),this.type="RawShaderMaterial"}function yn(e){Fe.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new q(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new q(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new w(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function _n(e){yn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function bn(e){Fe.call(this),this.type="MeshPhongMaterial",this.color=new q(16777215),this.specular=new q(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new q(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new w(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Mn(e){bn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Tn(e){Fe.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new w(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function An(e){Fe.call(this),this.type="MeshLambertMaterial",this.color=new q(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new q(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function wn(e){Yi.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}vn.prototype=Object.create(Fe.prototype),vn.prototype.constructor=vn,vn.prototype.isShadowMaterial=!0,vn.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this},gn.prototype=Object.create(Ge.prototype),gn.prototype.constructor=gn,gn.prototype.isRawShaderMaterial=!0,yn.prototype=Object.create(Fe.prototype),yn.prototype.constructor=yn,yn.prototype.isMeshStandardMaterial=!0,yn.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},_n.prototype=Object.create(yn.prototype),_n.prototype.constructor=_n,_n.prototype.isMeshPhysicalMaterial=!0,_n.prototype.copy=function(e){return yn.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},bn.prototype=Object.create(Fe.prototype),bn.prototype.constructor=bn,bn.prototype.isMeshPhongMaterial=!0,bn.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Mn.prototype=Object.create(bn.prototype),Mn.prototype.constructor=Mn,Mn.prototype.isMeshToonMaterial=!0,Mn.prototype.copy=function(e){return bn.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Tn.prototype=Object.create(Fe.prototype),Tn.prototype.constructor=Tn,Tn.prototype.isMeshNormalMaterial=!0,Tn.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},An.prototype=Object.create(Fe.prototype),An.prototype.constructor=An,An.prototype.isMeshLambertMaterial=!0,An.prototype.copy=function(e){return Fe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},wn.prototype=Object.create(Yi.prototype),wn.prototype.constructor=wn,wn.prototype.isLineDashedMaterial=!0,wn.prototype.copy=function(e){return Yi.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var En=Object.freeze({ShadowMaterial:vn,SpriteMaterial:Bi,RawShaderMaterial:gn,ShaderMaterial:Ge,PointsMaterial:Zi,MeshPhysicalMaterial:_n,MeshStandardMaterial:yn,MeshPhongMaterial:bn,MeshToonMaterial:Mn,MeshNormalMaterial:Tn,MeshLambertMaterial:An,MeshDepthMaterial:wi,MeshDistanceMaterial:Ei,MeshBasicMaterial:Ve,LineDashedMaterial:wn,LineBasicMaterial:Yi,Material:Fe}),xn={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Sn(e,t,i){var r=this,n=!1,a=0,s=0,o=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){s++,!1===n&&void 0!==r.onStart&&r.onStart(e,a,s),n=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(n=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return o?o(e):e},this.setURLModifier=function(e){return o=e,this}}var Dn=new Sn,In={};function jn(e){this.manager=void 0!==e?e:Dn}function Ln(e){this.manager=void 0!==e?e:Dn}function Nn(e){this.manager=void 0!==e?e:Dn}function Cn(){this.type="Curve",this.arcLengthDivisions=200}function On(e,t,i,r,n,a,s,o){Cn.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=r||1,this.aStartAngle=n||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=s||!1,this.aRotation=o||0}function kn(e,t,i,r,n,a){On.call(this,e,t,i,i,r,n,a),this.type="ArcCurve"}function Pn(){var e=0,t=0,i=0,r=0;function n(n,a,s,o){e=n,t=s,i=-3*n+3*a-2*s-o,r=2*n-2*a+s+o}return{initCatmullRom:function(e,t,i,r,a){n(t,i,a*(i-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,i,r,a,s,o){var l=(t-e)/a-(i-e)/(a+s)+(i-t)/s,u=(i-t)/s-(r-t)/(s+o)+(r-i)/o;n(t,i,l*=s,u*=s)},calc:function(n){var a=n*n;return e+t*n+i*a+r*(a*n)}}}Object.assign(jn.prototype,{load:function(t,i,r,n){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var a=this,s=xn.get(t);if(void 0!==s)return a.manager.itemStart(t),setTimeout(function(){i&&i(s),a.manager.itemEnd(t)},0),s;if(void 0===In[t]){var o=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var l=o[1],u=!!o[2],c=o[3];c=e.decodeURIComponent(c),u&&(c=e.atob(c));try{var d,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(c.length),p=0;p<c.length;p++)f[p]=c.charCodeAt(p);d="blob"===h?new Blob([f.buffer],{type:l}):f.buffer;break;case"document":var m=new DOMParser;d=m.parseFromString(c,l);break;case"json":d=JSON.parse(c);break;default:d=c}e.setTimeout(function(){i&&i(d),a.manager.itemEnd(t)},0)}catch(i){e.setTimeout(function(){n&&n(i),a.manager.itemEnd(t),a.manager.itemError(t)},0)}}else{In[t]=[],In[t].push({onLoad:i,onProgress:r,onError:n});var v=new XMLHttpRequest;for(var g in v.open("GET",t,!0),v.addEventListener("load",function(e){var i=this.response;xn.add(t,i);var r=In[t];if(delete In[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var n=0,s=r.length;n<s;n++){(o=r[n]).onLoad&&o.onLoad(i)}a.manager.itemEnd(t)}else{for(n=0,s=r.length;n<s;n++){var o;(o=r[n]).onError&&o.onError(e)}a.manager.itemEnd(t),a.manager.itemError(t)}},!1),v.addEventListener("progress",function(e){for(var i=In[t],r=0,n=i.length;r<n;r++){var a=i[r];a.onProgress&&a.onProgress(e)}},!1),v.addEventListener("error",function(e){var i=In[t];delete In[t];for(var r=0,n=i.length;r<n;r++){var s=i[r];s.onError&&s.onError(e)}a.manager.itemEnd(t),a.manager.itemError(t)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}return a.manager.itemStart(t),v}In[t].push({onLoad:i,onProgress:r,onError:n})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:Dn,this._parser=null}.prototype,{load:function(e,t,i,r){var n=this,a=[],s=new er;s.image=a;var o=new jn(this.manager);function l(l){o.load(e[l],function(e){var i=n._parser(e,!0);a[l]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},6===(u+=1)&&(1===i.mipmapCount&&(s.minFilter=1006),s.format=i.format,s.needsUpdate=!0,t&&t(s))},i,r)}if(o.setPath(this.path),o.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,d=e.length;c<d;++c)l(c);else o.load(e,function(e){var i=n._parser(e,!0);if(i.isCubemap)for(var r=i.mipmaps.length/i.mipmapCount,o=0;o<r;o++){a[o]={mipmaps:[]};for(var l=0;l<i.mipmapCount;l++)a[o].mipmaps.push(i.mipmaps[o*i.mipmapCount+l]),a[o].format=i.format,a[o].width=i.width,a[o].height=i.height}else s.image.width=i.width,s.image.height=i.height,s.mipmaps=i.mipmaps;1===i.mipmapCount&&(s.minFilter=1006),s.format=i.format,s.needsUpdate=!0,t&&t(s)},i,r);return s},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:Dn,this._parser=null}.prototype,{load:function(e,t,i,r){var n=this,a=new U,s=new jn(this.manager);return s.setResponseType("arraybuffer"),s.load(e,function(e){var i=n._parser(e);i&&(void 0!==i.image?a.image=i.image:void 0!==i.data&&(a.image.width=i.width,a.image.height=i.height,a.image.data=i.data),a.wrapS=void 0!==i.wrapS?i.wrapS:1001,a.wrapT=void 0!==i.wrapT?i.wrapT:1001,a.magFilter=void 0!==i.magFilter?i.magFilter:1006,a.minFilter=void 0!==i.minFilter?i.minFilter:1008,a.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.format&&(a.format=i.format),void 0!==i.type&&(a.type=i.type),void 0!==i.mipmaps&&(a.mipmaps=i.mipmaps),1===i.mipmapCount&&(a.minFilter=1006),a.needsUpdate=!0,t&&t(a,i))},i,r),a}}),Object.assign(Ln.prototype,{crossOrigin:"Anonymous",load:function(e,i,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var a=this,s=xn.get(e);if(void 0!==s)return a.manager.itemStart(e),setTimeout(function(){i&&i(s),a.manager.itemEnd(e)},0),s;var o=t.createElementNS("http://www.w3.org/1999/xhtml","img");function l(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1),xn.add(e,this),i&&i(this),a.manager.itemEnd(e)}function u(t){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1),n&&n(t),a.manager.itemEnd(e),a.manager.itemError(e)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),a.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:Dn}.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,r){var n=new at,a=new Ln(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var s=0;function o(i){a.load(e[i],function(e){n.images[i]=e,6===++s&&(n.needsUpdate=!0,t&&t(n))},void 0,r)}for(var l=0;l<e.length;++l)o(l);return n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Nn.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,r){var n=new k,a=new Ln(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(i){n.image=i;var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);n.format=r?1022:1023,n.needsUpdate=!0,void 0!==t&&t(n)},i,r),n},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Cn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var i=this.getUtoTmapping(e);return this.getPoint(i,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i,r=[],n=this.getPoint(0),a=0;for(r.push(0),i=1;i<=e;i++)a+=(t=this.getPoint(i/e)).distanceTo(n),r.push(a),n=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var i,r=this.getLengths(),n=0,a=r.length;i=t||e*r[a-1];for(var s,o=0,l=a-1;o<=l;)if((s=r[n=Math.floor(o+(l-o)/2)]-i)<0)o=n+1;else{if(!(s>0)){l=n;break}l=n-1}if(r[n=l]===i)return n/(a-1);var u=r[n];return(n+(i-u)/(r[n+1]-u))/(a-1)},getTangent:function(e){var t=e-1e-4,i=e+1e-4;t<0&&(t=0),i>1&&(i=1);var r=this.getPoint(t);return this.getPoint(i).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var i,r,n,a=new S,s=[],o=[],l=[],u=new S,c=new E;for(i=0;i<=e;i++)r=i/e,s[i]=this.getTangentAt(r),s[i].normalize();o[0]=new S,l[0]=new S;var d=Number.MAX_VALUE,h=Math.abs(s[0].x),f=Math.abs(s[0].y),p=Math.abs(s[0].z);for(h<=d&&(d=h,a.set(1,0,0)),f<=d&&(d=f,a.set(0,1,0)),p<=d&&a.set(0,0,1),u.crossVectors(s[0],a).normalize(),o[0].crossVectors(s[0],u),l[0].crossVectors(s[0],o[0]),i=1;i<=e;i++)o[i]=o[i-1].clone(),l[i]=l[i-1].clone(),u.crossVectors(s[i-1],s[i]),u.length()>Number.EPSILON&&(u.normalize(),n=Math.acos(A.clamp(s[i-1].dot(s[i]),-1,1)),o[i].applyMatrix4(c.makeRotationAxis(u,n))),l[i].crossVectors(s[i],o[i]);if(!0===t)for(n=Math.acos(A.clamp(o[0].dot(o[e]),-1,1)),n/=e,s[0].dot(u.crossVectors(o[0],o[e]))>0&&(n=-n),i=1;i<=e;i++)o[i].applyMatrix4(c.makeRotationAxis(s[i],n*i)),l[i].crossVectors(s[i],o[i]);return{tangents:s,normals:o,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),On.prototype=Object.create(Cn.prototype),On.prototype.constructor=On,On.prototype.isEllipseCurve=!0,On.prototype.getPoint=function(e,t){for(var i=t||new w,r=2*Math.PI,n=this.aEndAngle-this.aStartAngle,a=Math.abs(n)<Number.EPSILON;n<0;)n+=r;for(;n>r;)n-=r;n<Number.EPSILON&&(n=a?0:r),!0!==this.aClockwise||a||(n===r?n=-r:n-=r);var s=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=o-this.aX,h=l-this.aY;o=d*u-h*c+this.aX,l=d*c+h*u+this.aY}return i.set(o,l)},On.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},On.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},On.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},kn.prototype=Object.create(On.prototype),kn.prototype.constructor=kn,kn.prototype.isArcCurve=!0;var Rn=new S,zn=new Pn,Un=new Pn,Bn=new Pn;function Fn(e,t,i,r){Cn.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=i||"centripetal",this.tension=r||.5}function Vn(e,t,i,r,n){var a=.5*(r-t),s=.5*(n-i),o=e*e;return(2*i-2*r+a+s)*(e*o)+(-3*i+3*r-2*a-s)*o+a*e+i}function Gn(e,t,i,r){return function(e,t){var i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,r)}function Hn(e,t,i,r,n){return function(e,t){var i=1-e;return i*i*i*t}(e,t)+function(e,t){var i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,n)}function Qn(e,t,i,r){Cn.call(this),this.type="CubicBezierCurve",this.v0=e||new w,this.v1=t||new w,this.v2=i||new w,this.v3=r||new w}function Yn(e,t,i,r){Cn.call(this),this.type="CubicBezierCurve3",this.v0=e||new S,this.v1=t||new S,this.v2=i||new S,this.v3=r||new S}function Wn(e,t){Cn.call(this),this.type="LineCurve",this.v1=e||new w,this.v2=t||new w}function qn(e,t){Cn.call(this),this.type="LineCurve3",this.v1=e||new S,this.v2=t||new S}function Xn(e,t,i){Cn.call(this),this.type="QuadraticBezierCurve",this.v0=e||new w,this.v1=t||new w,this.v2=i||new w}function Zn(e,t,i){Cn.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new S,this.v1=t||new S,this.v2=i||new S}function Kn(e){Cn.call(this),this.type="SplineCurve",this.points=e||[]}Fn.prototype=Object.create(Cn.prototype),Fn.prototype.constructor=Fn,Fn.prototype.isCatmullRomCurve3=!0,Fn.prototype.getPoint=function(e,t){var i,r,n,a,s=t||new S,o=this.points,l=o.length,u=(l-(this.closed?0:1))*e,c=Math.floor(u),d=u-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:0===d&&c===l-1&&(c=l-2,d=1),this.closed||c>0?i=o[(c-1)%l]:(Rn.subVectors(o[0],o[1]).add(o[0]),i=Rn),r=o[c%l],n=o[(c+1)%l],this.closed||c+2<l?a=o[(c+2)%l]:(Rn.subVectors(o[l-1],o[l-2]).add(o[l-1]),a=Rn),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,f=Math.pow(i.distanceToSquared(r),h),p=Math.pow(r.distanceToSquared(n),h),m=Math.pow(n.distanceToSquared(a),h);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),zn.initNonuniformCatmullRom(i.x,r.x,n.x,a.x,f,p,m),Un.initNonuniformCatmullRom(i.y,r.y,n.y,a.y,f,p,m),Bn.initNonuniformCatmullRom(i.z,r.z,n.z,a.z,f,p,m)}else"catmullrom"===this.curveType&&(zn.initCatmullRom(i.x,r.x,n.x,a.x,this.tension),Un.initCatmullRom(i.y,r.y,n.y,a.y,this.tension),Bn.initCatmullRom(i.z,r.z,n.z,a.z,this.tension));return s.set(zn.calc(d),Un.calc(d),Bn.calc(d)),s},Fn.prototype.copy=function(e){Cn.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Fn.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Fn.prototype.fromJSON=function(e){Cn.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new S).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Qn.prototype=Object.create(Cn.prototype),Qn.prototype.constructor=Qn,Qn.prototype.isCubicBezierCurve=!0,Qn.prototype.getPoint=function(e,t){var i=t||new w,r=this.v0,n=this.v1,a=this.v2,s=this.v3;return i.set(Hn(e,r.x,n.x,a.x,s.x),Hn(e,r.y,n.y,a.y,s.y)),i},Qn.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Qn.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Qn.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Yn.prototype=Object.create(Cn.prototype),Yn.prototype.constructor=Yn,Yn.prototype.isCubicBezierCurve3=!0,Yn.prototype.getPoint=function(e,t){var i=t||new S,r=this.v0,n=this.v1,a=this.v2,s=this.v3;return i.set(Hn(e,r.x,n.x,a.x,s.x),Hn(e,r.y,n.y,a.y,s.y),Hn(e,r.z,n.z,a.z,s.z)),i},Yn.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Yn.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Yn.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Wn.prototype=Object.create(Cn.prototype),Wn.prototype.constructor=Wn,Wn.prototype.isLineCurve=!0,Wn.prototype.getPoint=function(e,t){var i=t||new w;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},Wn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Wn.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Wn.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Wn.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Wn.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},qn.prototype=Object.create(Cn.prototype),qn.prototype.constructor=qn,qn.prototype.isLineCurve3=!0,qn.prototype.getPoint=function(e,t){var i=t||new S;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i},qn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},qn.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},qn.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},qn.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Xn.prototype=Object.create(Cn.prototype),Xn.prototype.constructor=Xn,Xn.prototype.isQuadraticBezierCurve=!0,Xn.prototype.getPoint=function(e,t){var i=t||new w,r=this.v0,n=this.v1,a=this.v2;return i.set(Gn(e,r.x,n.x,a.x),Gn(e,r.y,n.y,a.y)),i},Xn.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Xn.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Xn.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Zn.prototype=Object.create(Cn.prototype),Zn.prototype.constructor=Zn,Zn.prototype.isQuadraticBezierCurve3=!0,Zn.prototype.getPoint=function(e,t){var i=t||new S,r=this.v0,n=this.v1,a=this.v2;return i.set(Gn(e,r.x,n.x,a.x),Gn(e,r.y,n.y,a.y),Gn(e,r.z,n.z,a.z)),i},Zn.prototype.copy=function(e){return Cn.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Zn.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Zn.prototype.fromJSON=function(e){return Cn.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Kn.prototype=Object.create(Cn.prototype),Kn.prototype.constructor=Kn,Kn.prototype.isSplineCurve=!0,Kn.prototype.getPoint=function(e,t){var i=t||new w,r=this.points,n=(r.length-1)*e,a=Math.floor(n),s=n-a,o=r[0===a?a:a-1],l=r[a],u=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return i.set(Vn(s,o.x,l.x,u.x,c.x),Vn(s,o.y,l.y,u.y,c.y)),i},Kn.prototype.copy=function(e){Cn.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push(r.clone())}return this},Kn.prototype.toJSON=function(){var e=Cn.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;t<i;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Kn.prototype.fromJSON=function(e){Cn.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;t<i;t++){var r=e.points[t];this.points.push((new w).fromArray(r))}return this};var Jn=Object.freeze({ArcCurve:kn,CatmullRomCurve3:Fn,CubicBezierCurve:Qn,CubicBezierCurve3:Yn,EllipseCurve:On,LineCurve:Wn,LineCurve3:qn,QuadraticBezierCurve:Xn,QuadraticBezierCurve3:Zn,SplineCurve:Kn});function $n(){Cn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ea(e){$n.call(this),this.type="Path",this.currentPoint=new w,e&&this.setFromPoints(e)}function ta(e){ea.call(this,e),this.uuid=A.generateUUID(),this.type="Shape",this.holes=[]}function ia(e,t){oe.call(this),this.type="Light",this.color=new q(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function ra(e,t,i){ia.call(this,e,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(oe.DefaultUp),this.updateMatrix(),this.groundColor=new q(t)}function na(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new w(512,512),this.map=null,this.matrix=new E}function aa(){na.call(this,new Ni(50,1,.5,500))}function sa(e,t,i,r,n,a){ia.call(this,e,t),this.type="SpotLight",this.position.copy(oe.DefaultUp),this.updateMatrix(),this.target=new oe,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==n?n:0,this.decay=void 0!==a?a:1,this.shadow=new aa}function oa(e,t,i,r){ia.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==r?r:1,this.shadow=new na(new Ni(90,1,.5,500))}function la(){na.call(this,new ue(-5,5,5,-5,.5,500))}function ua(e,t){ia.call(this,e,t),this.type="DirectionalLight",this.position.copy(oe.DefaultUp),this.updateMatrix(),this.target=new oe,this.shadow=new la}function ca(e,t){ia.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function da(e,t,i,r){ia.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==r?r:10}function ha(e,t,i,r){Aa.call(this,e,t,i,r)}function fa(e,t,i){Aa.call(this,e,t,i)}function pa(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function ma(e,t,i,r){pa.call(this,e,t,i,r)}function va(e,t,i,r){Aa.call(this,e,t,i,r)}function ga(e,t,i,r){Aa.call(this,e,t,i,r)}function ya(e,t,i,r){Aa.call(this,e,t,i,r)}function _a(e,t,i,r){pa.call(this,e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ba(e,t,i,r){pa.call(this,e,t,i,r)}function Ma(e,t,i,r){pa.call(this,e,t,i,r)}$n.prototype=Object.assign(Object.create(Cn.prototype),{constructor:$n,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Wn(t,e))},getPoint:function(e){for(var t=e*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=t){var n=i[r]-t,a=this.curves[r],s=a.getLength(),o=0===s?0:1-n/s;return a.getPointAt(o)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,i=[],r=0,n=this.curves;r<n.length;r++)for(var a=n[r],s=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s),l=0;l<o.length;l++){var u=o[l];t&&t.equals(u)||(i.push(u),t=u)}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(e){Cn.prototype.copy.call(this,e),this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Cn.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;t<i;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Cn.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;t<i;t++){var r=e.curves[t];this.curves.push((new Jn[r.type]).fromJSON(r))}return this}}),ea.prototype=Object.assign(Object.create($n.prototype),{constructor:ea,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var i=new Wn(this.currentPoint.clone(),new w(e,t));this.curves.push(i),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,i,r){var n=new Xn(this.currentPoint.clone(),new w(e,t),new w(i,r));this.curves.push(n),this.currentPoint.set(i,r)},bezierCurveTo:function(e,t,i,r,n,a){var s=new Qn(this.currentPoint.clone(),new w(e,t),new w(i,r),new w(n,a));this.curves.push(s),this.currentPoint.set(n,a)},splineThru:function(e){var t=new Kn([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,r,n,a){var s=this.currentPoint.x,o=this.currentPoint.y;this.absarc(e+s,t+o,i,r,n,a)},absarc:function(e,t,i,r,n,a){this.absellipse(e,t,i,i,r,n,a)},ellipse:function(e,t,i,r,n,a,s,o){var l=this.currentPoint.x,u=this.currentPoint.y;this.absellipse(e+l,t+u,i,r,n,a,s,o)},absellipse:function(e,t,i,r,n,a,s,o){var l=new On(e,t,i,r,n,a,s,o);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return $n.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=$n.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return $n.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),ta.prototype=Object.assign(Object.create(ea.prototype),{constructor:ta,getPointsHoles:function(e){for(var t=[],i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){ea.prototype.copy.call(this,e),this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=ea.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;t<i;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){ea.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;t<i;t++){var r=e.holes[t];this.holes.push((new ea).fromJSON(r))}return this}}),ia.prototype=Object.assign(Object.create(oe.prototype),{constructor:ia,isLight:!0,copy:function(e){return oe.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=oe.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ra.prototype=Object.assign(Object.create(ia.prototype),{constructor:ra,isHemisphereLight:!0,copy:function(e){return ia.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(na.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),aa.prototype=Object.assign(Object.create(na.prototype),{constructor:aa,isSpotLightShadow:!0,update:function(e){var t=this.camera,i=2*A.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;i===t.fov&&r===t.aspect&&n===t.far||(t.fov=i,t.aspect=r,t.far=n,t.updateProjectionMatrix())}}),sa.prototype=Object.assign(Object.create(ia.prototype),{constructor:sa,isSpotLight:!0,copy:function(e){return ia.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),oa.prototype=Object.assign(Object.create(ia.prototype),{constructor:oa,isPointLight:!0,copy:function(e){return ia.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),la.prototype=Object.assign(Object.create(na.prototype),{constructor:la}),ua.prototype=Object.assign(Object.create(ia.prototype),{constructor:ua,isDirectionalLight:!0,copy:function(e){return ia.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),ca.prototype=Object.assign(Object.create(ia.prototype),{constructor:ca,isAmbientLight:!0}),da.prototype=Object.assign(Object.create(ia.prototype),{constructor:da,isRectAreaLight:!0,copy:function(e){return ia.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=ia.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),ha.prototype=Object.assign(Object.create(Aa.prototype),{constructor:ha,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),fa.prototype=Object.assign(Object.create(Aa.prototype),{constructor:fa,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(pa.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,r=t[i],n=t[i-1];e:{t:{var a;i:{r:if(!(e<r)){for(var s=i+2;;){if(void 0===r){if(e<n)break r;return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,e,n)}if(i===s)break;if(n=r,e<(r=t[++i]))break t}a=t.length;break i}if(e>=n)break e;var o=t[1];e<o&&(i=2,n=o);for(s=i-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(i===s)break;if(r=n,e>=(n=t[--i-1]))break t}a=i,i=0}for(;i<a;){var l=i+a>>>1;e<t[l]?a=l:i=l+1}if(r=t[i],void 0===(n=t[i-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return i=t.length,this._cachedIndex=i,this.afterEnd_(i-1,n,e)}this._cachedIndex=i,this.intervalChanged_(i,n,r)}return this.interpolate_(i,n,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=e*r,a=0;a!==r;++a)t[a]=i[n+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(pa.prototype,{beforeStart_:pa.prototype.copySampleValue_,afterEnd_:pa.prototype.copySampleValue_}),ma.prototype=Object.assign(Object.create(pa.prototype),{constructor:ma,interpolate_:function(e,t,i,r){for(var n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=(i-t)/(r-t),u=o+s;o!==u;o+=4)x.slerpFlat(n,0,a,o-s,a,o,l);return n}}),va.prototype=Object.assign(Object.create(Aa.prototype),{constructor:va,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new ma(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),ga.prototype=Object.assign(Object.create(Aa.prototype),{constructor:ga,ValueTypeName:"color"}),ya.prototype=Object.assign(Object.create(Aa.prototype),{constructor:ya,ValueTypeName:"number"}),_a.prototype=Object.assign(Object.create(pa.prototype),{constructor:_a,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,i){var r=this.parameterPositions,n=e-2,a=e+1,s=r[n],o=r[a];if(void 0===s)switch(this.getSettings_().endingStart){case 2401:n=e,s=2*t-i;break;case 2402:s=t+r[n=r.length-2]-r[n+1];break;default:n=e,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:a=e,o=2*i-t;break;case 2402:a=1,o=i+r[1]-r[0];break;default:a=e-1,o=t}var l=.5*(i-t),u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-i),this._offsetPrev=n*u,this._offsetNext=a*u},interpolate_:function(e,t,i,r){for(var n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(i-t)/(r-t),p=f*f,m=p*f,v=-d*m+2*d*p-d*f,g=(1+d)*m+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*m+(1.5+h)*p+.5*f,_=h*m-h*p,b=0;b!==s;++b)n[b]=v*a[u+b]+g*a[l+b]+y*a[o+b]+_*a[c+b];return n}}),ba.prototype=Object.assign(Object.create(pa.prototype),{constructor:ba,interpolate_:function(e,t,i,r){for(var n=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,u=(i-t)/(r-t),c=1-u,d=0;d!==s;++d)n[d]=a[l+d]*c+a[o+d]*u;return n}}),Ma.prototype=Object.assign(Object.create(pa.prototype),{constructor:Ma,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Ta={arraySlice:function(e,t,i){return Ta.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,i=new Array(t),r=0;r!==t;++r)i[r]=r;return i.sort(function(t,i){return e[t]-e[i]}),i},sortedArray:function(e,t,i){for(var r=e.length,n=new e.constructor(r),a=0,s=0;s!==r;++a)for(var o=i[a]*t,l=0;l!==t;++l)n[s++]=e[o+l];return n},flattenJSON:function(e,t,i,r){for(var n=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[n++];if(void 0!==a){var s=a[r];if(void 0!==s)if(Array.isArray(s))do{void 0!==(s=a[r])&&(t.push(a.time),i.push.apply(i,s)),a=e[n++]}while(void 0!==a);else if(void 0!==s.toArray)do{void 0!==(s=a[r])&&(t.push(a.time),s.toArray(i,i.length)),a=e[n++]}while(void 0!==a);else do{void 0!==(s=a[r])&&(t.push(a.time),i.push(s)),a=e[n++]}while(void 0!==a)}}};function Aa(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ta.convertArray(t,this.TimeBufferType),this.values=Ta.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function wa(e,t,i,r){Aa.call(this,e,t,i,r)}function Ea(e,t,i){this.name=e,this.tracks=i,this.duration=void 0!==t?t:-1,this.uuid=A.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function xa(e){this.manager=void 0!==e?e:Dn,this.textures={}}function Sa(e){this.manager=void 0!==e?e:Dn}Object.assign(Aa,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Aa._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var i=[],r=[];Ta.flattenJSON(e.keys,i,r,"value"),e.times=i,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,i=e.constructor;if(void 0!==i.toJSON)t=i.toJSON(e);else{t={name:e.name,times:Ta.convertArray(e.times,Array),values:Ta.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ya;case"vector":case"vector2":case"vector3":case"vector4":return wa;case"color":return ga;case"quaternion":return va;case"bool":case"boolean":return fa;case"string":return ha}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(Aa.prototype,{constructor:Aa,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Ma(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new ba(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new _a(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",i)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,i=0,r=t.length;i!==r;++i)t[i]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,i=0,r=t.length;i!==r;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,r=i.length,n=0,a=r-1;n!==r&&i[n]<e;)++n;for(;-1!==a&&i[a]>t;)--a;if(++a,0!==n||a!==r){n>=a&&(n=(a=Math.max(a,1))-1);var s=this.getValueSize();this.times=Ta.arraySlice(i,n,a),this.values=Ta.arraySlice(this.values,n*s,a*s)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var i=this.times,r=this.values,n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,s=0;s!==n;s++){var o=i[s];if("number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,o),e=!1;break}if(null!==a&&a>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,o,a),e=!1;break}a=o}if(void 0!==r&&Ta.isTypedArray(r)){s=0;for(var l=r.length;s!==l;++s){var u=r[s];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),r=2302===this.getInterpolation(),n=1,a=e.length-1,s=1;s<a;++s){var o=!1,l=e[s];if(l!==e[s+1]&&(1!==s||l!==l[0]))if(r)o=!0;else for(var u=s*i,c=u-i,d=u+i,h=0;h!==i;++h){var f=t[u+h];if(f!==t[c+h]||f!==t[d+h]){o=!0;break}}if(o){if(s!==n){e[n]=e[s];var p=s*i,m=n*i;for(h=0;h!==i;++h)t[m+h]=t[p+h]}++n}}if(a>0){e[n]=e[a];for(p=a*i,m=n*i,h=0;h!==i;++h)t[m+h]=t[p+h];++n}return n!==e.length&&(this.times=Ta.arraySlice(e,0,n),this.values=Ta.arraySlice(t,0,n*i)),this}}),wa.prototype=Object.assign(Object.create(Aa.prototype),{constructor:wa,ValueTypeName:"vector"}),Object.assign(Ea,{parse:function(e){for(var t=[],i=e.tracks,r=1/(e.fps||1),n=0,a=i.length;n!==a;++n)t.push(Aa.parse(i[n]).scale(r));return new Ea(e.name,e.duration,t)},toJSON:function(e){for(var t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},n=0,a=i.length;n!==a;++n)t.push(Aa.toJSON(i[n]));return r},CreateFromMorphTargetSequence:function(e,t,i,r){for(var n=t.length,a=[],s=0;s<n;s++){var o=[],l=[];o.push((s+n-1)%n,s,(s+1)%n),l.push(0,1,0);var u=Ta.getKeyframeOrder(o);o=Ta.sortedArray(o,1,u),l=Ta.sortedArray(l,1,u),r||0!==o[0]||(o.push(n),l.push(l[0])),a.push(new ya(".morphTargetInfluences["+t[s].name+"]",o,l).scale(1/i))}return new Ea(e,-1,a)},findByName:function(e,t){var i=e;if(!Array.isArray(e)){var r=e;i=r.geometry&&r.geometry.animations||r.animations}for(var n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var r={},n=/^([\w-]*?)([\d]+)$/,a=0,s=e.length;a<s;a++){var o=e[a],l=o.name.match(n);if(l&&l.length>1){var u=r[d=l[1]];u||(r[d]=u=[]),u.push(o)}}var c=[];for(var d in r)c.push(Ea.CreateFromMorphTargetSequence(d,r[d],t,i));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var i=function(e,t,i,r,n){if(0!==i.length){var a=[],s=[];Ta.flattenJSON(i,a,s,r),0!==a.length&&n.push(new e(t,a,s))}},r=[],n=e.name||"default",a=e.length||-1,s=e.fps||30,o=e.hierarchy||[],l=0;l<o.length;l++){var u=o[l].keys;if(u&&0!==u.length)if(u[0].morphTargets){for(var c={},d=0;d<u.length;d++)if(u[d].morphTargets)for(var h=0;h<u[d].morphTargets.length;h++)c[u[d].morphTargets[h]]=-1;for(var f in c){var p=[],m=[];for(h=0;h!==u[d].morphTargets.length;++h){var v=u[d];p.push(v.time),m.push(v.morphTarget===f?1:0)}r.push(new ya(".morphTargetInfluence["+f+"]",p,m))}a=c.length*(s||1)}else{var g=".bones["+t[l].name+"]";i(wa,g+".position",u,"pos",r),i(va,g+".quaternion",u,"rot",r),i(wa,g+".scale",u,"scl",r)}}return 0===r.length?null:new Ea(n,a,r)}}),Object.assign(Ea.prototype,{resetDuration:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(xa.prototype,{load:function(e,t,i,r){var n=this;new jn(n.manager).load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new En[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=i(e.map)),void 0!==e.alphaMap&&(r.alphaMap=i(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=i(e.normalMap)),void 0!==e.normalScale){var n=e.normalScale;!1===Array.isArray(n)&&(n=[n,n]),r.normalScale=(new w).fromArray(n)}return void 0!==e.displacementMap&&(r.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=i(e.specularMap)),void 0!==e.envMap&&(r.envMap=i(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=i(e.gradientMap)),r}}),Object.assign(Sa.prototype,{load:function(e,t,i,r){var n=this;new jn(n.manager).load(e,function(e){t(n.parse(JSON.parse(e)))},i,r)},parse:function(e){var t=new De,i=e.data.index;if(void 0!==i){var r=new Na[i.type](i.array);t.setIndex(new me(r,1))}var n=e.data.attributes;for(var a in n){var s=n[a];r=new Na[s.type](s.array);t.addAttribute(a,new me(r,s.itemSize,s.normalized))}var o=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==o)for(var l=0,u=o.length;l!==u;++l){var c=o[l];t.addGroup(c.start,c.count,c.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var h=new S;void 0!==d.center&&h.fromArray(d.center),t.boundingSphere=new F(h,d.radius)}return t}});var Da,Ia,ja,La,Na={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Ca(){}Ca.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,r=t.length;i<r;i+=2){var n=t[i],a=t[i+1];if(n.test(e))return a}return null}},Object.assign(Ca.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,i){for(var r=[],n=0;n<e.length;++n)r[n]=this.createMaterial(e[n],t,i);return r},createMaterial:(Da={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},Ia=new q,ja=new Nn,La=new xa,function(e,t,i){var r={};function n(e,n,a,s,o){var l,u=t+e,c=Ca.Handlers.get(u);null!==c?l=c.load(u):(ja.setCrossOrigin(i),l=ja.load(u)),void 0!==n&&(l.repeat.fromArray(n),1!==n[0]&&(l.wrapS=1e3),1!==n[1]&&(l.wrapT=1e3)),void 0!==a&&l.offset.fromArray(a),void 0!==s&&("repeat"===s[0]&&(l.wrapS=1e3),"mirror"===s[0]&&(l.wrapS=1002),"repeat"===s[1]&&(l.wrapT=1e3),"mirror"===s[1]&&(l.wrapT=1002)),void 0!==o&&(l.anisotropy=o);var d=A.generateUUID();return r[d]=l,d}var a={uuid:A.generateUUID(),type:"MeshLambertMaterial"};for(var s in e){var o=e[s];switch(s){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=o;break;case"blending":a.blending=Da[o];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",s,"is no longer supported.");break;case"colorDiffuse":a.color=Ia.fromArray(o).getHex();break;case"colorSpecular":a.specular=Ia.fromArray(o).getHex();break;case"colorEmissive":a.emissive=Ia.fromArray(o).getHex();break;case"specularCoef":a.shininess=o;break;case"shading":"basic"===o.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===o.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===o.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=n(o,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=n(o,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=n(o,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=n(o,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=n(o,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=o;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=n(o,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=o;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=n(o,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":a.metalnessMap=n(o,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=n(o,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=n(o,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=1;break;case"doubleSided":a.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=o;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[s]=o;break;case"vertexColors":!0===o&&(a.vertexColors=2),"face"===o&&(a.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",s,o)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),La.setTextures(r),La.parse(a)})});var Oa=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function ka(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Dn,this.withCredentials=!1}Object.assign(ka.prototype,{load:function(e,t,i,r){var n=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Oa(e),s=new jn(this.manager);s.setWithCredentials(this.withCredentials),s.load(e,function(i){var r=JSON.parse(i),s=r.metadata;if(void 0!==s){var o=s.type;if(void 0!==o&&"object"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var l=n.parse(r,a);t(l.geometry,l.materials)},i,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var i=new pe;return function(e,t){function i(e,t){return e&1<<t}var r,n,a,s,o,l,u,c,d,h,f,p,m,v,g,y,_,b,M,T,A,E,x,D,I,j=e.faces,L=e.vertices,N=e.normals,C=e.colors,O=e.scale,k=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&k++;for(r=0;r<k;r++)t.faceVertexUvs[r]=[]}for(s=0,o=L.length;s<o;)(b=new S).x=L[s++]*O,b.y=L[s++]*O,b.z=L[s++]*O,t.vertices.push(b);for(s=0,o=j.length;s<o;)if(f=i(h=j[s++],0),p=i(h,1),m=i(h,3),v=i(h,4),g=i(h,5),y=i(h,6),_=i(h,7),f){if((T=new ce).a=j[s],T.b=j[s+1],T.c=j[s+3],(A=new ce).a=j[s+1],A.b=j[s+2],A.c=j[s+3],s+=4,p&&(d=j[s++],T.materialIndex=d,A.materialIndex=d),a=t.faces.length,m)for(r=0;r<k;r++)for(D=e.uvs[r],t.faceVertexUvs[r][a]=[],t.faceVertexUvs[r][a+1]=[],n=0;n<4;n++)I=new w(D[2*(c=j[s++])],D[2*c+1]),2!==n&&t.faceVertexUvs[r][a].push(I),0!==n&&t.faceVertexUvs[r][a+1].push(I);if(v&&(u=3*j[s++],T.normal.set(N[u++],N[u++],N[u]),A.normal.copy(T.normal)),g)for(r=0;r<4;r++)u=3*j[s++],x=new S(N[u++],N[u++],N[u]),2!==r&&T.vertexNormals.push(x),0!==r&&A.vertexNormals.push(x);if(y&&(E=C[l=j[s++]],T.color.setHex(E),A.color.setHex(E)),_)for(r=0;r<4;r++)E=C[l=j[s++]],2!==r&&T.vertexColors.push(new q(E)),0!==r&&A.vertexColors.push(new q(E));t.faces.push(T),t.faces.push(A)}else{if((M=new ce).a=j[s++],M.b=j[s++],M.c=j[s++],p&&(d=j[s++],M.materialIndex=d),a=t.faces.length,m)for(r=0;r<k;r++)for(D=e.uvs[r],t.faceVertexUvs[r][a]=[],n=0;n<3;n++)I=new w(D[2*(c=j[s++])],D[2*c+1]),t.faceVertexUvs[r][a].push(I);if(v&&(u=3*j[s++],M.normal.set(N[u++],N[u++],N[u])),g)for(r=0;r<3;r++)u=3*j[s++],x=new S(N[u++],N[u++],N[u]),M.vertexNormals.push(x);if(y&&(l=j[s++],M.color.setHex(C[l])),_)for(r=0;r<3;r++)l=j[s++],M.vertexColors.push(new q(C[l]));t.faces.push(M)}}(e,i),function(e,t){var i=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,n=e.skinWeights.length;r<n;r+=i){var a=e.skinWeights[r],s=i>1?e.skinWeights[r+1]:0,o=i>2?e.skinWeights[r+2]:0,l=i>3?e.skinWeights[r+3]:0;t.skinWeights.push(new P(a,s,o,l))}if(e.skinIndices)for(r=0,n=e.skinIndices.length;r<n;r+=i){var u=e.skinIndices[r],c=i>1?e.skinIndices[r+1]:0,d=i>2?e.skinIndices[r+2]:0,h=i>3?e.skinIndices[r+3]:0;t.skinIndices.push(new P(u,c,d,h))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,i),function(e,t){var i=e.scale;if(void 0!==e.morphTargets)for(var r=0,n=e.morphTargets.length;r<n;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var a=t.morphTargets[r].vertices,s=e.morphTargets[r].vertices,o=0,l=s.length;o<l;o+=3){var u=new S;u.x=s[o]*i,u.y=s[o+1]*i,u.z=s[o+2]*i,a.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=t.faces,d=e.morphColors[0].colors;for(r=0,n=c.length;r<n;r++)c[r].color.fromArray(d,3*r)}}(e,i),function(e,t){var i=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var n=0;n<r.length;n++){var a=Ea.parseAnimation(r[n],t.bones);a&&i.push(a)}if(t.morphTargets){var s=Ea.CreateClipsFromMorphTargetSequences(t.morphTargets,10);i=i.concat(s)}i.length>0&&(t.animations=i)}(e,i),i.computeFaceNormals(),i.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:i}:{geometry:i,materials:Ca.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(function(e){this.manager=void 0!==e?e:Dn,this.texturePath=""}.prototype,{load:function(e,t,i,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var n=this;new jn(n.manager).load(e,function(i){var a=null;try{a=JSON.parse(i)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var s=a.metadata;void 0!==s&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()?n.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},i,r)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var i=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,i),n=this.parseImages(e.images,function(){void 0!==t&&t(o)}),a=this.parseTextures(e.textures,n),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,r,s);return e.animations&&(o.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(o),o},parseShape:function(e){var t={};if(void 0!==e)for(var i=0,r=e.length;i<r;i++){var n=(new ta).fromJSON(e[i]);t[n.uuid]=n}return t},parseGeometries:function(e,t){var i={};if(void 0!==e)for(var r=new ka,n=new Sa,a=0,s=e.length;a<s;a++){var o,l=e[a];switch(l.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new mn[l.type](l.width,l.height,l.widthSegments,l.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new mn[l.type](l.width,l.height,l.depth,l.widthSegments,l.heightSegments,l.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new mn[l.type](l.radius,l.segments,l.thetaStart,l.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new mn[l.type](l.radiusTop,l.radiusBottom,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new mn[l.type](l.radius,l.height,l.radialSegments,l.heightSegments,l.openEnded,l.thetaStart,l.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new mn[l.type](l.radius,l.widthSegments,l.heightSegments,l.phiStart,l.phiLength,l.thetaStart,l.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new mn[l.type](l.radius,l.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new mn[l.type](l.innerRadius,l.outerRadius,l.thetaSegments,l.phiSegments,l.thetaStart,l.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new mn[l.type](l.radius,l.tube,l.radialSegments,l.tubularSegments,l.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new mn[l.type](l.radius,l.tube,l.tubularSegments,l.radialSegments,l.p,l.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new mn[l.type](l.points,l.segments,l.phiStart,l.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new mn[l.type](l.vertices,l.indices,l.radius,l.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],c=0,d=l.shapes.length;c<d;c++){var h=t[l.shapes[c]];u.push(h)}o=new mn[l.type](u,l.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],c=0,d=l.shapes.length;c<d;c++){h=t[l.shapes[c]];u.push(h)}var f=l.options.extrudePath;void 0!==f&&(l.options.extrudePath=(new Jn[f.type]).fromJSON(f)),o=new mn[l.type](u,l.options);break;case"BufferGeometry":o=n.parse(l);break;case"Geometry":o=r.parse(l,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+l.type+'"');continue}o.uuid=l.uuid,void 0!==l.name&&(o.name=l.name),!0===o.isBufferGeometry&&void 0!==l.userData&&(o.userData=l.userData),i[l.uuid]=o}return i},parseMaterials:function(e,t){var i={};if(void 0!==e){var r=new xa;r.setTextures(t);for(var n=0,a=e.length;n<a;n++){var s=e[n];if("MultiMaterial"===s.type){for(var o=[],l=0;l<s.materials.length;l++)o.push(r.parse(s.materials[l]));i[s.uuid]=o}else i[s.uuid]=r.parse(s)}}return i},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i],n=Ea.parse(r);void 0!==r.uuid&&(n.uuid=r.uuid),t.push(n)}return t},parseImages:function(e,t){var i=this,r={};function n(e){return i.manager.itemStart(e),a.load(e,function(){i.manager.itemEnd(e)},void 0,function(){i.manager.itemEnd(e),i.manager.itemError(e)})}if(void 0!==e&&e.length>0){var a=new Ln(new Sn(t));a.setCrossOrigin(this.crossOrigin);for(var s=0,o=e.length;s<o;s++){var l=e[s],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:i.texturePath+l.url;r[l.uuid]=n(u)}}return r},parseTextures:function(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var n=0,a=e.length;n<a;n++){var s=e[n];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);var o=new k(t[s.image]);o.needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=i(s.mapping,Ra)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=i(s.wrap[0],za),o.wrapT=i(s.wrap[1],za)),void 0!==s.format&&(o.format=s.format),void 0!==s.minFilter&&(o.minFilter=i(s.minFilter,Ua)),void 0!==s.magFilter&&(o.magFilter=i(s.magFilter,Ua)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),r[s.uuid]=o}return r},parseObject:function(e,t,i){var r;function n(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,n=e.length;r<n;r++){var a=e[r];void 0===i[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(i[a])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}switch(e.type){case"Scene":r=new Ui,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new q(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new zi(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Ri(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new Ni(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new ue(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new ca(e.color,e.intensity);break;case"DirectionalLight":r=new ua(e.color,e.intensity);break;case"PointLight":r=new oa(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new da(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new sa(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new ra(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var s=n(e.geometry),o=a(e.material);r=s.bones&&s.bones.length>0?new Qi(s,o):new We(s,o);break;case"LOD":r=new Vi;break;case"Line":r=new Wi(n(e.geometry),a(e.material),e.mode);break;case"LineLoop":r=new Xi(n(e.geometry),a(e.material));break;case"LineSegments":r=new qi(n(e.geometry),a(e.material));break;case"PointCloud":case"Points":r=new Ki(n(e.geometry),a(e.material));break;case"Sprite":r=new Fi(a(e.material));break;case"Group":r=new Ji;break;default:r=new oe}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.children)for(var l=e.children,u=0;u<l.length;u++)r.add(this.parseObject(l[u],t,i));if("LOD"===e.type)for(var c=e.levels,d=0;d<c.length;d++){var h=c[d],f=r.getObjectByProperty("uuid",h.object);void 0!==f&&r.addLevel(f,h.distance)}return r}});var Pa,Ra={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},za={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Ua={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};function Ba(){this.type="ShapePath",this.color=new q,this.subPaths=[],this.currentPath=null}function Fa(e){this.type="Font",this.data=e}function Va(e,t,i,r,n,a){var s=a.glyphs[e]||a.glyphs["?"];if(s){var o,l,u,c,d,h,f,p,m=new Ba;if(s.o)for(var v=s._cachedOutline||(s._cachedOutline=s.o.split(" ")),g=0,y=v.length;g<y;){switch(v[g++]){case"m":o=v[g++]*i+r,l=v[g++]*i+n,m.moveTo(o,l);break;case"l":o=v[g++]*i+r,l=v[g++]*i+n,m.lineTo(o,l);break;case"q":u=v[g++]*i+r,c=v[g++]*i+n,d=v[g++]*i+r,h=v[g++]*i+n,m.quadraticCurveTo(d,h,u,c);break;case"b":u=v[g++]*i+r,c=v[g++]*i+n,d=v[g++]*i+r,h=v[g++]*i+n,f=v[g++]*i+r,p=v[g++]*i+n,m.bezierCurveTo(d,h,f,p,u,c)}}return{offsetX:s.ha*i,path:m}}}Object.assign(Ba.prototype,{moveTo:function(e,t){this.currentPath=new ea,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,r){this.currentPath.quadraticCurveTo(e,t,i,r)},bezierCurveTo:function(e,t,i,r,n,a){this.currentPath.bezierCurveTo(e,t,i,r,n,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){for(var t=[],i=0,r=e.length;i<r;i++){var n=e[i],a=new ta;a.curves=n.curves,t.push(a)}return t}function r(e,t){for(var i=t.length,r=!1,n=i-1,a=0;a<i;n=a++){var s=t[n],o=t[a],l=o.x-s.x,u=o.y-s.y;if(Math.abs(u)>Number.EPSILON){if(u<0&&(s=t[a],l=-l,o=t[n],u=-u),e.y<s.y||e.y>o.y)continue;if(e.y===s.y){if(e.x===s.x)return!0}else{var c=u*(e.x-s.x)-l*(e.y-s.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==s.y)continue;if(o.x<=e.x&&e.x<=s.x||s.x<=e.x&&e.x<=o.x)return!0}}return r}var n=Gr.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return i(a);var s,o,l,u=[];if(1===a.length)return o=a[0],(l=new ta).curves=o.curves,u.push(l),u;var c=!n(a[0].getPoints());c=e?!c:c;var d,h,f=[],p=[],m=[],v=0;p[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)s=n(d=(o=a[g]).getPoints()),(s=e?!s:s)?(!c&&p[v]&&v++,p[v]={s:new ta,p:d},p[v].s.curves=o.curves,c&&v++,m[v]=[]):m[v].push({h:o,p:d[0]});if(!p[0])return i(a);if(p.length>1){for(var _=!1,b=[],M=0,T=p.length;M<T;M++)f[M]=[];for(M=0,T=p.length;M<T;M++)for(var A=m[M],w=0;w<A.length;w++){for(var E=A[w],x=!0,S=0;S<p.length;S++)r(E.p,p[S].p)&&(M!==S&&b.push({froms:M,tos:S,hole:w}),x?(x=!1,f[S].push(E)):_=!0);x&&f[M].push(E)}b.length>0&&(_||(m=f))}g=0;for(var D=p.length;g<D;g++){l=p[g].s,u.push(l);for(var I=0,j=(h=m[g]).length;I<j;I++)l.holes.push(h[I].h)}return u}}),Object.assign(Fa.prototype,{isFont:!0,generateShapes:function(e,t,i){void 0===t&&(t=100),void 0===i&&(i=4);for(var r=[],n=function(e,t,i,r){for(var n=Array.from?Array.from(e):String(e).split(""),a=t/r.resolution,s=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*a,o=[],l=0,u=0,c=0;c<n.length;c++){var d=n[c];if("\n"===d)l=0,u-=s;else{var h=Va(d,i,a,l,u,r);l+=h.offsetX,o.push(h.path)}}return o}(e,t,i,this.data),a=0,s=n.length;a<s;a++)Array.prototype.push.apply(r,n[a].toShapes());return r}}),Object.assign(function(e){this.manager=void 0!==e?e:Dn}.prototype,{load:function(e,t,i,r){var n=this,a=new jn(this.manager);a.setPath(this.path),a.load(e,function(e){var i;try{i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}var r=n.parse(i);t&&t(r)},i,r)},parse:function(e){return new Fa(e)},setPath:function(e){return this.path=e,this}});var Ga,Ha,Qa,Ya,Wa,qa,Xa,Za,Ka,Ja,$a=function(){return void 0===Pa&&(Pa=new(e.AudioContext||e.webkitAudioContext)),Pa};function es(e){this.manager=void 0!==e?e:Dn}function ts(e,t,i){oe.call(this),this.type="CubeCamera";var r=new Ni(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new S(1,0,0)),this.add(r);var n=new Ni(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new S(-1,0,0)),this.add(n);var a=new Ni(90,1,e,t);a.up.set(0,0,1),a.lookAt(new S(0,1,0)),this.add(a);var s=new Ni(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new S(0,-1,0)),this.add(s);var o=new Ni(90,1,e,t);o.up.set(0,-1,0),o.lookAt(new S(0,0,1)),this.add(o);var l=new Ni(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new S(0,0,-1)),this.add(l);var u={format:1022,magFilter:1006,minFilter:1006};this.renderTarget=new z(i,i,u),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,u=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,r,i),i.activeCubeFace=1,e.render(t,n,i),i.activeCubeFace=2,e.render(t,a,i),i.activeCubeFace=3,e.render(t,s,i),i.activeCubeFace=4,e.render(t,o,i),i.texture.generateMipmaps=u,i.activeCubeFace=5,e.render(t,l,i),e.setRenderTarget(null)},this.clear=function(e,t,i,r){for(var n=this.renderTarget,a=0;a<6;a++)n.activeCubeFace=a,e.setRenderTarget(n),e.clear(t,i,r);e.setRenderTarget(null)}}function is(){oe.call(this),this.type="AudioListener",this.context=$a(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function rs(e){oe.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function ns(e){rs.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function as(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function ss(e,t,i){this.binding=e,this.valueSize=i;var r,n=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":n=Array,r=this._select;break;default:r=this._lerp}this.buffer=new n(4*i),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(es.prototype,{load:function(e,t,i,r){var n=new jn(this.manager);n.setResponseType("arraybuffer"),n.load(e,function(e){$a().decodeAudioData(e,function(e){t(e)})},i,r)}}),Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ni,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ni,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}.prototype,{update:(Ka=new E,Ja=new E,function(e){if(Ga!==this||Ha!==e.focus||Qa!==e.fov||Ya!==e.aspect*this.aspect||Wa!==e.near||qa!==e.far||Xa!==e.zoom||Za!==this.eyeSep){Ga=this,Ha=e.focus,Qa=e.fov,Ya=e.aspect*this.aspect,Wa=e.near,qa=e.far,Xa=e.zoom;var t,i,r=e.projectionMatrix.clone(),n=(Za=this.eyeSep/2)*Wa/Ha,a=Wa*Math.tan(A.DEG2RAD*Qa*.5)/Xa;Ja.elements[12]=-Za,Ka.elements[12]=Za,t=-a*Ya+n,i=a*Ya+n,r.elements[0]=2*Wa/(i-t),r.elements[8]=(i+t)/(i-t),this.cameraL.projectionMatrix.copy(r),t=-a*Ya-n,i=a*Ya-n,r.elements[0]=2*Wa/(i-t),r.elements[8]=(i+t)/(i-t),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Ja),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ka)})}),ts.prototype=Object.create(oe.prototype),ts.prototype.constructor=ts,is.prototype=Object.assign(Object.create(oe.prototype),{constructor:is,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01)},updateMatrixWorld:function(){var e=new S,t=new x,i=new S,r=new S;return function(n){oe.prototype.updateMatrixWorld.call(this,n);var a=this.context.listener,s=this.up;this.matrixWorld.decompose(e,t,i),r.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(r.x,this.context.currentTime),a.forwardY.setValueAtTime(r.y,this.context.currentTime),a.forwardZ.setValueAtTime(r.z,this.context.currentTime),a.upX.setValueAtTime(s.x,this.context.currentTime),a.upY.setValueAtTime(s.y,this.context.currentTime),a.upZ.setValueAtTime(s.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z))}}()}),rs.prototype=Object.assign(Object.create(oe.prototype),{constructor:rs,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),ns.prototype=Object.assign(Object.create(rs.prototype),{constructor:ns,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new S;return function(t){oe.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(as.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}),Object.assign(ss.prototype,{accumulate:function(e,t){var i=this.buffer,r=this.valueSize,n=e*r+r,a=this.cumulativeWeight;if(0===a){for(var s=0;s!==r;++s)i[n+s]=i[s];a=t}else{var o=t/(a+=t);this._mixBufferRegion(i,n,0,o,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,i=this.buffer,r=e*t+t,n=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,n<1){var s=3*t;this._mixBufferRegion(i,r,s,1-n,t)}for(var o=t,l=t+t;o!==l;++o)if(i[o]!==i[o+t]){a.setValue(i,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,i=this.valueSize,r=3*i;e.getValue(t,r);for(var n=i,a=r;n!==a;++n)t[n]=t[r+n%i];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,i,r,n){if(r>=.5)for(var a=0;a!==n;++a)e[t+a]=e[i+a]},_slerp:function(e,t,i,r){x.slerpFlat(e,t,e,t,e,i,r)},_lerp:function(e,t,i,r,n){for(var a=1-r,s=0;s!==n;++s){var o=t+s;e[o]=e[o]*a+e[i+s]*r}}});var os,ls,us,cs,ds,hs,fs,ps,ms,vs,gs,ys,_s;function bs(e,t,i){var r=i||Ms.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Ms(e,t,i){this.path=t,this.parsedPath=i||Ms.parseTrackName(t),this.node=Ms.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Ts(e,t,i){this._mixer=e,this._clip=t,this._localRoot=i||null;for(var r=t.tracks,n=r.length,a=new Array(n),s={endingStart:2400,endingEnd:2400},o=0;o!==n;++o){var l=r[o].createInterpolant(null);a[o]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function As(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ws(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Es(){De.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function xs(e,t,i,r){this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===r}function Ss(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Ds(e,t,i){Ss.call(this,e,t),this.meshPerAttribute=i||1}function Is(e,t,i){me.call(this,e,t),this.meshPerAttribute=i||1}function js(e,t){return e.distance-t.distance}function Ls(e,t,i,r){if(!1!==e.visible&&(e.raycast(t,i),!0===r))for(var n=e.children,a=0,s=n.length;a<s;a++)Ls(n[a],t,i,!0)}function Ns(e,t,i){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==i?i:0,this}function Cs(e,t){this.min=void 0!==e?e:new w(1/0,1/0),this.max=void 0!==t?t:new w(-1/0,-1/0)}function Os(e){oe.call(this),this.material=e,this.render=function(){}}function ks(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==i?i:16711680,a=void 0!==r?r:1,s=0,o=this.object.geometry;o&&o.isGeometry?s=3*o.faces.length:o&&o.isBufferGeometry&&(s=o.attributes.normal.count);var l=new De,u=new Ae(2*s*3,3);l.addAttribute("position",u),qi.call(this,l,new Yi({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Ps(e,t){oe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var i=new De,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,a=1;n<32;n++,a++){var s=n/32*Math.PI*2,o=a/32*Math.PI*2;r.push(Math.cos(s),Math.sin(s),1,Math.cos(o),Math.sin(o),1)}i.addAttribute("position",new Ae(r,3));var l=new Yi({fog:!1});this.cone=new qi(i,l),this.add(this.cone),this.update()}function Rs(e){for(var t=function e(t){var i=[];t&&t.isBone&&i.push(t);for(var r=0;r<t.children.length;r++)i.push.apply(i,e(t.children[r]));return i}(e),i=new De,r=[],n=[],a=new q(0,0,1),s=new q(0,1,0),o=0;o<t.length;o++){var l=t[o];l.parent&&l.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),n.push(a.r,a.g,a.b),n.push(s.r,s.g,s.b))}i.addAttribute("position",new Ae(r,3)),i.addAttribute("color",new Ae(n,3));var u=new Yi({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});qi.call(this,i,u),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function zs(e,t,i){this.light=e,this.light.updateMatrixWorld(),this.color=i;var r=new $r(t,4,2),n=new Ve({wireframe:!0,fog:!1});We.call(this,r,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Us(e,t){oe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var i=new Yi({fog:!1}),r=new De;r.addAttribute("position",new me(new Float32Array(15),3)),this.line=new Wi(r,i),this.add(this.line),this.update()}function Bs(e,t,i){oe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i;var r=new cr(t);r.rotateY(.5*Math.PI),this.material=new Ve({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var n=r.getAttribute("position"),a=new Float32Array(3*n.count);r.addAttribute("color",new me(a,3)),this.add(new We(r,this.material)),this.update()}function Fs(e,t,i,r){e=e||10,t=t||10,i=new q(void 0!==i?i:4473924),r=new q(void 0!==r?r:8947848);for(var n=t/2,a=e/t,s=e/2,o=[],l=[],u=0,c=0,d=-s;u<=t;u++,d+=a){o.push(-s,0,d,s,0,d),o.push(d,0,-s,d,0,s);var h=u===n?i:r;h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3,h.toArray(l,c),c+=3}var f=new De;f.addAttribute("position",new Ae(o,3)),f.addAttribute("color",new Ae(l,3));var p=new Yi({vertexColors:2});qi.call(this,f,p)}function Vs(e,t,i,r,n,a){e=e||10,t=t||16,i=i||8,r=r||64,n=new q(void 0!==n?n:4473924),a=new q(void 0!==a?a:8947848);var s,o,l,u,c,d,h,f=[],p=[];for(u=0;u<=t;u++)l=u/t*(2*Math.PI),s=Math.sin(l)*e,o=Math.cos(l)*e,f.push(0,0,0),f.push(s,0,o),h=1&u?n:a,p.push(h.r,h.g,h.b),p.push(h.r,h.g,h.b);for(u=0;u<=i;u++)for(h=1&u?n:a,d=e-e/i*u,c=0;c<r;c++)l=c/r*(2*Math.PI),s=Math.sin(l)*d,o=Math.cos(l)*d,f.push(s,0,o),p.push(h.r,h.g,h.b),l=(c+1)/r*(2*Math.PI),s=Math.sin(l)*d,o=Math.cos(l)*d,f.push(s,0,o),p.push(h.r,h.g,h.b);var m=new De;m.addAttribute("position",new Ae(f,3)),m.addAttribute("color",new Ae(p,3));var v=new Yi({vertexColors:2});qi.call(this,m,v)}function Gs(e,t,i,r){this.object=e,this.size=void 0!==t?t:1;var n=void 0!==i?i:16776960,a=void 0!==r?r:1,s=0,o=this.object.geometry;o&&o.isGeometry?s=o.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new De,u=new Ae(2*s*3,3);l.addAttribute("position",u),qi.call(this,l,new Yi({color:n,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Hs(e,t,i){oe.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===t&&(t=1);var r=new De;r.addAttribute("position",new Ae([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new Yi({fog:!1});this.lightPlane=new Wi(r,n),this.add(this.lightPlane),(r=new De).addAttribute("position",new Ae([0,0,0,0,0,1],3)),this.targetLine=new Wi(r,n),this.add(this.targetLine),this.update()}function Qs(e){var t=new De,i=new Yi({color:16777215,vertexColors:1}),r=[],n=[],a={},s=new q(16755200),o=new q(16711680),l=new q(43775),u=new q(16777215),c=new q(3355443);function d(e,t,i){h(e,i),h(t,i)}function h(e,t){r.push(0,0,0),n.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}d("n1","n2",s),d("n2","n4",s),d("n4","n3",s),d("n3","n1",s),d("f1","f2",s),d("f2","f4",s),d("f4","f3",s),d("f3","f1",s),d("n1","f1",s),d("n2","f2",s),d("n3","f3",s),d("n4","f4",s),d("p","n1",o),d("p","n2",o),d("p","n3",o),d("p","n4",o),d("u1","u2",l),d("u2","u3",l),d("u3","u1",l),d("c","t",u),d("p","c",c),d("cn1","cn2",c),d("cn3","cn4",c),d("cf1","cf2",c),d("cf3","cf4",c),t.addAttribute("position",new Ae(r,3)),t.addAttribute("color",new Ae(n,3)),qi.call(this,t,i),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Ys(e,t){this.object=e,void 0===t&&(t=16776960);var i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),n=new De;n.setIndex(new me(i,1)),n.addAttribute("position",new me(r,3)),qi.call(this,n,new Yi({color:t})),this.matrixAutoUpdate=!1,this.update()}function Ws(e,t){this.type="Box3Helper",this.box=e;var i=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new De;n.setIndex(new me(r,1)),n.addAttribute("position",new Ae([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),qi.call(this,n,new Yi({color:i})),this.geometry.computeBoundingSphere()}function qs(e,t,i){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==i?i:16776960,n=new De;n.addAttribute("position",new Ae([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),n.computeBoundingSphere(),Wi.call(this,n,new Yi({color:r}));var a=new De;a.addAttribute("position",new Ae([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new We(a,new Ve({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function Xs(e,t,i,r,n,a){oe.call(this),void 0===r&&(r=16776960),void 0===i&&(i=1),void 0===n&&(n=.2*i),void 0===a&&(a=.2*n),void 0===vs&&((vs=new De).addAttribute("position",new Ae([0,0,0,0,1,0],3)),(gs=new cn(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Wi(vs,new Yi({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new We(gs,new Ve({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,n,a)}function Zs(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new De;i.addAttribute("position",new Ae(t,3)),i.addAttribute("color",new Ae([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new Yi({vertexColors:2});qi.call(this,i,r)}function Ks(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Fn.call(this,e),this.type="catmullrom"}Object.assign(bs.prototype,{getValue:function(e,t){this.bind();var i=this._targetGroup.nCachedObjects_,r=this._bindings[i];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r)i[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(Ms,{Composite:bs,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new Ms.Composite(e,t,i):new Ms(e,t,i)},sanitizeNodeName:(ms=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(ms,"")}),parseTrackName:(os="[^\\[\\]\\.:\\/]",ls="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",us=/((?:WC+[\/:])*)/.source.replace("WC",os),cs=/(WCOD+)?/.source.replace("WCOD",ls),ds=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",os),hs=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",os),fs=new RegExp("^"+us+cs+ds+hs+"$"),ps=["material","materials","bones"],function(e){var t=fs.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var n=i.nodeName.substring(r+1);-1!==ps.indexOf(n)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=n)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){var r=function(e){for(var i=0;i<e.length;i++){var n=e[i];if(n.name===t||n.uuid===t)return n;var a=r(n.children);if(a)return a}return null},n=r(e.children);if(n)return n}return null}}),Object.assign(Ms.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)e[t++]=i[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=e[t++]},function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,r=0,n=i.length;r!==n;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,r=t.propertyName,n=t.propertyIndex;if(e||(e=Ms.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var a=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var o=e[r];if(void 0!==o){var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===n){n=s;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===n){n=s;break}}}u=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=n}else void 0!==o.fromArray&&void 0!==o.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(u=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Ms.prototype,{_getValue_unbound:Ms.prototype.getValue,_setValue_unbound:Ms.prototype.setValue}),Object.assign(function(){this.uuid=A.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,n=this._paths,a=this._parsedPaths,s=this._bindings,o=s.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var d=arguments[u],h=d.uuid,f=r[h];if(void 0===f){f=t++,r[h]=f,e.push(d);for(var p=0,m=o;p!==m;++p)s[p].push(new Ms(d,n[p],a[p]))}else if(f<i){l=e[f];var v=--i,g=e[v];r[g.uuid]=f,e[f]=g,r[h]=v,e[v]=d;for(p=0,m=o;p!==m;++p){var y=s[p],_=y[v],b=y[f];y[f]=_,void 0===b&&(b=new Ms(d,n[p],a[p])),y[v]=b}}else e[f]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,n=r.length,a=0,s=arguments.length;a!==s;++a){var o=arguments[a],l=o.uuid,u=i[l];if(void 0!==u&&u>=t){var c=t++,d=e[c];i[d.uuid]=u,e[u]=d,i[l]=c,e[c]=o;for(var h=0,f=n;h!==f;++h){var p=r[h],m=p[c],v=p[u];p[u]=m,p[c]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,a=n.length,s=0,o=arguments.length;s!==o;++s){var l=arguments[s],u=l.uuid,c=r[u];if(void 0!==c)if(delete r[u],c<i){var d=--i,h=e[d],f=e[y=--t];r[h.uuid]=c,e[c]=h,r[f.uuid]=d,e[d]=f,e.pop();for(var p=0,m=a;p!==m;++p){var v=(_=n[p])[d],g=_[y];_[c]=v,_[d]=g,_.pop()}}else{var y;r[(f=e[y=--t]).uuid]=c,e[c]=f,e.pop();for(p=0,m=a;p!==m;++p){var _;(_=n[p])[c]=_[y],_.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,r=i[e],n=this._bindings;if(void 0!==r)return n[r];var a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,c=new Array(l);r=n.length,i[e]=r,a.push(e),s.push(t),n.push(c);for(var d=u,h=o.length;d!==h;++d){var f=o[d];c[d]=new Ms(f,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){var r=this._paths,n=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=i,a[i]=o,a.pop(),n[i]=n[s],n.pop(),r[i]=r[s],r.pop()}}}),Object.assign(Ts.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){var r=this._clip.duration,n=e._clip.duration,a=n/r,s=r/n;e.warp(1,a,t),this.warp(s,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var r=this._mixer,n=r.time,a=this._timeScaleInterpolant,s=this.timeScale;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var o=a.parameterPositions,l=a.sampleValues;return o[0]=n,o[1]=n+i,l[0]=e/s,l[1]=t/s,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,r){if(this.enabled){var n=this._startTime;if(null!==n){var a=(e-n)*i;if(a<0||0===i)return;this._startTime=null,t=i*a}t*=this._updateTimeScale(e);var s=this._updateTime(t),o=this._updateWeight(e);if(o>0)for(var l=this._interpolants,u=this._propertyBindings,c=0,d=l.length;c!==d;++c)l[c].evaluate(s),u[c].accumulate(r,o)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(null!==i){var r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i)t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var i=this._clip.duration,r=this.loop,n=this._loopCount;if(2200===r){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=i)t=i;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=2202===r;if(-1===n&&(e>=0?(n=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=i||t<0){var s=Math.floor(t/i);t-=i*s,n+=Math.abs(s);var o=this.repetitions-n;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){var l=e<0;this._setEndings(l,!l,a)}else this._setEndings(!1,!1,a);this._loopCount=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(a&&1==(1&n))return this.time=t,i-t}return this.time=t,t},_setEndings:function(e,t,i){var r=this._interpolantSettings;i?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,i){var r=this._mixer,n=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var s=a.parameterPositions,o=a.sampleValues;return s[0]=n,o[0]=t,s[1]=n+e,o[1]=i,this}}),As.prototype=Object.assign(Object.create(d.prototype),{constructor:As,_bindAction:function(e,t){var i=e._localRoot||this._root,r=e._clip.tracks,n=r.length,a=e._propertyBindings,s=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName,u=l[o];void 0===u&&(u={},l[o]=u);for(var c=0;c!==n;++c){var d=r[c],h=d.name,f=u[h];if(void 0!==f)a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,o,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(f=new ss(Ms.create(i,h,p),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(f,o,h),a[c]=f}s[c].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,t)}for(var n=e._propertyBindings,a=0,s=n.length;a!==s;++a){var o=n[a];0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,r=t.length;i!==r;++i){var n=t[i];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,i){var r=this._actions,n=this._actionsByClip,a=n[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=a;else{var s=a.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;var n=e._clip.uuid,a=this._actionsByClip,s=a[n],o=s.knownActions,l=o[o.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,o[u]=l,o.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[n],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,i=0,r=t.length;i!==r;++i){var n=t[i];0==--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n},_addInactiveBinding:function(e,t,i){var r=this._bindingsByRootAndName,n=r[t],a=this._bindings;void 0===n&&(n={},r[t]=n),n[i]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,r=i.rootNode.uuid,n=i.path,a=this._bindingsByRootAndName,s=a[r],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[n];e:{for(var u in s)break e;delete a[r]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,n=t[r];e._cacheIndex=r,t[r]=e,n._cacheIndex=i,t[i]=n},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&((i=new ba(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=i),i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,n=t[r];e.__cacheIndex=r,t[r]=e,n.__cacheIndex=i,t[i]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,r=i.uuid,n="string"==typeof e?Ea.findByName(i,e):e,a=null!==n?n.uuid:e,s=this._actionsByClip[a],o=null;if(void 0!==s){var l=s.actionByRoot[r];if(void 0!==l)return l;o=s.knownActions[0],null===n&&(n=o._clip)}if(null===n)return null;var u=new Ts(this,n,t);return this._bindAction(u,o),this._addInactiveAction(u,a,r),u},existingAction:function(e,t){var i=t||this._root,r=i.uuid,n="string"==typeof e?Ea.findByName(i,e):e,a=n?n.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,i=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var n=0;n!==t;++n)e[n].reset();for(n=0;n!==r;++n)i[n].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,r=this.time+=e,n=Math.sign(e),a=this._accuIndex^=1,s=0;s!==i;++s){t[s]._update(r,e,n,a)}var o=this._bindings,l=this._nActiveBindings;for(s=0;s!==l;++s)o[s].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,i=e.uuid,r=this._actionsByClip,n=r[i];if(void 0!==n){for(var a=n.knownActions,s=0,o=a.length;s!==o;++s){var l=a[s];this._deactivateAction(l);var u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete r[i]}},uncacheRoot:function(e){var t=e.uuid,i=this._actionsByClip;for(var r in i){var n=i[r].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var s in a){var o=a[s];o.restoreOriginalState(),this._removeInactiveBinding(o)}},uncacheAction:function(e,t){var i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}}),ws.prototype.clone=function(){return new ws(void 0===this.value.clone?this.value:this.value.clone())},Es.prototype=Object.assign(Object.create(De.prototype),{constructor:Es,isInstancedBufferGeometry:!0,copy:function(e){return De.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(xs.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(xs.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this},setXYZW:function(e,t,i,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=n,this}}),Object.defineProperty(Ss.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Ss.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(var r=0,n=this.stride;r<n;r++)this.array[e+r]=t.array[i+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Ds.prototype=Object.assign(Object.create(Ss.prototype),{constructor:Ds,isInstancedInterleavedBuffer:!0,copy:function(e){return Ss.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Is.prototype=Object.assign(Object.create(me.prototype),{constructor:Is,isInstancedBufferAttribute:!0,copy:function(e){return me.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(function(e,t,i,r){this.ray=new He(e,t),this.near=i||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,i){var r=i||[];return Ls(e,this,r,t),r.sort(js),r},intersectObjects:function(e,t,i){var r=i||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var n=0,a=e.length;n<a;n++)Ls(e[n],this,r,t);return r.sort(js),r}}),Object.assign(function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Ns.prototype,{set:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(A.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(function(e,t,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==i?i:0,this}.prototype,{set:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(Cs.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new w;return function(t,i){var r=e.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new w),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new w),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new w),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new w),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new w;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Os.prototype=Object.create(oe.prototype),Os.prototype.constructor=Os,Os.prototype.isImmediateRenderObject=!0,ks.prototype=Object.create(qi.prototype),ks.prototype.constructor=ks,ks.prototype.update=function(){var e=new S,t=new S,i=new D;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld,a=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var o=s.vertices,l=s.faces,u=0,c=0,d=l.length;c<d;c++)for(var h=l[c],f=0,p=h.vertexNormals.length;f<p;f++){var m=o[h[r[f]]],v=h.vertexNormals[f];e.copy(m).applyMatrix4(n),t.copy(v).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}else if(s&&s.isBufferGeometry){var g=s.attributes.position,y=s.attributes.normal;for(u=0,f=0,p=g.count;f<p;f++)e.set(g.getX(f),g.getY(f),g.getZ(f)).applyMatrix4(n),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),a.setXYZ(u,e.x,e.y,e.z),u+=1,a.setXYZ(u,t.x,t.y,t.z),u+=1}a.needsUpdate=!0}}(),Ps.prototype=Object.create(oe.prototype),Ps.prototype.constructor=Ps,Ps.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ps.prototype.update=function(){var e=new S,t=new S;return function(){this.light.updateMatrixWorld();var i=this.light.distance?this.light.distance:1e3,r=i*Math.tan(this.light.angle);this.cone.scale.set(r,r,i),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Rs.prototype=Object.create(qi.prototype),Rs.prototype.constructor=Rs,Rs.prototype.updateMatrixWorld=function(){var e=new S,t=new E,i=new E;return function(r){var n=this.bones,a=this.geometry,s=a.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var o=0,l=0;o<n.length;o++){var u=n[o];u.parent&&u.parent.isBone&&(t.multiplyMatrices(i,u.matrixWorld),e.setFromMatrixPosition(t),s.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(i,u.parent.matrixWorld),e.setFromMatrixPosition(t),s.setXYZ(l+1,e.x,e.y,e.z),l+=2)}a.getAttribute("position").needsUpdate=!0,oe.prototype.updateMatrixWorld.call(this,r)}}(),zs.prototype=Object.create(We.prototype),zs.prototype.constructor=zs,zs.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},zs.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Us.prototype=Object.create(oe.prototype),Us.prototype.constructor=Us,Us.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Us.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,i=this.line.geometry.attributes.position,r=i.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,i.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Bs.prototype=Object.create(oe.prototype),Bs.prototype.constructor=Bs,Bs.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Bs.prototype.update=function(){var e=new S,t=new q,i=new q;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var n=r.geometry.getAttribute("color");t.copy(this.light.color),i.copy(this.light.groundColor);for(var a=0,s=n.count;a<s;a++){var o=a<s/2?t:i;n.setXYZ(a,o.r,o.g,o.b)}n.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Fs.prototype=Object.create(qi.prototype),Fs.prototype.constructor=Fs,Vs.prototype=Object.create(qi.prototype),Vs.prototype.constructor=Vs,Gs.prototype=Object.create(qi.prototype),Gs.prototype.constructor=Gs,Gs.prototype.update=function(){var e=new S,t=new S,i=new D;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,n=this.geometry.attributes.position,a=this.object.geometry,s=a.vertices,o=a.faces,l=0,u=0,c=o.length;u<c;u++){var d=o[u],h=d.normal;e.copy(s[d.a]).add(s[d.b]).add(s[d.c]).divideScalar(3).applyMatrix4(r),t.copy(h).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),n.setXYZ(l,e.x,e.y,e.z),l+=1,n.setXYZ(l,t.x,t.y,t.z),l+=1}n.needsUpdate=!0}}(),Hs.prototype=Object.create(oe.prototype),Hs.prototype.constructor=Hs,Hs.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Hs.prototype.update=function(){var e=new S,t=new S,i=new S;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e),this.lightPlane.lookAt(i),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(i),this.targetLine.scale.z=i.length()}}(),Qs.prototype=Object.create(qi.prototype),Qs.prototype.constructor=Qs,Qs.prototype.update=function(){var e,t,i=new S,r=new le;function n(n,a,s,o){i.set(a,s,o).unproject(r);var l=t[n];if(void 0!==l)for(var u=e.getAttribute("position"),c=0,d=l.length;c<d;c++)u.setXYZ(l[c],i.x,i.y,i.z)}return function(){e=this.geometry,t=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),n("c",0,0,-1),n("t",0,0,1),n("n1",-1,-1,-1),n("n2",1,-1,-1),n("n3",-1,1,-1),n("n4",1,1,-1),n("f1",-1,-1,1),n("f2",1,-1,1),n("f3",-1,1,1),n("f4",1,1,1),n("u1",.7,1.1,-1),n("u2",-.7,1.1,-1),n("u3",0,2,-1),n("cf1",-1,0,1),n("cf2",1,0,1),n("cf3",0,-1,1),n("cf4",0,1,1),n("cn1",-1,0,-1),n("cn2",1,0,-1),n("cn3",0,-1,-1),n("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),Ys.prototype=Object.create(qi.prototype),Ys.prototype.constructor=Ys,Ys.prototype.update=function(){var e=new B;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var i=e.min,r=e.max,n=this.geometry.attributes.position,a=n.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=i.x,a[4]=r.y,a[5]=r.z,a[6]=i.x,a[7]=i.y,a[8]=r.z,a[9]=r.x,a[10]=i.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=i.z,a[15]=i.x,a[16]=r.y,a[17]=i.z,a[18]=i.x,a[19]=i.y,a[20]=i.z,a[21]=r.x,a[22]=i.y,a[23]=i.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Ys.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Ws.prototype=Object.create(qi.prototype),Ws.prototype.constructor=Ws,Ws.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),oe.prototype.updateMatrixWorld.call(this,e))},qs.prototype=Object.create(Wi.prototype),qs.prototype.constructor=qs,qs.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),oe.prototype.updateMatrixWorld.call(this,e)},Xs.prototype=Object.create(oe.prototype),Xs.prototype.constructor=Xs,Xs.prototype.setDirection=(_s=new S,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(_s.set(e.z,0,-e.x).normalize(),ys=Math.acos(e.y),this.quaternion.setFromAxisAngle(_s,ys))}),Xs.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},Xs.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Zs.prototype=Object.create(qi.prototype),Zs.prototype.constructor=Zs,Cn.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Cn.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign($n.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new pe,i=0,r=e.length;i<r;i++){var n=e[i];t.vertices.push(new S(n.x,n.y,n.z||0))}return t}}),Object.assign(ea.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Ks.prototype=Object.create(Fn.prototype),Object.assign(Ks.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Fs.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Rs.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Ca.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Oa(e)}}),Object.assign(Cs.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(B.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),Qe.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(A,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),A.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),A.ceilPowerOfTwo(e)}}),Object.assign(D.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(E.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new S),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,r,n,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,i,n,a)}}),V.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},x.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(He.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Ye.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Ye,{barycoordFromPoint:function(e,t,i,r,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Ye.getBarycoord(e,t,i,r,n)},normal:function(e,t,i,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Ye.getNormal(e,t,i,r)}}),Object.assign(ta.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Yr(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new an(this,e)}}),Object.assign(w.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(P.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(pe.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(oe.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(oe.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Vi.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Gi.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Cn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Ni.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(ia.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(me.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(De.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(De.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Wr.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(ws.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Fe.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new q}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(bn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ge.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Pi.prototype,{animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Pi.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(xi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(R.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Oi.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),rs.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new es).load(e,function(e){t.setBuffer(e)}),this},as.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},ts.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var Js=function(t,i){var r,n,a=this,s=new E,o=null;"VRFrameData"in e&&(o=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){n=e,e.length>0?r=e[0]:i&&i("VR input not available.")}).catch(function(){console.warn("VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return r},this.setVRDisplay=function(e){r=e},this.getVRDisplays=function(){return console.warn("VRControls: getVRDisplays() is being deprecated."),n},this.getStandingMatrix=function(){return s},this.update=function(){var e;r&&(r.getFrameData?(r.getFrameData(o),e=o.pose):r.getPose&&(e=r.getPose()),null!==e.orientation&&t.quaternion.fromArray(e.orientation),null!==e.position?t.position.fromArray(e.position):t.position.set(0,0,0),this.standing&&(r.stageParameters?(t.updateMatrix(),s.fromArray(r.stageParameters.sittingToStandingTransform),t.applyMatrix(s)):t.position.setY(t.position.y+this.userHeight)),t.position.multiplyScalar(a.scale))},this.dispose=function(){r=null}},$s=function(t,i){var r,n,a,s,o=new S,l=new S,u=new E,c=new E,d=new E,h=null;"VRFrameData"in e&&(h=new e.VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(e){n=e,e.length>0?r=e[0]:i&&i("HMD not available")}).catch(function(){console.warn("VREffect: Unable to get VR Displays")}),this.isPresenting=!1;var f=this,p=t.getSize(),m=!1,v=t.getPixelRatio();this.getVRDisplay=function(){return r},this.setVRDisplay=function(e){r=e},this.getVRDisplays=function(){return console.warn("VREffect: getVRDisplays() is being deprecated."),n},this.setSize=function(e,i,n){if(p={width:e,height:i},m=n,f.isPresenting){var a=r.getEyeParameters("left");t.setPixelRatio(1),t.setSize(2*a.renderWidth,a.renderHeight,!1)}else t.setPixelRatio(v),t.setSize(e,i,n)};var g=t.domElement,y=[0,0,.5,1],_=[.5,0,.5,1];function b(){var e=f.isPresenting;if(f.isPresenting=void 0!==r&&r.isPresenting,f.isPresenting){var i=r.getEyeParameters("left"),n=i.renderWidth,a=i.renderHeight;e||(v=t.getPixelRatio(),p=t.getSize(),t.setPixelRatio(1),t.setSize(2*n,a,!1))}else e&&(t.setPixelRatio(v),t.setSize(p.width,p.height,m))}e.addEventListener("vrdisplaypresentchange",b,!1),this.setFullScreen=function(e){return new Promise(function(t,i){void 0!==r?f.isPresenting!==e?t(e?r.requestPresent([{source:g}]):r.exitPresent()):t():i(new Error("No VR hardware found."))})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(t){return void 0!==r?r.requestAnimationFrame(t):e.requestAnimationFrame(t)},this.cancelAnimationFrame=function(t){void 0!==r?r.cancelAnimationFrame(t):e.cancelAnimationFrame(t)},this.submitFrame=function(){void 0!==r&&f.isPresenting&&r.submitFrame()},this.autoSubmitFrame=!0;var M=new Ni;M.layers.enable(1);var T=new Ni;T.layers.enable(2),this.render=function(e,i,n,p){if(r&&f.isPresenting){var m=e.autoUpdate;m&&(e.updateMatrixWorld(),e.autoUpdate=!1),Array.isArray(e)&&(console.warn("VREffect.render() no longer supports arrays. Use object.layers instead."),e=e[0]);var v,g,b=t.getSize(),E=r.getLayers();if(E.length){var x=E[0];v=null!==x.leftBounds&&4===x.leftBounds.length?x.leftBounds:y,g=null!==x.rightBounds&&4===x.rightBounds.length?x.rightBounds:_}else v=y,g=_;if(a={x:Math.round(b.width*v[0]),y:Math.round(b.height*v[1]),width:Math.round(b.width*v[2]),height:Math.round(b.height*v[3])},s={x:Math.round(b.width*g[0]),y:Math.round(b.height*g[1]),width:Math.round(b.width*g[2]),height:Math.round(b.height*g[3])},n?(t.setRenderTarget(n),n.scissorTest=!0):(t.setRenderTarget(null),t.setScissorTest(!0)),(t.autoClear||p)&&t.clear(),null===i.parent&&i.updateMatrixWorld(),i.matrixWorld.decompose(M.position,M.quaternion,M.scale),T.position.copy(M.position),T.quaternion.copy(M.quaternion),T.scale.copy(M.scale),r.getFrameData)r.depthNear=i.near,r.depthFar=i.far,r.getFrameData(h),M.projectionMatrix.elements=h.leftProjectionMatrix,T.projectionMatrix.elements=h.rightProjectionMatrix,function(e){e.pose.orientation?(A.fromArray(e.pose.orientation),u.makeRotationFromQuaternion(A)):u.identity();e.pose.position&&(w.fromArray(e.pose.position),u.setPosition(w));c.fromArray(e.leftViewMatrix),c.multiply(u),d.fromArray(e.rightViewMatrix),d.multiply(u),c.getInverse(c),d.getInverse(d)}(h),M.updateMatrix(),M.matrix.multiply(c),M.matrix.decompose(M.position,M.quaternion,M.scale),T.updateMatrix(),T.matrix.multiply(d),T.matrix.decompose(T.position,T.quaternion,T.scale);else{var S=r.getEyeParameters("left"),I=r.getEyeParameters("right");M.projectionMatrix=D(S.fieldOfView,!0,i.near,i.far),T.projectionMatrix=D(I.fieldOfView,!0,i.near,i.far),o.fromArray(S.offset),l.fromArray(I.offset),M.translateOnAxis(o,M.scale.x),T.translateOnAxis(l,T.scale.x)}return n?(n.viewport.set(a.x,a.y,a.width,a.height),n.scissor.set(a.x,a.y,a.width,a.height)):(t.setViewport(a.x,a.y,a.width,a.height),t.setScissor(a.x,a.y,a.width,a.height)),t.render(e,M,n,p),n?(n.viewport.set(s.x,s.y,s.width,s.height),n.scissor.set(s.x,s.y,s.width,s.height)):(t.setViewport(s.x,s.y,s.width,s.height),t.setScissor(s.x,s.y,s.width,s.height)),t.render(e,T,n,p),n?(n.viewport.set(0,0,b.width,b.height),n.scissor.set(0,0,b.width,b.height),n.scissorTest=!1,t.setRenderTarget(null)):(t.setViewport(0,0,b.width,b.height),t.setScissorTest(!1)),m&&(e.autoUpdate=!0),void(f.autoSubmitFrame&&f.submitFrame())}t.render(e,i,n,p)},this.dispose=function(){e.removeEventListener("vrdisplaypresentchange",b,!1)};var A=new x,w=new S;function D(e,t,i,r){var n=Math.PI/180;return function(e,t,i,r){i=void 0===i?.01:i,r=void 0===r?1e4:r;var n=(t=void 0===t||t)?-1:1,a=new E,s=a.elements,o=function(e){var t=2/(e.leftTan+e.rightTan),i=(e.leftTan-e.rightTan)*t*.5,r=2/(e.upTan+e.downTan);return{scale:[t,r],offset:[i,(e.upTan-e.downTan)*r*.5]}}(e);return s[0]=o.scale[0],s[1]=0,s[2]=o.offset[0]*n,s[3]=0,s[4]=0,s[5]=o.scale[1],s[6]=-o.offset[1]*n,s[7]=0,s[8]=0,s[9]=0,s[10]=r/(i-r)*-n,s[11]=r*i/(i-r),s[12]=0,s[13]=0,s[14]=n,s[15]=0,a.transpose(),a}({upTan:Math.tan(e.upDegrees*n),downTan:Math.tan(e.downDegrees*n),leftTan:Math.tan(e.leftDegrees*n),rightTan:Math.tan(e.rightDegrees*n)},t,i,r)}},eo=function(i,r){this.object=i,this.domElement=void 0!==r?r:t,this.enabled=!0,this.target=new S,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:b,ZOOM:M,PAN:T},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(a),n.update(),u=l.NONE},this.update=function(){var e=new S,t=(new x).setFromUnitVectors(i.up,new S(0,1,0)),r=t.clone().inverse(),s=new S,o=new x;return function(){var i=n.object.position;return e.copy(i).sub(n.target),e.applyQuaternion(t),d.setFromVector3(e),n.autoRotate&&u===l.NONE&&n.rotateLeft(2*Math.PI/60/60*n.autoRotateSpeed),d.theta+=h.theta,d.phi+=h.phi,d.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,d.theta)),d.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=f,d.radius=Math.max(n.minDistance,Math.min(n.maxDistance,d.radius)),n.target.add(p),e.setFromSpherical(d),e.applyQuaternion(r),i.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(h.set(0,0,0),p.set(0,0,0)),f=1,!!(m||s.distanceToSquared(n.object.position)>c||8*(1-o.dot(n.object.quaternion))>c)&&(n.dispatchEvent(a),s.copy(n.object.position),o.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Q,!1),n.domElement.removeEventListener("mousedown",R,!1),n.domElement.removeEventListener("wheel",B,!1),n.domElement.removeEventListener("touchstart",V,!1),n.domElement.removeEventListener("touchend",H,!1),n.domElement.removeEventListener("touchmove",G,!1),t.removeEventListener("mousemove",z,!1),t.removeEventListener("mouseup",U,!1),e.removeEventListener("keydown",F,!1)};var n=this,a={type:"change"},s={type:"start"},o={type:"end"},l={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},u=l.NONE,c=1e-6,d=new Ns,h=new Ns,f=1,p=new S,m=!1,v=new w,g=new w,y=new w,_=new w,A=new w,E=new w,D=new w,I=new w,j=new w;function L(){return Math.pow(.95,n.zoomSpeed)}n.rotateLeft=function(e){h.theta-=e},n.rotateUp=function(e){h.phi-=e};var N=function(){var e=new S;return function(t,i){e.setFromMatrixColumn(i,0),e.multiplyScalar(-t),p.add(e)}}(),C=function(){var e=new S;return function(t,i){!0===n.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),O=function(){var e=new S;return function(i,r){var a=n.domElement===t?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var s=n.object.position;e.copy(s).sub(n.target);var o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),N(2*i*o/a.clientHeight,n.object.matrix),C(2*r*o/a.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(N(i*(n.object.right-n.object.left)/n.object.zoom/a.clientWidth,n.object.matrix),C(r*(n.object.top-n.object.bottom)/n.object.zoom/a.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function k(e){n.object.isPerspectiveCamera?f/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){n.object.isPerspectiveCamera?f*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function R(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.ORBIT:if(!1===n.enableRotate)return;!function(e){v.set(e.clientX,e.clientY)}(e),u=l.ROTATE;break;case n.mouseButtons.ZOOM:if(!1===n.enableZoom)return;!function(e){D.set(e.clientX,e.clientY)}(e),u=l.DOLLY;break;case n.mouseButtons.PAN:if(!1===n.enablePan)return;!function(e){_.set(e.clientX,e.clientY)}(e),u=l.PAN}u!==l.NONE&&(t.addEventListener("mousemove",z,!1),t.addEventListener("mouseup",U,!1),n.dispatchEvent(s))}}function z(e){if(!1!==n.enabled)switch(e.preventDefault(),u){case l.ROTATE:if(!1===n.enableRotate)return;!function(e){g.set(e.clientX,e.clientY),y.subVectors(g,v).multiplyScalar(n.rotateSpeed);var i=n.domElement===t?n.domElement.body:n.domElement;n.rotateLeft(2*Math.PI*y.x/i.clientHeight),n.rotateUp(2*Math.PI*y.y/i.clientHeight),v.copy(g),n.update()}(e);break;case l.DOLLY:if(!1===n.enableZoom)return;!function(e){I.set(e.clientX,e.clientY),j.subVectors(I,D),j.y>0?k(L()):j.y<0&&P(L()),D.copy(I),n.update()}(e);break;case l.PAN:if(!1===n.enablePan)return;!function(e){A.set(e.clientX,e.clientY),E.subVectors(A,_).multiplyScalar(n.panSpeed),O(E.x,E.y),_.copy(A),n.update()}(e)}}function U(e){!1!==n.enabled&&(t.removeEventListener("mousemove",z,!1),t.removeEventListener("mouseup",U,!1),n.dispatchEvent(o),u=l.NONE)}function B(e){!1===n.enabled||!1===n.enableZoom||u!==l.NONE&&u!==l.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(s),function(e){e.deltaY<0?P(L()):e.deltaY>0&&k(L()),n.update()}(e),n.dispatchEvent(o))}function F(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){switch(e.keyCode){case n.keys.UP:O(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:O(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:O(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:O(-n.keyPanSpeed,0),n.update()}}(e)}function V(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enableRotate)return;!function(e){v.set(e.touches[0].pageX,e.touches[0].pageY)}(e),u=l.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);D.set(0,r)}if(n.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),s=.5*(e.touches[0].pageY+e.touches[1].pageY);_.set(a,s)}}(e),u=l.TOUCH_DOLLY_PAN;break;default:u=l.NONE}u!==l.NONE&&n.dispatchEvent(s)}}function G(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enableRotate)return;if(u!==l.TOUCH_ROTATE)return;!function(e){g.set(e.touches[0].pageX,e.touches[0].pageY),y.subVectors(g,v).multiplyScalar(n.rotateSpeed);var i=n.domElement===t?n.domElement.body:n.domElement;n.rotateLeft(2*Math.PI*y.x/i.clientHeight),n.rotateUp(2*Math.PI*y.y/i.clientHeight),v.copy(g),n.update()}(e);break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;if(u!==l.TOUCH_DOLLY_PAN)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);I.set(0,r),j.set(0,Math.pow(I.y/D.y,n.zoomSpeed)),k(j.y),D.copy(I)}if(n.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),s=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(a,s),E.subVectors(A,_).multiplyScalar(n.panSpeed),O(E.x,E.y),_.copy(A)}n.update()}(e);break;default:u=l.NONE}}function H(e){!1!==n.enabled&&(n.dispatchEvent(o),u=l.NONE)}function Q(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("mousedown",R,!1),n.domElement.addEventListener("wheel",B,!1),n.domElement.addEventListener("touchstart",V,!1),n.domElement.addEventListener("touchend",H,!1),n.domElement.addEventListener("touchmove",G,!1),e.addEventListener("keydown",F,!1),this.update()};(eo.prototype=Object.create(d.prototype)).constructor=eo,Object.defineProperties(eo.prototype,{center:{get:function(){return console.warn("OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var to=function(t){var i=this;this.object=t,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var r=function(e){i.deviceOrientation=e},n=function(){i.screenOrientation=e.orientation||0},a=function(){var e=new S(0,0,1),t=new ee,i=new x,r=new x(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(n,a,s,o,l){t.set(s,a,-o,"YXZ"),n.setFromEuler(t),n.multiply(r),n.multiply(i.setFromAxisAngle(e,-l))}}();this.connect=function(){n(),e.addEventListener("orientationchange",n,!1),e.addEventListener("deviceorientation",r,!1),i.enabled=!0},this.disconnect=function(){e.removeEventListener("orientationchange",n,!1),e.removeEventListener("deviceorientation",r,!1),i.enabled=!1},this.update=function(){if(!1!==i.enabled){var e=i.deviceOrientation;if(e){var t=e.alpha?A.degToRad(e.alpha)+i.alphaOffset:0,r=e.beta?A.degToRad(e.beta):0,n=e.gamma?A.degToRad(e.gamma):0,s=i.screenOrientation?A.degToRad(i.screenOrientation):0;a(i.object.quaternion,t,r,n,s)}}},this.dispose=function(){i.disconnect()},this.connect()};var io,ro=function(){function e(e){this.object=e.camera,this.domElement=e.canvas,this.orbit=new eo(this.object,this.domElement),this.speed=.5,this.orbit.target.set(0,0,-1),this.orbit.enableZoom=!1,this.orbit.enablePan=!1,this.orbit.rotateSpeed=-this.speed,e.orientation&&(this.orientation=new to(this.object)),e.halfView&&(this.orbit.minAzimuthAngle=-Math.PI/4,this.orbit.maxAzimuthAngle=Math.PI/4)}var t=e.prototype;return t.update=function(){if(this.orientation){this.orientation.update();var e=this.orientation.object.quaternion,t=function(e,t,i,r){var n=e*t+i*r;if(n>.499){var a=2*Math.atan2(e,r);return new S(Math.PI/2,0,a)}if(n<-.499){var s=-2*Math.atan2(e,r);return new S(-Math.PI/2,0,s)}var o=e*e,l=t*t,u=i*i,c=Math.atan2(2*t*r-2*e*i,1-2*l-2*u);return new S(Math.asin(2*n),Math.atan2(2*e*r-2*t*i,1-2*o-2*u),c)}(e.x,e.y,e.z,e.w);void 0===this.lastAngle_&&(this.lastAngle_=t),this.orbit.rotateLeft((this.lastAngle_.z-t.z)*(1+this.speed)),this.orbit.rotateUp((this.lastAngle_.y-t.y)*(1+this.speed)),this.lastAngle_=t}this.orbit.update()},t.dispose=function(){this.orbit.dispose(),this.orientation&&this.orientation.dispose()},e}(),no=((io=r.createElement("video")).crossOrigin="anonymous",io.hasAttribute("crossorigin")),ao=["360","360_LR","360_TB","360_CUBE","EAC","EAC_LR","NONE","AUTO","Sphere","Cube","equirectangular","180"],so=function(e){if(e){if(e=e.toString().trim(),/sphere/i.test(e))return"360";if(/cube/i.test(e))return"360_CUBE";if(/equirectangular/i.test(e))return"360";for(var t=0;t<ao.length;t++)if(new RegExp("^"+ao[t]+"$","i").test(e))return ao[t]}},oo=function(e){function t(t,i){var r;return(r=e.call(this)||this).player=t,r.canvas=i,r.onMoveEnd=n.bind(a(r),r.onMoveEnd),r.onMoveStart=n.bind(a(r),r.onMoveStart),r.onMove=n.bind(a(r),r.onMove),r.onControlBarMove=n.bind(a(r),r.onControlBarMove),r.player.controlBar.on(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],r.onControlBarMove),r.oldReportUserActivity=r.player.reportUserActivity,r.player.reportUserActivity=function(){},r.canvas.addEventListener("mousedown",r.onMoveStart),r.canvas.addEventListener("touchstart",r.onMoveStart),r.canvas.addEventListener("mousemove",r.onMove),r.canvas.addEventListener("touchmove",r.onMove),r.canvas.addEventListener("mouseup",r.onMoveEnd),r.canvas.addEventListener("touchend",r.onMoveEnd),r.shouldTogglePlay=!1,r}s(t,e);var i=t.prototype;return i.togglePlay=function(){this.player.paused()?this.player.play():this.player.pause()},i.onMoveStart=function(e){this.player.controls()&&("mousedown"!==e.type||n.dom.isSingleLeftClick(e))?(this.shouldTogglePlay=!0,this.touchMoveCount_=0):this.shouldTogglePlay=!1},i.onMoveEnd=function(e){if("touchend"===e.type&&this.touchMoveCount_<10)return!1===this.player.userActive()?void this.player.userActive(!0):void this.player.userActive(!1);this.shouldTogglePlay&&"mouseup"==e.type&&this.togglePlay()},i.onMove=function(e){this.touchMoveCount_++,this.shouldTogglePlay=!1},i.onControlBarMove=function(e){this.player.userActive(!0)},i.dispose=function(){this.canvas.removeEventListener("mousedown",this.onMoveStart),this.canvas.removeEventListener("touchstart",this.onMoveStart),this.canvas.removeEventListener("mousemove",this.onMove),this.canvas.removeEventListener("touchmove",this.onMove),this.canvas.removeEventListener("mouseup",this.onMoveEnd),this.canvas.removeEventListener("touchend",this.onMoveEnd),this.player.controlBar.off(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],this.onControlBarMove),this.player.reportUserActivity=this.oldReportUserActivity},t}(n.EventTarget),lo=function(e){function t(t,i,r,a){var s;s=e.call(this)||this;var o=n.mergeOptions({channelMap:n.browser.IS_SAFARI?[2,0,1,3]:[0,1,2,3],ambisonicOrder:1},a);return s.videoElementSource=t.createMediaElementSource(r),s.foaRenderer=i.createFOARenderer(t,o),s.foaRenderer.initialize().then(function(){"suspended"===t.state&&s.trigger({type:"audiocontext-suspended"}),s.videoElementSource.connect(s.foaRenderer.input),s.foaRenderer.output.connect(t.destination),s.initialized=!0,s.trigger({type:"omnitone-ready"})},function(e){n.log.warn("videojs-vr: Omnitone initializes failed with the following error: "+e+")")}),s}s(t,e);var i=t.prototype;return i.update=function(e){this.initialized&&this.foaRenderer.setRotationMatrixFromCamera(e.matrix)},i.dispose=function(){this.initialized=!1,this.foaRenderer.setRenderingMode("bypass"),this.foaRenderer=null},t}(n.EventTarget),uo=function(e){function t(t,r){var s;return(s=e.call(this,t,r)||this).handleVrDisplayActivate_=n.bind(a(s),s.handleVrDisplayActivate_),s.handleVrDisplayDeactivate_=n.bind(a(s),s.handleVrDisplayDeactivate_),s.handleVrDisplayPresentChange_=n.bind(a(s),s.handleVrDisplayPresentChange_),s.handleOrientationChange_=n.bind(a(s),s.handleOrientationChange_),i.addEventListener("orientationchange",s.handleOrientationChange_),i.addEventListener("vrdisplayactivate",s.handleVrDisplayActivate_),i.addEventListener("vrdisplaydeactivate",s.handleVrDisplayDeactivate_),i.addEventListener("vrdisplaypresentchange",s.handleVrDisplayPresentChange_),n.browser.IS_ANDROID&&s.on(t,"fullscreenchange",function(){t.isFullscreen()?s.hide():s.show()}),s}s(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-button-vr "+e.prototype.buildCSSClass.call(this)},r.handleVrDisplayPresentChange_=function(){!this.player_.vr().vrDisplay.isPresenting&&this.active_&&this.handleVrDisplayDeactivate_(),this.player_.vr().vrDisplay.isPresenting&&!this.active_&&this.handleVrDisplayActivate_()},r.handleOrientationChange_=function(){this.active_&&n.browser.IS_IOS&&this.changeSize_()},r.changeSize_=function(){this.player_.width(i.innerWidth),this.player_.height(i.innerHeight),i.dispatchEvent(new i.Event("resize"))},r.handleVrDisplayActivate_=function(){n.browser.IS_IOS&&(this.oldWidth_=this.player_.currentWidth(),this.oldHeight_=this.player_.currentHeight(),this.player_.enterFullWindow(),this.changeSize_()),this.active_=!0},r.handleVrDisplayDeactivate_=function(){n.browser.IS_IOS&&(this.oldWidth_&&this.player_.width(this.oldWidth_),this.oldHeight_&&this.player_.height(this.oldHeight_),this.player_.exitFullWindow()),this.active_=!1},r.handleClick=function(e){this.active_?i.dispatchEvent(new i.Event("vrdisplaydeactivate")):(!this.player_.hasStarted()&&n.browser.IS_ANDROID&&this.player_.play(),i.dispatchEvent(new i.Event("vrdisplayactivate")))},r.dispose=function(){e.prototype.dispose.call(this),i.removeEventListener("vrdisplayactivate",this.handleVrDisplayActivate_),i.removeEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_),i.removeEventListener("vrdisplaypresentchange",this.handleVrDisplayPresentChange_)},t}(n.getComponent("Button"));n.registerComponent("CardboardButton",uo);var co=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-vr-play-button "+e.prototype.buildCSSClass.call(this)},t}(n.getComponent("BigPlayButton"));n.registerComponent("BigVrPlayButton",co);var ho={debug:!1,omnitone:!1,forceCardboard:!1,omnitoneOptions:{},projection:"AUTO"},fo={"web-vr-out-of-date":{headline:"360 is out of date",type:"360_OUT_OF_DATE",message:"Your browser supports 360 but not the latest version. See <a href='http://webvr.info'>http://webvr.info</a> for more info."},"web-vr-not-supported":{headline:"360 not supported on this device",type:"360_NOT_SUPPORTED",message:"Your browser does not support 360. See <a href='http://webvr.info'>http://webvr.info</a> for assistance."},"web-vr-hls-cors-not-supported":{headline:"360 HLS video not supported on this device",type:"360_NOT_SUPPORTED",message:"Your browser/device does not support HLS 360 video. See <a href='http://webvr.info'>http://webvr.info</a> for assistance."}},po=n.getPlugin("plugin"),mo=n.getComponent("Component"),vo=function(e){function t(t,i){var r,s=n.mergeOptions(ho,i);return(r=e.call(this,t,s)||this).options_=s,r.player_=t,r.bigPlayButtonIndex_=t.children().indexOf(t.getChild("BigPlayButton"))||0,r.videojsErrorsSupport_=!!n.errors,r.videojsErrorsSupport_&&t.errors({errors:fo}),n.browser.IE_VERSION||!no?(r.player_.on("loadstart",function(){r.triggerError_({code:"web-vr-not-supported",dismiss:!1})}),a(r)):(r.polyfill_=new c({ROTATE_INSTRUCTIONS_DISABLED:!0}),r.polyfill_=new c,r.handleVrDisplayActivate_=n.bind(a(r),r.handleVrDisplayActivate_),r.handleVrDisplayDeactivate_=n.bind(a(r),r.handleVrDisplayDeactivate_),r.handleResize_=n.bind(a(r),r.handleResize_),r.animate_=n.bind(a(r),r.animate_),r.setProjection(r.options_.projection),r.on(t,"adstart",function(){return t.setTimeout(function(){t.ads&&t.ads.videoElementRecycled()?(r.log("video element recycled for this ad, reseting"),r.reset(),r.one(t,"playing",r.init)):r.log("video element not recycled for this ad, no need to reset")})},1),r.on(t,"loadedmetadata",r.init),r)}s(t,e);var o=t.prototype;return o.changeProjection_=function(e){var t=this;(e=so(e))||(e="NONE");var i=0,r=0,n=0;if(this.scene&&this.scene.remove(this.movieScreen),"AUTO"===e){if(this.player_.mediainfo&&this.player_.mediainfo.projection&&"AUTO"!==this.player_.mediainfo.projection){var a=so(this.player_.mediainfo.projection);return this.changeProjection_(a)}return this.changeProjection_("NONE")}if("360"===e)this.movieGeometry=new $r(256,32,32),this.movieMaterial=new Ve({map:this.videoTexture,overdraw:!0,side:1}),this.movieScreen=new We(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(i,r,n),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.scene.add(this.movieScreen);else if("360_LR"===e||"360_TB"===e){for(var s=new Jr(256,32,32),o=s.faceVertexUvs[0],l=0;l<o.length;l++)for(var u=0;u<3;u++)"360_LR"===e?o[l][u].x*=.5:(o[l][u].y*=.5,o[l][u].y+=.5);this.movieGeometry=(new De).fromGeometry(s),this.movieMaterial=new Ve({map:this.videoTexture,overdraw:!0,side:1}),this.movieScreen=new We(this.movieGeometry,this.movieMaterial),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),o=(s=new Jr(256,32,32)).faceVertexUvs[0];for(var c=0;c<o.length;c++)for(var d=0;d<3;d++)"360_LR"===e?(o[c][d].x*=.5,o[c][d].x+=.5):o[c][d].y*=.5;this.movieGeometry=(new De).fromGeometry(s),this.movieMaterial=new Ve({map:this.videoTexture,overdraw:!0,side:1}),this.movieScreen=new We(this.movieGeometry,this.movieMaterial),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}else if("360_CUBE"===e){this.movieGeometry=new Ie(256,256,256),this.movieMaterial=new Ve({map:this.videoTexture,overdraw:!0,side:1});var h=[new w(0,.5),new w(.333,.5),new w(.333,1),new w(0,1)],f=[new w(.333,.5),new w(.666,.5),new w(.666,1),new w(.333,1)],p=[new w(.666,.5),new w(1,.5),new w(1,1),new w(.666,1)],m=[new w(0,0),new w(.333,0),new w(.333,.5),new w(0,.5)],v=[new w(.333,0),new w(.666,0),new w(.666,.5),new w(.333,.5)],g=[new w(.666,0),new w(1,0),new w(1,.5),new w(.666,.5)];this.movieGeometry.faceVertexUvs[0]=[],this.movieGeometry.faceVertexUvs[0][0]=[f[2],f[1],f[3]],this.movieGeometry.faceVertexUvs[0][1]=[f[1],f[0],f[3]],this.movieGeometry.faceVertexUvs[0][2]=[h[2],h[1],h[3]],this.movieGeometry.faceVertexUvs[0][3]=[h[1],h[0],h[3]],this.movieGeometry.faceVertexUvs[0][4]=[p[2],p[1],p[3]],this.movieGeometry.faceVertexUvs[0][5]=[p[1],p[0],p[3]],this.movieGeometry.faceVertexUvs[0][6]=[m[2],m[1],m[3]],this.movieGeometry.faceVertexUvs[0][7]=[m[1],m[0],m[3]],this.movieGeometry.faceVertexUvs[0][8]=[v[2],v[1],v[3]],this.movieGeometry.faceVertexUvs[0][9]=[v[1],v[0],v[3]],this.movieGeometry.faceVertexUvs[0][10]=[g[2],g[1],g[3]],this.movieGeometry.faceVertexUvs[0][11]=[g[1],g[0],g[3]],this.movieScreen=new We(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(i,r,n),this.movieScreen.rotation.y=-Math.PI,this.scene.add(this.movieScreen)}else if("180"===e){var y=new Jr(256,32,32,Math.PI,Math.PI);y.scale(-1,1,1);for(var _=y.faceVertexUvs[0],b=0;b<_.length;b++)for(var M=0;M<3;M++)_[b][M].x*=.5;this.movieGeometry=(new De).fromGeometry(y),this.movieMaterial=new Ve({map:this.videoTexture,overdraw:!0}),this.movieScreen=new We(this.movieGeometry,this.movieMaterial),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),(y=new Jr(256,32,32,Math.PI,Math.PI)).scale(-1,1,1),_=y.faceVertexUvs[0];for(var T=0;T<_.length;T++)for(var A=0;A<3;A++)_[T][A].x*=.5,_[T][A].x+=.5;this.movieGeometry=(new De).fromGeometry(y),this.movieMaterial=new Ve({map:this.videoTexture,overdraw:!0}),this.movieScreen=new We(this.movieGeometry,this.movieMaterial),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}else if("EAC"===e||"EAC_LR"===e){var E=function(e,a){t.movieGeometry=new Ie(256,256,256),t.movieMaterial=new Ge({overdraw:!0,side:1,uniforms:{mapped:{value:t.videoTexture},mapMatrix:{value:e},contCorrect:{value:2},faceWH:{value:new w(1/3,.5).applyMatrix3(a)},vidWH:{value:new w(t.videoTexture.image.videoWidth,t.videoTexture.image.videoHeight).applyMatrix3(a)}},vertexShader:"\nvarying vec2 vUv;\nuniform mat3 mapMatrix;\n\nvoid main() {\n  vUv = (mapMatrix * vec3(uv, 1.)).xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n}",fragmentShader:"\nvarying vec2 vUv;\nuniform sampler2D mapped;\nuniform vec2 faceWH;\nuniform vec2 vidWH;\nuniform float contCorrect;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvoid main() {\n  vec2 corner = vUv - mod(vUv, faceWH) + vec2(0, contCorrect / vidWH.y);\n\n  vec2 faceWHadj = faceWH - vec2(0, contCorrect * 2. / vidWH.y);\n\n  vec2 p = (vUv - corner) / faceWHadj - .5;\n  vec2 q = 2. / PI * atan(2. * p) + .5;\n\n  vec2 eUv = corner + q * faceWHadj;\n\n  gl_FragColor = texture2D(mapped, eUv);\n}"});for(var s=[new w(0,.5),new w(1/3,.5),new w(1/3,1),new w(0,1)],o=[new w(1/3,.5),new w(2/3,.5),new w(2/3,1),new w(1/3,1)],l=[new w(2/3,.5),new w(1,.5),new w(1,1),new w(2/3,1)],u=[new w(1/3,0),new w(1/3,.5),new w(0,.5),new w(0,0)],c=[new w(1/3,.5),new w(1/3,0),new w(2/3,0),new w(2/3,.5)],d=[new w(1,0),new w(1,.5),new w(2/3,.5),new w(2/3,0)],h=0,f=[s,o,l,u,c,d];h<f.length;h++){var p=f[h],m=t.videoTexture.image.videoHeight,v=1,g=0,y=p,_=Array.isArray(y),b=0;for(y=_?y:y[Symbol.iterator]();;){var M;if(_){if(b>=y.length)break;M=y[b++]}else{if((b=y.next()).done)break;M=b.value}var T=M;T.y<v&&(v=T.y),T.y>g&&(g=T.y)}var A=p,E=Array.isArray(A),x=0;for(A=E?A:A[Symbol.iterator]();;){var S;if(E){if(x>=A.length)break;S=A[x++]}else{if((x=A.next()).done)break;S=x.value}var D=S;Math.abs(D.y-v)<Number.EPSILON&&(D.y+=2/m),Math.abs(D.y-g)<Number.EPSILON&&(D.y-=2/m),D.x=D.x/m*(m-4)+2/m}}return t.movieGeometry.faceVertexUvs[0]=[],t.movieGeometry.faceVertexUvs[0][0]=[s[2],s[1],s[3]],t.movieGeometry.faceVertexUvs[0][1]=[s[1],s[0],s[3]],t.movieGeometry.faceVertexUvs[0][2]=[l[2],l[1],l[3]],t.movieGeometry.faceVertexUvs[0][3]=[l[1],l[0],l[3]],t.movieGeometry.faceVertexUvs[0][4]=[d[2],d[1],d[3]],t.movieGeometry.faceVertexUvs[0][5]=[d[1],d[0],d[3]],t.movieGeometry.faceVertexUvs[0][6]=[u[2],u[1],u[3]],t.movieGeometry.faceVertexUvs[0][7]=[u[1],u[0],u[3]],t.movieGeometry.faceVertexUvs[0][8]=[o[2],o[1],o[3]],t.movieGeometry.faceVertexUvs[0][9]=[o[1],o[0],o[3]],t.movieGeometry.faceVertexUvs[0][10]=[c[2],c[1],c[3]],t.movieGeometry.faceVertexUvs[0][11]=[c[1],c[0],c[3]],t.movieScreen=new We(t.movieGeometry,t.movieMaterial),t.movieScreen.position.set(i,r,n),t.movieScreen.rotation.y=-Math.PI,t.movieScreen};if("EAC"===e)this.scene.add(E(new D,new D));else{var x=(new D).set(0,.5,0,1,0,0,0,0,1);E((new D).set(0,-.5,.5,1,0,0,0,0,1),x),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),E((new D).set(0,-.5,1,1,0,0,0,0,1),x),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}}this.currentProjection_=e},o.triggerError_=function(e){if(this.videojsErrorsSupport_)this.player_.error(e);else{var t=r.createElement("div");t.innerHTML=fo[e.code].message;var i=t.textContent||t.innerText||"";this.player_.error({code:e.code,message:i})}},o.log=function(){if(this.options_.debug){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(e){n.log("VR: ",e)})}},o.handleVrDisplayActivate_=function(){var e=this;this.vrDisplay&&this.vrDisplay.requestPresent([{source:this.renderedCanvas}]).then(function(){if(e.vrDisplay.cardboardUI_&&n.browser.IS_IOS){var t=[],r=function(e){for(var i=0;i<e.touches.length;i++)t.push(e.touches[i])},a=function(r){t.length&&(t.forEach(function(t){var r=new i.MouseEvent("click",{screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});e.renderedCanvas.dispatchEvent(r)}),t=[])};e.renderedCanvas.addEventListener("touchstart",r),e.renderedCanvas.addEventListener("touchend",a),e.iosRevertTouchToClick_=function(){e.renderedCanvas.removeEventListener("touchstart",r),e.renderedCanvas.removeEventListener("touchend",a),e.iosRevertTouchToClick_=null}}})},o.handleVrDisplayDeactivate_=function(){this.vrDisplay&&this.vrDisplay.isPresenting&&(this.iosRevertTouchToClick_&&this.iosRevertTouchToClick_(),this.vrDisplay.exitPresent())},o.requestAnimationFrame=function(e){return this.vrDisplay?this.vrDisplay.requestAnimationFrame(e):this.player_.requestAnimationFrame(e)},o.cancelAnimationFrame=function(e){return this.vrDisplay?this.vrDisplay.cancelAnimationFrame(e):this.player_.cancelAnimationFrame(e)},o.togglePlay_=function(){this.player_.paused()?this.player_.play():this.player_.pause()},o.animate_=function(){if(this.initialized_){if(this.getVideoEl_().readyState===this.getVideoEl_().HAVE_ENOUGH_DATA&&this.videoTexture&&(this.videoTexture.needsUpdate=!0),this.controls3d.update(),this.omniController&&this.omniController.update(this.camera),this.effect.render(this.scene,this.camera),i.navigator.getGamepads)for(var e=i.navigator.getGamepads(),t=0;t<e.length;++t){var r=e[t];if(r&&r.timestamp&&r.timestamp!==this.prevTimestamps_[t])for(var n=0;n<r.buttons.length;++n)if(r.buttons[n].pressed){this.togglePlay_(),this.prevTimestamps_[t]=r.timestamp;break}}this.camera.getWorldDirection(this.cameraVector),this.animationFrameId_=this.requestAnimationFrame(this.animate_)}},o.handleResize_=function(){var e=this.player_.currentWidth(),t=this.player_.currentHeight();this.effect.setSize(e,t,!1),this.camera.aspect=e/t,this.camera.updateProjectionMatrix()},o.setProjection=function(e){so(e)?(this.currentProjection_=e,this.defaultProjection_=e):n.log.error("videojs-vr: please pass a valid projection "+ao.join(", "))},o.init=function(){var e=this;if(this.reset(),this.camera=new Ni(75,this.player_.currentWidth()/this.player_.currentHeight(),1,1e3),this.cameraVector=new S,"360_LR"!==this.currentProjection_&&"360_TB"!==this.currentProjection_&&"180"!==this.currentProjection_&&"EAC_LR"!==this.currentProjection_||this.camera.layers.enable(1),this.scene=new Ui,this.videoTexture=new $i(this.getVideoEl_()),this.videoTexture.generateMipmaps=!1,this.videoTexture.minFilter=1006,this.videoTexture.magFilter=1006,this.videoTexture.format=1022,this.changeProjection_(this.currentProjection_),"NONE"===this.currentProjection_)return this.log("Projection is NONE, dont init"),void this.reset();this.player_.removeChild("BigPlayButton"),this.player_.addChild("BigVrPlayButton",{},this.bigPlayButtonIndex_),this.player_.bigPlayButton=this.player_.getChild("BigVrPlayButton"),(this.options_.forceCardboard||n.browser.IS_ANDROID||n.browser.IS_IOS)&&this.addCardboardButton_(),n.browser.IS_IOS&&this.player_.controlBar&&this.player_.controlBar.fullscreenToggle&&this.player_.controlBar.fullscreenToggle.hide(),this.camera.position.set(0,0,0),this.renderer=new Pi({devicePixelRatio:i.devicePixelRatio,alpha:!1,clearColor:16777215,antialias:!0});var t=this.renderer.getContext("webgl"),r=t.texImage2D;t.texImage2D=function(){try{for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return r.apply(t,n)}catch(i){throw e.reset(),e.player_.pause(),e.triggerError_({code:"web-vr-hls-cors-not-supported",dismiss:!1}),new Error(i)}},this.renderer.setSize(this.player_.currentWidth(),this.player_.currentHeight(),!1),this.effect=new $s(this.renderer),this.effect.setSize(this.player_.currentWidth(),this.player_.currentHeight(),!1),this.vrDisplay=null,this.prevTimestamps_=[],this.renderedCanvas=this.renderer.domElement,this.renderedCanvas.setAttribute("style","width: 100%; height: 100%; position: absolute; top:0;");var a=this.getVideoEl_().style;if(this.player_.el().insertBefore(this.renderedCanvas,this.player_.el().firstChild),a.zIndex="-1",a.opacity="0",i.navigator.getVRDisplays?(this.log("is supported, getting vr displays"),i.navigator.getVRDisplays().then(function(t){if(t.length>0&&(e.log("Displays found",t),e.vrDisplay=t[0],e.vrDisplay.isPolyfilled||(e.log("Real HMD found using VRControls",e.vrDisplay),e.addCardboardButton_(),e.controls3d=new Js(e.camera))),!e.controls3d){e.log("no HMD found Using Orbit & Orientation Controls");var i={camera:e.camera,canvas:e.renderedCanvas,halfView:"180"===e.currentProjection_,orientation:n.browser.IS_IOS||n.browser.IS_ANDROID||!1};!1===e.options_.motionControls&&(i.orientation=!1),e.controls3d=new ro(i),e.canvasPlayerControls=new oo(e.player_,e.renderedCanvas)}e.animationFrameId_=e.requestAnimationFrame(e.animate_)})):i.navigator.getVRDevices?this.triggerError_({code:"web-vr-out-of-date",dismiss:!1}):this.triggerError_({code:"web-vr-not-supported",dismiss:!1}),this.options_.omnitone){var s=$a();this.omniController=new lo(s,this.options_.omnitone,this.getVideoEl_(),this.options_.omnitoneOptions),this.omniController.one("audiocontext-suspended",function(){e.player.pause(),e.player.one("playing",function(){s.resume()})})}this.on(this.player_,"fullscreenchange",this.handleResize_),i.addEventListener("vrdisplaypresentchange",this.handleResize_,!0),i.addEventListener("resize",this.handleResize_,!0),i.addEventListener("vrdisplayactivate",this.handleVrDisplayActivate_,!0),i.addEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_,!0),this.initialized_=!0,this.trigger("initialized")},o.addCardboardButton_=function(){this.player_.controlBar.getChild("CardboardButton")||this.player_.controlBar.addChild("CardboardButton",{})},o.getVideoEl_=function(){return this.player_.el().getElementsByTagName("video")[0]},o.reset=function(){if(this.initialized_){this.omniController&&(this.omniController.off("audiocontext-suspended"),this.omniController.dispose(),this.omniController=void 0),this.controls3d&&(this.controls3d.dispose(),this.controls3d=null),this.canvasPlayerControls&&(this.canvasPlayerControls.dispose(),this.canvasPlayerControls=null),this.effect&&(this.effect.dispose(),this.effect=null),i.removeEventListener("resize",this.handleResize_,!0),i.removeEventListener("vrdisplaypresentchange",this.handleResize_,!0),i.removeEventListener("vrdisplayactivate",this.handleVrDisplayActivate_,!0),i.removeEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_,!0),this.player_.getChild("BigPlayButton")||this.player_.addChild("BigPlayButton",{},this.bigPlayButtonIndex_),this.player_.getChild("BigVrPlayButton")&&this.player_.removeChild("BigVrPlayButton"),this.player_.getChild("CardboardButton")&&this.player_.controlBar.removeChild("CardboardButton"),n.browser.IS_IOS&&this.player_.controlBar&&this.player_.controlBar.fullscreenToggle&&this.player_.controlBar.fullscreenToggle.show();var e=this.getVideoEl_().style;e.zIndex="",e.opacity="",this.currentProjection_=this.defaultProjection_,this.iosRevertTouchToClick_&&this.iosRevertTouchToClick_(),this.renderedCanvas&&this.renderedCanvas.parentNode.removeChild(this.renderedCanvas),this.animationFrameId_&&this.cancelAnimationFrame(this.animationFrameId_),this.initialized_=!1}},o.dispose=function(){e.prototype.dispose.call(this),this.reset()},o.polyfillVersion=function(){return c.version},t}(po);return vo.prototype.setTimeout=mo.prototype.setTimeout,vo.prototype.clearTimeout=mo.prototype.clearTimeout,vo.VERSION="1.7.2",n.registerPlugin("vr",vo),vo})})();(function(){if(s.getPlugin("customEndscreen")){return}!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js"),require("global/window"),require("global/document")):"function"==typeof i&&i.amd?i(["video.js","global/window","global/document"],t):e.videojsCustomEndscreen=t(e.videojs,e.window,e.document)}(this,function(e,t,i){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,i=i&&i.hasOwnProperty("default")?i.default:i;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){return"function"==typeof e.usingPlugin?e.usingPlugin(t):"ads"===t?"object"===r(e.ads):"playlist"===t?!(!e.playlist||"object"!==r(e.playlist.autoadvance_)):!!e[t]},a=function(e){e.postrollStarted=!1,e.postrollFinished=!1,e.postrollTimedOut=!1,e.sawNoPostrollEvent=!1},s=function(){var e=this;if(!this.endscreenState_){var t=this.endscreenState_={},i=function(){return e.trigger("endscreen")};a(t),this.on("adstart",function(){var i=e.ended();t.postrollStarted=i,t.postrollFinished=!i}),this.on("adend",function(){t.postrollFinished=e.ended()}),this.on("adtimeout",function(){t.postrollTimedOut=e.ended()}),this.on(["endscreen","loadstart"],function(){e.off("adend",i),a(t)}),this.on("nopostroll",function(){t.sawNoPostrollEvent=!0}),this.on("ended",function(){(function(e){if(!n(e,"playlist"))return!1;var t=e.playlist,i=t();return!(0!==t.autoadvance_.delay||!i.length)&&(t.repeat()||t.currentItem()!==i.length-1)})(e)||(!function(e){if(!n(e,"ads"))return!1;var t=e.endscreenState_;return!t.sawNoPostrollEvent&&t.postrollStarted&&!t.postrollFinished&&!t.postrollTimedOut}(e)?i():e.one("adend",i))})}};e.registerPlugin?e.getPlugin("endscreen")||e.registerPlugin("endscreen",s):e.plugin("endscreen",s);var o=function(e,t){return t?encodeURIComponent(e):e},l=function(e,t,i){if(e&&e[i])for(var r=e[i],n=Object.keys(r),a=0;a<n.length;a++){t["{mediainfo."+i+"."+n[a]+"}"]=r[n[a]]}};var u=e.dom||e,c=e.getComponent("Button"),d=e.getComponent("ModalDialog"),h="vjs-icon-replay",f="vjs-icon-share",p="vjs-endscreen-overlay-buttons vjs-overlay-buttons",m="vjs-endscreen-overlay-content",v=function(r){var n,a;function s(e,t){var n;(n=r.call(this,e,t)||this).on("beforemodalopen",n.toggleSocialButton),n.on("modalfill",n.rawContentFill);var a=n.restartButton=new c(e);a.addClass(h),a.controlText(e.localize("Restart")),n.on(a,["click","tap"],n.restartPlayer),n.addChild(a);var s=n.socialButton=new c(e);s.addClass(f),s.controlText(e.localize("Share")),n.on(s,["click","tap"],n.activateSocial),n.addChild(s);var o=n.buttonEl=i.createElement("div");o.className=p,u.insertContent(o,[a.el(),s.el()]);var l=n.contentEl();return u.addClass(l,m),l.parentNode.appendChild(o),n}a=r,(n=s).prototype=Object.create(a.prototype),n.prototype.constructor=n,n.__proto__=a;var d=s.prototype;return d.buildCSSClass=function(){return"vjs-custom-endscreen-overlay vjs-custom-overlay "+r.prototype.buildCSSClass.call(this)},d.playerHasSocial=function(){return!!this.player().socialOverlay},d.toggleSocialButton=function(){this.socialButton.toggleClass("vjs-hidden",!this.playerHasSocial())},d.rawContentFill=function(){var r=this.options_.rawContent;"string"!=typeof r&&(r=""),r=function(r,n,a){var s=this,u={};r=r.replace(/{([^}=]+)=([^}]+)}/g,function(e,t,i){return u["{"+t+"}"]=i,"{"+t+"}"}),void 0===n&&(n=!1);var c={};for(var d in void 0!==a&&(c=a),c["{player.id}"]=this.options_["data-player"],c["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",c["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",c["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",c["{player.duration}"]=this.duration(),c["{timestamp}"]=(new Date).getTime(),c["{document.referrer}"]=i.referrer,c["{window.location.href}"]=t.location.href,c["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach(function(e){s.mediainfo&&s.mediainfo[e]?c["{mediainfo."+e+"}"]=s.mediainfo[e]:u["{mediainfo."+e+"}"]?c["{mediainfo."+e+"}"]=u["{mediainfo."+e+"}"]:c["{mediainfo."+e+"}"]=""}),l(this.mediainfo,c,"custom_fields"),l(this.mediainfo,c,"customFields"),c)r=r.split(d).join(o(c[d],n));for(var h in r=r.replace(/{pageVariable\.([^}]+)}/g,function(i,r){for(var a,s=t,l=r.split("."),c=0;c<l.length;c++)c===l.length-1?a=s[l[c]]:s=s[l[c]];var d=typeof a;return null===a?"null":void 0===a?u["{pageVariable."+r+"}"]?u["{pageVariable."+r+"}"]:(e.log.warn('Page variable "'+r+'" not found'),""):"string"!==d&&"number"!==d&&"boolean"!==d?(e.log.warn('Page variable "'+r+'" is not a supported type'),""):o(String(a),n)}),u)r=r.replace(h,u[h]);return r}.call(this.player(),r),this.contentEl().innerHTML=r},d.restartPlayer=function(){var e=this.player();e.currentTime(0),e.play(),this.close()},d.activateSocial=function(){var e=this,t=this.player();this.close(),this.playerHasSocial()&&(t.socialOverlay.open(),t.socialOverlay.one("modalclose",function(){return e.open()}))},s}(d);e.registerComponent("CustomEndscreenModal",v);var g=e.registerPlugin||e.plugin,y={content:""},_=function(t){var i=this;s.call(this),this.customEndscreenModal?t&&t.content&&(this.customEndscreenModal.options_.rawContent=t.content):(this.on("endscreen",function(){return i.customEndscreenModal&&i.customEndscreenModal.open()}),this.ready(function(){return function(e,t){e.addClass("vjs-custom-endscreen");var i=new v(e,{fillAlways:!0,label:e.localize("Endscreen"),rawContent:t.content,temporary:!1,uncloseable:!0});e.customEndscreenModal=i,e.customOverlay=i,e.addChild(i)}(i,e.mergeOptions(y,t))})),this.on(["loadstart","seeking"],function(){return i.customEndscreenModal&&i.customEndscreenModal.close()})};return _.VERSION="2.3.1",g("customEndscreen",_),_});s.addLanguage("ar",{Restart:"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0628\u062f\u0621",Share:"\u0645\u0634\u0627\u0631\u0643\u0629",Endscreen:"\u0634\u0627\u0634\u0629 \u0627\u0644\u0646\u0647\u0627\u064a\u0629"});s.addLanguage("de",{Restart:"Neustart",Share:"Freigeben",Endscreen:"Endbildschirm"});s.addLanguage("en",{Restart:"Restart",Share:"Share",Endscreen:"Endscreen"});s.addLanguage("es",{Restart:"Reiniciar",Share:"Compartir",Endscreen:"Pantalla final"});s.addLanguage("fr",{Restart:"Red\xe9marrer",Share:"Partager",Endscreen:"\xc9cran de fin"});s.addLanguage("ja",{Restart:"\u518d\u958b",Share:"\u5171\u6709",Endscreen:"\u30a8\u30f3\u30c9\u30b9\u30af\u30ea\u30fc\u30f3"});s.addLanguage("ko",{Restart:"\ub2e4\uc2dc \uc2dc\uc791",Share:"\uacf5\uc720",Endscreen:"\uc885\ub8cc \ud654\uba74"});s.addLanguage("zh-Hans",{Restart:"\u91cd\u65b0\u5f00\u59cb",Share:"\u5206\u4eab",Endscreen:"\u7ed3\u675f\u753b\u9762"});s.addLanguage("zh-Hant",{Restart:"\u91cd\u65b0\u958b\u59cb",Share:"\u5206\u4eab",Endscreen:"\u7d50\u675f\u756b\u9762"})})();s.addLanguage("en",{Share:"Share","Share Video":"Share Video","Share via":"Share via","Share on":"Share on","Direct Link":"Direct Link","Start From":"Start From","Embed Code":"Embed Code","Sharing Dialog":"Sharing Dialog","Share on {{network}}":"Share on {{network}}","The offset must be specified using the following pattern:":"The offset must be specified using the following pattern:","Read Only: Embed Code":"Read Only: Embed Code","Read Only":"Read Only","Direct Link To Content":"Direct Link To Content",Restart:"Restart"});s.addLanguage("es",{Share:"Compartir","Share Video":"Compartir v\xeddeo","Share via":"Compartir a trav\xe9s de","Share on":"Compartir en","Direct Link":"Enlace directo","Start From":"Comenzar desde","Embed Code":"C\xf3digo de incrustaci\xf3n","Sharing Dialog":"Di\xe1logo para compartir","Share on {{network}}":"Compartir en {{network}}","The offset must be specified using the following pattern:":"El offset debe ser especificado usando el siguiente patr\xf3n:","Read Only: Embed Code":"S\xf3lo Lectura: C\xf3digo incrustado","Read Only":"S\xf3lo Lectura","Direct Link To Content":"Enlace directo al contenido",Restart:"Reiniciar"});s.addLanguage("ja",{Share:"\u5171\u6709","Share Video":"\u52d5\u753b\u3092\u5171\u6709","Share via":"\u52d5\u753b\u5171\u6709\u65b9\u6cd5","Share on":"\u5171\u6709\u5148","Direct Link":"\u30c0\u30a4\u30ec\u30af\u30c8 \u30ea\u30f3\u30af","Start From":"\u958b\u59cb\u5143","Embed Code":"\u57cb\u3081\u8fbc\u307f\u30b3\u30fc\u30c9","Sharing Dialog":"\u5171\u6709\u30c0\u30a4\u30a2\u30ed\u30b0","Share on {{network}}":"{{network}}\u3067\u30b7\u30a7\u30a2","The offset must be specified using the following pattern:":"\u30aa\u30d5\u30bb\u30c3\u30c8\u306f\u3001\u6b21\u306e\u30d1\u30bf\u30fc\u30f3\u3092\u4f7f\u7528\u3057\u3066\u6307\u5b9a\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\uff1a","Read Only: Embed Code":"\u8aad\u53d6\u308a\u5c02\u7528\uff1a\u57cb\u3081\u8fbc\u307f\u30b3\u30fc\u30c9","Read Only":"\u8aad\u53d6\u308a\u5c02\u7528","Direct Link To Content":"\u30b3\u30f3\u30c6\u30f3\u30c4\u3078\u306e\u30c0\u30a4\u30ec\u30af\u30c8 \u30ea\u30f3\u30af",Restart:"\u518d\u8d77\u52d5"});s.addLanguage("ko",{Share:"\uacf5\uc720","Share Video":"\ube44\ub514\uc624 \uacf5\uc720","Share via":"\uacf5\uc720 \ubc29\ubc95","Share on":"\uacf5\uc720 \uacf5\uac04","Direct Link":"\uc9c1\uc811 \ub9c1\ud06c","Start From":"\uc2dc\uc791 \uc9c0\uc810","Embed Code":"\uc784\ubca0\ub4dc \ucf54\ub4dc","Sharing Dialog":"\ub300\ud654 \uacf5\uc720","Share on {{network}}":"{{network}}\uc5d0 \uacf5\uc720","The offset must be specified using the following pattern:":"\uc624\ud504\uc14b\uc740 \ubc18\ub4dc\uc2dc \ub2e4\uc74c \ud328\ud134\uc744 \uc0ac\uc6a9\ud558\uc5ec \uba85\uc2dc\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4:","Read Only: Embed Code":"\uc77d\uae30\ub9cc \uac00\ub2a5: \uc784\ubca0\ub4dc \ucf54\ub4dc","Read Only":"\uc77d\uae30\ub9cc \uac00\ub2a5","Direct Link To Content":"\ucf58\ud150\uce20\uc5d0 \ub300\ud55c \uc9c1\uc811 \ub9c1\ud06c",Restart:"\uc7ac\uc2dc\uc791"});s.addLanguage("fr",{Share:"Partager","Share Video":"Partager la vid\xe9o","Share via":"Partager via","Share on":"Partager sur","Direct Link":"Lien direct","Start From":"Commencer \xe0 partir de","Embed Code":"Code d'int\xe9gration","Sharing Dialog":"Fen\xeatre de partage","Share on {{network}}":"Partager sur {{network}}","The offset must be specified using the following pattern:":"Le d\xe9calage doit \xeatre sp\xe9cifi\xe9 avec le format suivant:","Read Only: Embed Code":"Lecture seule: code d'int\xe9gration","Read Only":"Lecture seule","Direct Link To Content":"Lien direct vers le contenu",Restart:"Red\xe9marrer"});var l=o.createInitializer(null,function(e,t,i){var r;var n=parseInt(undefined,10);var a=false;i.playlist();if(n===n&&isFinite(n)&&n>=0){i.playlist.autoadvance(n)}});a.restoreFirstVideojs();return l}(window,document);if(typeof t!=="undefined"){s=document.querySelector("#"+a);if(s){(function(){var e=function(e){return(e||"0.0.0").split(".").map(function(e){return Number(e)})};var t=e(s.getAttribute("data-vjs-version"));var i=e(o.videojs.VERSION);if(i[0]>t[0]||i[0]===t[0]&&i[1]>t[1]||i[0]===t[0]&&i[1]===t[1]&&i[2]>t[2]){s.parentNode.removeChild(s);s=null;d=c.firstChild}})()}if(!s){s=h(t,d);s.id=a;s.setAttribute("data-vjs-version",o.videojs.VERSION)}d=s.nextSibling}if(typeof i!=="undefined"){n=document.querySelector("."+r);if(!n){n=h(i,d);n.className=r}}function f(){var e=[].concat(Array.prototype.slice.call(document.querySelectorAll("video")),Array.prototype.slice.call(document.querySelectorAll("video-js")));for(u=0;u<e.length;u++){l=e[u];if(l.getAttribute("data-player")==="keoPsmO0E"&&l.getAttribute("data-embed")==="default"){if(o.videojs.getPlayer(l)){o.videojs.log("Ignoring already initialized player");continue}o(l)}}}f();return o});